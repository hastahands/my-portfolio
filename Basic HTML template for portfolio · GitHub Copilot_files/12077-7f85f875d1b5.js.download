"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[12077],{3482:(e,t,a)=>{a.d(t,{G:()=>n});var r=a(24774);function n(e=null,t="bottom"){return[r.S7.of(()=>({dom:e,top:"top"===t}))]}},6224:(e,t,a)=>{a.d(t,{A:()=>r});let r={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY",command:"UserMessage-module__command--gs71n"}},6236:(e,t,a)=>{a.d(t,{E:()=>m});var r=a(74848),n=a(77430),i=a(29731),l=a(96379),s=a(26607),o=a(94236),c=a(86877),d=a(5524),u=a(96540);function m({onSelect:e,repoId:t}){let a,m,h,[p,f]=(0,u.useState)([]),[g,y]=(0,u.useState)(!1),[x,v]=(0,u.useState)(void 0),C=(0,u.useCallback)(t=>{v(t),e(t)},[e]),_=(0,u.useCallback)(()=>{f([]),y(!0)},[]);return(0,u.useEffect)(()=>{(async()=>{try{let e=t?`/github-copilot/chat/custom_copilots_owners?repo_id=${t}`:"/github-copilot/chat/custom_copilots_owners",a=await (0,l.lS)(e),r=await a.json(),n=r?.owners;if(!a.ok||!n)return void _();f(n),n[0]&&C(n[0])}catch{_()}})()},[_,C,t]),(0,r.jsx)("div",{className:"mt-2 mb-1",children:(0,r.jsxs)(c.A,{children:[(0,r.jsx)(c.A.Label,{required:!0,children:"Owner"}),(0,r.jsxs)(o.W,{children:[(a=x?.name||"Choose an owner",m=x?(0,r.jsx)(n.r,{src:x.avatarUrl},x.avatarUrl):void 0,(0,r.jsx)(o.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-describedby":"owner-caption",leadingVisual:m,children:a})),(0,r.jsx)(o.W.Overlay,{width:"large",maxHeight:"large",className:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",children:(0,r.jsx)(d.l,{children:(0,r.jsx)(d.l.Group,{className:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",children:(0,r.jsxs)(d.l,{selectionVariant:"single",children:[p&&p.map(e=>{let{name:t,avatarUrl:a,displayName:i}=e;return(0,r.jsxs)(d.l.Item,{selected:t===x?.name,onSelect:()=>C(e),className:"SpacesOwnerDropdown-module__ownerListItem--YrBcd",children:[(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(n.r,{src:a})}),t,(0,r.jsx)(d.l.Description,{children:i})]},t)}),!p.length&&!g&&(0,r.jsx)(d.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),g&&(0,r.jsx)(d.l.Item,{disabled:!0,className:"SpacesOwnerDropdown-module__errorListItem--eq64y",children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,r.jsx)(c.A.Caption,{id:"owner-caption",children:(h=e=>(0,r.jsxs)("span",{className:"sr-only",children:["Space owner. Required. Selected owner: @",e.displayName,"."]}),x?"User"===x.type?(0,r.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink flex-items-center",children:[h(x),(0,r.jsx)(s.A,{className:"mr-1",children:"Private"}),(0,r.jsx)("span",{...(0,i.G)("owner-user-caption"),children:"Only you will be able to see this space."})]}):(0,r.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink",children:[h(x),(0,r.jsx)(s.A,{className:"SpacesOwnerDropdown-module__orgLabel--W_FiN",children:"Private"}),(0,r.jsx)("span",{...(0,i.G)("owner-org-caption"),children:"Only visible to you and organization admins. You can share it later."})]}):(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"sr-only",children:"Space owner. Required."})," Where we will store your space."]}))})]})})}try{m.displayName||(m.displayName="SpacesOwnerDropdown")}catch{}},7104:(e,t,a)=>{a.d(t,{$:()=>c,b:()=>d});var r=a(74848),n=a(21728),i=a(36523),l=a(34164),s=a(96540);let o=(0,s.createContext)(null);function c(e){let t,a,c,d,u,m,h,p,f,g=(0,n.c)(22),{children:y,disabled:x,containerRef:v,...C}=e,_=(0,i.L)(v),b=(0,s.useRef)(null),[w,S]=(0,s.useState)(!1);g[0]!==_?(t=()=>{let e=new IntersectionObserver(e=>{let[t]=e;return S(!t?.isIntersecting)},{root:_.current,threshold:0,rootMargin:"50px"});return e.observe(b.current),()=>e.disconnect()},a=[_],g[0]=_,g[1]=t,g[2]=a):(t=g[1],a=g[2]),(0,s.useEffect)(t,a);let[j,I]=(0,s.useState)();g[3]!==_?(c=()=>{let e=()=>{if(!_.current)return;let e=getComputedStyle(_.current);I(`calc(${_.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},t=new ResizeObserver(e);return e(),t.observe(_.current),()=>t.disconnect()},d=[_],g[3]=_,g[4]=c,g[5]=d):(c=g[4],d=g[5]),(0,s.useEffect)(c,d),g[6]!==x?(u=e=>{x||b.current?.scrollIntoView({behavior:e,block:"end"})},g[6]=x,g[7]=u):u=g[7];let N=u;g[8]!==w||g[9]!==j||g[10]!==N?(m={isScrolledUp:w,scrollToBottom:N,scrollContainerHeight:j},g[8]=w,g[9]=j,g[10]=N,g[11]=m):m=g[11];let R=m,E=(0,l.$)("ChatScrollContainer-module__container--z_iNX",C.className);return g[12]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("div",{ref:b,style:{height:"1px",marginTop:"-1px"}}),g[12]=h):h=g[12],g[13]!==y||g[14]!==_||g[15]!==C||g[16]!==E?(p=(0,r.jsxs)("div",{ref:_,...C,className:E,children:[y,h]}),g[13]=y,g[14]=_,g[15]=C,g[16]=E,g[17]=p):p=g[17],g[18]!==R||g[19]!==p||g[20]!==o.Provider?(f=(0,r.jsx)(o.Provider,{value:R,children:p}),g[18]=R,g[19]=p,g[20]=o.Provider,g[21]=f):f=g[21],f}let d=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{o.displayName||(o.displayName="ChatScrollContext")}catch{}try{c.displayName||(c.displayName="ChatScrollContainer")}catch{}},7730:(e,t,a)=>{a.d(t,{g:()=>i});var r=a(21728),n=a(96540);function i(e){let t,a=(0,r.c)(2),[i,l]=(0,n.useState)(!1);return a[0]!==e?(t=()=>{let t=e.current,a=t?.lastElementChild;if(!a)return;let r=new IntersectionObserver(e=>{let[t]=e;return l(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(a),()=>r.disconnect()},a[0]=e,a[1]=t):t=a[1],(0,n.useEffect)(t),i}},14521:(e,t,a)=>{a.d(t,{G:()=>c});var r=a(21728),n=a(79802),i=a(96540),l=a(2635),s=a(23657),o=a(72303);function c(){let e,t=(0,r.c)(1),a=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,o.W)(e),r=(0,n.O)(t);return(0,s.Ym)(a.current,r)?a.current:(a.current=r,r)},t[0]=e):e=t[0];let c=(0,l.pn)(e);return(0,s.iI)()||c}},16378:(e,t,a)=>{a.d(t,{O:()=>i,_:()=>l});var r=a(47970),n=a(99054);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function l(e){return n.qj.test(e.split(/\s/)[0]??"")}},17485:(e,t,a)=>{a.d(t,{C:()=>l});var r=a(25536),n=a(14521),i=a(96540);function l(){let e=(0,n.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:a,selectedThreadId:l}=(0,r.O)(),s=!!l||!!e;(0,i.useEffect)(()=>{a(e||void 0)},[e,a]);let o=t||e,c=(0,i.useCallback)(e=>{s||a({id:e.id,owner:e.owner})},[a,s]),d=(0,i.useCallback)(()=>{s||a(void 0)},[a,s]);return{activeCopilotSpaceId:o,readOnly:s,handleSpaceSelect:c,clearSpaceSelection:d}}},17925:(e,t,a)=>{a.d(t,{V:()=>n,x:()=>i});var r=a(35247);function n(e,t){if(0===t.length||!r.W.chatInputCommands)return null;let a=RegExp(`^\\/(${t.join("|")})(?:\\s|$)`,"i"),n=e.match(a);return n&&n[1]?n[1].toLowerCase():null}function i(e,t){return!!t&&e.trim().toLowerCase()===`/${t.toLowerCase()}`}},26408:(e,t,a)=>{a.d(t,{U:()=>d});var r=a(81171),n=a(82490),i=a(96540),l=a(18312),s=a(2635),o=a(33592),c=a(23657);function d(e,t,a,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,s.Pk)(),v=(0,o.b)(),[C,_]=(0,i.useState)([]),[b,w]=(0,i.useState)(!y&&"initial"),S=(0,i.useRef)(void 0),j=(0,l.useRelayEnvironment)(),I=m&&""!==m.trim();if(p&&!y&&!e&&!I){let e=u(p||[]),{ownerLogin:t,name:a}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${a}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(e),10),w(!1),f(void 0)}let N=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(j,{first:a,owner:I?m:void 0});f(e)}catch{}finally{w(!1)}},[I,m,j,f,a]);return((0,i.useEffect)(()=>{t&&!I&&N()},[N,I,t,m]),(0,i.useEffect)(()=>{let t=async e=>{w(!0);let{repositories:t}=await (0,r.vO)(j,{query:I?(0,c.rl)(m,e,h):(0,n.J)(e,{includeForks:h}),onStart:e=>{S.current?.unsubscribe(),S.current=e}});_(t.length?u(t):[]),w(!1)};e||I?t(e):y&&_(y)},[e,I,m,j,y,h]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||I)?{repositories:C,loading:b,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:a,name:r,databaseId:n})=>({databaseId:n??0,isInOrganization:a,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},27359:(e,t,a)=>{a.d(t,{v:()=>s});var r=a(21728),n=a(61526),i=a(47789),l=a(38627);function s(){let e,t=(0,r.c)(3),a=(0,i.qw)(),s=(0,n.zy)();return t[0]!==s||t[1]!==a?(e=(0,l.BW)(s,a),t[0]=s,t[1]=a,t[2]=e):e=t[2],e}},27844:(e,t,a)=>{a.d(t,{W:()=>s});var r=a(74848),n=a(21728),i=a(77430),l=a(5524);function s(e){let t,a,s,o,c=(0,n.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(a=(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=a):a=c[5],c[6]!==h?(s=h&&(0,r.jsx)(l.l.TrailingVisual,{children:h}),c[6]=h,c[7]=s):s=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==a||c[12]!==s?(o=(0,r.jsxs)(l.l.Item,{onSelect:t,selected:m,children:[a,g,s]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=a,c[12]=s,c[13]=o):o=c[13],o}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},31971:(e,t,a)=>{a.d(t,{M:()=>r});function r(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},35673:(e,t,a)=>{a.d(t,{UJ:()=>f,E5:()=>c,Dq:()=>d,cB:()=>u,zc:()=>m,Cb:()=>h,hl:()=>p});var r=a(74848),n=a(21728),i=a(56149),l=a(94236),s=a(34164),o=a(96540);let c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u=()=>{let e,t,a,l=(0,n.c)(3),s=(0,o.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(s.current,"copilotChatPortalRoot")},t=[],l[0]=e,l[1]=t):(e=l[0],t=l[1]),(0,o.useEffect)(e,t),l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("div",{ref:s,className:"PortalContainerUtils-module__chatPortalContainer--Otmle"}),l[2]=a):a=l[2],a},m=e=>{let t,a,l,d,u=(0,n.c)(6),{className:m}=e,h=(0,o.useRef)(null);return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,i.cw)(h.current,c)},a=[],u[0]=t,u[1]=a):(t=u[0],a=u[1]),(0,o.useEffect)(t,a),u[2]!==m?(l=(0,s.$)("PortalContainerUtils-module__menuPortalContainer--D7AeL",m),u[2]=m,u[3]=l):l=u[3],u[4]!==l?(d=(0,r.jsx)("div",{ref:h,className:l}),u[4]=l,u[5]=d):d=u[5],d},h=()=>{let e,t,a,l=(0,n.c)(3),s=(0,o.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(s.current,d)},t=[],l[0]=e,l[1]=t):(e=l[0],t=l[1]),(0,o.useEffect)(e,t),l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("div",{ref:s}),l[2]=a):a=l[2],a},p=()=>{let e,t,a,l=(0,n.c)(3),s=(0,o.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(s.current,"copilotChatTopicPickerPortalRoot")},t=[],l[0]=e,l[1]=t):(e=l[0],t=l[1]),(0,o.useEffect)(e,t),l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("div",{ref:s}),l[2]=a):a=l[2],a},f=e=>{let t,a,i,s,d,u,m=(0,n.c)(10);m[0]!==e?({children:t,portalContainerName:i,...a}=e,m[0]=e,m[1]=t,m[2]=a,m[3]=i):(t=m[1],a=m[2],i=m[3]);let[h,p]=(0,o.useState)(g);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>p(!0),d=[],m[4]=s,m[5]=d):(s=m[4],d=m[5]),(0,o.useEffect)(s,d),!h)return null;let f=i||c;return m[6]!==t||m[7]!==a||m[8]!==f?(u=(0,r.jsx)(l.W.Overlay,{...a,portalContainerName:f,children:t}),m[6]=t,m[7]=a,m[8]=f,m[9]=u):u=m[9],u};try{u.displayName||(u.displayName="ChatPortalContainer")}catch{}try{m.displayName||(m.displayName="MenuPortalContainer")}catch{}try{h.displayName||(h.displayName="MessagesPortalContainer")}catch{}try{p.displayName||(p.displayName="TopicPickerPortalContainer")}catch{}try{f.displayName||(f.displayName="ActionMenuOverlay")}catch{}function g(){return"undefined"!=typeof document}},39176:(e,t,a)=>{a.d(t,{k:()=>r});function r(e){return function e(t,a){let r=t[a];return r?r.items.map(a=>({data:a,items:"directory"===a.contentType?e(t,a.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:a}=e,r={},n=new Set(a);for(let e of(r[""]={items:[],totalCount:0},[...a].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(a),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!n.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(a)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}(e),"")}},44956:(e,t,a)=>{a.d(t,{m:()=>i});var r=a(74848),n=a(21373);function i({onSave:e,onCancel:t,saveButtonText:a,isLoading:i=!1,loadingAnnouncement:l="",disabled:s=!1}){return(0,r.jsxs)("div",{className:"SpaceDialogFooter-module__footerContainer--J2LGP",children:[(0,r.jsx)(n.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,r.jsx)(n.Q,{variant:"primary",loading:i,loadingAnnouncement:l,onClick:e,disabled:s,children:a})]})}try{i.displayName||(i.displayName="SpaceDialogFooter")}catch{}},46665:(e,t,a)=>{a.d(t,{$:()=>s,V:()=>o});var r=a(74848),n=a(21728),i=a(96540);let l=(0,i.createContext)(void 0),s=e=>{let t,a,i=(0,n.c)(5),{message:s,children:o}=e;i[0]!==s?(t={message:s},i[0]=s,i[1]=t):t=i[1];let c=t;return i[2]!==o||i[3]!==c?(a=(0,r.jsx)(l.Provider,{value:c,children:o}),i[2]=o,i[3]=c,i[4]=a):a=i[4],a},o=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{l.displayName||(l.displayName="ChatMessageContext")}catch{}try{s.displayName||(s.displayName="ChatMessageProvider")}catch{}},51563:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(33592),n=a(23657),i=a(72011),l=a(97665),s=a(94747),o=a(96379),c=a(31971);let d=e=>{let t=(0,r.b)(),a=(0,l.jE)(),{mutateAsync:d,...u}=(0,s.n)({onSuccess:async()=>{a.invalidateQueries({queryKey:i.O6}),e&&await a.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async a=>{let r=e?(0,n.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:a.ownerId,owner_type:a.ownerType,name:a.name,icon_type:a.iconType,icon_color:a.iconColor,description:a.description,general_instructions:a.generalInstructions,resources_attributes:a.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:a.visibility,base_role:a.baseRole}},l=await (0,o.lS)(r,{method:e?"PUT":"POST",body:i}),s=await l.json();if(!l.ok)throw s.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s}});return{upsertCopilotSpace:d,...u}}},54114:(e,t,a)=>{a.d(t,{Rw:()=>T});var r=a(74848),n=a(6665),i=a(19189),l=a(25556),s=a(34535),o=a(96459),c=a(38621),d=a(13436),u=a(46720),m=a(69726),h=a(12683),p=a(10095),f=a(96540),g=a(96379),y=a(52870);function x(e,t,a){let r=[];for(let n of t)if(n.startsWith(e)){let t=n.slice(e.length+1),i=t.indexOf("/"),l=i>0?t.slice(0,i):t,s=`${e}/${l}`;if(a&&a.some(e=>e.path===s))continue;let o={items:[],data:{contentType:s===n?"file":"directory",name:l,path:s,isClientOnly:!0}};r.push(o)}return r}let v="FileTreePicker-module__checkbox--uY6AK",C="FileTreePicker-module__itemContainer--ShYuv";var _=a(53419);function b(e,t){let a=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":a.clear(),a.add(t.path),(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:a.size});break;case"SELECT_FILE":a.add(t.path),(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:a.size});break;case"DESELECT_FILE":a.delete(t.path),(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:a.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)a.add(e);(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)a.delete(e);(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length})}return a}function w({isActive:e,file:t,onItemSelected:a,getItemUrl:i,selectedItemRef:o,navigate:m,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:g,navigateOnClick:y,isSelected:x,singleSelect:_}){let{sendRepoClickEvent:b}=(0,n.T)(),w=f.useRef(null),S=(0,s.Z)({focusRowRef:w,mouseRowRef:w}),j="submodule"===t.data.contentType,I=p?.(t.data);(0,f.useEffect)(()=>{e&&w.current&&requestAnimationFrame(()=>{w.current?.scrollIntoView({block:"center"})})},[e]);let N=f.useCallback(e=>{j?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(a?.(t.data,t),b("FILES_TREE.ITEM",{item_path:t.data.path}),y&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,j,m,y,a,b]);return h?.(),(0,r.jsxs)(d.G.Item,{ref:w,onSelect:N,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(d.G.LeadingVisual,{children:g?g(t.data):j?(0,r.jsx)(c.FileSubmoduleIcon,{}):(0,r.jsx)(c.FileIcon,{})}),(0,r.jsxs)("div",{className:C,children:[!_&&(0,r.jsx)(u.A,{className:v,checked:x||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,r.jsx)("span",{ref:o,style:{color:j?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,r.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),S&&(0,r.jsx)(l.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:w,"aria-label":t.data.name,open:!0,direction:"ne"}),!!I?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:I.screenReaderText}),!!I?.trailingVisual&&(0,r.jsx)(d.G.TrailingVisual,{children:I.trailingVisual})]})}let S=f.memo(w),j=f.memo(u.A);function I({clientOnlyFilePaths:e,directory:t,isActive:a,isAncestorOfActive:i,leadingPath:o,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:h,navigate:p,onRenderRow:_,getFileTrailingVisual:b,getFileIcon:w,navigateOnClick:S,selectedChildren:I,expandedPath:N,singleSelect:R}){let[T,k]=(0,f.useState)(i),{sendRepoClickEvent:M}=(0,n.T)(),L=f.useRef(null),P=f.useRef(null),F=(0,s.Z)({focusRowRef:P,mouseRowRef:L}),O=f.useMemo(()=>I?I.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`)):[],[I,t.data.path]),D=f.useMemo(()=>I?.includes(t.data.path)??!1,[I,t.data.path]),$=t.items.length>1e3,B=f.useMemo(()=>(function(e,t,a){if(a?.selectedSelf&&a?.isLarge)return"all";if(!t||0===t.length)return"none";let r=new Set(t);if(a?.isLarge&&r.has(e.data.path))return"all";let n=e=>{let t=new Set;for(let a of e.items)if("directory"===a.data.contentType)for(let e of n(a))t.add(e);else t.add(a.data.path);return t},i=n(e),l=Array.from(i).filter(e=>r.has(e)).length;return 0===l?"none":l===i.size?"all":"partial"})(t,O,{selectedSelf:D,isLarge:$}),[t,O,D,$]),[U,W,V,z,q,H,G]=function(e,t,a){let[r,n]=f.useState(e.items),[i,l]=f.useState(e.data.totalCount||0),[s,o]=f.useState(!1),[c,d]=f.useState(!1),{safeSetTimeout:u}=(0,y.A)();f.useEffect(()=>{n(e.items)},[e.items]),f.useEffect(()=>{void 0!==e.data.totalCount&&l(e.data.totalCount)},[e.data.totalCount]);let m=f.useCallback(()=>{d(!1)},[]),h=f.useCallback((e,t)=>{let a=e||[...r];n(a.slice(0,100)),u(()=>{n(a),void 0!==t&&l(t)},1)},[r,u]);return[f.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let a=x(e.data.path,r);for(let e of a)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),a.length>100?h(a,a.length):(n(a),l(a.length))}}else{let s=a(e.data);d(!1),o(!0);let c=Date.now(),u=await (0,g.lS)(`${s}?noancestors=1`);try{if(u.ok){let a=await u.json(),s=a.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===a.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,a,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let n=a.name.slice(0,a.name.lastIndexOf("/")),i=n.indexOf("/")>-1,l={path:a.path.slice(0,a.path.lastIndexOf("/")),contentType:a.contentType,name:n,hasSimplifiedPath:i},s={items:[t],data:l};return(r.set(l.path,s),i)?e(s,{...l},r):s}(t,e,i):t});if(r){let t=e.data.path,n=x(t,r,a.payload.tree.items);for(let e of(s.push(...n),n))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=a.payload.tree.totalCount,s.length>100?h(s,a.payload.tree.totalCount):(n(s),l(a.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}o(!1)},[a,e,t,h]),h,r,s,c,m,i]}(t,()=>{},m),K=o?`${o}/`:"",Q=G-V.length;(0,f.useEffect)(()=>{a&&L.current&&requestAnimationFrame(()=>{L.current?.scrollIntoView({block:"center"})})},[a]);let Z=f.useCallback(e=>{!e||T||z||q||!(t.items.length>100)||W(),e!==T&&k(e)},[T,z,q,t.items.length,W]),J=f.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&S?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(R?Z(!T):(c?.(t.data,t),M("FILES_TREE.ITEM",{item_path:t.data.path}),S&&p(u?.(t.data)||"")),e.stopPropagation())},[t,u,T,p,S,c,Z,M,R]);f.useEffect(()=>{i&&!T&&Z?.(!0)},[i]),f.useEffect(()=>{0===t.items.length&&T?Z?.(!1):!T&&t.autoExpand&&Z?.(!0)},[t.items.length]);let Y=f.useCallback(e=>{h&&a&&h(e),L.current=e},[h,a]);if(1===t.items.length){let n=t.items[0];if(n&&"directory"===n.data.contentType)return(0,r.jsx)(E,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:K+t.data.name,inheritsActive:a,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:S,navigateOnClick:S,getFileTrailingVisual:b,getFileIcon:w,selectedChildren:O,expandedPath:N,singleSelect:R})}return _?.(),(0,r.jsxs)(d.G.Item,{ref:P,expanded:T,onExpandedChange:Z,current:a,onSelect:J,id:`${t.data.path}-item`,containIntrinsicSize:a?void 0:"auto 2rem",children:[(0,r.jsx)(d.G.LeadingVisual,{children:(0,r.jsx)(d.G.DirectoryIcon,{})}),(0,r.jsxs)("div",{className:C,children:[!R&&(0,r.jsx)(j,{className:v,checked:"all"===B,indeterminate:"partial"===B,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===B?"true":void 0}),(0,r.jsxs)("span",{ref:Y,children:[K&&(0,r.jsx)("span",{children:K}),(0,r.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),F&&(0,r.jsx)(l.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:P,"aria-label":`${K}${t.data.name}`,open:!0,direction:"ne"}),(0,r.jsx)(d.G.SubTree,{state:z?"loading":q?"error":"done",children:q?(0,r.jsx)(d.G.ErrorDialog,{onRetry:U,onDismiss:H,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E,{clientOnlyFilePaths:e,directoryItems:V,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:S,navigateOnClick:S,getFileTrailingVisual:b,getFileIcon:w,selectedChildren:O,expandedPath:N,singleSelect:R}),Q>0&&(0,r.jsx)(A,{message:`${Q} entries not shown`})]})})]})}let N=f.memo(I,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function R({clientOnlyFilePaths:e,directoryItems:t,leadingPath:a,inheritsActive:n,onItemSelected:l,selectedItemRef:s,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:h,navigateOnClick:p,selectedChildren:g,expandedPath:y,singleSelect:x}){let v=(0,i.Z)(),C=(0,o.Z)(),_=f.useRef(C),b=f.useRef(l);f.useEffect(()=>{b.current=l,_.current=C},[l,C]);let w=f.useCallback((e,t)=>{b.current?.(e,t)},[]),j=f.useMemo(()=>t.map(t=>{let i=y===t.data.path,l=g?.includes(t.data.path),o=i||y.startsWith(`${t.data.path}/`),f=g?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`))||[];return"directory"===t.data.contentType?(0,r.jsx)(N,{clientOnlyFilePaths:e,isActive:n||i,isAncestorOfActive:o,onItemSelected:w,leadingPath:a,directory:t,getItemUrl:d,getFetchUrl:v.getItemUrl,selectedItemRef:o?s:void 0,navigate:C,onRenderRow:c,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:l,selectedChildren:f,expandedPath:y,singleSelect:x},t.data.name):(0,r.jsx)(S,{onItemSelected:w,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?s:void 0,navigate:C,navigateOnClick:p,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:l,singleSelect:x},t.data.name)}),[t,y,g,w,d,s,C,p,c,u,m,x,e,n,a,v.getItemUrl,h]);return(0,r.jsx)(r.Fragment,{children:j})}let E=f.memo(R);function T(e){let{clientOnlyFilePaths:t,rootItems:a,fetchError:n,loading:i,onRenderRow:l,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,onSelectionChange:p}=e,[g,y]=(0,f.useReducer)(b,new Set),x=e.selectedItems||g,v=(0,f.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let a of e.items)for(let e of v(a))t.add(e);return Array.from(t)},[]),C=(0,f.useCallback)((t,a)=>{var r;let n=(r=!!e.singleSelect,r?{type:"SINGLE_SELECT_FILE",path:t}:a?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});p?p(b(x,n)):y(n)},[p,e.singleSelect,x]),_=(0,f.useCallback)((t,a)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,a=x.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};p?p(b(x,a)):y(a);return}let r=v(t),n=a?{type:"DESELECT_DIRECTORY",paths:r}:{type:"SELECT_DIRECTORY",paths:r};p?p(b(x,n)):y(n)},[v,p,x,e.allowFolderReferences]),w=(0,f.useCallback)((t,a)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&a.items.length>1e3)return void _(a,x.has(t.path));let r=v(a),n=r.filter(e=>x.has(e)),i=n.length>0,l=r.length===n.length;i&&!l?_(a,!0):_(a,l)}else C(t.path,x.has(t.path))},[v,_,C,x,e.allowFolderReferences]),S=(0,f.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(h.az,{onMouseDown:S,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:"FileTreePicker-module__Box--RKQKr",children:i?(0,r.jsxs)("div",{className:"FileTreePicker-module__Box_1--usRNW",children:[(0,r.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,r.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(d.G,{"aria-label":"Files",children:[n&&(0,r.jsx)(A,{message:"Some files could not be loaded."}),(0,r.jsx)(E,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:w,selectedChildren:x?Array.from(x):[],selectedItemRef:e.selectedItemRef,onRenderRow:l,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function A({message:e}){return(0,r.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(d.G.LeadingVisual,{children:(0,r.jsx)(p.A,{icon:c.AlertFillIcon,className:"FileTreePicker-module__Octicon--rINlU"})}),(0,r.jsx)("div",{className:"FileTreePicker-module__Box_2--yFodr",children:e||"Couldn't load."})]})}try{w.displayName||(w.displayName="WrappedFileTreeRow")}catch{}try{S.displayName||(S.displayName="FileTreeRow")}catch{}try{j.displayName||(j.displayName="MemoizedCheckbox")}catch{}try{I.displayName||(I.displayName="WrappedDirectoryTreeRow")}catch{}try{N.displayName||(N.displayName="DirectoryTreeRow")}catch{}try{R.displayName||(R.displayName="WrappedDirectoryContents")}catch{}try{E.displayName||(E.displayName="DirectoryContents")}catch{}try{T.displayName||(T.displayName="FileTreePicker")}catch{}try{A.displayName||(A.displayName="ErrorTreeRow")}catch{}},54508:(e,t,a)=>{a.d(t,{E:()=>u});var r=a(74848),n=a(21728),i=a(73077),l=a(21373),s=a(15220),o=a(96540),c=a(2635);function d(e,t){let a,d,u,m,h=(0,n.c)(11),{title:p,onClose:f}=e,g=void 0===p?"Give feedback":p,[y,x]=(0,o.useState)(!1),{currentUserLogin:v}=(0,c.bP)("currentUserLogin");h[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>({openDialog:()=>x(!0)}),h[0]=a):a=h[0],(0,o.useImperativeHandle)(t,a),h[1]!==f?(d=e=>{x(!1),f?.(e)},h[1]=f,h[2]=d):d=h[2];let C=d;h[3]!==v||h[4]!==C?(u=()=>(0,r.jsxs)("div",{className:"InterviewSurveyDialog-module__body--GX6c_",children:[(0,r.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,r.jsx)("span",{className:"InterviewSurveyDialog-module__primaryText--H2SlC InterviewSurveyDialog-module__text--WPIpz",children:"Would you like to participate in our research?"}),(0,r.jsx)("span",{className:"InterviewSurveyDialog-module__secondaryText--SQrin InterviewSurveyDialog-module__text--WPIpz",children:"You will be compensated for your time"}),(0,r.jsx)(i.z,{variant:"primary",className:"InterviewSurveyDialog-module__surveyLink--XKIEl",href:`https://gh.io/copilot-feedback-interview-survey?UID=${encodeURIComponent(v)}`,target:"_blank",children:"Book a session"}),(0,r.jsx)(l.Q,{variant:"link",className:"InterviewSurveyDialog-module__noThanksButton--yLSzs",onClick:()=>C("no-thanks"),children:"No, thanks"})]}),h[3]=v,h[4]=C,h[5]=u):u=h[5];let _=u;return h[6]!==C||h[7]!==y||h[8]!==_||h[9]!==g?(m=y&&(0,r.jsx)(s.l,{className:"InterviewSurveyDialog-module__dialog--VJeZO",onClose:()=>C("close"),title:g,renderBody:_}),h[6]=C,h[7]=y,h[8]=_,h[9]=g,h[10]=m):m=h[10],m}let u=(0,o.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},54556:(e,t,a)=>{a.d(t,{E:()=>r});let r=a(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"var(--fontStack-monospace)",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},55099:(e,t,a)=>{a.d(t,{C:()=>x});var r=a(74848),n=a(83510),i=a(73189),l=a(96540),s=a(34522);let o="CodeMirrorDiff-module__container--RCtmx";var c=a(53839),d=a(63133),u=a(98325),m=a(71381),h=a(74713),p=a(11636),f=a(18351),g=a(24774),y=a(41185);function x(e){return e.left&&e.right?"split"===e.view?(0,r.jsx)(v,{...e}):(0,r.jsx)(C,{...e}):(0,r.jsx)(_,{...e})}function v(e){let t=(0,l.useRef)(null);return!function({fileName:e,left:t,leftLabelledBy:a,parentRef:r,right:i,rightLabelledBy:s,spacing:o}){let x=(0,l.useRef)(null),v=(0,l.useMemo)(()=>new c.xx,[]),C=(0,l.useMemo)(()=>new c.xx,[]),_=(0,l.useMemo)(()=>new c.xx,[]),[b,w]=(0,l.useMemo)(()=>{let e=[...u.o,...(0,m.u)(o),(0,h.h)(),C.of([]),v.of([]),_.of([(0,p.O)()]),(0,y.T)()],t=[(0,f.I)(a),g.Lz.contentAttributes.of({"aria-labelledby":a})],r=[(0,f.I)(s),g.Lz.contentAttributes.of({"aria-labelledby":s})];return[e.concat(t),e.concat(r)]},[o,C,v,_,a,s]);(0,l.useEffect)(()=>{let a=r.current;if(a)return x.current=new n.SV({a:{doc:t,extensions:b},b:{doc:i,extensions:w},parent:a,gutter:!1}),(0,d.r)({autoCompleteCompartment:v,fileName:e,languageCompartment:C,managedExtensions:[],themeCompartment:_,view:x.current?.a,viewB:x.current?.b}),()=>x.current?.destroy()},[])}({...e,parentRef:t}),(0,r.jsx)("div",{ref:t,className:o})}function C(e){let t=(0,l.useMemo)(()=>[(0,n.ex)({original:e.left,mergeControls:!1,gutter:!1})],[e.left]);return(0,r.jsx)(s.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:o,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:e.right,onChange:i.l,placeholder:"Loading...",hideHelp:!0,extensions:t})}function _(e){let t=""===e.left?"CodeMirrorDiff-module__newFile--vX9DQ":"CodeMirrorDiff-module__deletedFile--_w4wx",a=e.right||e.left;return(0,r.jsx)(s.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:t,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:a,onChange:i.l,placeholder:"Loading...",hideHelp:!0})}try{x.displayName||(x.displayName="CodeMirrorDiff")}catch{}try{v.displayName||(v.displayName="CodeMirrorDiffSplit")}catch{}try{C.displayName||(C.displayName="CodeMirrorDiffUnified")}catch{}try{_.displayName||(_.displayName="CodeMirrorDiffNewOrDeletedFile")}catch{}},56708:(e,t,a)=>{a.d(t,{q:()=>ChatInputValidationError});let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}}},57448:(e,t,a)=>{a.d(t,{Ld:()=>m,Tz:()=>p,W5:()=>d,cx:()=>u,vn:()=>h});var r=a(51987),n=a(97665),i=a(97286),l=a(94747),s=a(96379),o=a(96540),c=a(79064);a(2635),a(33592);let d={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},u=256,m=400;function h(e){var t,a;let r,s,c=(0,n.jE)(),u=(0,o.useCallback)(()=>Promise.resolve(c.invalidateQueries({queryKey:["repo-indexing-state",e]})),[c,e]),m=(0,i.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>f(e),placeholderData:{requestStatus:"unknown",code:d.Unknown,docs:d.Unknown},staleTime:1/0}),{mutate:h}=(0,l.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>g([e]),onSuccess:u}),p=m.data;return t=()=>void u(),a=1e4*(p.code===d.Indexing&&"indexing_error"!==p.requestStatus),r=(0,o.useRef)(void 0),s=(0,o.useRef)(t),(0,o.useEffect)(()=>{s.current=t},[t]),(0,o.useEffect)(()=>{if(a>0)return r.current=window.setInterval(()=>s.current(),a),()=>window.clearInterval(r.current)},[a]),[p,()=>h()]}function p(){let e=c.Jt.getPanelHeight(),t=c.Jt.getPanelWidth(),a=(0,o.useRef)(null),r=(0,o.useRef)(e),n=(0,o.useRef)(e),i=(0,o.useRef)(null),l=(0,o.useRef)(t),s=(0,o.useRef)(t),[d,h]=(0,o.useState)(e),[p,f]=(0,o.useState)(t),g=(0,o.useRef)(0);(0,o.useEffect)(()=>{g.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,u),window.innerHeight-g.current),x=e=>Math.min(Math.max(e,m),window.innerWidth-2*g.current),v=(0,o.useCallback)(e=>{if(null!==a.current){let t=a.current-e.clientY,i=y(r.current+t);h(i),n.current=i}if(null!==i.current){let t=i.current-e.clientX,a=x(l.current+t);f(a),s.current=a}},[]),C=(0,o.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",C),null!==a.current&&(c.Jt.setPanelHeight(n.current),a.current=null),null!==i.current&&(c.Jt.setPanelWidth(s.current),i.current=null)},[v]),_=(0,o.useCallback)((e,t,n)=>{0===e.button&&(e.preventDefault(),n&&(a.current=e.clientY,r.current=d),t&&(i.current=e.clientX,l.current=p),window.addEventListener("mousemove",v),window.addEventListener("mouseup",C))},[d,p,v,C]),b=(0,o.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(d+4);h(t),c.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(d-4);h(t),c.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(p-4);f(t),c.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(p+4);f(t),c.Jt.setPanelWidth(t),e.preventDefault()}},[d,p]);return{panelWidth:p,panelHeight:d,startResize:_,onResizerKeyDown:b}}async function f(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,r.kt)()}});if(!t.ok)return{requestStatus:"request_failed",code:d.Unknown,docs:d.Unknown};let a=await t.json();return{requestStatus:a.can_index,code:a.code_status,docs:a.docs_status}}async function g(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,s.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}},59788:(e,t,a)=>{a.d(t,{Q:()=>el});var r=a(74848),n=a(26108),i=a(15220),l=a(46251),s=a(86877),o=a(21373),c=a(72511),d=a(38621),u=a(96540),m=a(97564),h=a(54030),p=a(39176),f=a(54114),g=a(71363),y=a(78314),x=a(31078),v=a(53552),C=a(64375),_=a(29731),b=a(6665),w=a(19189),S=a(7808),j=a(64642),I=a(65787),N=a(25407),R=a(66108),E=a(94195),T=a(96459),A=a(69676),k=a(45800),M=a(31604),L=a(12683),P=a(10095),F=a(91385),O=a(70170),D=a(37272),$=a(71315),B=a(34164);let U=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:a,ariaHasPopup:n,className:i,onBlur:l,onFocus:s,onKeyDown:o,onPreload:c,onSearch:m,query:h,searchPlaceholder:p,loading:f,sx:g},y)=>{let{sendRepoClickEvent:x}=(0,b.T)(),[v,C]=u.useState(h),_=u.useRef((0,O.s)(e=>m(e),250));u.useEffect(()=>{C(h)},[h]);let w=h?(0,r.jsx)(L.ks.Action,{onClick:()=>{x("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(L.ks,{autoFocus:W(),className:(0,B.$)("d-flex",i),ref:y,value:v,onKeyDown:o,onChange:e=>{C(e.target.value),c(),_.current(e.target.value)},sx:g,"aria-label":p||"Go to file","aria-activedescendant":e,role:n?"combobox":void 0,"aria-controls":t,"aria-expanded":a,"aria-haspopup":n?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:p||"Go to file",loading:""!==h&&f,leadingVisual:d.SearchIcon,trailingAction:w,trailingVisual:w?void 0:()=>(0,r.jsx)(D.E,{children:(0,r.jsx)("kbd",{children:"t"})}),onFocus:e=>{c(),e.target.select(),s?.(e)},onBlur:l,onClick:()=>x("FILE_TREE.SEARCH_BOX")})});function W(){return"1"===new URLSearchParams($.fV.search).get("search")}U.displayName="FilesSearchBox";let V={excludeDirectories:!1,excludeSeeAllResults:!1};function z({actionListSx:e,additionalResults:t,className:a,commitOid:n,config:i=V,findFileWorkerPath:l,getItemUrl:s,onRenderRow:o,onItemSelected:d,searchBoxRef:m,sx:p}){var f;let g,{excludeDirectories:C,excludeSeeAllResults:_}=i,{query:R,setQuery:P}=(0,x.JS)(),F=(0,y.t)(),O=u.useRef(null),D=m??O,[$,B]=u.useState(R.length>0),[z,q]=u.useState(!!R),{list:H,directories:G,loading:Q,error:Z}=(0,h.o)(n,$,!!C),{path:J}=(0,v.eu)(),{getUrl:Y}=(0,w.Z)(),{queryText:X,queryLine:ee}=(g=(f=(f=R).replaceAll(" ","")).indexOf(":"))>=0?{queryText:f.substring(0,g),queryLine:parseInt(f.substring(g+1),10)}:{queryText:f,queryLine:void 0},{matches:et,clearMatches:ea}=function(e,t,a,r){let[n,i]=u.useState(),l=u.useRef(""),s=u.useRef(null),{sendStats:o}=(0,b.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new S.z(a,j.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),l.current=e.query,e.startTime&&o("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[o,a]);return u.useEffect(()=>{if(r)return d(),function(){s.current?.terminate()}},[d,r]),u.useEffect(()=>{if(e.length&&t){c.current&&(s.current?.terminate(),d());let a=l.current&&t.startsWith(l.current);c.current=!0,s.current?.postMessage({baseList:a&&n||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:n,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...H,...t??[]].sort(),[t,H]),X,l,$),{sendRepoClickEvent:er}=(0,b.T)(),en=(0,T.Z)(),[ei,el]=u.useState(0),[es,eo]=u.useState(()=>W()),ec=u.useRef(null),ed=u.useRef(null),eu="file-results-list",{sendRepoKeyDownEvent:em}=(0,b.T)(),{screenSize:eh}=(0,E.lm)(),ep=i.enableOverlay??eh>=E.Gy.large,ef=u.useCallback(e=>{er("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),q(!1)},[er,d]),eg=(e,t,a)=>s?s(e,t,a):Y({path:e,action:t?"tree":"blob",hash:a}),{containerRef:ey}=(0,k.G)({bindKeys:A.z0.ArrowVertical|A.z0.HomeAndEnd,focusInStrategy:"previous"},[Q,Z]);u.useEffect(()=>{R||q(!1)},[R]),u.useEffect(()=>{document.activeElement!==D.current&&ep&&q(!1)},[J,D,ep]);let ex=et?.slice(0,20)||[],ev=et&&et.length>ex.length,eC=!i.disableNavigation,e_=ed.current?.getBoundingClientRect().width,eb=(0,r.jsx)(L.az,{sx:{maxHeight:ep?"180px":"100% !important",width:ep?e_:"100%"},className:"FileResultsList-module__Box--cUmDY",children:Z?(0,r.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(L.lF,{ref:ey,sx:{p:ep?2:3,pr:3*!!ep,pt:ep?3:"2px !important",...e},role:"listbox",className:"FileResultsList-module__ActionList--kDNEZ",children:[!Q&&ex.map((e,t)=>{let a=G.includes(e),n=eg(e,a,ee?`L${ee}`:"");return(0,r.jsx)(K,{active:!1,index:t,focused:es&&ei===t,match:e,onRender:o,query:X,onClick:ef,isDirectory:a,to:n,useOverlay:ep,listRef:ey,noAnchor:i.disableNavigation},e)}),0===ex.length&&(0,r.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.az,{className:a,ref:ed,sx:p,children:(0,r.jsx)(U,{ariaActiveDescendant:(!ep&&R||ep&&z)&&es&&ei>-1?ev&&ei===ex.length?"see-all-results-link":`file-result-${ei}`:void 0,ariaExpanded:ep?z:void 0,ariaHasPopup:ep,ariaControls:ep?eu:void 0,ref:D,loading:Q,query:R,onKeyDown:e=>{let{key:t,shiftKey:a,metaKey:r,altKey:n,ctrlKey:i}=e;if(!a&&!r&&!n){if("Escape"===t)R?(em("FILE_TREE.CANCEL_SEARCH"),P(""),ea()):document.activeElement&&document.activeElement.blur();else if(!R)return;else if("Enter"===t){if(!_&&ev&&ei===ex.length)eC&&en((0,N.Y8Y)({owner:F.ownerLogin,repo:F.name,searchTerm:`path:${X}`})),d?.();else if(ex[ei]){let e=ex[ei];eC&&en(eg(ex[ei],!1,ee?`L${ee}`:"")),q(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!_&&ev&&ei>=ex.length-1){if(el(ex.length),ec.current&&ey.current){let e=(0,I.U)(ey.current);(0,A.Rt)(ec.current,e,{behavior:"instant"})}}else el(Math.min(ei+1,ex.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){el(Math.max(ei-1,0)),e.preventDefault();return}}},onPreload:()=>B(!0),onSearch:e=>{P(e),e?q(!0):(ea(),q(!1)),el(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(q(!1),eo(!1))},onFocus:()=>{R&&q(!0),eo(!0)},searchPlaceholder:i.searchPlaceholder,className:"FileResultsList-module__FilesSearchBox--KW9Zl"})}),ep&&ex.length>0&&(0,r.jsx)(M.T,{anchorRef:ed,open:ep&&z,renderAnchor:null,onClose:()=>{q(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:eu,role:"dialog"},children:eb}),!ep&&R&&eb]})}let q=({active:e,focused:t,index:a,match:n,query:i,to:l,isDirectory:s,onClick:o,onRender:c,useOverlay:d,listRef:m,noAnchor:h})=>{let p=(0,F.Xq)(i,n);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,I.U)(m.current);(0,A.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${a}`,active:e,onSelect:(0,u.useCallback)(()=>{o?.(n)},[n,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},x=(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(Q,{text:n,positionsList:p,LeadingIcon:s?H:G,className:"FileResultsList-module__HighlightMatch--Jy_cG"})})});return h?(0,r.jsx)(L.lF.Item,{...y,children:x},n):(0,r.jsx)(L.lF.LinkItem,{...y,ref:f,as:R.N,to:l,children:x},n)},H=()=>(0,r.jsx)(P.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:"FileResultsList-module__Octicon--PvMf4"}),G=()=>(0,r.jsx)(P.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),K=u.memo(q);function Q({className:e,text:t,positionsList:a,sx:n,LeadingIcon:i}){let l=[],s=0;for(let e of a){if(Number(e)!==e||e<s||e>t.length)continue;let a=t.slice(s,e);a&&l.push(Z(a)),s=e+1,l.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return l.push(Z(t.slice(s))),(0,r.jsx)(L.az,{className:e,sx:n,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),l]})})}function Z(e){return e.replaceAll("/","/\u200B")}try{z.displayName||(z.displayName="FileResultsList")}catch{}try{q.displayName||(q.displayName="FileResultRow")}catch{}try{H.displayName||(H.displayName="DirectoryIcon")}catch{}try{G.displayName||(G.displayName="FileResultIcon")}catch{}try{K.displayName||(K.displayName="MemoizedFileResultRow")}catch{}try{Q.displayName||(Q.displayName="HighlightMatch")}catch{}var J=a(53419);let Y=new Set(Object.values(a(23967).r4).flatMap(e=>e.extensions??[])),X=new Set([".png",".jpg",".jpeg",".gif",".bmp",".svg",".webp",".ico",".tiff",".tif"]);function ee(e,t,a){return{id:`${a.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,filePath:e,sha:a.defaultBranch,type:t}}function et(e,t,a,r,n,i){let l=Array.from(e).filter(e=>t.has(e)),s=Array.from(e).filter(e=>!t.has(e));if(!i)return s.map(e=>ee(e,"github_file",a));let o=[],c=new Set;for(let e of l){if(l.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=s.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){o.push(ee(e,"github_folder",a));continue}if(i&&t.length>=n)for(let r of(o.push(ee(e,"github_folder",a)),t))c.add(r);else for(let e of t)o.push(ee(e,"github_file",a)),c.add(e)}let d=s.filter(e=>!c.has(e));if(r&&i){let e=new Map;for(let t of d){let a=t.lastIndexOf("/"),r=a>0?t.substring(0,a):"";e.has(r)||e.set(r,[]),e.get(r)?.push(t)}for(let[t,r]of e)if(""===t)for(let e of r)o.push(ee(e,"github_file",a));else o.push(ee(t,"github_folder",a))}else for(let e of d)o.push(ee(e,"github_file",a));return o}function ea(e,t=30){return e.length<=t?e:`...${e.slice(-t)}`}function er({files:e,error:t}){if(0===e.length)return null;if(1===e.length&&e[0])return(0,r.jsxs)(r.Fragment,{children:[t?"This file can't be submitted: ":"This file was filtered out: "," ",(0,r.jsx)("strong",{children:ea(e[0])}),". Only supported file types are allowed."]});let a=e.slice(0,3),n=e.length-3;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:t?"These files can't be submitted: ":"These files were filtered out: "}),a.map((e,t)=>(0,r.jsxs)("span",{children:[t>0&&(0,r.jsx)("span",{children:", "}),(0,r.jsx)("strong",{children:ea(e)})]},e)),n>0&&(0,r.jsxs)("span",{children:[", and ",n," more"]}),(0,r.jsx)("span",{children:". Only supported file types are allowed."})]})}function en({currentRepo:e,setLocalFormData:t,fetchError:a,onFileCountChange:n,expandedPath:i,resourceCounts:l,allowFolderReferences:s,maxFileCount:o,onRejectionMessage:c,onDisplayCountChange:d,onFilteredFilesChange:m}){let[g,y]=(0,u.useState)(()=>new Set),[x,v]=(0,u.useState)(()=>new Set),C=o??50,{list:_,directories:b,loading:w}=(0,h.o)(e.commitOID,!0),[S,j]=(0,u.useState)([]);(0,u.useEffect)(()=>{j((0,p.k)({paths:_,directories:b})),v(new Set(b))},[_,b,j,e.commitOID]),(0,u.useEffect)(()=>{let a=Array.from(g).filter(e=>!x.has(e)),r=Array.from(g).filter(e=>x.has(e));n?.(a.length);let i=!1;if(s&&a.length>0){let e=r.map(e=>`${e}/`),t=a.filter(t=>!e.some(e=>t.startsWith(e))),n=t.some(e=>e.includes("/"));i=t.length>C&&n}let l=et(g,x,e,i,C,s??!1);t(l),d&&d(l.length)},[g,x,e,t,n,d,s,C]);let I=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),N=(0,u.useCallback)(t=>{let a=Array.from(t).filter(e=>!g.has(e)),r=[],n=[];for(let e of a){let t=x.has(e);!function(e,t){if(t)return!0;let a=e.lastIndexOf("."),r=e.lastIndexOf("/");if(-1===a||a<r)return!0;let n=e.substring(a).toLowerCase();return Y.has(n)&&!X.has(n)}(e,t)?r.push(e):n.push(e)}let i=new Set;for(let e of g)t.has(e)&&i.add(e);for(let e of n)i.add(e);if(r.length>0?m?.(r):i.size<=g.size&&m?.([]),i.size<=g.size){y(i),c?.(null);return}if(!s){let e=Array.from(i).filter(e=>!x.has(e)),t=l?l.maxResourceCount-l.currentResourceCount:C;if(e.length>t){let t=l?`${l.currentResourceCount+e.length} / ${l.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${C} files can be added at a time.`;c?.(t),y(i);return}c?.(null),y(i);return}let o=Array.from(i).filter(e=>!x.has(e)),d=Array.from(i).filter(e=>x.has(e)).map(e=>`${e}/`),u=o.filter(e=>!d.some(t=>e.startsWith(t))),h=u.some(e=>e.includes("/"));et(i,x,e,u.length>C&&h,C,s).length,y(i)},[g,C,x,s,c,e,l,m]);return(0,r.jsx)("div",{className:"MultiFilePicker-module__Box--gINxM",children:(0,r.jsx)(f.Rw,{rootItems:S,expandedPath:i,selectedItemRef:()=>{},setRootItems:j,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:g,onSelectionChange:N,loading:w||!1,fetchError:!!a,getItemUrl:I,allowFolderReferences:!!s,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function ei({onClose:e}){return(0,r.jsx)(n.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function el({formData:e,onCancel:t,onSaveFiles:a,findFileWorkerPath:h,attachmentButtonRef:p,owner:f,resourceCounts:b,initialRepo:w,onRepoSelect:S,hideBackButton:j=!1,allowFolderReferences:I=!1,maxFileCount:N=50}){let[R,E]=(0,u.useState)({}),[T,A]=(0,u.useState)(null),[k,M]=(0,u.useState)(w||null),[L,P]=(0,u.useState)(!0),[F,O]=(0,u.useState)(e),[D,$]=(0,u.useState)(!1),[B,U]=(0,u.useState)(null),[W,V]=(0,u.useState)(""),[q,H]=(0,u.useState)(null),[G,K]=(0,u.useState)(0),[Q,Z]=(0,u.useState)(0),[Y,X]=(0,u.useState)([]),ee=(0,u.useRef)(!1),et=async e=>{let t;if(ee.current=!0,R[e]){M(t=R[e]),S?.(t);return}try{t=await (0,m.V)(e),E(a=>({...a,[e]:t})),M(t),S?.(t),P(!1)}catch(e){A(e instanceof Error?e.message:"An unknown error occurred")}ee.current=!1},ea=()=>{S?.(null),M(null),O([]),P(!0)},el=void 0!==b,es=(el?Q:G)>(el?b.maxResourceCount-b.currentResourceCount:N),eo=async()=>{$(!0);try{if(es)return;(0,J.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await a(F)}catch(t){let e={errorMessage:"An unknown error occurred",filePaths:[]};t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(t.base.startsWith("unsupported_file_type")&&"files"in t?e.filePaths=t.files:t.base.startsWith("The size of the space exceeds the current limit")?e.errorMessage="The size of the space exceeds the current limit":e.errorMessage=t.base),U(e)}finally{$(!1)}};(0,u.useEffect)(()=>{U(null)},[F]);let ec=es?el?`${b.currentResourceCount+Q} / ${b.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${N} items can be added at a time.`:q,ed=es||!!q;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.X,{selectionVariant:"instant",open:!k&&L,onOpenChange:e=>{ee.current||(P(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(O([]),(0,J.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await et(e))},cancelReturnFocusRef:p,submitReturnFocusRef:p,error:T??void 0,ownerDisplayLogin:f,includeForks:!0}),k&&(0,r.jsx)(i.l,{onClose:t,title:`Add files from ${k.ownerLogin}/${k.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e,dialogLabelId:t})=>(0,r.jsxs)(i.l.Header,{children:[(0,r.jsx)("div",{className:"MultiFilePicker-module__dialogHeader--CApsB",children:(0,r.jsx)(i.l.Title,{id:t,children:(0,r.jsxs)(l.B,{align:"center",direction:"horizontal",gap:"none",children:[!j&&(0,r.jsx)(l.B.Item,{children:(0,r.jsx)(n.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:ea,variant:"invisible"})}),(0,r.jsxs)(l.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",k.ownerLogin,"/",k.name]}),(0,r.jsx)(l.B.Item,{children:(0,r.jsx)(ei,{onClose:()=>e("close-button")})})]})})}),(0,r.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,r.jsx)(y.d,{repository:k,children:(0,r.jsx)(x.Ck,{children:(0,r.jsx)(v.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(C.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(z,{commitOid:k.commitOID,findFileWorkerPath:h,onItemSelected:e=>{e&&V(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsx)(i.l.Footer,{children:(0,r.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:ec&&(0,r.jsx)(s.A.Validation,{variant:"error",children:ec})}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(o.Q,{onClick:t,children:"Cancel"}),(0,r.jsx)(o.Q,{...(0,_.G)("save-resource-button"),variant:"primary",onClick:eo,count:D?void 0:(el?Q:G)||void 0,loading:D,disabled:ed,children:"Add"})]})]})}),renderBody:()=>(0,r.jsxs)("div",{className:"d-flex flex-column",children:[T&&(0,r.jsx)("span",{children:T}),B&&(0,r.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,r.jsx)(c.A,{full:!0,variant:"danger",children:B.filePaths.length>0?(0,r.jsx)(er,{files:B.filePaths,error:!0}):(0,r.jsx)("span",{children:B.errorMessage})})}),Y.length>0&&(0,r.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,r.jsx)(c.A,{full:!0,variant:"warning",children:(0,r.jsx)(er,{files:Y})})}),(0,r.jsx)(y.d,{repository:k,children:(0,r.jsx)(x.Ck,{children:(0,r.jsx)(v.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(en,{expandedPath:W,currentRepo:k,localFormData:F,setLocalFormData:O,onFileCountChange:Z,onDisplayCountChange:K,fetchError:T,resourceCounts:b,allowFolderReferences:I,maxFileCount:N,onRejectionMessage:H,onFilteredFilesChange:X})})})})]}),className:"MultiFilePicker-module__Dialog--ls9MF"})]})}try{er.displayName||(er.displayName="FilteredFilesWarning")}catch{}try{en.displayName||(en.displayName="FilePickerForm")}catch{}try{ei.displayName||(ei.displayName="CloseButton")}catch{}try{el.displayName||(el.displayName="MultiFilePicker")}catch{}},60905:(e,t,a)=>{a.d(t,{s:()=>CopilotImageAttacher});var r=a(50467),n=a(53419),i=a(25641),l=a(35247),s=a(76166),o=a(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[a,r]=e.reduce(([e,a],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],a]:[e,[...a,r]],[[],[]]);return[a,r]}static getAttachmentLimit(){return l.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let a=crypto.randomUUID(),r=new o.N(a,e,t);return{id:a,attachment:r,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown"){if(0===e.length)return[];if(l.W.previewFeaturesVisionGate&&this.state.hasCEorCBAccess&&!this.state.optedInToPreviewFeatures)return this.manager.addAmbientError("Copilot in GitHub.com preview features must be enabled to upload images. Please request access from your administrator and try again."),(0,s.d)("preview_features_not_enabled"),[];let a=this.state.currentReferences.filter(e=>"image"===e.type).length,r=CopilotImageAttacher.getAttachmentLimit();if(a+e.length>r){let e=l.W.attachMultipleImages?`You can add up to ${r} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,s.d)("file_limit_reached"),[]}let o=[],c=[];for(let a of e){if(!CopilotImageAttacher.isTypeAllowed(a.type,this.state.model))return(0,s.d)("included_unsupported_file",{fileTypes:a.type,uploadType:t}),[];if(a.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,s.d)("size_limit_exceeded",{size:a.size}),[];let e=CopilotImageAttacher.makeImageReference(a,this.state.selectedThreadID);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,s.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,i.Vc)(a.name);this.manager.addReference(r,"image-attacher"),0===c.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),c.push({file:a,placeholder:r,reference:e})}try{c.forEach(({file:e,placeholder:a,reference:r})=>{try{this.manager.setImageAttachmentUploaded(r.id,r.attachment),this.manager.replaceReference(a,r),(0,n.BI)("dotcom_chat.vision.image_added",{uploadType:t}),o.push(r)}catch(r){this.manager.removeReference(a);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,s.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,s.d)(r.name,{message:r.message}),"GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}return o}constructor(e,t){(0,r._)(this,"state",void 0),(0,r._)(this,"manager",void 0),this.state=e,this.manager=t}}},61180:(e,t,a)=>{a.d(t,{T:()=>l});var r=a(21728),n=a(96540),i=a(79064);function l(){let e,t,a=(0,r.c)(3),[l,o]=(0,n.useState)(s);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{o(e),e&&i.Jt.setLastUsedRepository(e)},a[0]=e):e=a[0];let c=e;return a[1]!==l?(t=[l,c],a[1]=l,a[2]=t):t=a[2],t}function s(){return i.Jt.getLastUsedRepository()}},68605:(e,t,a)=>{a.d(t,{BE:()=>s,Cw:()=>S,I6:()=>_,Lo:()=>d,Md:()=>f,TB:()=>b,TC:()=>C,TU:()=>m,YH:()=>g,Z3:()=>h,eO:()=>x,e_:()=>v,f9:()=>o,fJ:()=>j,fV:()=>p,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>w});var r=a(15874),n=a(54528),i=a(53839),l=a(24774);let s=e=>e.state.selection.main,o=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,a)=>{e.dispatch({selection:{anchor:t,head:a}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function h(e,t){let a=e.state.doc.lineAt(t);return{line:a.number-1,ch:t-a.from}}let p=(e,t)=>e.state.doc.line(t),f=(e,t,a)=>{let r=p(e,t);v(e,r.from,r.from,a)},g=(e,t,a)=>{let r=p(e,t);v(e,r.from,r.from+a.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,a)=>e.sliceDoc(t,a),v=(e,t,a,r)=>{e.dispatch({changes:{from:t,to:a,insert:r}})},C=(e,t)=>{let a=s(e);v(e,a.from,a.to,t)},_=(e,t)=>new n.ZX(e.state.doc,t).next(),b=(e,t,a)=>{let r=new n.ZX(e.state.doc,t).next();e.dispatch({changes:{from:r.value.from,to:r.value.to,insert:a}})},w=(e,t,a,r,n)=>{if(void 0!==a)try{let s=p(e,t),o=p(e,a);if(s&&o){e.focus();let t=n?o.from+n:o.to;u(e,s.from+(r??0),t),e.dispatch({effects:[l.Lz.scrollIntoView(i.OF.range(s.from,o.to),{y:"center"})]})}}catch{}else try{let a=p(e,t);a&&(e.focus(),o(e,a.from+(r??0)),e.dispatch({effects:[l.Lz.scrollIntoView(a.from,{y:"center"})]}))}catch{}};function S(e){return e.state.facet(r.Xt)}function j(e,t){if(e===t)return[];let a=0,r=Math.min(e.length,t.length);for(;a<r&&e[a]===t[a];)a++;let n=e.length,i=t.length;for(;n>a&&i>a&&e[n-1]===t[i-1];)n--,i--;return[{from:a,to:n,insert:t.slice(a,i)}]}},69093:(e,t,a)=>{a.d(t,{j:()=>o});var r=a(21728),n=a(38621),i=a(47789),l=a(51213),s=a(35247);function o(e){let t,a,o,p=(0,r.c)(8),{enabled:f}=e,g=(0,i.qw)();if(p[0]!==f||p[1]!==g){e:{let e=[];if(!f){t=e;break e}for(let t of g)t.slashCommand&&e.push({key:t.slashCommand.key,name:t.slashCommand.name,description:t.slashCommand.description,icon:t.slashCommand.icon,isNew:t.slashCommand.isNew,order:t.slashCommand.order,suggestions:t.slashCommand.suggestions,enabled:t.slashCommand.enabled,disabledAction:t.slashCommand.disabledAction,customModelPicker:t.slashCommand.customModelPicker,execute:async(e,a,r)=>await t.slashCommand.execute(e,a,r),mode:t.slashCommand.mode});s.W.planningAgent&&e.push({key:"brainstorm",name:"Brainstorm",description:"Create a plan and turn them into tasks",icon:n.TasklistIcon,suggestions:[],execute:h,mode:{name:l.II.Brainstorm,icon:n.TasklistIcon,supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0}}),s.W.askModeDropdown&&e.push({key:"ask",name:"Ask",description:"Get an answer to a question",icon:n.CommentIcon,order:0,suggestions:[],execute:m,mode:{name:l.II.Ask,icon:n.CommentIcon,supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0}}),e.push({key:"create-issue",name:"Create issue",description:"Create a GitHub issue from your conversation",icon:n.IssueDraftIcon,suggestions:["First, create a new draft issue. Then ask for additional information to fill out the issue.","First, create an issue with sub issues. Then ask for additional information to fill out these issues."],execute:u,mode:{name:l.II.CreateIssue,icon:n.IssueDraftIcon,supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0}}),t=e.sort(d)}p[0]=f,p[1]=g,p[2]=t}else t=p[2];let y=t;return p[3]!==y?(a=y.map(c),p[3]=y,p[4]=a):a=p[4],p[5]!==y||p[6]!==a?(o={availableCommands:y,availableCommandKeys:a},p[5]=y,p[6]=a,p[7]=o):o=p[7],o}function c(e){return e.key}function d(e,t){return void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.name.localeCompare(t.name)}function u(){return!1}function m(){return!1}function h(e,t,a,r){return r.setUsePlanningIntent(!0),!1}},70346:(e,t,a)=>{a.d(t,{V:()=>aa});var r=a(74848),n=a(21728),i=a(25641),l=a(35247),s=a(76872),o=a(84646),c=a(2635),d=a(79802),u=a(17485),m=a(53419),h=a(82595),p=a(96540),f=a(34164);let g=(0,p.forwardRef)((e,t)=>{let a,i,l,s,o,c,d,u,m,h,p,g,y,x,v,C,_=(0,n.c)(33);if(_[0]!==e){let{icon:t,isSelected:r,onClick:n,hasMenu:m,isMenuOpen:h,selectedItemLabel:p,children:f,...g}=e;l=t,c=n,d=p,a=f,o=void 0!==r&&r,i=void 0!==m&&m,s=void 0!==h&&h,u=Object.keys(g).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=g[t]),e),{}),_[0]=e,_[1]=a,_[2]=i,_[3]=l,_[4]=s,_[5]=o,_[6]=c,_[7]=d,_[8]=u}else a=_[1],i=_[2],l=_[3],s=_[4],o=_[5],c=_[6],d=_[7],u=_[8];let b=u;_[9]!==i||_[10]!==s||_[11]!==o?(m=()=>i?{"aria-haspopup":"menu","aria-expanded":s}:{"aria-pressed":o},_[9]=i,_[10]=s,_[11]=o,_[12]=m):m=_[12];let w=m;_[13]!==w?(h=w(),_[13]=w,_[14]=h):h=_[14],_[15]!==b||_[16]!==h?(p={...b,...h},_[15]=b,_[16]=h,_[17]=p):p=_[17];let S=p,j=i&&d?d:a;_[18]!==c?(g=e=>{c&&c(e)},_[18]=c,_[19]=g):g=_[19];let I=g,N=o&&"ToggleButton-module__selected--fx0LM";return _[20]!==N?(y=(0,f.$)("ToggleButton-module__toggleButton--JlWKX",N),_[20]=N,_[21]=y):y=_[21],_[22]!==l?(x=!!l&&(0,r.jsx)("span",{className:"ToggleButton-module__icon--mJLXC",children:l}),_[22]=l,_[23]=x):x=_[23],_[24]!==j?(v=(0,r.jsx)("span",{className:"ToggleButton-module__textContent--xX6cl",children:j}),_[24]=j,_[25]=v):v=_[25],_[26]!==S||_[27]!==I||_[28]!==t||_[29]!==y||_[30]!==x||_[31]!==v?(C=(0,r.jsxs)("button",{ref:t,type:"button",className:y,onClick:I,...S,children:[x,v]}),_[26]=S,_[27]=I,_[28]=t,_[29]=y,_[30]=x,_[31]=v,_[32]=C):C=_[32],C});g.displayName="ToggleButton";var y=a(61526),x=a(94236),v=a(46251),C=a(69726),_=a(5524);function b(){let[e,t]=(0,p.useState)(!1),a=(0,y.Zp)(),{handleSpaceSelect:n,clearSpaceSelection:f,activeCopilotSpaceId:b,readOnly:w}=(0,u.C)(),S=(0,p.useRef)(null),j=(0,p.useRef)(null),[I,N]=(0,p.useState)(!1),R=()=>{N(!0),(0,m.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:E=[],isLoading:T}=function(){let{threads:e}=(0,c.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,d.O)(e)).filter(e=>null!==e),a=(0,o.jS)(!0),{data:r}=a;if(void 0===r)return a;let n=new Set,i=[...t.map(e=>r.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!n.has(t)&&(n.add(t),!0)}),...[...r].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!n.has(t)})].slice(0,5);return{...a,data:i}}(),{data:A=[],isLoading:k}=(0,o.jS)(!0),M=(0,o.BV)(),L=T||k;if((0,p.useEffect)(()=>{if(L&&e&&S.current)S.current.focus();else if(!L&&e&&j.current){let e=setTimeout(()=>{j.current?.focus()},0);return()=>clearTimeout(e)}},[L,e]),!M||w)return;let P=b?A.find(e=>e.id===b.id&&e.owner===b.owner):void 0,F=P?P.name:"Spaces",O="260px";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.W,{open:e,onOpenChange:e=>{l.W.spacesAsAttachmentsEnabled&&e&&(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),t(e)},children:[(0,r.jsx)(x.W.Anchor,{children:(0,r.jsx)(g,{icon:(0,r.jsx)(h.I,{icon:"spaces"}),isSelected:!!P,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:F,children:F})}),(0,r.jsx)(x.W.Overlay,{style:E.length>0?{width:O}:{},children:L?(0,r.jsxs)(v.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:O},children:[(0,r.jsx)("div",{ref:S,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,r.jsx)(C.A,{})]}):(0,r.jsx)(_.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:E.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.l.Group,{children:[(0,r.jsx)(_.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),E.map((e,a)=>{let i=!!b&&e.id===b.id&&e.owner===b.owner;return(0,r.jsx)(_.l.Item,{ref:0===a?j:void 0,role:"menuitemradio",onSelect:()=>{b&&e.id===b.id&&e.owner===b.owner?f():(n({id:e.id,owner:e.owner}),(0,m.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:i,"aria-checked":i,children:(0,r.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,r.jsx)(_.l.Divider,{}),(0,r.jsx)(_.l.Item,{onSelect:()=>{a(i.VR),(0,m.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,r.jsx)(_.l.Divider,{}),(0,r.jsx)(_.l.Item,{onSelect:R,children:"Create a space"})]}):(0,r.jsx)(_.l.Item,{ref:j,onSelect:R,children:"Create your first space"})})})]}),I?(0,r.jsx)(s.D,{closeDialog:()=>{(0,m.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),N(!1)}}):null]})}try{b.displayName||(b.displayName="SpacesSelect")}catch{}var w=a(29731),S=a(83494),j=a(96459),I=a(8625),N=a(38621),R=a(52870),E=a(26108),T=a(21373),A=a(94747),k=a(96379),M=a(7277),L=a(47970),P=a(33592),F=a(79216),O=a(97949);let D=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,$=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function B(e){let t=await (0,k.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new $;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function U(e){let{itemUrl:t}=e,a=await (0,k.lS)(`/copilot/chat-links?item_url=${t}`);if(!a.ok)throw Error(`Failed to fetch reference data (${a.status}: ${a.statusText})`);return await a.json()}var W=a(69093),V=a(25811),z=a(88431),q=a(17925),H=a(51213),G=a(79064),K=a(72303);let Q=async(e,t,a,r,n,i,s)=>{if(!l.W.askModeDropdown){if((e[0]??"")!=="/")return!1;e=e.substring(1)}let o=(({manager:e,chatState:t,availableCommands:a})=>{let r="assistive"===t.mode?[{label:"Delete chat",key:"delete",icon:N.TrashIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,K.W)(a);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Rename conversation",key:"rename",icon:N.PencilIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,K.W)(a);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Start a new conversation",key:"new",icon:N.PlusIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}}]:[];if("immersive"===t.mode&&l.W.chatInputCommands)for(let t of a)t.execute&&r.push({key:t.key,action:async(a,r,n)=>await t.execute(a,r,n,e)});return r})({manager:a,chatState:t,availableCommands:n}),c=l.W.askModeDropdown?o.filter(e=>e.key.toLowerCase()===i?.toLowerCase()):o.filter(t=>{let a=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.key.toLowerCase()===a});if(1!==c.length)return!1;let d=c[0],u=l.W.askModeDropdown?e.trim():e.substring(d.key.length).trim();return s&&(s.selectedRepo||s.selectedBranch||s.selectedAgent)&&(u=JSON.stringify({text:u,selectedRepo:s.selectedRepo,selectedBranch:s.selectedBranch,selectedAgent:s.selectedAgent})),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:d.key,activeModeName:i}),await d.action(u,t,r)};var Z=a(46062),J=a(56708),Y=a(61180);function X(e,t){return l.W.askModeDropdown?e===H.II.Task:"task"===t}function ee(e,t,a){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=a.get("prompt");if(e)return e}}var et=a(26239),ea=a(60905),er=a(76166),en=a(72439),ei=a(23657),el=a(72206),es=a(5839);let eo=()=>(0,r.jsx)("span",{role:"img","aria-label":"Starred",style:{color:"var(--button-star-iconColor)"},children:(0,r.jsx)(N.StarFillIcon,{})}),ec=e=>`${e.owner}-${e.id}`;function ed({openCreateSpaceDialog:e,setPendingSpace:t,clearSpaceSelection:a,activeCopilotSpaceId:n,readOnly:l}){let s=(0,P.b)(),[c,d]=(0,p.useState)(!1),u=(0,p.useRef)(null),[h,f]=(0,p.useState)(""),[g,y]=(0,p.useState)(""),[x,v]=(0,p.useState)([]),[C,b]=(0,p.useState)(!1),[w,S]=(0,p.useState)(!1);(0,p.useEffect)(()=>{S(window.location.pathname.startsWith(i.Jz))},[]);let j=()=>{d(!1),e(!0),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_CREATE_SPACE",mode:"immersive"})},I=(0,p.useCallback)(e=>{n&&e.id===n.id&&e.owner===n.owner?a():(s.addReference({...e,type:"copilot-space"},"spaces"),t({id:e.id,owner:e.owner}),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SELECT_SPACE",space:`${e.owner}/${e.id}`})),d(!1)},[n,a,s,t]),R=(0,p.useCallback)(async e=>{try{let t=new URLSearchParams({q:e}),a=await (0,k.lS)(`/github-copilot/chat/custom_copilots/search?${t.toString()}`);if(!a.ok)throw Error("Failed to fetch spaces");return await a.json()}catch{return[]}},[]);(0,p.useEffect)(()=>{let e=!1;return(async()=>{if(!c)return;b(!0);let t=await R(g);e||(v(t),b(!1))})(),()=>{e=!0}},[R,g,c]),(0,p.useEffect)(()=>()=>{u.current&&clearTimeout(u.current)},[]);let E=(0,o.BV)(),A=(0,p.useMemo)(()=>x.map(e=>({id:ec(e),key:ec(e),text:e.name.length>40?`${e.name.slice(0,40)}...`:e.name,description:e.owner,descriptionVariant:"inline",value:ec(e),trailingVisual:e.starred?eo:void 0})),[x]);if(!E||l)return null;let M=n?A.find(e=>e.id===ec(n)):void 0;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(es.X,{align:"end",title:"Select a space",subtitle:"Recent spaces",renderAnchor:e=>(0,r.jsxs)(_.l.Item,{as:"button",...e,children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.SpaceIcon,{})}),"Spaces\u2026",(0,r.jsx)(_.l.TrailingVisual,{children:(0,r.jsx)(N.ChevronRightIcon,{})})]}),open:c,onOpenChange:e=>{e&&(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),d(e)},loading:C,items:A,filterValue:h,onFilterChange:e=>{f(e),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{y(e)},350)},...{selected:M,onSelectedChange:e=>{let t=x.find(t=>ec(t)===e?.id);t&&(I(t),G.Jt.setLastSelectedSpace(t))}},overlayProps:{height:"auto",width:"large",anchorSide:"outside-right"},message:0!==x.length||C?void 0:{title:"No spaces found",body:"You can create a new space to get started.",variant:"empty",action:(0,r.jsx)(T.Q,{variant:"default",size:"small",onClick:j,children:"Create a new space"})},secondaryAction:w&&x.length>0?(0,r.jsx)(es.X.SecondaryActionButton,{onClick:j,children:"Create a space"}):void 0})})}try{eo.displayName||(eo.displayName="StarredIcon")}catch{}try{ed.displayName||(ed.displayName="SpacesSelectNew")}catch{}var eu=a(14521),em=a(47789),eh=a(99054),ep=a(77430);function ef(e){let t,a,i,l,s,o,c=(0,n.c)(24),{onSelectPanel:d,onSelectAgent:u}=e,{availableAgents:h,showLimit:p,disabled:f,loading:g}=(0,eh.JE)(),y=h&&h.length>0;if(g){let e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(_.l.Item,{disabled:!0,children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.AppsIcon,{})}),"Extensions\u2026"]}),c[0]=e):e=c[0],e}if(f){let e,t,a;return c[1]!==d?(e=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),d("agents-not-supported")},c[1]=d,c[2]=e):e=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.AppsIcon,{})}),c[3]=t):t=c[3],c[4]!==e?(a=(0,r.jsxs)(_.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),c[4]=e,c[5]=a):a=c[5],a}if(!y){let e,t,a;return c[6]!==d?(e=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),d("no-agents-available")},c[6]=d,c[7]=e):e=c[7],c[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.AppsIcon,{})}),c[8]=t):t=c[8],c[9]!==e?(a=(0,r.jsxs)(_.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),c[9]=e,c[10]=a):a=c[10],a}if(c[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(x.W.Anchor,{children:(0,r.jsxs)(_.l.Item,{onSelect:ey,children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.AppsIcon,{})}),"Extensions\u2026"]})}),c[11]=t):t=c[11],c[12]!==h||c[13]!==u||c[14]!==p){let e;c[16]!==u||c[17]!==p?(e=e=>(0,r.jsxs)(_.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),u(e)},children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(ep.r,{src:e.avatarUrl})}),e.name,!p&&(0,r.jsxs)(_.l.Description,{variant:"inline",truncate:!0,children:[eh.Z3,e.slug]}),p&&(0,r.jsx)(_.l.Description,{variant:"block",children:"Start a new chat to use other extensions."})]},e.slug),c[16]=u,c[17]=p,c[18]=e):e=c[18],a=h.map(e),c[12]=h,c[13]=u,c[14]=p,c[15]=a}else a=c[15];return c[19]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(_.l.Divider,{}),c[19]=i):i=c[19],c[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.TelescopeIcon,{})}),c[20]=l):l=c[20],c[21]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsxs)(_.l.LinkItem,{href:eh.bn,onClick:eg,children:[l,"Marketplace",(0,r.jsx)(_.l.TrailingVisual,{children:(0,r.jsx)(N.LinkExternalIcon,{})})]}),c[21]=s):s=c[21],c[22]!==a?(o=(0,r.jsxs)(x.W,{children:[t,(0,r.jsx)(x.W.Overlay,{width:"small",children:(0,r.jsxs)(_.l,{children:[a,i,s]})})]}),c[22]=a,c[23]=o):o=c[23],o}function eg(){(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ey(){(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{ef.displayName||(ef.displayName="AgentMenu")}catch{}var ex=a(84268),ev=a(15220);let eC="AgentsDialogs-module__dialogContentWrapper--v7abd",e_="AgentsDialogs-module__dialogTitle--tEo3x",eb="AgentsDialogs-module__dialogDescription--LPgKm";function ew(e){let t,a,i=(0,n.c)(4),{onClose:l,returnFocusRef:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},i[0]=t):t=i[0],i[1]!==l||i[2]!==s?(a=(0,r.jsx)(ev.l,{width:"large",title:"Extensions",position:t,onClose:l,returnFocusRef:s,renderBody:eS}),i[1]=l,i[2]=s,i[3]=a):a=i[3],a}function eS(){return(0,r.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",children:(0,r.jsxs)("div",{className:eC,children:[(0,r.jsx)(N.TelescopeIcon,{size:24}),(0,r.jsx)("h3",{className:e_,children:"Chat with your favorite tools and services"}),(0,r.jsx)("p",{className:eb,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,r.jsx)(T.Q,{as:"a",href:eh.bn,children:"Browse marketplace"}),(0,r.jsx)("div",{className:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",children:(0,r.jsx)(ex.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function ej(e){let t,a,i,l=(0,n.c)(9),{onClose:s,returnFocusRef:d}=e,u=(0,P.b)(),m=(0,c.Pk)(),h=(0,o.BV)(),p=(0,Z.GF)(m.availableModels);return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},l[0]=t):t=l[0],l[1]!==h||l[2]!==p||l[3]!==u?(a=()=>(0,r.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",children:(0,r.jsxs)("div",{className:eC,children:[(0,r.jsx)("div",{className:"AgentsDialogs-module__alertIconContainer--jNjdz",children:(0,r.jsx)(N.AlertIcon,{size:24})}),(0,r.jsxs)("h3",{className:e_,children:[h?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,r.jsxs)("p",{className:eb,children:["Switch back to the ",p.displayName," model or start a new chat"]}),(0,r.jsx)(T.Q,{onClick:()=>{u.selectThread(null),u.selectModel(p)},children:"New chat"})]})}),l[1]=h,l[2]=p,l[3]=u,l[4]=a):a=l[4],l[5]!==s||l[6]!==d||l[7]!==a?(i=(0,r.jsx)(ev.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:d,renderBody:a}),l[5]=s,l[6]=d,l[7]=a,l[8]=i):i=l[8],i}try{ew.displayName||(ew.displayName="NoAgentsAvailableDialog")}catch{}try{ej.displayName||(ej.displayName="AgentsNotSupportedDialog")}catch{}var eI=a(59788),eN=a(97564);function eR(e){let t,a,l,s=(0,n.c)(10),{isOpen:o,onClose:d,initialRepo:u,onRepoSelect:m}=e,h=(0,P.b)(),{findFileWorkerPath:f}=(0,c.Pk)(),g=(0,p.useRef)(null);s[0]!==h||s[1]!==d?(t=async e=>{if(0===e.length)return void d();let t=await (0,eN.V)(e[0].repositoryId);for(let a of e.map(e=>"github_folder"===e.type?(0,i.OC)(e.filePath,t):(0,i.Od)(e.filePath,t)))h.addReference(a,"references-menu");d()},s[0]=h,s[1]=d,s[2]=t):t=s[2];let y=t;return o?(s[3]===Symbol.for("react.memo_cache_sentinel")?(a=[],s[3]=a):a=s[3],s[4]!==f||s[5]!==y||s[6]!==u||s[7]!==d||s[8]!==m?(l=(0,r.jsx)(eI.Q,{formData:a,onCancel:d,onSaveFiles:y,findFileWorkerPath:f,attachmentButtonRef:g,initialRepo:u,onRepoSelect:m,allowFolderReferences:!0,maxFileCount:20}),s[4]=f,s[5]=y,s[6]=u,s[7]=d,s[8]=m,s[9]=l):l=s[9],l):null}try{eR.displayName||(eR.displayName="CopilotFilePicker")}catch{}var eE=a(35673),eT=a(71363);let eA=(0,p.memo)(({panel:e,onPanelChange:t,anchorRef:a,initialRepo:n,onRepoSelect:i,...o})=>{let d,h,f,g,y,{inputRef:v}=o,C=(0,P.b)(),b=(0,c.Pk)(),S=(0,em.qw)(),{supportedAttachmentTypes:j,supportedReferenceTypes:I}=(d=null!==(0,eu.G)(),h=["upload"],d||h.push("repositories"),!d&&l.W.spacesAsAttachmentsEnabled&&h.push("copilot-spaces"),d||h.push("agents"),d||h.push("plugin-attachment-contribution"),{supportedAttachmentTypes:h,supportedReferenceTypes:d?["files"]:["files","folders"]}),{model:R}=(0,c.bP)("model"),E=l.W.previewFeaturesVisionGate&&b.hasCEorCBAccess&&!b.optedInToPreviewFeatures,T="immersive"===b.mode&&!!R.capabilities?.supports?.vision&&!E,A=(0,eh.kw)(o),k=(0,p.useRef)(null),{handleSpaceSelect:M,clearSpaceSelection:L,activeCopilotSpaceId:F,readOnly:O}=(0,u.C)(),[D,$]=(0,p.useState)(!1);return(0,r.jsxs)("div",{children:[j.includes("upload")&&(0,r.jsx)("input",{id:"image-uploader",...(0,w.G)("image-uploader"),hidden:!0,ref:k,type:"file",accept:[T?ea.s.getAllowedImageFileExtensions(R):"",en.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,a]=ea.s.getAllowedFiles([...e.target.files],R),r=[];for(let e of(T?new ea.s(b,C).addImageAttachments(t,"menu"):r.push(...t),a))new en.E(C).addAttachment(e);for(let e of r)(0,m.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,r.jsx)(x.W,{anchorRef:a,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,r.jsx)(x.W.Overlay,{width:"small",side:o.side??"outside-bottom",align:"start",portalContainerName:"assistive"===b.mode?eE.E5:void 0,children:(0,r.jsxs)(_.l,{children:[!l.W.copilotChatRepositoryPicker&&j.includes("repositories")&&(0,r.jsxs)(_.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"open",component:"ATTACHMENT_MENU",mode:b.mode}),t("repositories")},children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.RepoIcon,{})}),"Repositories\u2026"]}),(0,r.jsxs)(_.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:b.mode}),t("multi-file-picker")},children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.FileCodeIcon,{})}),(f=I.includes("files"),g=I.includes("folders"),y=I.includes("symbols"),f&&g&&y?"Files, folders, and symbols":f&&g?"Files and folders":f&&y?"Files and symbols":g&&y?"Folders and symbols":f?"Files":g?"Folders":y?"Symbols":"References"),"\u2026"]}),j.includes("copilot-spaces")&&(0,r.jsx)(ed,{openCreateSpaceDialog:$,setPendingSpace:M,clearSpaceSelection:L,activeCopilotSpaceId:F,readOnly:O}),S.map(e=>{let a=e.attachmentMenuContribution;return a?(0,r.jsx)(a.MenuItemComponent,{onSelect:()=>t(a.attachmentType)},e.id):null}),j.includes("upload")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.l.Divider,{}),(0,r.jsxs)(_.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:b.mode}),t(null),k.current?.click()},children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.UploadIcon,{})}),"Upload from computer"]})]}),j.includes("agents")&&!l.W.hideExtensionsInDotcomChat&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.l.Divider,{}),(0,r.jsx)(ef,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>A(e.slug))})]})]})})}),"multi-file-picker"===e&&(0,r.jsx)(eR,{isOpen:!0,onClose:()=>t(null),initialRepo:n,onRepoSelect:i}),!l.W.copilotChatRepositoryPicker&&(0,r.jsx)(eT.F,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:v,cancelReturnFocusRef:a,onRepoSelect:i}),D&&(0,r.jsx)(s.D,{closeDialog:()=>$(!1),onSubmit:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SPACE_CREATED",mode:"immersive"})}}),"no-agents-available"===e&&(0,r.jsx)(ew,{onClose:()=>t(null),returnFocusRef:a}),"agents-not-supported"===e&&(0,r.jsx)(ej,{onClose:()=>t(null),returnFocusRef:a}),j.includes("plugin-attachment-contribution")&&S.map(n=>n.attachmentMenuContribution&&n.attachmentMenuContribution.attachmentType===e?(0,r.jsx)(n.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),v.current?.focus()},onDismiss:()=>{t(null),a.current?.focus()}},n.id):null)]})});eA.displayName="AttachmentMenu";var ek=a(51112);let eM={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},eL=[{name:eM.agents,icon:N.AppsIcon,value:"agents",where:"start"},{name:eM.repositories,icon:N.RepoIcon,value:"repositories",where:"anywhere"},{name:eM.files,icon:N.FileIcon,value:"repositories:files",where:"anywhere"},{name:eM.issues,icon:N.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:eM.pulls,icon:N.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:eM.discussions,icon:N.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}];function eP(e){let t,a,i,l,s,o=(0,n.c)(12);return o[0]!==e?({agent:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t.avatarUrl?(i=(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(ep.r,{src:t.avatarUrl})}),o[3]=t.avatarUrl,o[4]=i):i=o[4],o[5]!==t.slug?(l=(0,r.jsxs)(_.l.Description,{variant:"inline",truncate:!0,children:[eh.Z3,t.slug]}),o[5]=t.slug,o[6]=l):l=o[6],o[7]!==t.name||o[8]!==a||o[9]!==i||o[10]!==l?(s=(0,r.jsxs)(_.l.Item,{...a,children:[i,t.name,l]}),o[7]=t.name,o[8]=a,o[9]=i,o[10]=l,o[11]=s):s=o[11],s}try{eP.displayName||(eP.displayName="AgentSuggestion")}catch{}function eF(e){let t,a,i,l,s,o,c,d,u=(0,n.c)(20);u[0]!==e?({leadingVisual:t,...a}=e,u[0]=e,u[1]=t,u[2]=a):(t=u[1],a=u[2]);let m=(0,p.useId)(),h=(0,p.useId)();return u[3]!==h||u[4]!==m?(i=(0,f.$)(m,h),u[3]=h,u[4]=m,u[5]=i):i=u[5],u[6]!==t?(l=void 0!==t&&(0,r.jsx)(_.l.LeadingVisual,{children:t}),u[6]=t,u[7]=l):l=u[7],u[8]!==m||u[9]!==a.children?(s=(0,r.jsx)("span",{id:m,children:a.children}),u[8]=m,u[9]=a.children,u[10]=s):s=u[10],u[11]!==h?(o=(0,r.jsx)("span",{className:"d-none","aria-hidden":!0,id:h,children:"Opens in new tab."}),u[11]=h,u[12]=o):o=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(_.l.TrailingVisual,{children:(0,r.jsx)(N.LinkExternalIcon,{})}),u[13]=c):c=u[13],u[14]!==a||u[15]!==i||u[16]!==l||u[17]!==s||u[18]!==o?(d=(0,r.jsxs)(_.l.Item,{...a,"aria-labelledby":i,children:[l,s,o,c]}),u[14]=a,u[15]=i,u[16]=l,u[17]=s,u[18]=o,u[19]=d):d=u[19],d}try{eF.displayName||(eF.displayName="LinkSuggestion")}catch{}function eO(e){return{value:`@${e.slug}`,render:t=>(0,r.jsx)(eP,{agent:e,...t})}}function eD(e){let t,a,i,l,s,o=(0,n.c)(9);return o[0]!==e?({leadingVisual:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t?(i=void 0!==t&&(0,r.jsx)(_.l.LeadingVisual,{children:t}),o[3]=t,o[4]=i):i=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(_.l.TrailingVisual,{children:(0,r.jsx)(N.ArrowRightIcon,{})}),o[5]=l):l=o[5],o[6]!==a||o[7]!==i?(s=(0,r.jsxs)(_.l.Item,{"aria-haspopup":!0,...a,children:[i,a.children,l]}),o[6]=a,o[7]=i,o[8]=s):s=o[8],s}try{eD.displayName||(eD.displayName="MultistepSuggestion")}catch{}function e$(e){let t,a,i,l,s=(0,n.c)(9);s[0]!==e?({category:a,...t}=e,s[0]=e,s[1]=t,s[2]=a):(t=s[1],a=s[2]);let{name:o,icon:c}=a;return s[3]!==c?(i=(0,r.jsx)(c,{}),s[3]=c,s[4]=i):i=s[4],s[5]!==o||s[6]!==t||s[7]!==i?(l=(0,r.jsx)(eD,{leadingVisual:i,...t,children:o}),s[5]=o,s[6]=t,s[7]=i,s[8]=l):l=s[8],l}try{e$.displayName||(e$.displayName="CategorySuggestion")}catch{}var eB=a(69497);let eU="shared-module__asyncSuggestion--AXibl",eW="shared-module__stale--R4Im6";function eV(e){let t,a,i,l,s,o,c,d,u,m,h,p=(0,n.c)(25);p[0]!==e?({discussion:a,stale:l,className:t,...i}=e,p[0]=e,p[1]=t,p[2]=a,p[3]=i,p[4]=l):(t=p[1],a=p[2],i=p[3],l=p[4]);let g=l&&eW;return p[5]!==t||p[6]!==g?(s=(0,f.$)(eU,g,t),p[5]=t,p[6]=g,p[7]=s):s=p[7],p[8]!==a.state?(o="open"===a.state&&(0,r.jsx)(N.CommentDiscussionIcon,{className:"fgColor-open"}),p[8]=a.state,p[9]=o):o=p[9],p[10]!==a.state?(c="closed"===a.state&&(0,r.jsx)(N.DiscussionClosedIcon,{className:"fgColor-muted"}),p[10]=a.state,p[11]=c):c=p[11],p[12]!==o||p[13]!==c?(d=(0,r.jsxs)(_.l.LeadingVisual,{children:[o,c]}),p[12]=o,p[13]=c,p[14]=d):d=p[14],p[15]!==a.title?(u=(0,r.jsx)(eB.A,{title:a.title,maxWidth:350,children:a.title}),p[15]=a.title,p[16]=u):u=p[16],p[17]!==a.number?(m=(0,r.jsxs)(_.l.Description,{children:["#",a.number]}),p[17]=a.number,p[18]=m):m=p[18],p[19]!==i||p[20]!==s||p[21]!==d||p[22]!==u||p[23]!==m?(h=(0,r.jsxs)(_.l.Item,{...i,className:s,children:[d,u,m]}),p[19]=i,p[20]=s,p[21]=d,p[22]=u,p[23]=m,p[24]=h):h=p[24],h}try{eV.displayName||(eV.displayName="DiscussionSuggestion")}catch{}function ez(e){let t,a,i,l,s,o,c,d,u,m,h,p,g,y,x,v=(0,n.c)(35);if(v[0]!==e?({type:s,path:a,stale:l,className:t,...i}=e,v[0]=e,v[1]=t,v[2]=a,v[3]=i,v[4]=l,v[5]=s):(t=v[1],a=v[2],i=v[3],l=v[4],s=v[5]),v[6]!==t||v[7]!==a||v[8]!==i||v[9]!==l||v[10]!==s){let e=a.split("/"),n=e.pop();c=_.l.Item,m=i;let y=l&&eW;v[19]!==t||v[20]!==y?(h=(0,f.$)(eU,y,t),v[19]=t,v[20]=y,v[21]=h):h=v[21],v[22]!==s?(p=(0,r.jsx)(_.l.LeadingVisual,{children:"folder"===s?(0,r.jsx)(N.FileDirectoryFillIcon,{}):(0,r.jsx)(N.FileIcon,{})}),v[22]=s,v[23]=p):p=v[23],g=n,o=_.l.Description,d="inline",u=e.join("/"),v[6]=t,v[7]=a,v[8]=i,v[9]=l,v[10]=s,v[11]=o,v[12]=c,v[13]=d,v[14]=u,v[15]=m,v[16]=h,v[17]=p,v[18]=g}else o=v[11],c=v[12],d=v[13],u=v[14],m=v[15],h=v[16],p=v[17],g=v[18];return v[24]!==o||v[25]!==d||v[26]!==u?(y=(0,r.jsxs)(o,{variant:d,children:[u,"/"]}),v[24]=o,v[25]=d,v[26]=u,v[27]=y):y=v[27],v[28]!==c||v[29]!==m||v[30]!==h||v[31]!==p||v[32]!==g||v[33]!==y?(x=(0,r.jsxs)(c,{...m,className:h,children:[p,g,y]}),v[28]=c,v[29]=m,v[30]=h,v[31]=p,v[32]=g,v[33]=y,v[34]=x):x=v[34],x}try{ez.displayName||(ez.displayName="FileSuggestion")}catch{}function eq(e){let t,a,i,l,s,o,c,d,u,m,h,p,g=(0,n.c)(28);g[0]!==e?({issue:a,stale:l,className:t,...i}=e,g[0]=e,g[1]=t,g[2]=a,g[3]=i,g[4]=l):(t=g[1],a=g[2],i=g[3],l=g[4]);let y=l&&eW;return g[5]!==t||g[6]!==y?(s=(0,f.$)(eU,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==a.state?(o="draft"===a.state&&(0,r.jsx)(N.IssueDraftIcon,{className:"fgColor-draft"}),g[8]=a.state,g[9]=o):o=g[9],g[10]!==a.state?(c="open"===a.state&&(0,r.jsx)(N.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=a.state,g[11]=c):c=g[11],g[12]!==a.state?(d="closed"===a.state&&(0,r.jsx)(N.IssueClosedIcon,{className:"fgColor-done"}),g[12]=a.state,g[13]=d):d=g[13],g[14]!==o||g[15]!==c||g[16]!==d?(u=(0,r.jsxs)(_.l.LeadingVisual,{children:[o,c,d]}),g[14]=o,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==a.title?(m=(0,r.jsx)(eB.A,{title:a.title,maxWidth:350,children:a.title}),g[18]=a.title,g[19]=m):m=g[19],g[20]!==a.number?(h=(0,r.jsxs)(_.l.Description,{children:["#",a.number]}),g[20]=a.number,g[21]=h):h=g[21],g[22]!==i||g[23]!==s||g[24]!==u||g[25]!==m||g[26]!==h?(p=(0,r.jsxs)(_.l.Item,{...i,className:s,children:[u,m,h]}),g[22]=i,g[23]=s,g[24]=u,g[25]=m,g[26]=h,g[27]=p):p=g[27],p}try{eq.displayName||(eq.displayName="IssueSuggestion")}catch{}function eH(e){let t,a,i,l,s,o,c,d,u,m,h,p,g=(0,n.c)(28);g[0]!==e?({pullRequest:i,stale:l,className:t,...a}=e,g[0]=e,g[1]=t,g[2]=a,g[3]=i,g[4]=l):(t=g[1],a=g[2],i=g[3],l=g[4]);let y=l&&eW;return g[5]!==t||g[6]!==y?(s=(0,f.$)(eU,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==i.state?(o="draft"===i.state&&(0,r.jsx)(N.GitPullRequestDraftIcon,{className:"fgColor-draft"}),g[8]=i.state,g[9]=o):o=g[9],g[10]!==i.state?(c="open"===i.state&&(0,r.jsx)(N.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=i.state,g[11]=c):c=g[11],g[12]!==i.state?(d="closed"===i.state&&(0,r.jsx)(N.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=i.state,g[13]=d):d=g[13],g[14]!==o||g[15]!==c||g[16]!==d?(u=(0,r.jsxs)(_.l.LeadingVisual,{children:[o,c,d]}),g[14]=o,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==i.title?(m=(0,r.jsx)(eB.A,{title:i.title,maxWidth:350,children:i.title}),g[18]=i.title,g[19]=m):m=g[19],g[20]!==i.number?(h=(0,r.jsxs)(_.l.Description,{children:["#",i.number]}),g[20]=i.number,g[21]=h):h=g[21],g[22]!==a||g[23]!==s||g[24]!==u||g[25]!==m||g[26]!==h?(p=(0,r.jsxs)(_.l.Item,{...a,className:s,children:[u,m,h]}),g[22]=a,g[23]=s,g[24]=u,g[25]=m,g[26]=h,g[27]=p):p=g[27],p}try{eH.displayName||(eH.displayName="PullRequestSuggestion")}catch{}function eG(e){let t,a,i,l,s,o,c,d,u=(0,n.c)(18);u[0]!==e?({repository:l,isMultistep:a,stale:s,className:t,...i}=e,u[0]=e,u[1]=t,u[2]=a,u[3]=i,u[4]=l,u[5]=s):(t=u[1],a=u[2],i=u[3],l=u[4],s=u[5]);let m=s&&eW;u[6]!==t||u[7]!==m?(o=(0,f.$)(eU,m,t),u[6]=t,u[7]=m,u[8]=o):o=u[8];let h=o;u[9]!==l.isInOrganization||u[10]!==l.ownerAvatarUrl?(c=l.ownerAvatarUrl?(0,r.jsx)(ep.r,{src:l.ownerAvatarUrl,alt:"",size:16,square:l.isInOrganization}):(0,r.jsx)(N.RepoIcon,{}),u[9]=l.isInOrganization,u[10]=l.ownerAvatarUrl,u[11]=c):c=u[11];let p=c;return u[12]!==p||u[13]!==h||u[14]!==a||u[15]!==i||u[16]!==l.nwo?(d=a?(0,r.jsx)(eD,{...i,className:h,leadingVisual:p,children:l.nwo},l.nwo):(0,r.jsxs)(_.l.Item,{...i,className:h,children:[(0,r.jsx)(_.l.LeadingVisual,{children:p}),l.nwo]},l.nwo),u[12]=p,u[13]=h,u[14]=a,u[15]=i,u[16]=l.nwo,u[17]=d):d=u[17],d}try{eG.displayName||(eG.displayName="RepositorySuggestion")}catch{}function eK(e){return{value:null,key:e.value,render:t=>(0,r.jsx)(e$,{category:e,...t})}}function eQ(e){return null!==e}var eZ=a(84331);function eJ(e){return{value:`/${e.key}`,key:e.key,render:t=>(0,r.jsxs)(_.l.Item,{...t,children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(e.icon,{})}),e.name,(0,r.jsx)(_.l.Description,{variant:"block",children:e.description})]})}}var eY=a(97286);function eX(e){let t,a,r=(0,n.c)(3),[i,l]=(0,p.useState)(null);return(null===i&&null!==e||null!==i&&null===e)&&l(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>l(e),200);return()=>clearTimeout(t)},a=[e],r[0]=e,r[1]=t,r[2]=a):(t=r[1],a=r[2]),(0,p.useEffect)(t,a),i}function e0(e){return e}async function e1(e,t,a,r){return new Promise((n,i)=>{if(!window.Worker)return void setTimeout(()=>n(e.filter(e=>e.includes(t))));let l=new Worker(a);l.addEventListener("message",e=>n(e.data.list)),l.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{l.terminate(),i(Error("Worker aborted"))}),l.postMessage({baseList:e,query:t})})}function e2(e){return e}function e5(e){return e}function e3(e){return e}var e4=a(26408);function e7(e){let t,a,i,l,s=(0,n.c)(9);return s[0]!==e?({org:t,...a}=e,s[0]=e,s[1]=t,s[2]=a):(t=s[1],a=s[2]),s[3]!==t.avatarUrl?(i=(0,r.jsx)(ep.r,{square:!0,src:t.avatarUrl}),s[3]=t.avatarUrl,s[4]=i):i=s[4],s[5]!==t.login||s[6]!==a||s[7]!==i?(l=(0,r.jsx)(eF,{leadingVisual:i,...a,children:t.login}),s[5]=t.login,s[6]=a,s[7]=i,s[8]=l):l=s[8],l}function e6(e){let t,a,i,l=(0,n.c)(7);return l[0]!==e?({orgs:t,...a}=e,l[0]=e,l[1]=t,l[2]=a):(t=l[1],a=l[2]),l[3]!==t[0]?.login||l[4]!==t.length||l[5]!==a?(i=1===t.length?(0,r.jsxs)(eF,{leadingVisual:(0,r.jsx)(N.ShieldLockIcon,{}),...a,children:["Single sign-on to ",(0,r.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,r.jsx)(eD,{leadingVisual:(0,r.jsx)(N.ShieldLockIcon,{}),...a,children:"Single sign-on for more"}),l[3]=t[0]?.login,l[4]=t.length,l[5]=a,l[6]=i):i=l[6],i}try{e7.displayName||(e7.displayName="SSOOrgSuggestion")}catch{}try{e6.displayName||(e6.displayName="SSOPromptSuggestion")}catch{}let e8=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function e9(e){return{value:null,key:`open-link:${e8(e)}`,render:t=>(0,r.jsx)(e7,{org:e,...t})}}function te(e){let t,a,i,s,o,d,u,h,f,g,y,x,v,C=(0,n.c)(35),{children:b,onSelectCommand:w,onSelectReference:S,onShowAgentsDialog:j,hideAutocomplete:I,availableCommands:R}=e,{mode:E}=(0,c.Pk)();C[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}],l.W.chatInputCommands&&t.push({triggerChar:"/",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!1}),C[0]=t):t=C[0];let[T,A]=(0,p.useState)(tt);C[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>A(!0),i=[],C[1]=a,C[2]=i):(a=C[1],i=C[2]),(0,p.useEffect)(a,i);let[k,M]=(0,p.useState)(null);C[3]!==R||C[4]!==k?(s={query:k,availableCommands:R},C[3]=R,C[4]=k,C[5]=s):s=C[5];let{suggestions:L,stale:O}=function(e){let t=(0,n.c)(9),{query:a,availableCommands:i}=e,s=function(e,t){let a,r=(0,n.c)(5);e:{let n,i;if(!t){a=null;break e}r[0]!==e||r[1]!==t.filter?(n=""===t.filter.trim()?e:e.filter(e=>(0,eZ.dt)(e.name,t.filter)>.5&&e.key!==t.filter.toLowerCase()),r[0]=e,r[1]=t.filter,r[2]=n):n=r[2];let l=n;r[3]!==l?(i=l.map(eJ),r[3]=l,r[4]=i):i=r[4],a=i}return a}(i,a?.category==="commands"?a:null),o=function(e){let t,a=(0,n.c)(3),{currentReferences:i}=(0,c.Pk)();e:{let n;if(!e){t=null;break e}if(a[0]!==i||a[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=i.map(e=>{let t=F.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,r.jsx)(eG,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...a})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,r.jsx)(eq,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,r.jsx)(eH,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,r.jsx)(eV,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...a})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,r.jsx)(ez,{type:"folder"===t.reference.type?"folder":"file",path:e,...a})}}}return null}).filter(eQ),c=(l.W.hideExtensionsInDotcomChat?eL.filter(e=>"agents"!==e.value):eL).filter(a=>a.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(a.where,e)).map(eK);if(c.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t,{...e}),(0,r.jsx)(_.l.Divider,{})]})}}n=o.concat(c),a[0]=i,a[1]=e,a[2]=n}else n=a[2];t=n}return t}(a?.category==="categories"?a:null),d=function(e){let t,a=(0,n.c)(4),{availableAgents:i,loading:l,showLimit:s,disabled:o}=(0,eh.JE)(null!==e);e:{let n;if(o||!e){t=null;break e}if(l&&!i){t="loading";break e}a[0]!==i||a[1]!==e||a[2]!==s?(n=i?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(eO).concat({value:null,key:`open-link:${eh.bn}`,render:e=>(0,r.jsxs)(r.Fragment,{children:[i.length>0&&(0,r.jsx)(_.l.Divider,{}),(0,r.jsx)(eF,{leadingVisual:(0,r.jsx)(N.TelescopeIcon,{}),...e,inactiveText:s?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,a[0]=i,a[1]=e,a[2]=s,a[3]=n):n=a[3],t=n}return t}(a?.category==="agents"?a:null),u=function(e){let{currentReferences:t}=(0,c.Pk)(),a=eX(e),n=e!==a,{repositories:i,loading:l}=(0,e4.U)(a?.filter??"",null!==a),s=(0,p.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:o}=(0,c.Pk)();return{suggestions:(0,p.useMemo)(()=>{if(!a)return null;if("initial"===l)return"loading";let e=void 0!==a.nextCategory,t=i.toSorted((e,t)=>s.has(e.databaseId)&&!s.has(t.databaseId)?-1:s.has(t.databaseId)&&!s.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:F.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:a=>(0,r.jsx)(eG,{repository:t,isMultistep:e,stale:!!l||n,...a})}))??[];return o.length>0&&t.push({value:null,key:1===o.length?`open-link:${e8(o[0])}`:"sso-orgs",render:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.l.Divider,{}),(0,r.jsx)(e6,{orgs:o,...e})]})}),t},[i,l,a,s,o,n]),stale:!0===l}}(a?.category==="repositories"?a:null),m=function(e){let t,a,i,l,s,o=(0,n.c)(18),{service:c}=(0,P.b)(),d=eX(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-issues",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:e5},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eY.I)(i);e:{let e;if(!d){l=null;break e}if(f.isLoading){l="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:F.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(eq,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],l=e}let g=l;return o[15]!==f.isPlaceholderData||o[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=s):s=o[17],s}(a?.category==="issues"?a:null),h=function(e){let t,a,i,l,s,o=(0,n.c)(18),{service:c}=(0,P.b)(),d=eX(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-pulls",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:e3},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eY.I)(i);e:{let e;if(!d){l=null;break e}if(f.isLoading){l="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:F.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(eH,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],l=e}let g=l;return o[15]!==f.isPlaceholderData||o[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=s):s=o[17],s}(a?.category==="pulls"?a:null),f=function(e){let t,a,i,l,s,o=(0,n.c)(18),{service:c}=(0,P.b)(),d=eX(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-discussions",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:e0},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eY.I)(i);e:{let e;if(!d){l=null;break e}if(f.isLoading){l="loading";break e}o[10]!==d||o[11]!==f.data||o[12]!==f.isPlaceholderData||o[13]!==u?(e=f.data?.map(e=>({value:F.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(eV,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=f.data,o[12]=f.isPlaceholderData,o[13]=u,o[14]=e):e=o[14],l=e}let g=l;return o[15]!==f.isPlaceholderData||o[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=s):s=o[17],s}(a?.category==="discussions"?a:null),g=function(e){var t;let a,i,l,s,o,d,u,m,h,p,f,g,y,x,v=(0,n.c)(23),C=(0,P.b)(),_=null!==e,b=e?.repository;v[0]!==b?(a=["copilot-repository",b],v[0]=b,v[1]=a):a=v[1],v[2]!==C||v[3]!==e?.repository?(i=async()=>{if(!e?.repository)return null;let t=await C.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},v[2]=C,v[3]=e?.repository,v[4]=i):i=v[4],v[5]!==_||v[6]!==a||v[7]!==i?(l={enabled:_,queryKey:a,queryFn:i,staleTime:3e5},v[5]=_,v[6]=a,v[7]=i,v[8]=l):l=v[8];let w=(0,eY.I)(l),S=(t=w.data??null,g=(0,n.c)(11),y=(0,P.b)(),x=null!==t,!0!==g[0]||g[1]!==t?(h=["copilot-repository-files",t,!0],g[0]=!0,g[1]=t,g[2]=h):h=g[2],!0!==g[3]||g[4]!==y||g[5]!==t?(p=async()=>{if(!t)return{};let e=await y.service.listRepoFiles(t,!0);if(!e.ok)throw Error("Failed to fetch files for repository");return e.payload},g[3]=!0,g[4]=y,g[5]=t,g[6]=p):p=g[6],g[7]!==x||g[8]!==h||g[9]!==p?(f={enabled:x,queryKey:h,queryFn:p,staleTime:3e5},g[7]=x,g[8]=h,g[9]=p,g[10]=f):f=g[10],(0,eY.I)(f));S.data?.directories,v[9]!==S.data?.directories?(s=S.data?.directories??[],v[9]=S.data?.directories,v[10]=s):s=v[10],v[11]!==s?(o=new Set(s),v[11]=s,v[12]=o):o=v[12];let j=o;v[13]!==S.data?(d=S.data?(S.data.paths??[]).concat(S.data.directories??[]):null,v[13]=S.data,v[14]=d):d=v[14];let I=function(e,t){let a,r,i,l=(0,n.c)(9),{findFileWorkerPath:s}=(0,c.Pk)();l[0]!==e||l[1]!==t||l[2]!==s?(a=["copilot-worker-filter",s,e,t],r=async a=>{let{signal:r}=a;return e?0===t.length?e:e1(e,t,s,r):[]},l[0]=e,l[1]=t,l[2]=s,l[3]=a,l[4]=r):(a=l[3],r=l[4]);let o=null!==e;return l[5]!==a||l[6]!==r||l[7]!==o?(i={queryKey:a,queryFn:r,enabled:o,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:e2},l[5]=a,l[6]=r,l[7]=o,l[8]=i):i=l[8],(0,eY.I)(i)}(d,e?.filter??"");e:{let t;if(!e){u=null;break e}if(w.isLoading||S.isLoading||I.isLoading){u="loading";break e}v[15]!==j||v[16]!==I.data||v[17]!==I.isPlaceholderData||v[18]!==e?(t=[...I.data?.slice(0,5).map(t=>({value:F.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,r.jsx)(ez,{...e,path:t,type:j.has(t)?"folder":"file",stale:I.isPlaceholderData})}))??[]],v[15]=j,v[16]=I.data,v[17]=I.isPlaceholderData,v[18]=e,v[19]=t):t=v[19];let a=t;u=a.length>0?a:null}let N=u;return v[20]!==w.isPlaceholderData||v[21]!==N?(m={suggestions:N,stale:w.isPlaceholderData},v[20]=w.isPlaceholderData,v[21]=N,v[22]=m):m=v[22],m}(a?.category==="files"?a:null),y=function(e){let t,a=(0,n.c)(5),{ssoOrganizations:r}=(0,c.Pk)();e:{let n;if(!e){t=null;break e}if(a[0]!==e||a[1]!==r){let t;a[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),a[3]=e,a[4]=t):t=a[4],n=r.filter(t).slice(0,10).map(e9),a[0]=e,a[1]=r,a[2]=n}else n=a[2];t=n}return t}(a?.category==="sso-orgs"?a:null);switch(a?.category){case"commands":{let e;return t[0]!==s?(e={suggestions:s,stale:!1},t[0]=s,t[1]=e):e=t[1],e}case void 0:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[2]=e):e=t[2],e}case"categories":{let e;return t[3]!==o?(e={suggestions:o,stale:!1},t[3]=o,t[4]=e):e=t[4],e}case"repositories":return u;case"issues":return m;case"agents":{let e;return t[5]!==d?(e={suggestions:d,stale:!1},t[5]=d,t[6]=e):e=t[6],e}case"discussions":return f;case"pulls":return h;case"files":return g;case"sso-orgs":{let e;return t[7]!==y?(e={suggestions:y,stale:!1},t[7]=y,t[8]=e):e=t[8],e}}}(s);if(C[6]!==j||C[7]!==k?(o={query:k,onShowAgentsDialog:j},C[6]=j,C[7]=k,C[8]=o):o=C[8],!function(e){let t,a,r=(0,n.c)(12),{query:i,onShowAgentsDialog:l}=e,s=i?.category==="agents",{availableAgents:o,loading:c,disabled:d}=(0,eh.JE)(s);r[0]!==s||r[1]!==o?.length||r[2]!==d||r[3]!==c||r[4]!==l?(t=()=>{s&&!c&&(d?l("agents-not-supported"):o?.length||l("no-agents-available"))},r[0]=s,r[1]=o?.length,r[2]=d,r[3]=c,r[4]=l,r[5]=t):t=r[5],r[6]!==s||r[7]!==o||r[8]!==d||r[9]!==c||r[10]!==l?(a=[s,c,o,d,l],r[6]=s,r[7]=o,r[8]=d,r[9]=c,r[10]=l,r[11]=a):a=r[11],(0,p.useEffect)(t,a)}(o),!T||I){let e;return C[9]!==b?(e=(0,r.jsx)("div",{children:b}),C[9]=b,C[10]=e):e=C[10],e}C[11]!==E||C[12]!==w||C[13]!==S||C[14]!==k?(d=e=>{let{suggestion:t}=e,a="string"==typeof t?t:t.value;if((0,m.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:E,suggestion:a}),"object"==typeof t&&k?.category==="commands")return void w?.(t.key);let r=null!==a&&k?.category!=="agents"?F.Q.parse(a):void 0;if(r&&S(r),"object"!=typeof t||null!==t.value)return;let n=/^open-link:(.+)$/.exec(t.key);if(n){M(null),window.open(n[1],"_blank");return}switch(k?.category){case"categories":let i;i=t.key,eL.some(e=>e.value===i)&&M(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?M({category:"sso-orgs",filter:""}):k.nextCategory&&M({category:k.nextCategory,filter:"",repository:t.key})}},C[11]=E,C[12]=w,C[13]=S,C[14]=k,C[15]=d):d=C[15];let D=d;C[16]!==k?(u=e=>{let t=e.target;if("/"===e.trigger.triggerChar){(null===k&&1===t.selectionStart&&1===t.selectionEnd||k?.category==="commands")&&M({category:"commands",filter:e.query});return}M(a=>a?{...a,filter:e.query}:{category:"categories",filter:e.query,index:(t.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)})},C[16]=k,C[17]=u):u=C[17];let $=u;C[18]===Symbol.for("react.memo_cache_sentinel")?(h=()=>M(null),C[18]=h):h=C[18];let B=h;C[19]!==k?.category?(f=e=>{let{suggestion:t}=e,a="object"==typeof t&&k?.category==="commands";return!l.W.askModeDropdown||!a},C[19]=k?.category,C[20]=f):f=C[20];let U=f;return C[21]!==k?(g=k&&function(e){switch(e.category){case"categories":case"commands":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${eM[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return eM[e.category];case"discussions":case"issues":case"pulls":case"files":return`${eM[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(k)||void 0,C[21]=k,C[22]=g):g=C[22],C[23]!==b||C[24]!==D||C[25]!==$||C[26]!==U||C[27]!==L||C[28]!==g?(y=(0,r.jsx)(ek.a,{fullWidth:!0,suggestions:L,triggers:t,tabInsertsSuggestions:!1,onHideSuggestions:B,onShowSuggestions:$,onSelectSuggestion:D,shouldReplaceText:U,suggestionsPlacement:"below",title:g,asMenu:!0,children:b}),C[23]=b,C[24]=D,C[25]=$,C[26]=U,C[27]=L,C[28]=g,C[29]=y):y=C[29],C[30]!==O?(x=O&&(0,r.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),C[30]=O,C[31]=x):x=C[31],C[32]!==y||C[33]!==x?(v=(0,r.jsxs)(r.Fragment,{children:[y,x]}),C[32]=y,C[33]=x,C[34]=v):v=C[34],v}function tt(){return"undefined"!=typeof document}try{te.displayName||(te.displayName="ChatInputAutocomplete")}catch{}let ta="ChatInput-module__chatForm--vnUAB",tr="ChatInput-module__input--HalEQ",tn="ChatInput-module__container--qmP6j",ti="ChatInput-module__containerDisabled--bIHy2",tl="ChatInput-module__toolbar--Kv3Gl",ts="ChatInput-module__containerSmall--NfPkF",to="ChatInput-module__inputContainer--cpjba",tc="ChatInput-module__inputPreview--Fdwj0",td="ChatInput-module__clicked--u0igo",tu="ChatInput-module__submitButtonInForm--Il541",tm="ChatInput-module__submitButtonOutsideForm--yYfFf",th="ChatInput-module__attachments--Fv007",tp="ChatInput-module__attachmentButton--qtFf6",tf="ChatInput-module__attachmentButtonText--fVuEs",tg="ChatInput-module__attachmentIconButton--IO4TP",ty="ChatInput-module__inputContainerNewConversation--FexlN",tx="ChatInput-module__inputDisabled--QQiex",tv="ChatInput-module__toolbarNoModes--KJL2k",tC="ChatInput-module__extra--oQVm8",t_="ChatInput-module__CommandIconButton--lxm7H",tb="ChatInput-module__mode--dH9c4",tw="ChatInput-module__modeSelectButton--rJ86j",tS="ChatInput-module__actions--zbM52",tj="ChatInput-module__actionsMultiple--LHDC3",tI="ChatInput-module__toolbarButtons--YDoIY";var tN=a(16378),tR=a(6224);let tE=(0,p.forwardRef)(function(e,t){let a,l,s,o=(0,n.c)(8),{text:d,availableCommandKeys:u}=e;o[0]!==d?(a=(0,tN._)(d),o[0]=d,o[1]=a):a=o[1];let{availableAgents:m}=(0,eh.JE)(a),{currentReferences:h}=(0,c.Pk)(),f=(0,P.b)(),g=(0,M.l)().use(O.U,{references:h,agents:void 0===m?[]:m,commands:u}).parse(d),y=(0,tN.O)(g),x=(0,p.useRef)(y);(0,p.useEffect)(function(){for(let e of x.current)if(!y.has(e)){let t=h.find(t=>(0,i.Vb)(t)===e);t&&f.removeReference(t)}x.current=y}),o[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,w.G)("copilot-chat-input-textarea-preview"),o[2]=l):l=o[2];let v=g.children.map(tT);return o[3]!==t||o[4]!==l||o[5]!==tc||o[6]!==v?(s=(0,r.jsx)("div",{id:"copilot-chat-textarea-preview",...l,"aria-hidden":!0,className:tc,ref:t,role:"presentation",children:v}),o[3]=t,o[4]=l,o[5]=tc,o[6]=v,o[7]=s):s=o[7],s});try{tE.displayName||(tE.displayName="ChatInputPreview")}catch{}function tT(e,t){switch(e.type){case"text":return e.value;case"command":return(0,r.jsx)("span",{className:tR.A.command,...(0,w.G)("input-preview-command"),children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,r.jsx)("span",{className:tR.A.mention,...(0,w.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,r.jsx)("span",{className:tR.A.mention,children:e.value},t)}}var tA=a(69676),tk=a(45800),tM=a(25536),tL=a(7730),tP=a(57448),tF=a(1631),tO=a(15518);let tD=(0,p.memo)(e=>{let t,a,s,o,d,u,m,h,g,y,v,b,S,j,I,R,A,k=(0,n.c)(52),{className:M,isLoading:L,returnFocusRef:F,tokenSize:O,onSelectReference:D,getReferenceVersion:$,showConvertToFileText:B,onConvertToFile:U,onConvertToFileDismiss:W,hideAttachmentsMenu:V,onRemoveReference:q}=e,H=void 0===O?"medium":O,{currentReferences:G,implicitReferences:K,selectedThreadID:Q}=(0,c.bP)("currentReferences","implicitReferences","selectedThreadID"),Z=(0,P.b)(),J=(0,p.useRef)(null),Y=(0,tL.g)(J),[X,ee]=(0,p.useState)(!1);if(k[0]!==G||k[1]!==Q){e:{let e=(0,i.rT)(G);if(l.W.copilotChatRepositoryPicker&&!Q){t=e.filter(tB);break e}t=e}k[0]=G,k[1]=Q,k[2]=t}else t=k[2];let et=t,{setSelectedCopilotSpaceId:ea}=(0,tM.O)(),er=(0,p.useRef)(null);k[3]===Symbol.for("react.memo_cache_sentinel")?(a={containerRef:er,focusableElementFilter:tU,bindKeys:tA.z0.ArrowHorizontal|tA.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},k[3]=a):a=k[3],k[4]!==et?(s=[et],k[4]=et,k[5]=s):s=k[5],(0,tk.G)(a,s),k[6]===Symbol.for("react.memo_cache_sentinel")?(o=[],k[6]=o):o=k[6];let en=(0,p.useRef)(o),ei=(e,t)=>{let a=en.current[t+1]??en.current[t-1]??F.current;a?.focus(),q?.(e),(0,i.yA)(e)&&ea(void 0),Z.removeReference(e)};k[7]!==Z||k[8]!==F||k[9]!==et||k[10]!==ea?(d=()=>{setTimeout(()=>F.current?.focus()),et.filter(i.yA).length>0&&ea(void 0),Z.clearCurrentReferences()},k[7]=Z,k[8]=F,k[9]=et,k[10]=ea,k[11]=d):d=k[11];let el=d,es=(0,p.useRef)(et);k[12]!==et?(u=()=>{if(es.current.length<et.length){let e=et.find(e=>!es.current.find(t=>(0,i.x_)(t,e))),t=e?et.indexOf(e):-1;en?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}es.current=et},m=[et],k[12]=et,k[13]=u,k[14]=m):(u=k[13],m=k[14]),(0,z.N)(u,m),k[15]!==W?(h=()=>{W?.()},k[15]=W,k[16]=h):h=k[16];let eo=h;k[17]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{ee(tW)},k[17]=g):g=k[17];let ec=g,ed=function(e,t,a,r){let i,l,s,o,c,d=(0,n.c)(14),[u,m]=(0,p.useState)(!1);d[0]!==r||d[1]!==t?(i=()=>{t.current&&m(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(r);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=r,d[1]=t,d[2]=i):i=d[2];let h=i;return d[3]!==h||d[4]!==e.length?(l=()=>{if(0===e.length)return void m(!1);let t=requestAnimationFrame(h);return()=>cancelAnimationFrame(t)},d[3]=h,d[4]=e.length,d[5]=l):l=d[5],d[6]!==h||d[7]!==e?(s=[e,h],d[6]=h,d[7]=e,d[8]=s):s=d[8],(0,p.useEffect)(l,s),d[9]!==h||d[10]!==a||d[11]!==e.length?(o=()=>{if(0===e.length||!a.current)return;let t=new ResizeObserver(()=>{h()});return t.observe(a.current),()=>{t.disconnect()}},c=[e.length,h,a],d[9]=h,d[10]=a,d[11]=e.length,d[12]=o,d[13]=c):(o=d[12],c=d[13]),(0,p.useEffect)(o,c),u}(et,en,er,`.${tO.A.name}`),eu=(0,p.useId)();k[18]!==eo||k[19]!==B?(y=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),B&&eo())},k[18]=eo,k[19]=B,k[20]=y):y=k[20];let em=y;if(0===et.length&&!L&&!B)return null;k[21]!==M?(v=(0,f.$)(M,"ChatInputReferences-module__container--bNybl"),k[21]=M,k[22]=v):v=k[22];let eh=Y&&"ChatInputReferences-module__scrolledToEnd--DONiv",ep=L&&"ChatInputReferences-module__loading--kAJlw";k[23]!==eh||k[24]!==ep?(b=(0,f.$)("ChatInputReferences-module__attachmentsList--mEJpJ",eh,ep),k[23]=eh,k[24]=ep,k[25]=b):b=k[25],k[26]!==eu||k[27]!==eo||k[28]!==U||k[29]!==em||k[30]!==B||k[31]!==H?(S=B&&(0,r.jsxs)("div",{className:"ChatInputReferences-module__convertToFileContainer--y1XOU",children:[(0,r.jsx)(T.Q,{onClick:U,leadingVisual:N.FileIcon,className:"ChatInputReferences-module__convertToFileButton--hnPn2","aria-describedby":eu,onKeyDown:em,children:"Convert to file"}),(0,r.jsx)(tF.lh,{size:H,onRemove:eo,descriptionId:eu})]}),k[26]=eu,k[27]=eo,k[28]=U,k[29]=em,k[30]=B,k[31]=H,k[32]=S):S=k[32];let ef=et.map((e,t)=>"repository"===e.type?(0,r.jsx)(t$,{reference:e,ref:e=>{en.current[t]=e},"data-index":t,size:H,fullWidth:X,onRemove:()=>ei(e,t),onClick:D,getReferenceVersion:$},(0,i.Vb)(e)):(0,r.jsx)(tF.BR,{reference:e,ref:e=>{en.current[t]=e},"data-index":t,size:H,fullWidth:X,onRemove:()=>ei(e,t),onClick:D,getReferenceVersion:$,isImplicitReference:K.has(e)},(0,i.Vb)(e)));return k[33]!==L?(j=L&&(0,r.jsxs)("div",{className:"ChatInputReferences-module__functionLoading--Oimop",...(0,w.G)("loading-indicator"),children:[(0,r.jsx)(C.A,{size:"small"}),"Retrieving\u2026"]}),k[33]=L,k[34]=j):j=k[34],k[35]!==b||k[36]!==S||k[37]!==ef||k[38]!==j?(I=(0,r.jsxs)("div",{className:b,ref:J,children:[S,ef,j]}),k[35]=b,k[36]=S,k[37]=ef,k[38]=j,k[39]=I):I=k[39],k[40]!==ec||k[41]!==ed||k[42]!==V||k[43]!==el||k[44]!==et.length||k[45]!==X||k[46]!==H?(R=et.length>0&&!V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"ChatInputReferences-module__divider--k8d6S"}),(0,r.jsxs)(x.W,{children:[(0,r.jsx)(x.W.Anchor,{children:(0,r.jsx)(E.K,{icon:N.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:"ChatInputReferences-module__menuButton--IVLqN",size:H})}),(0,r.jsx)(x.W.Overlay,{width:"small",children:(0,r.jsxs)(_.l,{children:[ed&&(0,r.jsxs)(_.l.Item,{onSelect:ec,children:[(0,r.jsx)(_.l.LeadingVisual,{children:X?(0,r.jsx)(N.EyeClosedIcon,{}):(0,r.jsx)(N.EyeIcon,{})}),X?"Hide full attachment names":"Show full attachment names"]}),(0,r.jsxs)(_.l.Item,{onSelect:el,children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(N.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),k[40]=ec,k[41]=ed,k[42]=V,k[43]=el,k[44]=et.length,k[45]=X,k[46]=H,k[47]=R):R=k[47],k[48]!==v||k[49]!==I||k[50]!==R?(A=(0,r.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:v,ref:er,children:[I,R]}),k[48]=v,k[49]=I,k[50]=R,k[51]=A):A=k[51],A});tD.displayName="ChatInputReferences";let t$=(0,p.forwardRef)(function(e,t){let a,i,l,s=(0,n.c)(8),o=e.reference,d=(0,c.pn)(tV),u=`${o.ownerLogin}/${o.name}`,[m,h]=(0,tP.vn)(u),f=(0,p.useRef)(!1),g=m.code===tP.W5.Unindexed||m.docs===tP.W5.Unindexed;return s[0]!==d||s[1]!==g||s[2]!==h?(a=function(){!f.current&&g&&d&&(f.current=!0,h())},i=[d,g,h],s[0]=d,s[1]=g,s[2]=h,s[3]=a,s[4]=i):(a=s[3],i=s[4]),(0,p.useEffect)(a,i),s[5]!==e||s[6]!==t?(l=(0,r.jsx)(tF.BR,{...e,ref:t}),s[5]=e,s[6]=t,s[7]=l):l=s[7],l});try{t$.displayName||(t$.displayName="RepoReferenceToken")}catch{}try{t$.displayName||(t$.displayName="RepoReferenceToken")}catch{}function tB(e){return"repository"!==e.type}function tU(e){return!e.hasAttribute("aria-hidden")}function tW(e){return!e}function tV(e){return e.model&&!e.model.hasLimitedCapabilities}var tz=a(46642),tq=a(92352);function tH(){let e,t,a,l,s,o,d,u,h=(0,n.c)(21),p=(0,P.b)(),{currentReferences:f,currentRepository:g,mode:y}=(0,c.bP)("currentReferences","currentRepository","mode");h[0]!==f?(e=f.filter(tZ),h[0]=f,h[1]=e):e=h[1];let x=e;if(h[2]!==x){for(let e of(t=[],x))t.push({id:e.id,name:`${e.ownerLogin}/${e.name}`,enabled:!0,private:"public"!==e.visibility});h[2]=x,h[3]=t}else t=h[3];let v=t;h[4]!==g?(a=async e=>{let t=g?`${g.ownerLogin}/${g.name}`:void 0;return(await (0,tq.P)(e,void 0,t)).filter(tQ).map(tK)},h[4]=g,h[5]=a):a=h[5];let C=a;h[6]!==p||h[7]!==y||h[8]!==x?(l=async e=>{if(!e){for(let e of x)p.removeReference(e),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"removed",component:"REPOSITORY_PICKER",mode:y});return}let t=new Set(e.map(tG));for(let e of x)t.has(e.id)||(p.removeReference(e),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"removed",component:"REPOSITORY_PICKER",mode:y}));for(let t of e)if(!x.some(e=>e.id===t.id)&&null!=t.id){let e=await p.service.fetchRepo(t.id);if(e.ok){let t=(0,i.qS)(e.payload);p.addReference(t,"repoMenu"),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"selected",component:"REPOSITORY_PICKER",mode:y})}}},h[6]=p,h[7]=y,h[8]=x,h[9]=l):l=h[9];let _=l;e:{let e=v.length;if(0===e){s="All repositories";break e}if(1===e){s=v[0]?.name||"Select repositories";break e}s=`${e} repositories`}let b=s,w=0===v.length?N.GlobeIcon:N.RepoIcon;return h[10]!==w?(o={leadingVisual:w,trailingAction:null,"aria-label":"Select repositories to attach to conversation"},h[10]=w,h[11]=o):o=h[11],h[12]!==y?(d=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"open",component:"REPOSITORY_PICKER",mode:y})},h[12]=y,h[13]=d):d=h[13],h[14]!==b||h[15]!==_||h[16]!==C||h[17]!==v||h[18]!==o||h[19]!==d?(u=(0,r.jsx)(tz.P,{repositoryLoader:C,selectionVariant:"multiple",selectAllOption:!1,onSelect:_,liveSelection:!0,currentSelection:v,width:"medium",buttonText:b,additionalButtonProps:o,onOpen:d}),h[14]=b,h[15]=_,h[16]=C,h[17]=v,h[18]=o,h[19]=d,h[20]=u):u=h[20],u}function tG(e){return e.id}function tK(e){return{id:e.id,name:e.nameWithOwner,enabled:!0,private:e.private}}function tQ(e){return null!=e.id}function tZ(e){return"repository"===e.type}try{tH.displayName||(tH.displayName="ChatReposPicker")}catch{}var tJ=a(81829);let tY=()=>{let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,r.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tY.displayName||(tY.displayName="MCPIcon")}catch{}var tX=a(97793),t0=a(97665),t1=a(31604),t2=a(99511),t5=a(13436),t3=a(76720);let t4=({anchorRef:e,open:t,onOpenChange:a})=>{let[n,i]=(0,p.useState)(!1),[s,o]=(0,p.useState)(""),[c,d]=(0,p.useState)(null),[u,m]=(0,p.useState)(()=>new Set),{service:h}=(0,P.b)(),f=(0,t0.jE)(),{data:g,isPending:y,isError:x}=(0,eY.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>h.fetchMCPServers(),placeholderData:e=>e}),v=(0,p.useMemo)(()=>g||[],[g]),_=(0,p.useMemo)(()=>v.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[v,s]),b=e=>{m(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t1.T,{open:t,onOpen:()=>a(!0),onClose:()=>a(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,r.jsx)(r.Fragment,{}),width:"medium",children:(0,r.jsxs)("div",{className:"McpToolsManager-module__container--PHa2N",children:[(0,r.jsxs)("div",{className:"McpToolsManager-module__header--PXzkx",children:[(0,r.jsx)("div",{className:"McpToolsManager-module__headerTitle--CiuwN",children:"MCP tools"}),(0,r.jsx)(t2.A,{placeholder:"Search by provider",value:s,onChange:e=>o(e.target.value),className:"McpToolsManager-module__searchInput--v2pAX",leadingVisual:N.SearchIcon})]}),(0,r.jsx)("div",{className:"McpToolsManager-module__contentArea--aqxn4",children:y?(0,r.jsx)("div",{className:"McpToolsManager-module__loadingContainer--btAEV",children:(0,r.jsx)(C.A,{})}):x?(0,r.jsxs)(t3.E,{children:[(0,r.jsx)(t3.E.Visual,{children:"\u26A0\uFE0F"}),(0,r.jsx)(t3.E.Heading,{children:"Error loading tools"})]}):0===v.length?(0,r.jsxs)("div",{className:"McpToolsManager-module__emptyState--qpgwB",children:[(0,r.jsx)(N.ToolsIcon,{size:24}),(0,r.jsx)("div",{className:"McpToolsManager-module__emptyStateTitle--PLCEY",children:"You don't have any MCP tools configured"}),(0,r.jsx)("div",{className:"McpToolsManager-module__emptyStateDescription--x7TOI",children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,r.jsx)(t5.G,{"aria-label":"MCP server selection",children:_.map(e=>{let t;return(0,r.jsxs)(t5.G.Item,{id:e.id,onSelect:()=>{var t;d(t=e.id),b(t)},expanded:u.has(e.id),onExpandedChange:()=>b(e.id),current:c===e.id,"aria-selected":c===e.id,children:[(0,r.jsx)("span",{className:"McpToolsManager-module__serverName--au45P",children:e.name}),e.tools&&e.tools.length>0?(0,r.jsx)(t5.G.SubTree,{children:(t=e.tools).length>0&&"object"==typeof t[0]&&"name"in t[0]?e.tools.map(t=>{let a=`${e.id}-${t.name}`,n=c===a;return(0,r.jsx)(t5.G.Item,{id:a,current:n,"aria-selected":n,onSelect:()=>{!n&&l.W.mcpToolDescriptions?d(a):d(null)},children:l.W.mcpToolDescriptions?(0,r.jsxs)("div",{className:"McpToolsManager-module__toolItem--Eo5Ka",children:[(0,r.jsxs)("div",{className:"McpToolsManager-module__toolNameContainer--VKNAW",children:[n?(0,r.jsx)(N.DashIcon,{size:12}):(0,r.jsx)(N.PlusIcon,{size:12}),(0,r.jsx)("span",{className:"McpToolsManager-module__toolName--EL2OQ",children:t.name})]}),t.description&&n&&(0,r.jsx)("div",{className:"McpToolsManager-module__toolDescription--nn86Q",children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let a=`${e.id}-${t}`;return(0,r.jsx)(t5.G.Item,{id:a,onSelect:()=>d(a),current:c===a,"aria-selected":c===a,children:t},t)})}):null]},e.id)})})}),(0,r.jsx)("div",{className:"McpToolsManager-module__footer--UZmCo",children:(0,r.jsx)(T.Q,{variant:"default",leadingVisual:N.PlusIcon,onClick:()=>{i(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,r.jsx)(tX.O,{isOpen:n,onClose:()=>{i(!1)},onServerAdded:()=>{f.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{t4.displayName||(t4.displayName="McpToolsManager")}catch{}let t7=()=>{let e,t=(0,n.c)(2),[a,i]=(0,p.useState)(!1),l=(0,p.useRef)(null);return t[0]!==a?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.K,{ref:l,icon:tY,variant:"invisible","aria-label":"MCP tools",onClick:()=>i(!a)}),(0,r.jsx)(t4,{anchorRef:l,open:a,onOpenChange:i})]}),t[0]=a,t[1]=e):e=t[1],e};try{t7.displayName||(t7.displayName="McpToolMenu")}catch{}var t6=a(12970),t8=a(11196);function t9(){let e,t,a,i=(0,n.c)(8),l=(0,P.b)(),{usePlanningIntent:s,selectedThreadID:o}=(0,c.bP)("usePlanningIntent","selectedThreadID");i[0]!==l||i[1]!==s?(e=()=>l.setUsePlanningIntent(!s),i[0]=l,i[1]=s,i[2]=e):e=i[2];let d=e;if(o){let e;return i[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(t8.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,r.jsx)(T.Q,{leadingVisual:N.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),i[3]=e):e=i[3],e}return i[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(N.TasklistIcon,{}),i[4]=t):t=i[4],i[5]!==d||i[6]!==s?(a=(0,r.jsx)(g,{icon:t,isSelected:s,onClick:d,children:"Plan"}),i[5]=d,i[6]=s,i[7]=a):a=i[7],a}try{t9.displayName||(t9.displayName="PlanningIntentToggle")}catch{}let ae=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],at="Start a pull request",aa=e=>{let t,a,s,o,d,h,g,x,v,C,_,b,N,E,T,K,es,eo,ec,ed,eu,em,eh,ep,ef,eg,ey,ex,ev,eC,e_,eb,ew,eS,ej,eI,eN,eR,eE,eT,ek,eM,eL,eP,eF,eO,eD,e$,eB,eU=(0,n.c)(239),eW=(0,c.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:eV}=eW,ez=(0,el.tD)(),eq=(0,P.b)(),eH=eq.maxMessagesReached(),[eG,eK]=(0,p.useState)(null),eQ="loading"===eW.slashCommandLoading.state,{safeSetTimeout:eZ}=(0,R.A)(),{onSelectReference:eJ,containerRef:eY,shouldClearTextOnCommandSubmit:eX,shouldClearTextOnSubmit:e0,slashCommandsEnabled:e1}=e,e2=void 0===eX||eX,e5=void 0===e0||e0,e3=void 0!==e1&&e1,e4=(0,p.useRef)(null),e7=(0,p.useRef)(""),e6=(0,p.useRef)(!1),e8=(0,j.Z)();eU[0]!==e3?(t={enabled:e3},eU[0]=e3,eU[1]=t):t=eU[1];let{availableCommands:e9,availableCommandKeys:tt}=(0,W.j)(t);eU[2]!==e9?(a=e9.map(al),eU[2]=e9,eU[3]=a):a=eU[3];let tl=a,tc=l.W.askModeDropdown&&tl.length>0?tl:e.modes;eU[4]!==tc?(s=()=>{let e=G.Jt.getActiveMode();if(e){let t=tc.find(t=>t.name===e);if(t)return t}return tc[0]},eU[4]=tc,eU[5]=s):s=eU[5];let[td,tu]=(0,p.useState)(s),tp=e.onClickMode,{activeCopilotSpaceId:tf}=(0,u.C)();eU[6]!==td||eU[7]!==tc||eU[8]!==e.activeModeName?(o=l.W.askModeDropdown?td:tc.find(t=>t.name===e.activeModeName)||tc[0],eU[6]=td,eU[7]=tc,eU[8]=e.activeModeName,eU[9]=o):o=eU[9];let tg=o;eU[10]!==tc||eU[11]!==tp?(d=e=>{if(tp?.(e),l.W.askModeDropdown){let t=tc.find(t=>t.name===e);t&&(tu(t),G.Jt.setActiveMode(t.name),(0,m.BI)("dotcom_chat.activate",{target:"MODE_SWITCH",mode:t.name}))}},eU[10]=tc,eU[11]=tp,eU[12]=d):d=eU[12];let tv=d;eU[13]!==eq||eU[14]!==e.initialReference?(h=()=>{e.initialReference&&eq.addReference(e.initialReference,"page-file-reference")},g=[e.initialReference,eq],eU[13]=eq,eU[14]=e.initialReference,eU[15]=h,eU[16]=g):(h=eU[15],g=eU[16]),(0,p.useEffect)(h,g),eU[17]!==eG||eU[18]!==eW.mode?(x=e=>{e4.current=null,e7.current="",e6.current=!1,eG&&(eK(null),void 0!==e&&e&&(0,m.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eW.mode}))},eU[17]=eG,eU[18]=eW.mode,eU[19]=x):x=eU[19];let tC=x,t_=eW.isWaitingOnCopilot||eW.isWaitingOnAttachment||eQ,tb=tg?.name;eU[20]!==e9||eU[21]!==tC||eU[22]!==e.disableSavedUserMessage||eU[23]!==e.initialText||eU[24]!==e.isInPortal||eU[25]!==e.onChatCommandChange||eU[26]!==e.onSubmit||eU[27]!==e.storageKeySuffix||eU[28]!==e.textAreaRef||eU[29]!==e2||eU[30]!==e5||eU[31]!==t_||eU[32]!==tb?(v={isLoading:t_,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:tC,onChatCommandChange:e.onChatCommandChange,disableSavedUserMessage:e.disableSavedUserMessage,isInPortal:e.isInPortal,shouldClearTextOnCommandSubmit:e2,shouldClearTextOnSubmit:e5,availableCommands:e9,activeModeName:tb,storageKeySuffix:e.storageKeySuffix,initialText:e.initialText},eU[20]=e9,eU[21]=tC,eU[22]=e.disableSavedUserMessage,eU[23]=e.initialText,eU[24]=e.isInPortal,eU[25]=e.onChatCommandChange,eU[26]=e.onSubmit,eU[27]=e.storageKeySuffix,eU[28]=e.textAreaRef,eU[29]=e2,eU[30]=e5,eU[31]=t_,eU[32]=tb,eU[33]=v):v=eU[33];let{typingHasStarted:tw,textAreaRef:tS,textareaPreviewRef:tj,textAreaPreviewContainerRef:tI,text:tN,setText:tR,isAgentTaskSubmitInProgress:tT,handleSubmit:tA,handleSubmitToNewThread:tk,handleScroll:tM,handleChange:tL,handleStop:tP,handleFocus:tF,command:tO,setLastUsedRepo:t$,selectedRepo:tB,setSelectedRepo:tU,selectedBranch:tW,setSelectedBranch:tV,selectedAgent:tz,setSelectedAgent:tH,initialRepoNWO:tG}=function(e){let t=(0,c.Pk)(),a=(0,P.b)(),r=(0,j.Z)(),{selectedThreadID:n,mode:i,autoSubmit:s,model:o}=t,{activeModeName:d,clearPastedFile:u,isLoading:h,onSubmit:f,onChatCommandChange:g,disableSavedUserMessage:x,isInPortal:v,shouldClearTextOnCommandSubmit:C=!0,shouldClearTextOnSubmit:_=!0,availableCommands:b=[],storageKeySuffix:w}=e,S=w??n,I=G.Jt.getSavedMessage(S),N=G.Jt.getSavedUserMessageOnError(S),{pathname:E}=(0,y.zy)(),[T,A]=(0,y.ok)(),[k,M]=(0,p.useState)(()=>{if(e.initialText)return e.initialText;let a=ee(t.mode,E,T);return x?a??"":a??N??I??""}),[L,F]=(0,p.useState)(!1),[O,D]=(0,p.useState)(null),[$,B]=(0,p.useState)(!1),U=(0,p.useRef)(null),W=e.textAreaRef||U,K=(0,p.useRef)(null),et=(0,p.useRef)(null),ea=(0,p.useRef)(0),er=(0,p.useRef)(null),en=(0,p.useRef)(()=>{}),ei=(0,p.useRef)(!1),el=(0,Z.GF)(t.availableModels),es=(0,p.useRef)(S),{safeSetTimeout:eo}=(0,R.A)(),ec=(0,p.useRef)(0),[ed,eu]=(0,Y.T)(),[em,eh]=(0,p.useState)(void 0),ep=t.currentReferences.find(e=>"repository"===e.type),ef=ep?`${ep.ownerLogin}/${ep.name}`:`${ed?.ownerLogin}/${ed?.name}`,eg=(0,p.useCallback)(e=>{eh(e)},[]),[ey,ex]=(0,p.useState)(void 0),[ev,eC]=(0,V.s)();(0,p.useEffect)(()=>{l.W.stableConversationView?S===es.current?G.Jt.setSavedMessage(S,k):(M(G.Jt.getSavedMessage(S)||""),es.current=S):G.Jt.setSavedMessage(S,k)},[S,k]),(0,z.N)(()=>{let e=0;!function t(){if(!W.current||!et.current||!K.current)return;if(e++,(v||"assistive"===i)&&0===W.current.scrollHeight&&e<10)return void eo(t,1);if(0===k.length&&56===ec.current)return;W.current.style.height="0";let a=Math.max(W.current.scrollHeight,56),r=Math.min(a,300);K.current.style.height=`${a}px`,W.current.style.height=`${a}px`,et.current.style.height=`${r}px`,ec.current=r}()},[i,eo,k,W,K,v,d]);let e_=(0,p.useCallback)(()=>{W?.current&&K?.current&&et?.current&&(K.current.scrollTop=W.current.scrollTop,K.current.scrollLeft=W.current.scrollLeft)},[W]),eb=(0,p.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),ew=(0,p.useCallback)(async e=>{B(!1),G.Jt.clearSavedUserMessage(S),G.Jt.clearSavedUserMessageOnError(S),t.defaultRecipient&&!k.includes(`@${t.defaultRecipient}`)&&a.clearDefaultRecipient(),e?.preventDefault();let n=X(d,O);if(n&&em?.id!=null){let e=await a.service.fetchRepo(em.id);e.ok&&e.payload&&eu(e.payload)}if(await Q(k,t,a,r,b,d,n?{selectedRepo:em,selectedBranch:ey,selectedAgent:ev}:{})){if("/new"===k.trim()&&G.Jt.setSavedMessageFast(S,null),C)M("");else{let e=k.substring(k.indexOf(" ")+1).trim();F(!0),M(`Creating ${e}...`)}return}if(!h){let e=k;if(!e){let[t,r]=a.tryInferMessage(eb);if(!t||!r)return;e=r}d===H.II.CreateIssue&&(e=`/create-issue ${e}`);try{_?M(""):(F(!0),M(`Creating ${k}...`));let t=[];if(n&&em){let a={type:"task-request",description:e,repoOwner:em.owner,repoName:em.nameOnly,ref:ey||em.defaultBranch,customAgent:ev.subAgentSlug,agentId:ev.topLevelAgentId};t.push(a)}await f?.(e,t.length>0?t:void 0),_||G.Jt.clearSavedUserMessage(S)}catch(t){if(F(!1),t instanceof J.q)return void M(e);throw t}}},[S,t,k,d,O,em,a,r,b,ey,ev,h,eu,C,eb,_,f]),eS=(0,p.useCallback)(()=>a.sendMessageToNewThread(S,k,eb,t.context,el),[a,S,t.context,eb,k,el]);(0,p.useEffect)(()=>{(async()=>{let e=ee(i,E,T),t=new URLSearchParams(T),a=t.get("model"),r=!a||a===o.id;e&&r&&!ei.current&&(t.delete("prompt"),t.delete("model"),(0,m.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),A(t,{replace:!0}),s&&(ei.current=!0,await Promise.resolve(),await ew()))})()},[E,T,A,i,s,o,ew]);let ej=(0,p.useCallback)(e=>{B(!0),W?.current&&(M(e.target.value),u?.(),ea.current=0,e_())},[e_,u,W]),eI=(0,p.useCallback)(async()=>{await a.stopStreaming(),null!=S&&(a.startThreadReload(),await new Promise(e=>{er.current=setTimeout(()=>e(S),6e3)}),en.current=await a.fetchMessages(S,!0,!0))},[a,S]);return(0,p.useEffect)(()=>{en.current&&(en.current(),en.current=()=>{})},[t.messages]),(0,p.useEffect)(()=>()=>{er.current&&(clearTimeout(er.current),er.current=null),a.cancelThreadReload(),en.current=()=>{}},[a]),(0,p.useEffect)(()=>{if(0===b.length&&!l.W.taskWithinChatThread)return;let e=(0,q.V)(k,b.map(e=>e.key));O!==e&&(D(e),g?.(e))},[k,O,g,b]),{typingHasStarted:$,textAreaRef:W,textareaPreviewRef:K,textAreaPreviewContainerRef:et,text:k,setText:M,isAgentTaskSubmitInProgress:L,command:O,setCommand:D,handleSubmit:ew,handleSubmitToNewThread:eS,handleScroll:e_,handleChange:ej,handleStop:eI,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},lastUsedRepo:ed,setLastUsedRepo:eu,selectedRepo:em,setSelectedRepo:eg,selectedBranch:ey,setSelectedBranch:ex,selectedAgent:ev,setSelectedAgent:eC,initialRepoNWO:ef}}(v);if(eU[34]!==e9||eU[35]!==tO){let e;eU[37]!==tO?(e=e=>e.key===tO,eU[37]=tO,eU[38]=e):e=eU[38],C=e9.find(e),eU[34]=e9,eU[35]=tO,eU[36]=C}else C=eU[36];let tK=C,tQ=tK?.customModelPicker??e.customModelPicker,tZ=e.disabled||tT||eH;eU[39]!==tR?(_=()=>({setText:tR}),b=[tR],eU[39]=tR,eU[40]=_,eU[41]=b):(_=eU[40],b=eU[41]),(0,p.useImperativeHandle)(e.chatInputRef,_,b),eU[42]!==tL||eU[43]!==tS?(N={inputRef:tS,fallbackEventHandler:tL},eU[42]=tL,eU[43]=tS,eU[44]=N):N=eU[44];let tY=(0,I.H)(N);eU[45]!==tY||eU[46]!==e.figmaAuthUrl||eU[47]!==tS?(E={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:tS,emitChange:tY},eU[45]=tY,eU[46]=e.figmaAuthUrl,eU[47]=tS,eU[48]=E):E=eU[48];let{replaceUrlWithReferenceMention:tX}=function(e){let t,a,r,l,s,o,d,u,m,h,p,f,g=(0,n.c)(35),{figmaAuthUrl:y,textAreaRef:x,emitChange:v}=e,C=(0,P.b)(),{currentReferences:_}=(0,c.Pk)();g[0]!==v||g[1]!==x?(t=(e,t,a)=>{if(!x.current||e===t)return;let r=a?.[0]??0,n=x.current.value.slice(r,a?.[1]),i=n.indexOf(e);for(;i>-1;){let a=i+e.length;v(t,[i+r,a+r]),i=(n=n.replace(e,t)).indexOf(e)}},g[0]=v,g[1]=x,g[2]=t):t=g[2];let b=t;g[3]!==C?(a=e=>{let{itemUrl:t}=e,a=(0,i.Vc)(t);return C.addReference(a,"url-attacher"),C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),a},g[3]=C,g[4]=a):a=g[4],g[5]!==b||g[6]!==C?(r=(e,t,a)=>{let{parsedReferenceMention:r}=t;C.replaceReference(a,e);let n=F.Q.for(e);if(!n)return;let i=F.Q.stringify(r),l=F.Q.stringify(n);i!==l&&b(i,l)},l=(e,t,a)=>{let{itemUrl:r,parsedReferenceMention:n}=t;C.removeReference(a),b(F.Q.stringify(n),r)},g[5]=b,g[6]=C,g[7]=r,g[8]=l):(r=g[7],l=g[8]),g[9]!==C?(s=()=>{C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},g[9]=C,g[10]=s):s=g[10],g[11]!==a||g[12]!==r||g[13]!==l||g[14]!==s?(o={mutationFn:U,onMutate:a,onSuccess:r,onError:l,onSettled:s},g[11]=a,g[12]=r,g[13]=l,g[14]=s,g[15]=o):o=g[15];let w=(0,A.n)(o);g[16]!==C?(d=e=>{let t=(0,i.Vc)(e);return C.addReference(t,"figma-attacher"),C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},u=(e,t,a)=>{C.replaceReference(a,e)},g[16]=C,g[17]=d,g[18]=u):(d=g[17],u=g[18]),g[19]!==y||g[20]!==C?(m=(e,t,a)=>{a&&y&&e instanceof $?C.replaceReference(a,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):C.removeReference(a)},g[19]=y,g[20]=C,g[21]=m):m=g[21],g[22]!==C?(h=()=>{C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},g[22]=C,g[23]=h):h=g[23],g[24]!==h||g[25]!==d||g[26]!==u||g[27]!==m?(p={mutationFn:B,onMutate:d,onSuccess:u,onError:m,onSettled:h},g[24]=h,g[25]=d,g[26]=u,g[27]=m,g[28]=p):p=g[28];let S=(0,A.n)(p);return g[29]!==_||g[30]!==S||g[31]!==b||g[32]!==w||g[33]!==x?(f={replaceUrlWithReferenceMention:e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let a=F.Q.fromUrl(t);a&&(_.every(e=>!F.Q.refersTo(a,e))&&w.mutate({itemUrl:t,parsedReferenceMention:a}),b(t,F.Q.stringify(a),e));let r=D.exec(t);return r&&(S.mutate(t),b(t,r[1],e)),t}},g[29]=_,g[30]=S,g[31]=b,g[32]=w,g[33]=x,g[34]=f):f=g[34],f}(E),{isLoading:t0,addReferenceForMention:t1,addReferencesForMentions:t2}=function(){let e=(0,P.b)(),{currentReferences:t,mode:a}=(0,c.Pk)(),r=(0,A.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],r=await (0,k.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,m.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:a,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),n=e=>{t.every(t=>!F.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:n,addReferencesForMentions:e=>{let a=(0,M.l)().use(O.U,{references:t,agents:[],commands:[]}).parse(e),r=0;(0,L.YR)(a,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,n(e.data.referenceMention))})}}}(),t5=(0,ei.FQ)(),t3=tf&&t5;eU[49]!==tO||eU[50]!==tN?(T=(0,q.x)(tN,tO),eU[49]=tO,eU[50]=tN,eU[51]=T):T=eU[51];let t4=T,t7=td?.name;eU[52]!==tO||eU[53]!==t7?(K=X(t7,tO),eU[52]=tO,eU[53]=t7,eU[54]=K):K=eU[54];let t6=K,t8=eQ||t0||eW.isWaitingOnAttachment||!!e.submitDisabled||t6&&!tB&&!tW||tT||t4,t9=0===tN.length;eU[55]!==tP||eU[56]!==eW.mode?(es=()=>{(0,m.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eW.mode}),tP()},eU[55]=tP,eU[56]=eW.mode,eU[57]=es):es=eU[57];let at=es;eU[58]!==tf||eU[59]!==tC||eU[60]!==tA||eU[61]!==t5||eU[62]!==eG||eU[63]!==eW.mode||eU[64]!==eW.selectedThreadID||eU[65]!==t8?(eo=()=>{if(t8)return;let e=tf?`${tf.owner}/${tf.id}`:"";(0,m.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eW.mode,selectedThreadId:eW.selectedThreadID,copilotSpace:e,fromSpaceUI:t5}),eG&&tC(!1),tA()},eU[58]=tf,eU[59]=tC,eU[60]=tA,eU[61]=t5,eU[62]=eG,eU[63]=eW.mode,eU[64]=eW.selectedThreadID,eU[65]=t8,eU[66]=eo):eo=eU[66];let aa=eo;eU[67]!==tk||eU[68]!==t8?(ec=()=>{t8||tk()},eU[67]=tk,eU[68]=t8,eU[69]=ec):ec=eU[69];let ai=ec;eU[70]!==eq||eU[71]!==eW.messages?(ed=()=>{let e=eW.messages.findLast(as)?.id;e&&eq.startEditingMessage(e)},eU[70]=eq,eU[71]=eW.messages,eU[72]=ed):ed=eU[72];let ad=ed;e:{if(eW.isWaitingOnCopilot){eu="Copilot is responding\u2026";break e}if(eW.defaultRecipient){eu=void 0;break e}if(eH){eu="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}eu=tg.placeholder??"Ask anything"}let au=eu;eW.defaultRecipient&&""===tN&&!tw&&tR(`@${eW.defaultRecipient} `);let am=(0,p.useRef)(null),[ah,ap]=(0,p.useState)(null),[af,ag]=(0,p.useState)(null);eU[73]!==ap||eU[74]!==eW.mode?(em=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eW.mode}),ap(ao)},eU[73]=ap,eU[74]=eW.mode,eU[75]=em):em=eU[75];let ay=em;eU[76]!==eq||eU[77]!==eW.mode||eU[78]!==eW.skillOptions?.deepCodeSearch?(eh=()=>{(0,m.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eW.mode}),eq.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eW.skillOptions?.deepCodeSearch})},eU[76]=eq,eU[77]=eW.mode,eU[78]=eW.skillOptions?.deepCodeSearch,eU[79]=eh):eh=eU[79],eW.skillOptions?.deepCodeSearch;let ax=eh,av="immersive"===eW.mode&&!!eV.capabilities?.supports?.vision;eU[80]!==ez||eU[81]!==eq||eU[82]!==eV||eU[83]!==e.existingFileNames||eU[84]!==av?(ep=async(t,a,r,n)=>{let i=new ea.s(ez(),eq),l=new en.E(eq,e.existingFileNames),s=[];[...t].some(ac)&&!eV.capabilities?.supports?.vision&&(eq.addAmbientError(`The ${eV.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,er.d)("vision_not_supported_for_model",{modelId:eV.id,uploadType:a}));let[o,c]=ea.s.getAllowedFiles([...t],eV);if(av){let e=await i.addImageAttachments(o,a);e&&s.push(...e)}let d=[];for(let e of c)if(await en.E.isAttachable(e)){let t=await l.addAttachment(e,r,n);t&&s.push(t)}else d.push(e.type);return av&&d.length>0&&(0,er.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:a}),s},eU[80]=ez,eU[81]=eq,eU[82]=eV,eU[83]=e.existingFileNames,eU[84]=av,eU[85]=ep):ep=eU[85];let aC=ep;eU[86]!==tC||eU[87]!==aC||eU[88]!==eG||eU[89]!==tR||eU[90]!==eW.mode||eU[91]!==tN?(ef=async()=>{if(!eG)return;let e=[eG],t=await aC(e,"paste",e4.current||void 0,e7.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eG.text();tR(tN.replaceAll(e,`@${t[0].name}`)),tC(!1),(0,m.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eW.mode})}},eU[86]=tC,eU[87]=aC,eU[88]=eG,eU[89]=tR,eU[90]=eW.mode,eU[91]=tN,eU[92]=ef):ef=eU[92];let a_=ef;eU[93]!==tC?(eg=()=>{tC(!0)},eU[93]=tC,eU[94]=eg):eg=eU[94];let ab=eg;eU[95]!==eG||eU[96]!==eW.isWaitingOnAttachment||eU[97]!==eW.mode?(ey=()=>{!eG||eW.isWaitingOnAttachment||e6.current||(e6.current=!0,(0,m.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eW.mode}))},ex=[eG,eW.isWaitingOnAttachment,eW.mode],eU[95]=eG,eU[96]=eW.isWaitingOnAttachment,eU[97]=eW.mode,eU[98]=ey,eU[99]=ex):(ey=eU[98],ex=eU[99]),(0,p.useEffect)(ey,ex);let aw=(tg.supportsReferenceAttachments??!0)&&"task"!==tO;eU[100]!==t2||eU[101]!==aC||eU[102]!==eq||eU[103]!==e.existingFileNames||eU[104]!==tX||eU[105]!==eZ||eU[106]!==aw||eU[107]!==tS?(ev=t=>{let a=t.clipboardData;if(a?.items){let r=[];for(let t=0;t<a.items.length;t++){let n=a.items[t];if(n){if("file"===n.kind){let e=n.getAsFile();e&&r.push(e)}else if("string"===n.kind&&["text","text/plain"].includes(n.type)){let t=a.getData(n.type);if(t.length>1e3&&t.length<=en.E.getAttachmentSizeLimit())eZ(()=>{e6.current=!1;let a=new File([t],"",{type:en.x}),r=new en.E(eq,e.existingFileNames);eK(a),e4.current=r.generateFileName(t,a.type).then(e=>e7.current=e)},1);else if(aw){t2(t);let e=tS.current?.selectionStart??0;setTimeout(()=>tX([e,e+t.length]))}return}}}r.length>0&&(t.preventDefault(),aC(r,"paste"))}},eU[100]=t2,eU[101]=aC,eU[102]=eq,eU[103]=e.existingFileNames,eU[104]=tX,eU[105]=eZ,eU[106]=aw,eU[107]=tS,eU[108]=ev):ev=eU[108];let aS=ev;eU[109]!==aC?(eC=e=>{aC(e,"drag")},eU[109]=aC,eU[110]=eC):eC=eU[110];let aj=eC;eU[111]!==t$?(e_=e=>{e&&t$(e),ag(e)},eU[111]=t$,eU[112]=e_):e_=eU[112];let aI=e_;eU[113]!==e9||eU[114]!==e8?(eb=e=>{let t=e9.find(t=>t.key===e);t?.enabled?.()===!1&&t.disabledAction?t.disabledAction(e8):l.W.askModeDropdown&&t&&(tu(t.mode),G.Jt.setActiveMode(t.mode.name),(0,m.BI)("dotcom_chat.activate",{target:"MODE_SWITCH",mode:t.mode.name,autoComplete:!0}))},eU[113]=e9,eU[114]=e8,eU[115]=eb):eb=eU[115];let aN=eb,aR=e.isStreaming||eW.isWaitingOnCopilot,aE=!!tg.supportsAttachments&&"task"!==tO,aT=S.tL,aA=aR?at:void 0,ak=t9?ad:void 0;eU[116]!==ay||eU[117]!==aa||eU[118]!==ai||eU[119]!==ax||eU[120]!==aA||eU[121]!==ak?(ew={"github:cancel":aA,"copilot-chat:send-message":aa,"copilot-chat:send-message-new-conversation":ai,"copilot-chat:add-attachment":ay,"copilot-chat:edit-last-message":ak,"copilot-chat:deep-codesearch":ax},eU[116]=ay,eU[117]=aa,eU[118]=ai,eU[119]=ax,eU[120]=aA,eU[121]=ak,eU[122]=ew):ew=eU[122];let aM=ew,aL=(0,f.$)(ta,{[ts]:"small"===e.size,[ti]:tZ},e.className);eU[123]===Symbol.for("react.memo_cache_sentinel")?(eS=(0,w.G)("copilot-chat-input-form"),eU[123]=eS):eS=eU[123],eU[124]!==a_||eU[125]!==ab||eU[126]!==t0||eU[127]!==eJ||eU[128]!==eG||eU[129]!==e.getReferenceVersion||eU[130]!==e.initialReference||eU[131]!==e.onRemoveReference||eU[132]!==e.size||eU[133]!==eW.isWaitingOnAttachment||eU[134]!==aw?(ej=aw&&(0,r.jsx)(tD,{className:th,returnFocusRef:am,tokenSize:"small"===e.size?"small":"medium",isLoading:t0,onSelectReference:eJ,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:!!eG&&!eW.isWaitingOnAttachment,onConvertToFile:a_,onConvertToFileDismiss:ab,hideAttachmentsMenu:!!e.initialReference}),eU[124]=a_,eU[125]=ab,eU[126]=t0,eU[127]=eJ,eU[128]=eG,eU[129]=e.getReferenceVersion,eU[130]=e.initialReference,eU[131]=e.onRemoveReference,eU[132]=e.size,eU[133]=eW.isWaitingOnAttachment,eU[134]=aw,eU[135]=ej):ej=eU[135];let aP=S.tL;eU[136]!==e.isNewConversation?(eI=(0,f.$)(to,{[ty]:e.isNewConversation}),eU[136]=e.isNewConversation,eU[137]=eI):eI=eU[137];let aF=!tg.supportsAutocompletion,aO=!e.disableAutoFocus,aD=et.wg,a$=(0,f.$)(tr,{[tx]:tZ}),aB=tg.textAreaAriaLabel||au;eU[138]===Symbol.for("react.memo_cache_sentinel")?(eN=(0,w.G)("copilot-chat-input-textarea"),eU[138]=eN):eN=eU[138],eU[139]!==tZ||eU[140]!==tL||eU[141]!==tF||eU[142]!==aS||eU[143]!==tM||eU[144]!==au||eU[145]!==aO||eU[146]!==aD||eU[147]!==a$||eU[148]!==aB||eU[149]!==tN||eU[150]!==tS?(eR=(0,r.jsx)("textarea",{autoFocus:aO,id:aD,className:a$,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":aB,"aria-multiline":"true",onPaste:aS,ref:tS,onScroll:tM,onChange:tL,onFocus:tF,placeholder:au,value:tN,"data-react-autofocus":!0,disabled:tZ,...eN}),eU[139]=tZ,eU[140]=tL,eU[141]=tF,eU[142]=aS,eU[143]=tM,eU[144]=au,eU[145]=aO,eU[146]=aD,eU[147]=a$,eU[148]=aB,eU[149]=tN,eU[150]=tS,eU[151]=eR):eR=eU[151],eU[152]!==te||eU[153]!==t1||eU[154]!==e9||eU[155]!==aN||eU[156]!==ap||eU[157]!==aF||eU[158]!==eR?(eE=(0,r.jsx)(te,{onSelectReference:t1,onShowAgentsDialog:ap,onSelectCommand:aN,hideAutocomplete:aF,availableCommands:e9,children:eR}),eU[152]=te,eU[153]=t1,eU[154]=e9,eU[155]=aN,eU[156]=ap,eU[157]=aF,eU[158]=eR,eU[159]=eE):eE=eU[159],eU[160]!==tt||eU[161]!==tN||eU[162]!==tj?(eT=(0,r.jsx)(tE,{text:tN,ref:tj,availableCommandKeys:tt}),eU[160]=tt,eU[161]=tN,eU[162]=tj,eU[163]=eT):eT=eU[163],eU[164]!==aP.LimitKeybindingScope||eU[165]!==ae||eU[166]!==eI||eU[167]!==eE||eU[168]!==eT||eU[169]!==tI?(ek=(0,r.jsxs)(aP.LimitKeybindingScope,{commandIds:ae,className:eI,ref:tI,children:[eE,eT]}),eU[164]=aP.LimitKeybindingScope,eU[165]=ae,eU[166]=eI,eU[167]=eE,eU[168]=eT,eU[169]=tI,eU[170]=ek):ek=eU[170];let aU=eW.skillOptions?.deepCodeSearch;return eU[171]!==tG||eU[172]!==t6||eU[173]!==e.extraToolbar||eU[174]!==tz||eU[175]!==tW||eU[176]!==tB||eU[177]!==tH||eU[178]!==tV||eU[179]!==tU?(eM=t6&&!e.extraToolbar?(0,r.jsx)(tq.s,{selectedRepo:tB,selectedBranch:tW,selectedAgent:tz,onRepoSelect:tU,onBranchSelect:tV,onAgentSelect:e=>tH(e),agentSelectionEnabled:l.W.sweAgentUseSubagents,initialRepoNWO:tG}):e.extraToolbar,eU[171]=tG,eU[172]=t6,eU[173]=e.extraToolbar,eU[174]=tz,eU[175]=tW,eU[176]=tB,eU[177]=tH,eU[178]=tV,eU[179]=tU,eU[180]=eM):eM=eU[180],eU[181]!==ay||eU[182]!==tc||eU[183]!==tO||eU[184]!==tg||eU[185]!==tQ||eU[186]!==tZ||eU[187]!==tT||eU[188]!==t3||eU[189]!==t4||eU[190]!==tv||eU[191]!==e.onNewThreadSelected||eU[192]!==e.showPlanningToggle||eU[193]!==e.showStartPullRequestButton||eU[194]!==tz||eU[195]!==eW.thirdPartyMcpAllowed||eU[196]!==aR||eU[197]!==t8||eU[198]!==aE||eU[199]!==aU||eU[200]!==eM?(eL=(0,r.jsx)(ar,{addAttachment:ay,currentMode:tg,attachmentButtonRef:am,deepCodeSearch:aU,modes:tc,onClickMode:tv,stoppable:aR,submitDisabled:t8,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eW.thirdPartyMcpAllowed,supportsAttachments:aE,disabled:tZ,extraToolbar:eM,showPlanningToggle:e.showPlanningToggle,chatCommand:tO,isCopilotSpace:t3,isAgentTaskSubmitInProgress:tT,isIncompleteCommand:t4,customModelPicker:tQ,selectedAgent:tz,showStartPullRequestButton:e.showStartPullRequestButton}),eU[181]=ay,eU[182]=tc,eU[183]=tO,eU[184]=tg,eU[185]=tQ,eU[186]=tZ,eU[187]=tT,eU[188]=t3,eU[189]=t4,eU[190]=tv,eU[191]=e.onNewThreadSelected,eU[192]=e.showPlanningToggle,eU[193]=e.showStartPullRequestButton,eU[194]=tz,eU[195]=eW.thirdPartyMcpAllowed,eU[196]=aR,eU[197]=t8,eU[198]=aE,eU[199]=aU,eU[200]=eM,eU[201]=eL):eL=eU[201],eU[202]!==eY||eU[203]!==aL||eU[204]!==eS||eU[205]!==ej||eU[206]!==ek||eU[207]!==eL?(eP=(0,r.jsxs)("form",{className:aL,ref:eY,...eS,children:[ej,ek,eL]}),eU[202]=eY,eU[203]=aL,eU[204]=eS,eU[205]=ej,eU[206]=ek,eU[207]=eL,eU[208]=eP):eP=eU[208],eU[209]!==tg.submitLabel||eU[210]!==tT||eU[211]!==t4||eU[212]!==e.showStartPullRequestButton||eU[213]!==t8?(eF=e.showStartPullRequestButton&&(0,r.jsx)(an,{disabled:t8,label:tg.submitLabel,isAgentTaskSubmitInProgress:tT,isIncompleteCommand:t4,showStartPullRequestButton:e.showStartPullRequestButton,className:(0,f.$)(tm)}),eU[209]=tg.submitLabel,eU[210]=tT,eU[211]=t4,eU[212]=e.showStartPullRequestButton,eU[213]=t8,eU[214]=eF):eF=eU[214],eU[215]!==aT||eU[216]!==aM||eU[217]!==eP||eU[218]!==eF?(eO=(0,r.jsxs)(aT,{commands:aM,children:[eP,eF]}),eU[215]=aT,eU[216]=aM,eU[217]=eP,eU[218]=eF,eU[219]=eO):eO=eU[219],eU[220]!==ah||eU[221]!==tL||eU[222]!==af||eU[223]!==aI||eU[224]!==e.attachmentMenuSide||eU[225]!==ap||eU[226]!==tS?(eD=(0,r.jsx)(eA,{inputRef:tS,inputOnChange:tL,anchorRef:am,panel:ah,onPanelChange:ap,initialRepo:af,onRepoSelect:aI,side:e.attachmentMenuSide}),eU[220]=ah,eU[221]=tL,eU[222]=af,eU[223]=aI,eU[224]=e.attachmentMenuSide,eU[225]=ap,eU[226]=tS,eU[227]=eD):eD=eU[227],eU[228]!==aj||eU[229]!==t3||eU[230]!==eW.attachmentProcessingType||eU[231]!==eW.isWaitingOnAttachment||eU[232]!==aE?(e$=aE&&!t3&&(0,r.jsx)(tJ.A,{onFilesDrop:aj,isUploading:eW.isWaitingOnAttachment&&"file-upload"===eW.attachmentProcessingType}),eU[228]=aj,eU[229]=t3,eU[230]=eW.attachmentProcessingType,eU[231]=eW.isWaitingOnAttachment,eU[232]=aE,eU[233]=e$):e$=eU[233],eU[234]!==tn||eU[235]!==eO||eU[236]!==eD||eU[237]!==e$?(eB=(0,r.jsxs)("div",{className:tn,children:[eO,eD,e$]}),eU[234]=tn,eU[235]=eO,eU[236]=eD,eU[237]=e$,eU[238]=eB):eB=eU[238],eB},ar=(0,p.memo)(e=>{let{chatCommand:t,extraToolbar:a,currentMode:n,supportsAttachments:i,submitDisabled:s,isCopilotSpace:o,isAgentTaskSubmitInProgress:c=!1,isIncompleteCommand:d,showStartPullRequestButton:u}=e,m=("task"!==t||l.W.codingAgentModelSelection)&&"loop"!==t&&"spark"!==t,h=!!(e.onNewThreadSelected&&n.supportsModelSwitching&&m),p=X(n.name,t),g=o?"Add files":l.W.copilotChatRepositoryPicker?"Add files, and spaces":"Add repositories, files, and spaces",{customModelPicker:y,selectedAgent:v,onNewThreadSelected:C,disabled:w}=e;return(0,r.jsxs)("div",{className:(0,f.$)(tl,{[tv]:1===e.modes.length}),children:[e.modes.length>1&&(0,r.jsx)("div",{className:tb,children:(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsxs)(x.W,{children:[(0,r.jsx)(x.W.Button,{className:tw,leadingVisual:(0,r.jsx)(n.icon,{}),variant:"invisible",trailingAction:N.TriangleDownIcon,children:n.name}),(0,r.jsx)(x.W.Overlay,{width:"auto",children:(0,r.jsx)(_.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>(0,r.jsxs)(_.l.Item,{selected:n.name===t.name,onSelect:()=>{e.onClickMode?.(t.name)},children:[(0,r.jsx)(_.l.LeadingVisual,{children:(0,r.jsx)(t.icon,{})}),t.name]},t.name))})})]})})}),(0,r.jsxs)("div",{className:tC,children:[i&&(l.W.askModeDropdown?(0,r.jsx)(E.K,{ref:e.attachmentButtonRef,icon:N.PlusIcon,className:tg,"aria-label":g,onClick:e.addAttachment,"data-testid":"attachment-menu-button"}):(0,r.jsx)(T.Q,{ref:e.attachmentButtonRef,leadingVisual:N.PlusIcon,variant:"invisible","aria-label":g,className:tp,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:(0,r.jsx)("span",{className:(0,f.$)(tf,{"sr-only":p}),children:g})})),i&&l.W.copilotChatRepositoryPicker&&(0,r.jsx)(tH,{}),l.W.showDeepCodeSearchButton&&(0,r.jsx)(S.N5,{commandId:"copilot-chat:deep-codesearch",icon:N.RocketIcon,variant:"invisible",tooltipDirection:"s",className:(0,f.$)({[td]:e.deepCodeSearch})}),a,!l.W.spacesAsAttachmentsEnabled&&n.supportsSpaces&&(0,r.jsx)(b,{}),l.W.planningAgent&&!l.W.chatInputCommands&&e.showPlanningToggle&&(0,r.jsx)(t9,{})]}),(0,r.jsxs)("div",{className:(0,f.$)(tS,{[tj]:h}),children:[h&&(y?y({selectedAgent:v}):(0,r.jsx)(t6.Yb,{onNewThreadSelected:C,disabled:w})),(0,r.jsxs)("div",{className:tI,children:[l.W.copilotThirdPartyMcp&&n.supportsMCP&&e.thirdPartyMcpAllowed&&m&&(0,r.jsx)(t7,{}),e.stoppable?(0,r.jsx)(ai,{}):(0,r.jsx)(an,{disabled:s,label:n.submitLabel,isAgentTaskSubmitInProgress:c,isIncompleteCommand:d,showStartPullRequestButton:u,className:u?tu:void 0})]})]})]})});function an(e){let t,a,i,l=(0,n.c)(12),{disabled:s,label:o,isAgentTaskSubmitInProgress:c,isIncompleteCommand:d,showStartPullRequestButton:u,className:m}=e,h=void 0!==c&&c;l[0]!==s||l[1]!==d||l[2]!==o?(t=()=>s?d?"Complete your slash command before sending":o||"Sending a message is unavailable":o||"Send now",l[0]=s,l[1]=d,l[2]=o,l[3]=t):t=l[3];let p=t;l[4]!==s||l[5]!==p||l[6]!==h||l[7]!==u?(a=h?(0,r.jsx)("div",{className:"d-flex flex-items-center height-full mx-2",children:(0,r.jsx)(C.A,{size:"small"})}):u&&s?(0,r.jsx)(T.Q,{size:"medium",leadingVisual:N.PaperAirplaneIcon,inactive:!0,children:at}):s?(0,r.jsx)(E.K,{variant:"invisible",size:"medium",icon:N.PaperAirplaneIcon,"aria-label":p(),inactive:!0,"aria-disabled":!0}):u?(0,r.jsx)(S.cQ,{commandId:"copilot-chat:send-message",leadingVisual:N.PaperAirplaneIcon,children:at}):(0,r.jsx)(S.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:N.PaperAirplaneIcon,"aria-label":p()}),l[4]=s,l[5]=p,l[6]=h,l[7]=u,l[8]=a):a=l[8];let f=a;return l[9]!==f||l[10]!==m?(i=m?(0,r.jsx)("div",{className:m,children:f}):f,l[9]=f,l[10]=m,l[11]=i):i=l[11],i}function ai(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(S.N5,{...(0,w.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:N.SquareFillIcon,tooltipDirection:"s",className:t_}),t[0]=e):e=t[0],e}ar.displayName="ChatInputToolbar";try{aa.displayName||(aa.displayName="ChatInput")}catch{}try{an.displayName||(an.displayName="SubmitButton")}catch{}try{ai.displayName||(ai.displayName="StopButton")}catch{}function al(e){return e.mode}function as(e){return"user"===e.role}function ao(e){return"attachment-types"===e?null:"attachment-types"}function ac(e){return e.type.startsWith("image/")}},71363:(e,t,a)=>{a.d(t,{F:()=>_,X:()=>S});var r=a(74848),n=a(21728),i=a(70170),l=a(53419),s=a(29731),o=a(5524),c=a(70119),d=a(34164),u=a(96540),m=a(40961),h=a(26408),p=a(25641),f=a(2635),g=a(33592);let y=e=>{let t,a,i,l=(0,n.c)(6),{children:s,delay:o,assertive:c}=e,d=void 0===o?500:o,[m,h]=(0,u.useState)(!1);if(l[0]!==d?(t=()=>{h(!1);let e=setTimeout(()=>h(!0),d);return()=>clearTimeout(e)},a=[d,h],l[0]=d,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,u.useEffect)(t,a),!m)return null;let p=void 0!==c&&c?"assertive":"polite";return l[3]!==s||l[4]!==p?(i=(0,r.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:s}),l[3]=s,l[4]=p,l[5]=i):i=l[5],i};try{y.displayName||(y.displayName="DelayedComponent")}catch{}var x=a(35673);let v="RepoSelectPanel-module__ActionList--ud9yE";var C=a(27844);function _(e){let t,a,i,s,o=(0,n.c)(12),{currentReferences:c}=(0,f.Pk)(),d=(0,g.b)();o[0]!==c?(a=new Set((t=c.filter(w)).map(b)),o[0]=c,o[1]=t,o[2]=a):(t=o[1],a=o[2]);let m=a,[h,y]=(0,u.useState)();o[3]!==d||o[4]!==e||o[5]!==t?(i=async a=>{y(void 0);let r=t.find(e=>e.id===a);if(r){d.removeReference(r),(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"removed",component:"ATTACHMENT_MENU",mode:"immersive"});return}let n=await d.service.fetchRepo(a);if(!n.ok){y("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}e.onRepoSelect?.(n.payload);let i=(0,p.qS)(n.payload);d.addReference(i,"repoMenu"),(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"selected",component:"ATTACHMENT_MENU",mode:"immersive"})},o[3]=d,o[4]=e,o[5]=t,o[6]=i):i=o[6];let x=i;return o[7]!==h||o[8]!==e||o[9]!==m||o[10]!==x?(s=(0,r.jsx)(S,{...e,selectionVariant:"multiple",selectedRepoIds:m,onSelectRepo:x,description:"Choose repositories to chat about.",error:h}),o[7]=h,o[8]=e,o[9]=m,o[10]=x,o[11]=s):s=o[11],s}function b(e){return e.id}function w(e){return"repository"===e.type}function S(e){let t,a,p,g,_,b,w,S,I,N,R,E,T,A,k,M,L,P,F,O=(0,n.c)(49),{open:D,onOpenChange:$,submitReturnFocusRef:B,cancelReturnFocusRef:U,selectedRepoIds:W,featuredRepoIds:V,onSelectRepo:z,selectionVariant:q,description:H,error:G,ownerDisplayLogin:K,includeForks:Q,anchorRef:Z}=e,J=void 0===V?W:V,{ssoOrganizations:Y}=(0,f.Pk)(),[X,ee]=(0,u.useState)("");O[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.s)(e=>ee(e),150,{start:!1}),O[0]=t):t=O[0];let et=t;O[1]!==D?(a=()=>{D||ee("")},p=[D],O[1]=D,O[2]=a,O[3]=p):(a=O[2],p=O[3]),(0,u.useEffect)(a,p);let{repositories:ea,loading:er}=(0,h.U)(X,D,void 0,K,void 0!==Q&&Q);e:{if(er){g="Loading repositories";break e}if(0===ea.length){g="No repositories found";break e}if(1===ea.length){g="1 repository found";break e}g=`${ea.length} repositories found`}let en=g;O[4]===Symbol.for("react.memo_cache_sentinel")?(_=e=>{et(e.currentTarget.value)},O[4]=_):_=O[4];let ei=_;t:{let e;if(!Y){let e;O[5]===Symbol.for("react.memo_cache_sentinel")?(e=[],O[5]=e):e=O[5],b=e;break t}O[6]!==Y?(e=Y.map(j),O[6]=Y,O[7]=e):e=O[7],b=e}let el=b;O[8]!==J?(w=e=>J.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",O[8]=J,O[9]=w):w=O[9];let{featuredRepos:es,nonFeaturedRepos:eo}=function(e,t){let a={};for(let r of e){let e=t(r);a[e]??(a[e]=[]),a[e].push(r)}return a}(ea,w),[ec,ed]=(0,u.useState)(!1);O[10]!==z?(S=async e=>{ed(!0),await z(e),ed(!1)},O[10]=z,O[11]=S):S=O[11];let eu=S;O[12]===Symbol.for("react.memo_cache_sentinel")?(I=(0,s.G)("repo-select-panel"),O[12]=I):I=O[12];let em=c.X,eh=Z&&"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm";O[13]!==eh?(N=(0,d.$)(eh),O[13]=eh,O[14]=N):N=O[14],O[15]!==U||O[16]!==$?(R=()=>{(0,m.flushSync)(()=>$(!1)),U.current?.focus(),(0,l.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},O[15]=U,O[16]=$,O[17]=R):R=O[17],O[18]!==$||O[19]!==B?(E=()=>{(0,m.flushSync)(()=>$(!1)),B.current?.focus()},O[18]=$,O[19]=B,O[20]=E):E=O[20];let ep=Z?"anchored":"modal",ef="multiple"===q?"Select repositories":"Select a repository",eg=el.length>0&&"border-bottom-0";O[21]!==eg?(T=(0,d.$)(eg),O[21]=eg,O[22]=T):T=O[22];let ey=!0===er||ec;O[23]!==ey?(A=(0,r.jsx)(c.X.SearchInput,{loading:ey,onChange:ei,placeholder:"Search repositories","aria-label":"Search repositories"}),O[23]=ey,O[24]=A):A=O[24],O[25]!==T||O[26]!==A?(k=(0,r.jsx)(c.X.Header,{className:T,children:A}),O[25]=T,O[26]=A,O[27]=k):k=O[27],O[28]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.jsx)(x.hl,{}),O[28]=M):M=O[28],O[29]!==G?(L=G&&(0,r.jsx)(c.X.Message,{variant:"error",size:"inline",children:G}),O[29]=G,O[30]=L):L=O[30];let ex="initial"===er?(0,r.jsxs)("div",{className:v,children:[(0,r.jsx)("div",{className:"sr-only",children:en}),(0,r.jsx)(c.X.Loading,{children:"Fetching repositories\u2026"})]}):0!==ea.length||er?(0,r.jsxs)(o.l,{className:v,children:[(0,r.jsx)("div",{className:"sr-only",children:en}),es?.map(e=>(0,r.jsx)(C.W,{repo:e,onSelect:eu,selected:W.has(e.databaseId)},e.databaseId)),es&&eo&&(0,r.jsx)(o.l.Divider,{}),eo?.map(e=>(0,r.jsx)(C.W,{repo:e,onSelect:eu,selected:W.has(e.databaseId)},e.databaseId))]}):(0,r.jsxs)("div",{className:v,children:[(0,r.jsx)("div",{className:"sr-only",children:en}),(0,r.jsx)("div",{className:"RepoSelectPanel-module__emptyStateMessage--qQwDm",children:(0,r.jsx)(y,{delay:750,children:(0,r.jsx)(c.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})})]});return O[31]!==em||O[32]!==Z||O[33]!==H||O[34]!==D||O[35]!==q||O[36]!==N||O[37]!==R||O[38]!==E||O[39]!==ep||O[40]!==ef||O[41]!==k||O[42]!==M||O[43]!==L||O[44]!==ex?(P=(0,r.jsxs)(em,{className:N,width:"large",maxHeight:"xlarge",onCancel:R,onSubmit:E,open:D,variant:ep,selectionVariant:q,title:ef,description:H,anchorRef:Z,children:[k,M,L,ex]}),O[31]=em,O[32]=Z,O[33]=H,O[34]=D,O[35]=q,O[36]=N,O[37]=R,O[38]=E,O[39]=ep,O[40]=ef,O[41]=k,O[42]=M,O[43]=L,O[44]=ex,O[45]=P):P=O[45],O[46]!==I||O[47]!==P?(F=(0,r.jsx)("div",{...I,children:P}),O[46]=I,O[47]=P,O[48]=F):F=O[48],F}function j(e){return e.login}try{_.displayName||(_.displayName="RepoReferencesSelectPanel")}catch{}try{S.displayName||(S.displayName="RepoSelectPanel")}catch{}},72011:(e,t,a)=>{a.d(t,{A2:()=>p,Bj:()=>g,CT:()=>u,Ku:()=>o,Lr:()=>m,O6:()=>s,X_:()=>c,dp:()=>d,ee:()=>h,vC:()=>f});var r=a(25641),n=a(23657),i=a(96379);let l="/github-copilot/chat",s=["copilot-chat","custom-copilots"],o=["copilot-chat","custom-copilots","count"];function c(e){return["copilot-chat","custom-copilots",e]}function d(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function u(e){let t=e?`${l}/custom_copilots?type=${e}`:`${l}/custom_copilots`,a=await (0,i.lS)(t);if(!a.ok)throw Error(`Failed to fetch spaces: ${r.nN[a.status]||r.DW}`);return await a.json()}async function m(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:a}=e,n=`${l}/custom_copilots/${t}/${a}`,s=await (0,i.lS)(n);if(!s.ok)return{status:s.status,ok:!1,error:r.nN[s.status]||r.DW};let o=await s.json();return{status:s.status,ok:!0,payload:o}}async function h(e){let t=await (0,i.lS)((0,n.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function p(e){let t=await (0,i.lS)(`${(0,n.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}async function f(e){let t=await (0,i.lS)(`${(0,n.fn)(e)}/menu_actions`);if(!t.ok)throw Error("Error fetching menu actions");try{let e=await t.json();return{visibility:e.visibility??"private",shareable:e.shareable??!1,editable:e.editable??!1,adminable:e.adminable??!1,baseRole:e.baseRole??"none",public:e.public??!1}}catch(e){throw Error(`Error parsing menu actions: ${e}`)}}async function g(){let e=await (0,i.lS)(`${l}/custom_copilots/count`);if(!e.ok)throw Error(`Failed to fetch spaces count: ${r.nN[e.status]||r.DW}`);return e.json()}},72439:(e,t,a)=>{a.d(t,{E:()=>CopilotTextAttacher,x:()=>s});var r=a(50467),n=a(53419),i=a(25641),l=a(23967);let s="application/x.clipboard",o=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(l.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),a=0,r=0;for(let n=0;n<t;n++){let t=e.charCodeAt(n);0===t?a++:t>127&&r++}let n=a/t,i=r/t;return n<=.1&&i<=.2}async makeReference(e,t){let a=await e.text(),r=e.name||(t?await t:await this.generateFileName(a,e.type));return this.makeReferenceSync(a,r)}makeReferenceSync(e,t){let a=t.split(".").pop();return(0,n.BI)("copilot.attach_pasted_file",{extension:a,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,a){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let n=await e.text();if(!CopilotTextAttacher.isPlainText(n))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(a)r=this.makeReferenceSync(n,a),this.manager.addReference(r,"text-attacher");else{let a=(0,i.Vc)(e.name);this.manager.addReference(a,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{r=await this.makeReference(e,t),this.manager.replaceReference(a,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(a)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let a=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${a}

File contents:
\`\`\`
${e}
\`\`\`
`),i=r.ok?o.exec(r.payload)?.[1]:null;return i?(0,n.BI)("copilot.generate_pasted_file_name.success"):(0,n.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),a=t>0&&t<e.length-1,r=a?e.substring(0,t):e,n=a?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${n}`);)i++;return`${r}${i}${n}`}defaultFileName(e){return e===s?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,r._)(this,"manager",void 0),(0,r._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,r._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},76166:(e,t,a)=>{a.d(t,{d:()=>n});var r=a(53419);function n(e,t){(0,r.BI)("dotcom_chat.vision.error",{type:e,...t})}},76872:(e,t,a)=>{a.d(t,{D:()=>C});var r=a(74848),n=a(23657),i=a(44956),l=a(84646),s=a(51563),o=a(53419),c=a(20263),d=a(96459),u=a(59394),m=a(15220),h=a(11680),p=a(46251),f=a(86877),g=a(99511),y=a(96540),x=a(79064),v=a(6236);function C({dialogTitle:e="New Space",closeDialog:t,initialSpace:a,onSubmit:C,returnFocusRef:_}){let b=(0,d.Z)(),w=(0,y.useRef)(null),S=(0,l.AV)(),[j,I]=(0,y.useState)(a?.name??S),[N,R]=(0,y.useState)(null),[E,T]=(0,y.useState)({}),[A,k]=(0,y.useState)(!1),{upsertCopilotSpace:M,isPending:L}=(0,s.$)(),P=(0,u.S)(),F=(0,y.useCallback)(e=>{k(!1);let t={...E};for(let a of e)t[a]&&delete t[a];T(t)},[E]),O=(0,y.useCallback)(e=>R(e),[]);(0,y.useEffect)(()=>{(0,o.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,y.useEffect)(()=>{w.current?.focus()},[E.name,E.slug]),(0,y.useEffect)(()=>{a?w.current?.focus():w.current?.select()},[a]);let D=async()=>{if(L)return;let e=a?.resources?[...a.resources]:[],i=[];if(a&&N){let t=function(e,t){let a=[],r=[];if("Organization"!==t.type||t.allowsPrivateReposFromOtherOrgs)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let n of e)"ownerId"in n&&"private"in n&&n.private&&n.ownerId!==t.id?r.push(n):a.push(n);return{resourcesToSave:a,resourcesThatWillNotTransfer:r}}(a.resources||[],N);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let l=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),t=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;l=await P({title:"Some resources will not be duplicated",content:(0,r.jsx)(c.BC,{html:t}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(l)try{let r=await M({name:j,ownerId:N?.id,ownerType:N?.type,resources:e,generalInstructions:a?.generalInstructions});T({}),k(!1),t(),C?.(),x.Jt.setLastSelectedSpace(r);let i=(0,n.Cb)(r);return b(i)}catch(e){e&&"object"==typeof e&&Object.keys(e).length>0?(k(!1),T(e)):(T({}),k(!0))}},$=()=>{t(),setTimeout(()=>_?.current?.focus(),0)};return(0,r.jsx)(m.l,{position:{narrow:"fullscreen"},title:e,onClose:$,width:"large","aria-label":e,className:"CreateSpaceDialog-module__createSpaceDialog--YECfV",renderFooter:()=>(0,r.jsx)(i.m,{onCancel:$,onSave:D,isLoading:L,disabled:!N,saveButtonText:"Create Space"}),children:(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await D()},children:[A&&(0,r.jsx)(h.l,{className:"mb-3",variant:"critical",title:"Error saving space",hideTitle:!0,description:"Something went wrong while saving."}),(0,r.jsxs)(p.B,{children:[(0,r.jsxs)(f.A,{children:[(0,r.jsx)(f.A.Label,{required:!0,children:"Space name"}),(0,r.jsx)(g.A,{ref:w,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:j,onChange:e=>{I(e.target.value),F(["name","slug"])}}),(0,r.jsx)(f.A.Caption,{children:"Choose a name that describes your project or use case"}),E.name?(0,r.jsx)(f.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Name ",E.name]})}):E.slug?(0,r.jsx)(f.A.Validation,{variant:"error",children:(0,r.jsx)("span",{children:n.j0})}):null]}),(0,r.jsx)(v.E,{onSelect:O})]})]})})}try{C.displayName||(C.displayName="CreateSpaceDialog")}catch{}},77274:(e,t,a)=>{a.d(t,{NE:()=>g,Mm:()=>C,YS:()=>v,mN:()=>w,XF:()=>_,Cf:()=>b,pu:()=>y,ms:()=>x});var r=a(74848),n=a(96540),i=a(86877),l=a(4175),s=a(84268),o=a(11196),c=a(21373),d=a(15220),u=a(38621),m=a(4559);let h={verySatisfied:"UserFeedbackColors-module__verySatisfied--HQthN",good:"UserFeedbackColors-module__good--a6lz4",satisfied:"UserFeedbackColors-module__satisfied--R1wkm",dissatisfied:"UserFeedbackColors-module__dissatisfied--fRn_n",veryDissatisfied:"UserFeedbackColors-module__veryDissatisfied--C4vDF",bad:"UserFeedbackColors-module__bad--FROJd"};var p=a(34164);function f({title:e="Give feedback",requestID:t,options:a,returnFocusRef:f,placeholderText:g="Tell us what you liked or what could be better",onSubmit:y,onClose:x},v){let[C,_]=(0,n.useState)(null),[b,w]=(0,n.useState)(""),[S,j]=(0,n.useState)([]),[I,N]=(0,n.useState)(0),[R,E]=(0,n.useState)(!1),[T,A]=(0,n.useState)(!1);(0,n.useEffect)(()=>{S.length>0&&N(e=>e+1)},[S]),(0,n.useImperativeHandle)(v,()=>({openDialog:e=>{if(null!=e){if(!a.some(t=>t.value===e))throw Error("invalid initial option value");_(e)}E(!0)}}));let k=e=>{_(null),w(""),j([]),E(!1),x?.(e)},M=async e=>{e.preventDefault();let t=[];try{t=await y(C,b)}catch{t=["An error occurred while submitting your feedback."]}j(t),0===t.length&&k("submit")},L=()=>k("cancel"),P=e=>{w(e.target.value),j([])},F=async()=>{if(t){try{await navigator.clipboard.writeText(`Request ID: ${t}`)}catch{j(e=>[...e,"Failed to copy logs."]);return}A(!0),(0,m.i)("Copied!"),setTimeout(()=>{A(!1)},1e3)}};return(0,r.jsx)(r.Fragment,{children:R&&(0,r.jsx)(d.l,{onClose:()=>k("dismiss"),title:e,renderBody:()=>(0,r.jsxs)("div",{className:"UserFeedback-module__bodyContainer--G2bmg",children:[(0,r.jsxs)(i.A,{required:!0,children:[(0,r.jsx)(i.A.Label,{visuallyHidden:!0,children:"Rating"}),(0,r.jsx)("div",{className:"UserFeedback-module__ratingContainer--Mg11z",children:a.map(e=>(0,r.jsxs)("div",{className:"UserFeedback-module__ratingOption--ZLoA0",children:[(0,r.jsx)("button",{type:"button",role:"radio","aria-label":e.name,"aria-checked":C===e.value,onClick:()=>{_(e.value),j([])},className:(0,p.$)("UserFeedback-module__ratingButton--wgOnk",h[e.color]),children:e.icon}),(0,r.jsx)("span",{className:"UserFeedback-module__ratingCaption--TCp_8",children:e.name})]},e.name))})]}),(0,r.jsxs)("div",{className:"UserFeedback-module__messageContainer--FW6dD",children:[(0,r.jsxs)(i.A,{children:[(0,r.jsx)(i.A.Label,{children:"Message"}),(0,r.jsx)(l.Ay,{placeholder:g,value:b,onChange:P,resize:"vertical",block:!0,rows:5})]}),(0,r.jsxs)("span",{className:"UserFeedback-module__privacyText--J0awt",children:["Please don\u2019t include sensitive, confidential, or personal data. Your feedback helps us improve our services in line with our"," ",(0,r.jsx)(s.A,{href:"https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement",inline:!0,muted:!0,children:"Privacy Policy"}),"."]}),(0,r.jsx)("div",{className:"UserFeedback-module__validationError--e3pDo",role:"alert",children:S.map(e=>(0,r.jsx)("div",{children:e},e))},I)]})]}),renderFooter:()=>(0,r.jsxs)("div",{className:"UserFeedback-module__footerContainer--wvEjF",children:[(0,r.jsx)("div",{children:t&&(0,r.jsx)(o.m,{text:"Copy logs to add in feedback",direction:"n",children:(0,r.jsx)(c.Q,{leadingVisual:T?(0,r.jsx)(u.CheckIcon,{className:"UserFeedback-module__copyLogsSuccessIcon--i0uqN",size:16}):(0,r.jsx)(u.CopyIcon,{size:16}),onClick:F,variant:"default",children:T?"Copied!":"Copy logs"})})}),(0,r.jsxs)("div",{className:"UserFeedback-module__footerActionButtonGroup--FzuM1",children:[(0,r.jsx)(c.Q,{onClick:L,children:"Cancel"}),(0,r.jsx)(c.Q,{variant:"primary",type:"submit",onClick:M,children:"Send"})]})]}),className:"UserFeedback-module__Dialog--n5pi6",returnFocusRef:f})})}let g=(0,n.forwardRef)(f),y=(0,r.jsx)(u.ThumbsdownIcon,{className:"UserFeedback-module__thumbsDownIcon--Ion_2"}),x=(0,r.jsx)(u.ThumbsupIcon,{className:"UserFeedback-module__thumbsUpIcon--dBnnS"}),v=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),C=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),_=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 11C5 10.5858 5.33579 10.25 5.75 10.25H10.25C10.6642 10.25 11 10.5858 11 11C11 11.4142 10.6642 11.75 10.25 11.75H5.75C5.33579 11.75 5 11.4142 5 11Z"})]}),b=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),w=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]});try{f.displayName||(f.displayName="UserFeedbackInner")}catch{}try{g.displayName||(g.displayName="UserFeedback")}catch{}},79216:(e,t,a)=>{a.d(t,{Q:()=>l});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,n=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},l={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,a,r,n,...l]=t.pathname.split("/"),s=l.join("/"),o=i.fromUrlType(n);if(a&&r&&o)return{repo:`${a}/${r}`,type:s?o:"repository",id:s}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=n.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let a=i.fromMentionType(t.type);return a?{repo:t.repo,type:a,id:t.id}:void 0},isEqual:(e,t)=>l.stringify(e)===l.stringify(t),refersTo(e,t){let a=l.for(t);return null!==a&&l.isEqual(e,a)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},81829:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(74848),n=a(21728),i=a(71315),l=a(69726),s=a(96540);function o(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,a,i,l,s,o,c,d,u,m,h,p,f,g,y,x,v=(0,n.c)(17);return v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),a=(0,r.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),v[0]=t,v[1]=a,v[2]=i):(t=v[0],a=v[1],i=v[2]),v[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),s=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),o=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),v[3]=l,v[4]=s,v[5]=o,v[6]=c):(l=v[3],s=v[4],o=v[5],c=v[6]),v[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),h=(0,r.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),v[7]=d,v[8]=u,v[9]=m,v[10]=h):(d=v[7],u=v[8],m=v[9],h=v[10]),v[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),v[11]=p):p=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),v[12]=f):f=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),v[13]=g):g=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsxs)("defs",{children:[f,g,(0,r.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),v[14]=y):y=v[14],v[15]!==e?(x=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,a,i,l,s,o,c,u,m,h,d,p,y]}),v[15]=e,v[16]=x):x=v[16],x};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u="FullScreenDragOverlay-module__text--oftCM";function m(e){let t,a,m,h=(0,n.c)(9),{onFilesDrop:p,isUploading:f}=e,g=void 0!==f&&f;h[0]!==g||h[1]!==p?(t=e=>{g||p(e)},h[0]=g,h[1]=p,h[2]=t):t=h[2];let y=t;h[3]!==y?(a={onFilesDrop:y,targetElement:i.XC},h[3]=y,h[4]=a):a=h[4];let{isDragging:x}=function(e){let t,a,r,i=(0,n.c)(6),{onFilesDrop:l,targetElement:d}=e,[u,m]=(0,s.useState)(!1),h=(0,s.useRef)(0);return i[0]!==l||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(h.current=h.current+1,1===h.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),h.current=h.current-1,h.current<=0&&(h.current=0,m(!1))},a=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),h.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&l(t)};return d.addEventListener("dragover",o),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",a),()=>{d.removeEventListener("dragover",o),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",a)}},a=[l,d],i[0]=l,i[1]=d,i[2]=t,i[3]=a):(t=i[2],a=i[3]),(0,s.useEffect)(t,a),i[4]!==u?(r={isDragging:u},i[4]=u,i[5]=r):r=i[5],r}(a),v=null;if(g){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{size:"large"}),(0,r.jsx)("p",{className:u,children:"Uploading files..."})]}),h[5]=e):e=h[5],v=e}else if(x){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{}),(0,r.jsx)("p",{className:u,children:"Drop files to upload"})]}),h[6]=e):e=h[6],v=e}return v?(h[7]!==v?(m=(0,r.jsx)("div",{className:"FullScreenDragOverlay-module__overlay--Q9gow",children:(0,r.jsx)("div",{className:"FullScreenDragOverlay-module__centeredContent--iAFMy",children:v})}),h[7]=v,h[8]=m):m=h[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},82595:(e,t,a)=>{a.d(t,{I:()=>d});var r=a(74848),n=a(21728),i=a(34164),l=a(49851),s=a(38621);let o={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(o).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,a,d,u,m,h,p=(0,n.c)(19),{icon:f,hasBackground:g,color:y,size:x,className:v}=e,C=void 0!==g&&g,_=void 0===y?"gray":y,b=void 0===x?16:x;if("string"==typeof f)if(f in l.OZ)t=l.OZ[f];else{var w;let e,a;p[0]!==f?(w=f,e=(a=`${w.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`)in s?s[a]:void 0,p[0]=f,p[1]=e):e=p[1],t=e}else t=f;if(!t)return null;p[2]!==_?(a=c.has(_),p[2]=_,p[3]=a):a=p[3];let S=a,j=`${C?2*b:b}px`;p[4]!==_||p[5]!==S||p[6]!==j?(d={"--custom-size":j},S||(d["--custom-color"]=_),p[4]=_,p[5]=S,p[6]=j,p[7]=d):d=p[7];let I=S?o[_]:o.customColor,N=C&&o.hasBackground;return p[8]!==v||p[9]!==I||p[10]!==N?(u=(0,i.$)(o.container,I,N,v),p[8]=v,p[9]=I,p[10]=N,p[11]=u):u=p[11],p[12]!==t||p[13]!==b?(m=(0,r.jsx)(t,{size:b,fill:"currentColor"}),p[12]=t,p[13]=b,p[14]=m):m=p[14],p[15]!==d||p[16]!==u||p[17]!==m?(h=(0,r.jsx)("div",{style:d,className:u,children:m}),p[15]=d,p[16]=u,p[17]=m,p[18]=h):h=p[18],h}try{d.displayName||(d.displayName="Icon")}catch{}},84331:(e,t,a)=>{function r(e,t,a=.1){let n=l(e,t,a);return n&&-1===t.indexOf("/")&&(n+=l(e.substring(e.lastIndexOf("/")+1),t,a)),n}function n(e,t,a){if(t){let r=e.innerHTML.trim().match(a||function(e){let t=e.toLowerCase().split(""),a="",r=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");r?(a+=`(.*)(${t})`,r=!1):a+=`([^${t}]*?)(${t})`}return RegExp(`${a}(.*?)$`,"i")}(t));if(!r)return;let n=!1,i=[];for(let e=1;e<r.length;++e){let t=r[e];t&&(e%2==0?n||(i.push("<mark>"),n=!0):n&&(i.push("</mark>"),n=!1),i.push(t))}e.innerHTML=i.join("")}else{let t=e.innerHTML.trim(),a=t.replace(/<\/?mark>/g,"");t!==a&&(e.innerHTML=a)}}a.d(t,{He:()=>n,UD:()=>s,dt:()=>r});let i=new Set([" ","-","_"]);function l(e,t,a=.1){let r=e;if(r===t)return 1;let n=r.length,s=0,o=0,c=!0;for(let e of t){let t=r.indexOf(e.toLowerCase()),l=r.indexOf(e.toUpperCase()),d=Math.min(t,l),u=d>-1?d:Math.max(t,l);if(-1===u)return 0;s+=.1,r[u]===e&&(s+=.1),0===u&&(s+=.9-a,c&&(o=1)),i.has(r.charAt(u-1))&&(s+=.9-a),r=r.substring(u+1,n),c=!1}let d=t.length,u=s/d,m=(d/n*u+u)/2;return o&&m+a<1&&(m+=a),m}function s(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:1*!!(e.text>t.text)}},84646:(e,t,a)=>{a.d(t,{$7:()=>p,$W:()=>j,AV:()=>S,Ao:()=>x,BV:()=>w,OW:()=>CopilotSpaceSSOError,Tx:()=>v,a5:()=>_,e9:()=>f,i9:()=>CopilotSpaceNotFoundError,jS:()=>y,yV:()=>C,yk:()=>b});var r=a(50467),n=a(97665),i=a(94747),l=a(97286),s=a(72011),o=a(33592),c=a(96540),d=a(2635),u=a(71315),m=a(23657),h=a(69599);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,r._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function p(){let e=(0,n.jE)(),t=(0,o.b)();return(0,i.n)({mutationFn:async e=>{let a=await (0,s.ee)(e);if(!a.ok)throw Error(a.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:a.status,ok:!0,payload:a.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:s.O6})}})}function f(e){let t=(0,o.b)(),a=(0,h.G7)("copilot_spaces_split_index_calls"),r=y(e&&!a,{throwOnError:!1});(0,c.useEffect)(()=>{!a&&r.data&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:r.data})},[r.data,t,a])}function g(e,t,a={}){return(0,l.I)({queryKey:(0,s.X_)(e),queryFn:()=>(0,s.CT)(e),enabled:t,staleTime:3e5,throwOnError:a.throwOnError})}function y(e,t={}){return(0,l.I)({queryKey:s.O6,queryFn:()=>(0,s.CT)(),enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function x(e){return(0,l.I)({queryKey:(0,s.dp)(e),queryFn:async()=>{let t=await (0,s.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function v(e,t){return(0,l.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,s.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function C(e,t){return(0,l.I)({queryKey:["menu-actions",e,t],queryFn:async()=>(0,s.vC)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function _(e){return(0,l.I)({queryKey:s.Ku,queryFn:s.Bj,enabled:e,staleTime:3e5})}function b(e){let{data:t,isLoading:a}=g("starred",e),{data:r,isLoading:n}=g("user_owned",e),{data:i,isLoading:l}=g("org_owned",e),{data:s,isLoading:o}=g("shared_with_user",e);return{categorizedSpaces:(0,c.useMemo)(()=>({starred:t,userOwned:r,orgOwned:i,sharedWithUser:s}),[t,r,i,s]),categorizedLoading:(0,c.useMemo)(()=>({starred:a,userOwned:n,orgOwned:l,sharedWithUser:o}),[a,n,l,o])}}function w(){return(0,d.A3)("customCopilotsEnabled")}function S(){let e,t=(e=(0,d.A3)("customCopilots"),e?.length??0);return(0,c.useMemo)(()=>`New Space ${t+1}`,[t])}function j(e){return(0,c.useMemo)(()=>{if(!e)return;let{owner:t}=e,a=u.cg?.location.origin;if(!a)return;let r=(0,m.Cb)(e),n=`${a}${r}`,i=`content_url=${encodeURIComponent(n)}&report=${t}+(user)`;return`${a}/contact/report-content?${i}`},[e])}},87419:(e,t,a)=>{a.d(t,{Y:()=>c});var r=a(21728),n=a(96540),i=a(79064),l=a(2635),s=a(33592),o=a(72303);function c(e){let t,a,c,d,u,m,h,p,f,g,y=(0,r.c)(26),x=(0,l.Pk)(),v=(0,s.b)(),{currentTopic:C,messages:_,selectedThreadID:b}=x;y[0]!==x?(t=(0,o.W)(x),y[0]=x,y[1]=t):t=y[1];let w=t,S=(0,n.useRef)(null),j=e||S;return y[2]!==v||y[3]!==_.length||y[4]!==w?(a=()=>{w&&_.length>0&&v.showTopicPicker(!1)},c=[w,_.length,v],y[2]=v,y[3]=_.length,y[4]=w,y[5]=a,y[6]=c):(a=y[5],c=y[6]),(0,n.useEffect)(a,c),y[7]!==C||y[8]!==b?(d=()=>{let e=C?String(C.id):null;b&&e&&i.Jt.setSelectedTopic(b,e)},u=[b,C],y[7]=C,y[8]=b,y[9]=d,y[10]=u):(d=y[9],u=y[10]),(0,n.useEffect)(d,u),y[11]!==j?(m=()=>{let e=window.setTimeout(()=>{j.current?.focus()},1);return()=>{window.clearTimeout(e)}},h=[j],y[11]=j,y[12]=m,y[13]=h):(m=y[12],h=y[13]),(0,n.useEffect)(m,h),y[14]!==v||y[15]!==x.context?.[0]||y[16]!==x.currentRepository?(p=()=>{let e;return(e=x.context?.[0]??x.currentRepository)&&v.generateSuggestions(e),()=>{v.clearSuggestions()}},y[14]=v,y[15]=x.context?.[0],y[16]=x.currentRepository,y[17]=p):p=y[17],y[18]!==v||y[19]!==x.context||y[20]!==x.currentRepository||y[21]!==x.currentTopic||y[22]!==x.selectedThreadID?(f=[v,x.context,x.currentTopic,x.currentRepository,x.selectedThreadID],y[18]=v,y[19]=x.context,y[20]=x.currentRepository,y[21]=x.currentTopic,y[22]=x.selectedThreadID,y[23]=f):f=y[23],(0,n.useEffect)(p,f),y[24]!==j?(g={textAreaRef:j},y[24]=j,y[25]=g):g=y[25],g}},88752:(e,t,a)=>{a.d(t,{t2:()=>E,sV:()=>N,dX:()=>R});var r,n=a(74848),i=a(38621),l=a(4908),s=a(23398),o=a(5524),c=a(84268),d=a(10095),u=a(34164),m=a(96540),h=a(25641),p=a(35247),f=a(69497),g=a(94236),y=a(2635),x=a(33592),v=a(35673),C=a(1631);function _({reference:e,onClick:t}){let a,r=(0,y.Pk)(),l=(0,x.b)(),s=(0,m.useRef)(null),[c,d]=(0,m.useState)(!1),p=r?.mode??"assistive",{currentReferences:_}=r??{currentReferences:[]},b=(0,m.useMemo)(()=>_.map(e=>(0,h.Vb)(e)),[_]),w=(0,m.useMemo)(()=>(0,h.Vb)(e),[e]),S=(0,m.useMemo)(()=>"repo-instructions"===e.type,[e]),j=(0,m.useMemo)(()=>"org-instructions"===e.type,[e]),I=!S&&!j&&"web-search-result"!==e.type,N=(0,m.useMemo)(()=>S||j||b.includes(w),[S,j,b,w]),R=(0,m.useCallback)(t=>{t.stopPropagation(),N||l.addReference(e,"refMenu")},[l,e,N]),E=(0,h.JP)(e),T=(0,h.Xs)(E),A=(0,C.a_)(e);switch(e.type){case"file":case"snippet":{a=`${e.repoName}`;let t=e.path.lastIndexOf("/");-1!==t&&(a=`${a}/${e.path.substring(0,t)}`);break}case"web-search-result":a=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let k=(0,h.z$)(e);return(0,n.jsxs)(o.l.LinkItem,{onClick:a=>{t&&!a.defaultPrevented&&t(e,a)},href:E,rel:"noopener",className:(0,u.$)("reference-action","ChatReference-module__ActionList_LinkItem--gopkk"),target:"immersive"===p||"third-party"===e.type?"_blank":void 0,children:[A&&(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(A,{})}),(0,n.jsxs)(f.A,{title:k,maxWidth:"100%",className:"text-semibold",children:[k,a&&(0,n.jsx)("span",{className:"color-fg-muted ml-2",children:a})]}),I&&(0,n.jsx)(o.l.TrailingAction,{onClick:()=>d(!0),icon:i.KebabHorizontalIcon,label:"More reference options",ref:s}),I&&(0,n.jsx)(g.W,{anchorRef:s,open:c,onOpenChange:d,children:(0,n.jsx)(v.UJ,{portalContainerName:v.Dq,children:(0,n.jsxs)(o.l,{children:[T&&("immersive"===p||["third-party","folder","repository"].includes(e.type)?(0,n.jsxs)(o.l.LinkItem,{href:E,rel:"noopener",target:"_blank",children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(i.LinkIcon,{})}),"Open"]}):(0,n.jsxs)(o.l.Item,{onSelect:()=>{l.selectReference(e)},children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(i.LinkIcon,{})}),"Preview"]})),(0,n.jsxs)(o.l.Item,{onSelect:R,disabled:N,children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(i.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{_.displayName||(_.displayName="OutputReference")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}var b=a(21728),w=a(69726),S=a(89237);let j=(0,m.forwardRef)(function(e,t){let a,r,i,l,s,o,c,d,p,f,g=(0,b.c)(23);g[0]!==e?({reference:a,...r}=e,g[0]=e,g[1]=a,g[2]=r):(a=g[1],r=g[2]);let[y,x]=(0,m.useState)(!0);return g[3]!==a?(i=(0,h.JP)(a),g[3]=a,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,u.$)("FigmaChatReference-module__referenceToken--PONuv"),g[5]=l):l=g[5],g[6]!==a.thumbnailUrl||g[7]!==a.title||g[8]!==y?(s=a.thumbnailUrl&&(0,n.jsxs)(n.Fragment,{children:[y&&(0,n.jsx)("span",{className:"FigmaChatReference-module__thumbnailLoading--cQ2Uf",children:(0,n.jsx)(w.A,{size:"medium"})}),(0,n.jsx)("img",{className:(0,u.$)("FigmaChatReference-module__thumbnail--mm7QC",{"FigmaChatReference-module__thumbnailHidden--pv7wD":y}),src:a.thumbnailUrl,alt:`preview thumbnail for ${a.title}`,onLoad:()=>x(!1)})]}),g[6]=a.thumbnailUrl,g[7]=a.title,g[8]=y,g[9]=s):s=g[9],g[10]!==s?(o=(0,n.jsx)("span",{className:"FigmaChatReference-module__thumbnailOuter--oMFvD",children:s}),g[10]=s,g[11]=o):o=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)("div",{className:"FigmaChatReference-module__figmaIconOuter--KtveL",children:(0,n.jsx)(S._,{className:"FigmaChatReference-module__figmaIcon--kEY45"})}),g[12]=c):c=g[12],g[13]!==a?(d=(0,h.z$)(a),g[13]=a,g[14]=d):d=g[14],g[15]!==d?(p=(0,n.jsxs)("span",{className:"FigmaChatReference-module__content--Mpcb0",children:[c,(0,n.jsx)("span",{className:"FigmaChatReference-module__name--XjBR8",children:d})]}),g[15]=d,g[16]=p):p=g[16],g[17]!==t||g[18]!==r||g[19]!==i||g[20]!==o||g[21]!==p?(f=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("a",{href:i,className:l,ref:t,target:"_blank",rel:"noreferrer",...r,children:[o,p]})}),g[17]=t,g[18]=r,g[19]=i,g[20]=o,g[21]=p,g[22]=f):f=g[22],f});try{j.displayName||(j.displayName="FigmaChatReference")}catch{}var I=a(95896);function N({references:e,onToggle:t,onClick:a,isImmersive:r,className:o}){let c=(0,m.useMemo)(()=>(0,h.rT)(e),[e]),{getDetailsProps:p}=(0,l.A)({});if(0===c.length)return null;let f=`${c.length} ${1===c.length?"reference":"references"}`;return(0,n.jsxs)(s.A,{...p(),onToggle:t,className:(0,u.$)(o,"ChatReferences-module__referencesDetails--Ypv2c"),children:[(0,n.jsxs)("summary",{className:(0,u.$)("ChatReferences-module__referencesContainer--qLjdy"),children:[(0,n.jsx)("span",{className:(0,u.$)("ChatReferences-module__title--d18y3",r?"":"ChatReferences-module__assistiveTitle--Ojcrs"),children:f}),(0,n.jsx)(d.A,{icon:i.ChevronDownIcon,className:(0,u.$)("references-chevron-down","ChatReferences-module__chevronDownIcon--Fv9mJ")}),(0,n.jsx)(d.A,{icon:i.ChevronUpIcon,className:(0,u.$)("references-chevron-up","ChatReferences-module__chevronUpIcon--OPX7R")})]}),(0,n.jsx)(R,{references:c,onClick:a,isImmersive:r})]})}function R({references:e,onClick:t,isImmersive:a}){let r=(0,m.useMemo)(()=>e.some(e=>"web-search-result"===e.type),[e]);return(0,n.jsxs)(o.l,{className:(0,u.$)(a&&"ChatReferences-module__referencesListImmersiveContainer--gM5wy","ChatReferences-module__ActionList--ACk2F"),children:[e.map(e=>(0,n.jsx)(_,{reference:e,onClick:t},(0,h.Vb)(e))),r&&(0,n.jsxs)("div",{className:"ChatReferences-module__chatMessageReferenceListFooter--WgJAa",children:["Copilot used the"," ",(0,n.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,n.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})}function E({references:e,message:t,className:a,size:r,onClickReference:i,getReferenceVersion:l}){let{bigReferences:s,smallReferences:o}=(0,m.useMemo)(()=>(function(e){let t=(0,h.rT)(e),a=[],r=[];for(let e of t)T.has(e.type)?a.push(e):r.push(e);return{bigReferences:a,smallReferences:r}})(e),[e]),c=e=>"figma"===e.type&&p.W.immersiveFigmaIntegration?(0,n.jsx)(j,{reference:e,onClick:t=>i?.(e,t)},(0,h.Vb)(e)):(0,n.jsx)(C.BR,{message:t,reference:e,size:r,onClick:(t,a)=>i?.(e,a),getReferenceVersion:l},(0,h.Vb)(e));return(0,n.jsxs)(I.M,{"aria-label":"Attachments",className:(0,u.$)("ChatReferences-module__referenceTokensOuterContainer--OV840",a),children:[s.map(c),(0,n.jsx)("div",{className:"ChatReferences-module__referenceTokensContainer--nhf9A",children:o.map(c)})]})}let T=new Set(["figma","image"]);try{N.displayName||(N.displayName="ChatMessageReferencesList")}catch{}try{R.displayName||(R.displayName="ReferencesList")}catch{}try{E.displayName||(E.displayName="ChatMessageReferenceTokens")}catch{}try{T.displayName||(T.displayName="BIG_REFERENCE_TYPES")}catch{}},92130:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(74848),n=a(21728),i=a(74807);function l(e){let t,a,l=(0,n.c)(3),{hidden:s}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(i.N,{animationType:i.L.Idle,loopAnimation:!0,size:64}),l[0]=t):t=l[0],l[1]!==s?(a=(0,r.jsx)("div",{"aria-hidden":s,children:t}),l[1]=s,l[2]=a):a=l[2],a}try{l.displayName||(l.displayName="CopilotIconAnimation")}catch{}},95896:(e,t,a)=>{a.d(t,{M:()=>o});var r=a(74848),n=a(21728),i=a(69676),l=a(45800),s=a(96540);function o(e){let t,a,o,c,d=(0,n.c)(8);d[0]!==e?({className:t,...a}=e,d[0]=e,d[1]=t,d[2]=a):(t=d[1],a=d[2]);let u=(0,s.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(o={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:i.z0.ArrowHorizontal|i.z0.HomeAndEnd},d[3]=o):o=d[3],(0,l.G)(o),d[4]!==t||d[5]!==e.children||d[6]!==a?(c=(0,r.jsx)("div",{ref:u,className:t,role:"toolbar",...a,children:e.children}),d[4]=t,d[5]=e.children,d[6]=a,d[7]=c):c=d[7],c}try{o.displayName||(o.displayName="Toolbar")}catch{}},97315:(e,t,a)=>{a.d(t,{P:()=>o});var r=a(74848),n=a(21728),i=a(11680),l=a(96540),s=a(33592);function o(e){let t,a,o,d,u,m,h=(0,n.c)(14),{ambientError:p,useLargerBorderRadius:f}=e,g=(0,s.b)(),[y,x]=(0,l.useState)(0),v=(0,l.useRef)(null);h[0]!==p.message?(t=()=>{if(p.message){x(c);let e=setTimeout(()=>{v.current&&v.current.focus()},250);return()=>clearTimeout(e)}},h[0]=p.message,h[1]=t):t=h[1],h[2]!==p?(a=[p],h[2]=p,h[3]=a):a=h[3],(0,l.useEffect)(t,a);let C=`AmbientErrorBanner-module__ambientErrorBanner--lajPC ${void 0!==f&&f?"AmbientErrorBanner-module__largeBorderRadius--NGjjE":"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"}`;return h[4]===Symbol.for("react.memo_cache_sentinel")?(o={outline:"none"},h[4]=o):o=h[4],h[5]!==p.message?(d=(0,r.jsx)("div",{ref:v,tabIndex:-1,style:o,children:p.message}),h[5]=p.message,h[6]=d):d=h[6],h[7]!==g?(u=()=>{g.dismissAmbientError()},h[7]=g,h[8]=u):u=h[8],h[9]!==y||h[10]!==C||h[11]!==d||h[12]!==u?(m=(0,r.jsx)(i.l,{"aria-atomic":"true",className:C,description:d,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:u},y),h[9]=y,h[10]=C,h[11]=d,h[12]=u,h[13]=m):m=h[13],m}function c(e){return e+1}try{o.displayName||(o.displayName="AmbientErrorBanner")}catch{}},97564:(e,t,a)=>{a.d(t,{V:()=>n});var r=a(96379);async function n(e){let t=await (0,r.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},97793:(e,t,a)=>{a.d(t,{O:()=>f});var r=a(74848),n=a(96379),i=a(38621),l=a(15220),s=a(86877),o=a(99511),c=a(43371),d=a.n(c),u=a(96540);let m="McpServerDialog-module__inputError--Ojb_P",h="McpServerDialog-module__formField--rsUqW",p=(0,r.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),f=({isOpen:e,onClose:t,returnUrl:a,onServerAdded:c,returnFocusRef:f,showSettingsLink:g=!0})=>{let[y,x]=(0,u.useState)(""),[v,C]=(0,u.useState)(""),[_,b]=(0,u.useState)(null),[w,S]=(0,u.useState)(null),j=(0,u.useCallback)(()=>{x(""),C(""),b(null),S(null),t()},[t]),I=async e=>{if(e&&e.preventDefault(),""===y.trim()||""===v.trim()){v.trim()||b("MCP server URL is required"),y.trim()||S("Name is required");return}try{if(b(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),a=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!a.test(e)}catch{return!1}}(v))return void b("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",v.trim()),e.append("name",y.trim()),a&&e.append("return_url",a);let t=await (0,n.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let a=await t.text();try{let t=JSON.parse(a);if("unsupported_server_type"===t.error)e=(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",p,"."]});else if(t.field_errors){for(let[e,a]of Object.entries(t.field_errors)){let t=a.join(", ");"mcp_server_url"===e?b(t):"display_name"===e&&S(t)}return}else t.message&&(e=t.message)}catch{e=a.includes("well-known/oauth-authorization-server")||"Client setup failed"===a.trim()?(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",p,"."]}):a||e}}catch{e="Failed to add MCP server"}b(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(j(),c?.(),window.location.assign(i)):(j(),c?.())}catch(e){e instanceof Error?b(e.message):b("An unknown error occurred")}};return e?(0,r.jsx)(l.l,{title:"Add MCP server",onClose:j,footerButtons:[{buttonType:"default",content:"Cancel",onClick:j},{buttonType:"primary",content:(0,r.jsxs)(r.Fragment,{children:["Connect to MCP server",(0,r.jsx)("span",{style:{marginLeft:8},children:(0,r.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{I()}}],returnFocusRef:f,children:(0,r.jsxs)("form",{className:"McpServerDialog-module__dialogForm--pUtNF",onSubmit:I,autoComplete:"on",children:[(0,r.jsxs)(s.A,{required:!0,className:h,children:[(0,r.jsx)(s.A.Label,{children:"MCP server name"}),(0,r.jsx)(o.A,{name:"mcp-server-name",type:"text",value:y,onChange:e=>{x(e.target.value),S(null)},placeholder:"Enter a name for this MCP server",className:w?m:void 0,autoComplete:"on",block:!0}),w&&(0,r.jsx)(s.A.Validation,{variant:"error",children:w})]}),(0,r.jsxs)(s.A,{required:!0,className:h,children:[(0,r.jsx)(s.A.Label,{children:"MCP server URL"}),(0,r.jsx)(o.A,{name:"mcp-url",type:"url",value:v,onChange:e=>{C(e.target.value),b(null)},placeholder:"https://mcp.example.com",className:_?m:void 0,autoComplete:"on",block:!0}),_&&(0,r.jsx)(s.A.Validation,{variant:"error",children:_})]}),(0,r.jsx)("button",{type:"submit",className:"McpServerDialog-module__hiddenSubmitButton--KcK0s",tabIndex:-1,children:"Submit"}),(0,r.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",g&&(0,r.jsxs)(r.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,r.jsx)("a",{href:"/settings",className:"McpServerDialog-module__underline--YKUMk",children:"your settings"}),"."]})]})]})}):null};try{p.displayName||(p.displayName="MCP_SPEC_LINK")}catch{}try{f.displayName||(f.displayName="McpServerDialog")}catch{}},97949:(e,t,a)=>{a.d(t,{U:()=>o});var r=a(99054),n=a(17925),i=a(25641),l=a(35247),s=a(79216);let o=function({references:e,agents:t,commands:a}){this.parser=function(o){let c=o.split(/(\s+)/),d=[];for(let[o,u]of c.entries()){if(l.W.chatInputCommands&&0===o){let e=(0,n.V)(u,a);if(e){d.push({type:"command",value:u,data:{command:e}});continue}}let c=0===o&&r.qj.exec(u)?.groups?.slug,m=c&&t.find(e=>e.slug===c);if(m){d.push({type:"agent-mention",value:u,data:{mentionedAgent:m}});continue}let h=s.Q.parse(u),p=h&&e?.find(e=>s.Q.refersTo(h,e));if(h){d.push({type:"reference-mention",value:u,data:{mentionedReferenceId:p&&(0,i.Vb)(p),referenceMention:h}});continue}let f=d.at(-1);f?.type==="text"?f.value+=u:d.push({type:"text",value:u})}return{type:"root",children:d}}}},99054:(e,t,a)=>{a.d(t,{JE:()=>p,Z3:()=>m,bn:()=>u,kw:()=>f,qj:()=>h});var r=a(21728),n=a(97286),i=a(8625),l=a(14521),s=a(25641),o=a(2635),c=a(33592),d=a(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",h=/^@(?<slug>\S+)$/;function p(e){let t,a,i,u,m,h,p=(0,r.c)(25),{agentsPath:f,model:g}=(0,o.bP)("agentsPath","model"),y=(0,d.tD)(),x=(0,c.b)(),v=!!(0,l.G)(),C=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==v||p[2]!==C?(t=e=>{let{messages:t}=y();if(C||v)return{agents:[],showLimit:!1};let a=(0,s.Q7)(t)[0];return a?{agents:e.filter(e=>e.slug===a.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=v,p[2]=C,p[3]=t):t=p[3];let _=t;p[4]!==f?(a=["copilot-chat","agents",f],p[4]=f,p[5]=a):a=p[5],p[6]!==f||p[7]!==x?(i=()=>f?x.fetchAgents(f):[],p[6]=f,p[7]=x,p[8]=i):i=p[8];let b=(void 0===e||e)&&!C&&!v;p[9]!==_||p[10]!==a||p[11]!==i||p[12]!==b?(u={queryKey:a,queryFn:i,select:_,enabled:b},p[9]=_,p[10]=a,p[11]=i,p[12]=b,p[13]=u):u=p[13];let{isLoading:w,data:S,refetch:j,isStale:I,isFetched:N}=(0,n.I)(u);p[14]!==S||p[15]!==N||p[16]!==I||p[17]!==j?(m=async()=>!N||I?(await j()).data:S,p[14]=S,p[15]=N,p[16]=I,p[17]=j,p[18]=m):m=p[18];let R=m,E=S?.agents,T=S?.showLimit??!1;return p[19]!==R||p[20]!==w||p[21]!==E||p[22]!==T||p[23]!==C?(h={loading:w,disabled:C,availableAgents:E,showLimit:T,imperativelyFetch:R},p[19]=R,p[20]=w,p[21]=E,p[22]=T,p[23]=C,p[24]=h):h=p[24],h}function f(e){let t,a,n=(0,r.c)(6),{inputOnChange:l,inputRef:s}=e;n[0]!==l||n[1]!==s?(t={inputRef:s,fallbackEventHandler:l},n[0]=l,n[1]=s,n[2]=t):t=n[2];let o=(0,i.H)(t);return n[3]!==o||n[4]!==s?(a=e=>{s.current?.value&&o(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;o(t,[0,0],t.length)},n[3]=o,n[4]=s,n[5]=a):a=n[5],a}}}]);
//# sourceMappingURL=12077-a5dcfe1a9a75.js.map