"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[14439,19973,29382,36820,69677,76806,83852,94595],{13475:(e,t,a)=>{a.d(t,{T:()=>h});var s=a(79184),n=a(33592),r=a(72303),i=a(72206),l=a(17485),o=a(96540),c=a(7812),u=a(1747),d=a(23827),m=a(90918);function h(e,t){let a=(0,i.tD)(),h=(0,n.b)(),{reloadQuota:p}=(0,s.xR)(),{updateItem:D}=(0,u.xx)(),f=(0,d.H)(),g=(0,m.g)(),{activeCopilotSpaceId:x}=(0,l.C)();return(0,o.useCallback)(async(s,n,i=!1,l,o,u,d)=>{let m=a(),{currentReferences:_,context:C}=m;if(d||(d=(0,r.W)(m)),p("handle_message_submit"),""===s.trim())return;i&&h.clearAllReferences();let y=i?[]:_;for(let e of y){let a=(0,c.oR)({ref:e,messageIndex:t});null!=a&&D({...a,isUserEdited:!1})}let v={thread:d,content:s,references:[...y,...n||[]],topic:e.current,context:C,customInstructions:m.customInstructions,model:l||m.model,customCopilotId:o??x,skillOptions:m.skillOptions,mediaContent:u};if(f){let e=await h.continueSharedThread(g);if(e){let{thread:t,messages:a}=e,s=a.at(-1)?.id;await h.sendChatMessage({...v,thread:t,parentMessageId:s})}}else await h.sendChatMessage(v)},[a,p,x,f,h,g,t,D,e])}},17005:(e,t,a)=>{a.d(t,{l:()=>d});var s=a(74848),n=a(21728),r=a(77274),i=a(96379),l=a(96540),o=a(35247),c=a(54508);let u=[{name:"Hate it",value:"VERY_NEGATIVE",icon:r.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:r.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:r.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:r.mN,color:"verySatisfied"}],d=(0,l.forwardRef)(function(e,t){let a,d,m,h,p=(0,n.c)(7),{mode:D,returnFocusRef:f}=e,g=(0,l.useRef)(null),x=(0,l.useRef)(null),_=(0,l.useRef)(void 0);p[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>({openDialog:e=>{_.current=e,o.W.copilotChatInterviewSurvey?g.current?.openDialog():x.current?.openDialog(e)}}),p[0]=a):a=p[0],(0,l.useImperativeHandle)(t,a),p[1]!==D?(d=async(e,t)=>{let a=[];if(null==e&&a.push("Please select a rating."),t.length>2e3&&a.push("Please keep your feedback within 2000 characters or less."),a.length>0)return a;let s={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:D};try{(await (0,i.lS)("/github-copilot/feedback",{method:"POST",body:s})).ok||a.push("An error occurred while submitting your feedback.")}catch{a.push("An error occurred while submitting your feedback.")}return a},p[1]=D,p[2]=d):d=p[2];let C=d;return p[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(c.E,{ref:g,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(_.current)}}),p[3]=m):m=p[3],p[4]!==C||p[5]!==f?(h=(0,s.jsxs)(s.Fragment,{children:[m,(0,s.jsx)(r.NE,{ref:x,options:u,onSubmit:C,returnFocusRef:f})]}),p[4]=C,p[5]=f,p[6]=h):h=p[6],h});d.displayName="ConversationFeedbackDialog"},20255:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(96540),n=a(35180),r=a(90147);function i(){r.r.current||(0,n.U)();let[e]=(0,s.useState)(r.O.current);return e}},22580:(e,t,a)=>{var s,n=a(27744),r=a(70103),i=a(1723),l=a(74848),o=a(21728);function c(e){let t,a=(0,o.c)(2);return a[0]!==e.children?(t=(0,l.jsx)(l.Fragment,{children:e.children}),a[0]=e.children,a[1]=t):t=a[1],t}try{c.displayName||(c.displayName="App")}catch{}var u=a(96540),d=a(2635),m=a(60460),h=a(79634),p=a(30721),D=a(48217),f=a(92130),g=a(53419),x=a(11680),_=a(73077);function C(){let e,t,a=(0,o.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"ImmersiveDisabled-module__content--ZhI_r",children:(0,l.jsx)(f.A,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)("div",{className:"ImmersiveDisabled-module__container--MY4uP",children:[e,(0,l.jsx)("div",{className:"ImmersiveDisabled-module__footer--PVto2",children:(0,l.jsx)("div",{className:"ImmersiveDisabled-module__bannerContainer--QHoXa",children:(0,l.jsx)(x.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,l.jsx)(_.z,{as:"a",href:"https://github.com/settings/copilot",onClick:y,children:"Settings"})})})})]}),a[1]=t):t=a[1],t}function y(){return(0,g.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{C.displayName||(C.displayName="ImmersiveDisabled")}catch{}var v=a(81453),b=a(27359),j=a(38627),S=a(35247),E=a(23657),N=a(84646),I=a(42312),w=a(27912),F=a(61526),A=a(25641),T=a(62828),R=a(21502),k=a(38598),O=a(79196),B=a(1747),L=a(51438),P=a(18878),M=a(14521),U=a(72303),$=a(76143),W=a(79684),z=a(38621),V=a(94236),H=a(5524),G=a(26607),q=a(21373),K=a(26108),Q=a(40961),J=a(93380),Y=a(23827),X=a(90918),Z=a(62421),ee=a(49851);function et(){let e,t,a=(0,o.c)(4),s=(0,Z.G)();a[0]!==s?(e=async()=>{await s({clearTopic:!0,includeThreads:!1})},a[0]=s,a[1]=e):e=a[1];let n=e;return a[2]!==n?(t=(0,l.jsx)("div",{className:"NewChatButton-module__newChatButtonContainer--JlmNy",children:(0,l.jsx)(K.K,{icon:ee.KJ,onClick:n,"aria-label":"New chat"})}),a[2]=n,a[3]=t):t=a[3],t}try{et.displayName||(et.displayName="NewChatButton")}catch{}var ea=a(61767);let es=()=>{let e=(0,M.G)(),{data:t}=(0,N.Ao)(e),a=(0,E.mM)(),s=(0,E.FQ)(),n=a||t,r=!s&&t;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];n&&e.push({label:"Spaces",href:A.VR}),r&&t&&e.push({label:t.name,href:(0,E.Cb)(t)}),(0,ea.FC)(e)}}};var en=a(28259),er=a(37204),ei=a(37294),el=a(79064),eo=a(79575),ec=a(82518),eu=a(15220),ed=a(11196);function em(){let e,t,a,s,n,r,i,c,h,p,D,f,g,x,_,C,y,v,b=(0,o.c)(38),j=(0,m.y)(),{traceInfo:E}=(0,ei.Kf)(),N=(y=(0,o.c)(2),v=(0,d.bP)("selectedThreadID","threads"),y[0]!==v?(C=(0,U.W)(v),y[0]=v,y[1]=C):C=y[1],C),I=(0,Y.H)(),[w,F]=(0,u.useState)(!1),[A,T]=(0,u.useState)(!1),[R,k]=(0,u.useState)(!1),O=(0,u.useRef)(null),B=(0,u.useRef)(null),[L,P]=(0,el.iI)("getTracingRequestedFlag","setTracingRequestedFlag");E?.traces,N?.id;let M=E?.traces,$=N?.id;b[0]!==I||b[1]!==M||b[2]!==$?(e=(0,eo.$1)(M,$,I),b[0]=I,b[1]=M,b[2]=$,b[3]=e):e=b[3];let W=e,G=!!E?.visible;if(!(0,ec.Xl)()||!S.W.staffToolsMenu)return null;b[4]!==G||b[5]!==j?(t=()=>{j.showTraceDisplay(!G)},b[4]=G,b[5]=j,b[6]=t):t=b[6];let q=t;b[7]!==P||b[8]!==L?(a=()=>{L?P(!1):F(!0)},b[7]=P,b[8]=L,b[9]=a):a=b[9];let K=a;b[10]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{T(!0)},b[10]=s):s=b[10];let Q=s;b[11]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{k(!0)},b[11]=n):n=b[11];let J=n,X=L?"danger":void 0;return b[12]!==X?(r=(0,l.jsx)(ed.m,{text:"Tracing",children:(0,l.jsx)(V.W.Button,{"aria-label":"Staff Tools",icon:z.ToolsIcon,variant:X})}),b[12]=X,b[13]=r):r=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsxs)(H.l.Item,{onSelect:Q,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.NoteIcon,{})}),"Adjust prompts"]}),b[14]=i):i=b[14],b[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,l.jsxs)(H.l.Item,{onSelect:J,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.BeakerIcon,{})}),"Configure experiments"]}),b[15]=c):c=b[15],b[16]!==K||b[17]!==q||b[18]!==W||b[19]!==L?(h=S.W.requestTracing&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(H.l.Item,{onSelect:K,variant:L?"danger":void 0,children:[(0,l.jsx)(H.l.LeadingVisual,{children:L?(0,l.jsx)(z.SquareCircleIcon,{}):(0,l.jsx)(z.ToolsIcon,{})}),L?"Stop tracing":"Start tracing"]}),(0,l.jsxs)(H.l.Item,{onSelect:q,disabled:!W,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.LogIcon,{})}),"View trace"]})]}),b[16]=K,b[17]=q,b[18]=W,b[19]=L,b[20]=h):h=b[20],b[21]!==h?(p=(0,l.jsx)(V.W.Overlay,{children:(0,l.jsxs)(H.l,{children:[i,c,h]})}),b[21]=h,b[22]=p):p=b[22],b[23]!==p||b[24]!==r?(D=(0,l.jsxs)(V.W,{children:[r,p]}),b[23]=p,b[24]=r,b[25]=D):D=b[25],b[26]!==P||b[27]!==w?(f=w&&(0,l.jsx)(eu.l,{footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>F(!1)},{buttonType:"primary",content:"Enable tracing",onClick:()=>{P(!0),F(!1)}}],onClose:()=>F(!1),title:"Enable tracing",children:"Enabling tracing will capture additional diagnostic information to secure storage. This will include the entire contents of the conversation and references used in it."}),b[26]=P,b[27]=w,b[28]=f):f=b[28],b[29]!==A?(g=A&&(0,l.jsx)(er.X,{promptDialogRef:O,onDismiss:()=>T(!1)}),b[29]=A,b[30]=g):g=b[30],b[31]!==R?(x=R&&(0,l.jsx)(en.J,{experimentsDialogRef:B,onDismiss:()=>k(!1)}),b[31]=R,b[32]=x):x=b[32],b[33]!==D||b[34]!==f||b[35]!==g||b[36]!==x?(_=(0,l.jsxs)("div",{className:"StaffToolsMenu-module__container--dQp76",children:[D,f,g,x]}),b[33]=D,b[34]=f,b[35]=g,b[36]=x,b[37]=_):_=b[37],_}try{em.displayName||(em.displayName="StaffToolsMenu")}catch{}function eh(e){let t,a,s,n,r,i,c,m,p,D,f,g,x,_,C,y,v,j,S,I,w=(0,o.c)(68),{showPreviewPaneButton:F,conversationSpecificItems:T,customButtons:R,defaultName:k,returnFocusRef:O,onBreadcrumbMenuRefReady:B}=e,L=void 0===F||F,U=void 0===k?"":k,{selectedThreadID:K,threads:Z,messagesLoading:ee,messages:ea,usePlanningIntent:en}=(0,d.Pk)(),er=(0,d.pn)(ep);w[0]!==er?(t=(0,A.CB)(er),w[0]=er,w[1]=t):t=w[1];let ei=t,el=(0,Y.H)(),eo=(0,X.g)(),ec=(0,M.G)(),{data:eu}=(0,N.Ao)(ec),ed=(0,N.BV)(),eh=(0,E.mM)(),ef=(0,b.v)(),[,eg,ex]=(0,J.B)(!1);w[2]!==K||w[3]!==Z?(a=Z.get(K),w[2]=K,w[3]=Z,w[4]=a):a=w[4];let e_=a,eC=K&&en,ey=!!(el?eo:e_?.sharedID),{updateGlobalNavigationBreadcrumbs:ev}=es();w[5]!==ev?(s=()=>{ev()},w[5]=ev,w[6]=s):s=w[6],w[7]!==ec||w[8]!==ev?(n=[ev,ec],w[7]=ec,w[8]=ev,w[9]=n):n=w[9],(0,u.useEffect)(s,n),w[10]!==el||w[11]!==eo||w[12]!==K?(r=()=>K?el&&eo?`/copilot/share/${eo}`:`/copilot/c/${K}`:A.Jz,w[10]=el,w[11]=eo,w[12]=K,w[13]=r):r=w[13];let eb=r;ef?.id;let ej=eh&&!ec||!K&&!ef?.id&&!eh,eS=(0,u.useRef)(null),eE=(0,u.useRef)(null),eN=(0,u.useRef)(null),[eI,ew]=(0,u.useState)(null),eF=O||(K?eE:eS);w[14]!==B||w[15]!==K?(i=()=>{B&&B(K?eE:eS)},c=[B,K,eE,eS],w[14]=B,w[15]=K,w[16]=i,w[17]=c):(i=w[16],c=w[17]),(0,u.useEffect)(i,c);let[eA,eT]=(0,u.useState)(null),{canShareThread:eR}=(0,h.X)(),ek="loaded"===ee.state,eO=eR&&!el&&K&&!ec&&ek;w[18]!==ea?(m=(0,A.Q7)(ea),w[18]=ea,w[19]=m):m=w[19];let eB=m.length>0;w[20]!==ea?(p=(0,A.UM)(ea),w[20]=ea,w[21]=p):p=w[21];let eL=p,eP=eB||eL;w[22]!==eP?(D=()=>{eP||(ew(eN),eT("share"))},w[22]=eP,w[23]=D):D=w[23];let eM=D;return eu?er?(0,$.D)(`${ei} \xb7 ${eu.name} \xb7 GitHub Copilot Spaces`):(0,$.D)(`${eu.name} \xb7 GitHub Copilot Spaces`):ec?er?(0,$.D)(`${ei} \xb7 GitHub Copilot Spaces`):(0,$.D)("GitHub Copilot Spaces"):eh?(0,$.D)("Spaces \xb7 GitHub Copilot"):el?(0,$.D)("Shared conversation \xb7 GitHub Copilot"):(0,$.D)(`${ei} \xb7 GitHub Copilot`),w[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)(et,{}),w[24]=f):f=w[24],w[25]!==ef||w[26]!==T||w[27]!==U||w[28]!==eb||w[29]!==ey||w[30]!==ed||w[31]!==el||w[32]!==ej||w[33]!==eu||w[34]!==ec||w[35]!==K||w[36]!==ei?(g=!ej&&!el&&(0,l.jsx)(W.B,{children:ed&&(eu||U)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.B.Item,{href:A.VR,children:"Spaces"}),K||!T?(0,l.jsx)(W.B.Item,{href:eu?(0,E.Cb)(eu):A.VR,children:eu?.name||U}):(0,l.jsx)(W.B.ItemWithMenu,{buttonRef:eS,menuOverlay:(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:T})}),children:eu?.name||U}),K&&(0,l.jsx)(W.B.ItemWithMenu,{buttonRef:eE,menuOverlay:(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:(0,l.jsx)(P.V,{onOpenDialog:e=>{ew(eE),eT(e)},isShared:ey,showShare:!ec,hideShareOnDesktop:!0,threadName:ei,threadId:K})})}),children:ei})]}):ef?(0,l.jsx)(W.B.Item,{href:`/copilot/${ef.id}`,children:ef.displayName||"Plugin"}):K&&!el?(0,l.jsx)(W.B.ItemWithMenu,{buttonRef:eE,menuOverlay:(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:(0,l.jsx)(P.V,{onOpenDialog:e=>{ew(eE),eT(e)},isShared:ey,showShare:!ec,hideShareOnDesktop:!0,threadName:ei,threadId:K})})}),children:ei}):el?(0,l.jsx)(W.B.Item,{href:eb(),children:ei}):null}),w[25]=ef,w[26]=T,w[27]=U,w[28]=eb,w[29]=ey,w[30]=ed,w[31]=el,w[32]=ej,w[33]=eu,w[34]=ec,w[35]=K,w[36]=ei,w[37]=g):g=w[37],w[38]!==eC?(x=eC&&(0,l.jsx)(G.A,{variant:"accent",children:"Brainstorm"}),w[38]=eC,w[39]=x):x=w[39],w[40]!==g||w[41]!==x?(_=(0,l.jsxs)("div",{className:"Header-module__leftControls--LaO7p",children:[f,g,x]}),w[40]=g,w[41]=x,w[42]=_):_=w[42],w[43]!==ey||w[44]!==eP||w[45]!==eM||w[46]!==eO?(C=eO&&(0,l.jsx)("div",{className:"Header-module__hideOnMobile--OHZqN",children:(0,l.jsx)(q.Q,{ref:eN,leadingVisual:ey?(0,l.jsx)(z.UnlockIcon,{}):(0,l.jsx)(z.LockIcon,{}),disabled:eP,onClick:eM,children:"Share"})}),w[43]=ey,w[44]=eP,w[45]=eM,w[46]=eO,w[47]=C):C=w[47],w[48]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(em,{}),w[48]=y):y=w[48],w[49]!==K||w[50]!==L?(v=L&&K&&(0,l.jsx)(eD,{}),w[49]=K,w[50]=L,w[51]=v):v=w[51],w[52]!==R||w[53]!==C||w[54]!==v?(j=(0,l.jsxs)("div",{className:"Header-module__rightControls--yQ1vI",children:[C,y,R,v]}),w[52]=R,w[53]=C,w[54]=v,w[55]=j):j=w[55],w[56]!==eF||w[57]!==eA||w[58]!==eI||w[59]!==K||w[60]!==eg||w[61]!==ex||w[62]!==ei?(S=K&&(0,l.jsx)(P.p,{visibleDialog:eA,onClose:()=>{(0,Q.flushSync)(()=>eT(null));let e=eI||eF;e.current?.focus(),ew(null)},threadName:ei,threadId:K,selectedThreadId:K,onStartLoading:eg,onFinishLoading:ex,returnFocusRef:eI||eF}),w[56]=eF,w[57]=eA,w[58]=eI,w[59]=K,w[60]=eg,w[61]=ex,w[62]=ei,w[63]=S):S=w[63],w[64]!==_||w[65]!==j||w[66]!==S?(I=(0,l.jsxs)("div",{className:"Header-module__container--x6PHc",children:[_,j,S]}),w[64]=_,w[65]=j,w[66]=S,w[67]=I):I=w[67],I}function ep(e){return(0,U.W)(e)}function eD(){let e,t=(0,o.c)(4),a=(0,B.tZ)(),{openPreviewPane:s}=(0,B.xx)(),n=(0,I.U)();return t[0]!==n||t[1]!==s||t[2]!==a?(e=!a&&(0,l.jsx)(K.K,{icon:z.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,g.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),s()},ref:n}),t[0]=n,t[1]=s,t[2]=a,t[3]=e):e=t[3],e}try{eh.displayName||(eh.displayName="Header")}catch{}try{eD.displayName||(eD.displayName="PreviewPaneButton")}catch{}var ef=a(56487),eg=a(62491),ex=a(73783);function e_(){let e,t,a,s=(0,o.c)(3),n=eC;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(_.z,{className:"EditorDownload-module__editorButton--A8J3X",href:eg.A.vscode.url,leadingVisual:(0,l.jsx)("img",{src:eg.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n("vscode","ide_menu_primary_button_click")},children:"Download"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{"aria-label":"More editors",icon:z.TriangleDownIcon,className:"EditorDownload-module__dropdownButton--pOfML",unsafeDisableTooltip:!0,onClick:()=>{n("menu","ide_menu_open")}})}),s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsxs)(ex.A,{className:"EditorDownload-module__actions--u7T1C",children:[e,(0,l.jsxs)(V.W,{children:[t,(0,l.jsx)(V.W.Overlay,{align:"end",children:(0,l.jsx)(H.l,{children:(0,l.jsxs)(H.l.Group,{variant:"subtle",children:[(0,l.jsx)(H.l.GroupHeading,{children:"Download for"}),(0,l.jsx)(ef.t,{menuLocation:"editor_cta",mode:"immersive"})]})})})]})]}),s[2]=a):a=s[2],a}function eC(e,t){S.W.freeToPaidTelemetry?(0,ef.F)({eventName:e,menuLocation:"editor_cta",mode:"immersive",action:t}):(0,g.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{e_.displayName||(e_.displayName="EditorDownload")}catch{}let ey="https://github.com/features/copilot/cli";function ev(){let e,t,a=(0,o.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"NewConversationDownloadActions-module__mobileActions--MXDvY",children:(0,l.jsx)(eb,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsxs)("div",{className:"NewConversationDownloadActions-module__desktopActions--SOL35",children:[(0,l.jsx)(q.Q,{as:"a",href:ey,leadingVisual:z.TerminalIcon,children:"CLI"}),(0,l.jsx)(e_,{})]})]}),a[1]=t):t=a[1],t}function eb(){let e,t,a,s,n,r=(0,o.c)(5);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(V.W.Anchor,{id:"custom-anchor-id",children:(0,l.jsx)(K.K,{icon:z.KebabHorizontalIcon,"aria-label":"Open menu"})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(H.l.GroupHeading,{children:"Download for"}),a=(0,l.jsx)(ef.t,{menuLocation:"editor_cta",mode:"immersive"}),s=(0,l.jsx)(H.l.Divider,{}),r[1]=t,r[2]=a,r[3]=s):(t=r[1],a=r[2],s=r[3]),r[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsxs)(V.W,{children:[e,(0,l.jsx)(V.W.Overlay,{children:(0,l.jsxs)(H.l,{children:[t,a,s,(0,l.jsxs)(H.l.LinkItem,{href:ey,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TerminalIcon,{})}),"CLI"]})]})})]}),r[4]=n):n=r[4],n}try{ev.displayName||(ev.displayName="NewConversationDownloadActions")}catch{}try{eb.displayName||(eb.displayName="MobileMenu")}catch{}var ej=a(50766),eS=a(17005),eE=a(33592),eN=a(76872),eI=a(84268),ew=a(56149);let eF=({reportUrl:e,onClose:t,returnFocusRef:a})=>{let s=(0,l.jsxs)("div",{className:"ReportSpaceDialog-module__ReportSpaceContainer--zrFJR",children:[(0,l.jsx)("span",{children:"Contact GitHub Support about this user's spammy or abusive behavior."}),(0,l.jsxs)("div",{className:"ReportSpaceDialog-module__ReportSpaceFooterSpacing--eTYaB",children:[(0,l.jsxs)("div",{className:"ReportSpaceDialog-module__ReportSpaceHelpText--dcoV2",children:[(0,l.jsx)("span",{children:"Learn more about "}),(0,l.jsx)(eI.A,{href:"https://docs.github.com/articles/reporting-abuse-or-spam",children:"reporting abuse to GitHub support"})]}),e&&(0,l.jsx)(q.Q,{variant:"danger",as:"a",href:e,target:"_blank",rel:"noopener noreferrer",className:"ReportSpaceDialog-module__ReportSpaceSubmitButton--c04jD",children:"Report abuse to GitHub support"})]})]});return(0,l.jsx)(ew.ZL,{children:(0,l.jsx)(eu.l,{title:"Report Space to GitHub Support",width:"xlarge",height:"auto",onClose:()=>{t(),setTimeout(()=>a?.current?.focus(),0)},className:"ReportSpaceDialog-module__ReportSpaceDialog--X_oiN",children:s})})};try{eF.displayName||(eF.displayName="ReportSpaceDialog")}catch{}var eA=a(29731),eT=a(96459),eR=a(72511),ek=a(72011),eO=a(97665),eB=a(94747),eL=a(96379),eP=a(69726),eM=a(59394),eU=a(51563),e$=a(40260),eW=a(77430),ez=a(71315),eV=a(46251),eH=a(69497),eG=a(34164),eq=a(99511),eK=a(97286);let eQ=(e,t)=>{let a,s,n,r,i,l,c,u,d,m,h,p,D,f,g,x,_,C,y=(0,o.c)(51),v=(0,eO.jE)();y[0]!==t||y[1]!==e?(a=(0,E.Cb)({id:t,owner:e}),y[0]=t,y[1]=e,y[2]=a):a=y[2];let b=a,j=`${b}/permissions`;y[3]!==j?(s={queryKey:["copilotSpaceCollaborators",j],queryFn:async()=>{let e=await (0,eL.lS)(j),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},y[3]=j,y[4]=s):s=y[4];let{data:S,isLoading:N}=(0,eK.I)(s);y[5]!==j?(n=async e=>{let t=await (0,eL.lS)(j,{method:"POST",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},y[5]=j,y[6]=n):n=y[6],y[7]!==j||y[8]!==v||y[9]!==t||y[10]!==e?(r=()=>(v.invalidateQueries({queryKey:(0,ek.dp)({id:t,owner:e})}),v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]})),y[7]=j,y[8]=v,y[9]=t,y[10]=e,y[11]=r):r=y[11],y[12]!==n||y[13]!==r?(i={mutationFn:n,onSuccess:r},y[12]=n,y[13]=r,y[14]=i):i=y[14];let I=(0,eB.n)(i);y[15]!==I?({mutateAsync:l,...c}=I,y[15]=I,y[16]=l,y[17]=c):(l=y[16],c=y[17]),y[18]!==j?(u=async e=>{let t=await (0,eL.lS)(j,{method:"PUT",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},y[18]=j,y[19]=u):u=y[19],y[20]!==j||y[21]!==v?(d=()=>v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]}),y[20]=j,y[21]=v,y[22]=d):d=y[22],y[23]!==u||y[24]!==d?(m={mutationFn:u,onSuccess:d},y[23]=u,y[24]=d,y[25]=m):m=y[25];let w=(0,eB.n)(m);y[26]!==w?({mutateAsync:h,...p}=w,y[26]=w,y[27]=h,y[28]=p):(h=y[27],p=y[28]),y[29]!==j?(D=async e=>{let t=await (0,eL.lS)(j,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},y[29]=j,y[30]=D):D=y[30],y[31]!==j||y[32]!==v||y[33]!==t||y[34]!==e?(f=()=>(v.invalidateQueries({queryKey:(0,ek.dp)({id:t,owner:e})}),v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]})),y[31]=j,y[32]=v,y[33]=t,y[34]=e,y[35]=f):f=y[35],y[36]!==D||y[37]!==f?(g={mutationFn:D,onSuccess:f},y[36]=D,y[37]=f,y[38]=g):g=y[38];let F=(0,eB.n)(g);return y[39]!==F?({mutateAsync:x,..._}=F,y[39]=F,y[40]=x,y[41]=_):(x=y[40],_=y[41]),y[42]!==l||y[43]!==c||y[44]!==S||y[45]!==N||y[46]!==x||y[47]!==_||y[48]!==h||y[49]!==p?(C={collaborators:S,isLoading:N,addCollaborator:l,updateCollaborator:h,removeCollaborator:x,isAddPending:c.isPending,isUpdatePending:p.isPending,isRemovePending:_.isPending,...c,...p,..._},y[42]=l,y[43]=c,y[44]=S,y[45]=N,y[46]=x,y[47]=_,y[48]=h,y[49]=p,y[50]=C):C=y[50],C};function eJ(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}function eY({copilotSpace:e,onError:t}){let a=(0,eE.b)(),[s,n]=(0,u.useState)(""),[r,i]=(0,u.useState)(!1),c=(0,u.useRef)(null),d=S.W.copilotSpacesReadAccessToUserOwnedSpaces,{data:m,isLoading:h}=(e=>{let t,a,s,n,r,i,l=(0,o.c)(17),{input:c}=e;l[0]!==c?(t=["suggestedSpaceCollaborators",c],l[0]=c,l[1]=t):t=l[1],l[2]!==c.allUsers||l[3]!==c.query||l[4]!==c.spaceId||l[5]!==c.spaceOwner?(a=async()=>{let e=(0,E.Cb)({id:c.spaceId,owner:c.spaceOwner}),t=c.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(c.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(c.query)}`,a=await (0,eL.lS)(t);if(!a.ok)throw Error("Failed to fetch suggested collaborators");return(await a.json()).suggestions.map(eJ)},l[2]=c.allUsers,l[3]=c.query,l[4]=c.spaceId,l[5]=c.spaceOwner,l[6]=a):a=l[6];let u=!!c.query;l[7]!==t||l[8]!==a||l[9]!==u?(s={queryKey:t,queryFn:a,enabled:u},l[7]=t,l[8]=a,l[9]=u,l[10]=s):s=l[10];let d=(0,eK.I)(s);return l[11]!==d?({data:n,...r}=d,l[11]=d,l[12]=n,l[13]=r):(n=l[12],r=l[13]),l[14]!==n||l[15]!==r?(i={data:n,...r},l[14]=n,l[15]=r,l[16]=i):i=l[16],i})({input:{query:(0,u.useDeferredValue)(s.startsWith("@")?s.trim().slice(1):s.trim()),spaceOwner:e.owner,spaceId:e.id,allUsers:d&&!e.ownerIsOrg}}),{collaborators:p,addCollaborator:D,error:f,isLoading:g}=eQ(e.owner,e.id);async function _(s){if(p?.some(e=>e.actor_id===s.id&&e.actor_type===s.actor_type)){n(""),i(!1);return}try{await D({actor_id:s.id,role_name:"custom_copilot_reader",actor_type:s.actor_type}),n(""),!e.ownerIsOrg&&p&&p?.length<=1&&a.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...e,collaborative:!0}}),i(!1)}catch{t({base:"An error occurred while adding a collaborator."})}}return(0,u.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,u.useEffect)(()=>{i(!!(s&&!h&&m&&m.length>0))},[s,m,h]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,l.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),(0,l.jsxs)("div",{className:"SpaceCollaborators-module__copyLinkSection--G8YCd",style:{position:"relative"},children:[(0,l.jsx)(eq.A,{block:!0,placeholder:e.ownerIsOrg?`Search people within ${e.owner}`:"Search for any GitHub user",value:s,onChange:e=>n(e.target.value),className:"color-fg-default","aria-label":e.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with"}),r&&m&&(0,l.jsx)("div",{ref:c,children:(0,l.jsx)(e2,{items:m,onSelect:_})})]})]}),g?(0,l.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,l.jsx)(eP.A,{})}):f?(0,l.jsx)(x.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):p&&p.length>0?(0,l.jsx)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:p.map(a=>(0,l.jsx)(eX,{actor:a,copilotSpace:e,collaboratorsCount:p.length,onError:t},`${a.actor_type}-${a.actor_id}`))}):(0,l.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"})]})}function eX(e){let t,a,s,n,r,i,c,u,d,m=(0,o.c)(27),{actor:h,copilotSpace:p,onError:D,collaboratorsCount:f}=e,g="user"===h.actor_type?h.display_login:h.slug,x="team"===h.actor_type;return m[0]!==h.avatar_url||m[1]!==x?(t=(0,l.jsx)(eW.r,{src:h.avatar_url,className:"mr-2",square:x,size:32}),m[0]=h.avatar_url,m[1]=x,m[2]=t):t=m[2],m[3]!==g?(a=(0,l.jsx)("b",{children:g}),m[3]=g,m[4]=a):a=m[4],m[5]!==g||m[6]!==a?(s=(0,l.jsx)("span",{className:"ml-1",children:(0,l.jsx)(eH.A,{maxWidth:"230px",title:g,inline:!0,children:a})}),m[5]=g,m[6]=a,m[7]=s):s=m[7],m[8]!==h.name?(n=(0,l.jsx)("p",{children:h.name}),m[8]=h.name,m[9]=n):n=m[9],m[10]!==h.name||m[11]!==n?(r=(0,l.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,l.jsx)(eH.A,{maxWidth:"230px",title:h.name,inline:!0,children:n})}),m[10]=h.name,m[11]=n,m[12]=r):r=m[12],m[13]!==s||m[14]!==r?(i=(0,l.jsxs)("div",{className:"d-flex flex-column mt-1",children:[s,r]}),m[13]=s,m[14]=r,m[15]=i):i=m[15],m[16]!==t||m[17]!==i?(c=(0,l.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,i]}),m[16]=t,m[17]=i,m[18]=c):c=m[18],m[19]!==h||m[20]!==f||m[21]!==p||m[22]!==D?(u=(0,l.jsx)(e1,{actor:h,onError:D,copilotSpace:p,collaboratorsCount:f}),m[19]=h,m[20]=f,m[21]=p,m[22]=D,m[23]=u):u=m[23],m[24]!==c||m[25]!==u?(d=(0,l.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[c,u]}),m[24]=c,m[25]=u,m[26]=d):d=m[26],d}let eZ=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],e0={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function e1({actor:e,onError:t,copilotSpace:a,collaboratorsCount:s}){let n=(0,eE.b)(),[r,i]=(0,u.useState)(!1),o=(0,u.useRef)(null),c=eZ.find(t=>t.value===e.role),{updateCollaborator:d,removeCollaborator:m,isUpdatePending:h,isRemovePending:p}=eQ(a.owner,a.id);async function D(a){try{await d({actor_id:e.actor_id,role_name:a,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{i(!1)}}async function f(){try{await m({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{!a.ownerIsOrg&&s<=2&&n.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...a,collaborative:!1}}),i(!1)}}return(0,l.jsxs)(V.W,{onOpenChange:i,anchorRef:o,open:r,children:[(0,l.jsx)(V.W.Button,{disabled:e.disabled,loading:h||p,variant:"invisible",className:"text-small",ref:o,onClick:()=>i(!0),"aria-label":`Change role for ${e.name}`,children:(0,l.jsx)(eH.A,{title:c?.text||"",inline:!0,children:c?.text})}),(0,l.jsx)(V.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,l.jsxs)(H.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[eZ.map(e=>(0,l.jsxs)(H.l.Item,{selected:e.value===c?.value,onSelect:()=>D(e.value),children:[(0,l.jsx)("span",{className:"text-medium",children:(0,l.jsx)("b",{children:e.text})}),(0,l.jsx)("span",{className:"text-small color-fg-muted",children:(0,l.jsx)("p",{className:"m-0",children:e0[e.value]})})]},e.value)),(0,l.jsx)(H.l.Divider,{}),(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:()=>f(),children:[(0,l.jsx)("span",{className:"text-medium",children:(0,l.jsx)("b",{children:"Remove"})}),(0,l.jsx)("span",{className:"text-small color-fg-muted",children:(0,l.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function e2(e){let t,a,s=(0,o.c)(7),{items:n,onSelect:r}=e;if(s[0]!==n||s[1]!==r){let e;s[3]!==r?(e=e=>{let t=`${e.actor_type}-${e.id}`,a="user"===e.actor_type?e.login:e.slug;return(0,l.jsxs)(H.l.Item,{onSelect:()=>r(e),role:"option",children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(eW.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,l.jsx)("span",{className:"text-bold",children:a}),e.name&&(0,l.jsx)(H.l.Description,{children:e.name})]},t)},s[3]=r,s[4]=e):e=s[4],t=n.map(e),s[0]=n,s[1]=r,s[2]=t}else t=s[2];return s[5]!==t?(a=(0,l.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:"SpaceCollaborators-module__spacesSuggestionsList--oqwht",children:(0,l.jsx)(H.l,{role:"listbox",children:t})}),s[5]=t,s[6]=a):a=s[6],a}try{eY.displayName||(eY.displayName="SpaceCollaborators")}catch{}try{eX.displayName||(eX.displayName="SpaceCollaboratorRow")}catch{}try{2..displayName||(2..displayName="MIN_COLLABORATORS_TO_BE_COLLABORATIVE")}catch{}try{e1.displayName||(e1.displayName="ActorRoleSelect")}catch{}try{e2.displayName||(e2.displayName="SpacesSuggestionsList")}catch{}let e3="SpaceSharingDialog-module__visibilityDropdown--HMESi";function e4(e){let t,a,s,n,r,i,c,d,m,h,p=(0,o.c)(26),{closeDialog:D,customCopilotId:f,userOwned:g,returnFocusRef:_}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={},p[0]=t):t=p[0];let[C,y]=(0,u.useState)(t),[v,b]=(0,u.useState)(!1),j=(0,u.useRef)(null),{isPending:I,data:w}=(0,N.Ao)(f),F=S.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==g&&g,A=S.W.spacesIndividualPoliciesEnabled&&!I&&!w?.shareable,T=()=>A?null:(0,l.jsx)(e9,{copySharedLink:k,copied:v,isSpaceLoading:I,copilotSpace:w});p[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{j.current&&(clearTimeout(j.current),j.current=null)},s=[],p[1]=a,p[2]=s):(a=p[1],s=p[2]),(0,u.useEffect)(a,s),p[3]!==e.customCopilotId?(n=(0,E.Cb)(e.customCopilotId),p[3]=e.customCopilotId,p[4]=n):n=p[4];let R=`${ez.fV.origin}${n}`,k=()=>{(0,e$.D)(R),b(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{b(!1),j.current=null},2e3)};return p[5]===Symbol.for("react.memo_cache_sentinel")?(r={narrow:"fullscreen"},p[5]=r):r=p[5],p[6]!==D||p[7]!==_?(i=()=>{D(),setTimeout(()=>_?.current?.focus(),0)},p[6]=D,p[7]=_,p[8]=i):i=p[8],p[9]!==A?(c=A&&(0,l.jsx)(x.l,{hideTitle:!0,variant:"warning",title:"individual sharing disabled",description:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:["Individual space sharing is disabled within your organization. To learn more, check your"," ",(0,l.jsx)(eI.A,{href:`${ez.fV.origin}/settings/copilot/features#copilot-spaces-policy`,inline:!0,children:"Copilot Spaces policy settings"}),"."]}),(0,l.jsx)("p",{children:"In order to share this space, you must duplicate it and change ownership to an organization."})]})}),p[9]=A,p[10]=c):c=p[10],p[11]!==C.base||p[12]!==C.visibility?(d=C.base||C.visibility?(0,l.jsx)(x.l,{hideTitle:!0,title:"Unable to update space",description:C.visibility||C.base,"aria-label":"Critical",variant:"critical",className:"SpaceSharingDialog-module__errorBanner--SkBp1"}):null,p[11]=C.base,p[12]=C.visibility,p[13]=d):d=p[13],p[14]!==w||p[15]!==A||p[16]!==I||p[17]!==e||p[18]!==F?(m=!A&&(0,l.jsxs)(eV.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[w&&(0,l.jsx)(eY,{copilotSpace:w,onError:y}),(0,l.jsx)(H.l.Divider,{}),F?(0,l.jsx)(ts,{copilotSpace:w,isSpaceLoading:I,onError:y}):(0,l.jsxs)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,l.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,l.jsx)(e6,{onError:y,copilotSpace:w,isSpaceLoading:I,...e})]})]}),p[14]=w,p[15]=A,p[16]=I,p[17]=e,p[18]=F,p[19]=m):m=p[19],p[20]!==T||p[21]!==i||p[22]!==c||p[23]!==d||p[24]!==m?(h=(0,l.jsxs)(eu.l,{position:r,title:"Share this space",renderFooter:T,onClose:i,className:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",width:"large","aria-label":"Share this space",children:[c,d,m]}),p[20]=T,p[21]=i,p[22]=c,p[23]=d,p[24]=m,p[25]=h):h=p[25],h}function e6(e){let t,a,s,n,r,i,c,d,m,h,p,D,f=(0,o.c)(36),{copilotSpace:g,isSpaceLoading:x,onError:_}=e,{data:C,isLoading:y,error:v}=(0,N.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==x||f[2]!==y||f[3]!==_||f[4]!==C?(t=()=>{x||y||g&&C||_({visibility:"Could not load your space's visibility settings"})},a=[x,y,g,C,_],f[0]=g,f[1]=x,f[2]=y,f[3]=_,f[4]=C,f[5]=t,f[6]=a):(t=f[5],a=f[6]),(0,u.useEffect)(t,a),x){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let b=g.owner,j=C?.memberCount;return f[9]!==g.ownerAvatar?(s=(0,l.jsx)(eW.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=s):s=f[10],f[11]!==g.ownerDisplayName?(n=(0,l.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=n):n=f[12],f[13]!==g.ownerDisplayName||f[14]!==n?(r=(0,l.jsx)(eH.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:n}),f[13]=g.ownerDisplayName,f[14]=n,f[15]=r):r=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=i):i=f[16],f[17]!==r?(c=(0,l.jsxs)("span",{className:"ml-1",children:[r,i]}),f[17]=r,f[18]=c):c=f[18],f[19]!==v||f[20]!==y||f[21]!==j||f[22]!==b?(d=b&&(0,l.jsxs)(l.Fragment,{children:[!y&&null!==j&&(0,l.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(y||v||null===j)&&(0,l.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=v,f[20]=y,f[21]=j,f[22]=b,f[23]=d):d=f[23],f[24]!==c||f[25]!==d?(m=(0,l.jsxs)("div",{className:"d-flex flex-column",children:[c,d]}),f[24]=c,f[25]=d,f[26]=m):m=f[26],f[27]!==s||f[28]!==m?(h=(0,l.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[s,m]}),f[27]=s,f[28]=m,f[29]=h):h=f[29],f[30]!==g||f[31]!==_?(p=(0,l.jsx)(e8,{onError:_,copilotSpace:g}),f[30]=g,f[31]=_,f[32]=p):p=f[32],f[33]!==h||f[34]!==p?(D=(0,l.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[h,p]}),f[33]=h,f[34]=p,f[35]=D):D=f[35],D}let e5=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],e7={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function e8({copilotSpace:e,onError:t}){let[a,s]=(0,u.useState)(!1),n=(0,u.useRef)(null),r=e5.find(t=>t.value===e.baseRole),{upsertCopilotSpace:i,isPending:o}=(0,eU.$)(e);async function c(e){if(!o)try{await i({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{s(!1)}}let d=r?`Settings ${r.text} ${e7[r.value]}`:"Settings";return e.adminable?(0,l.jsxs)(V.W,{onOpenChange:s,anchorRef:n,open:a,children:[(0,l.jsx)(V.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:n,onClick:()=>s(!0),"aria-label":d,children:(0,l.jsx)(eH.A,{title:r?.text||"",inline:!0,children:r?.text})}),(0,l.jsx)(V.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,l.jsx)(H.l,{selectionVariant:"single",children:e5.map(e=>(0,l.jsxs)(H.l.Item,{selected:e.value===r?.value,onSelect:()=>c(e.value),children:[(0,l.jsx)("span",{className:"text-medium",children:(0,l.jsx)("b",{children:e.text})}),(0,l.jsx)("span",{className:"text-small color-fg-muted",children:(0,l.jsx)("p",{className:"m-0",children:e7[e.value]})})]},e.value))})})]}):(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:r?.text||"",className:"text-small text-light",children:r?.text})})}function e9(e){let t,a,s,n,r,i,c,u=(0,o.c)(17),{copySharedLink:d,copied:m,isSpaceLoading:h,copilotSpace:p}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},u[0]=t):t=u[0],u[1]!==p?.ownerIsOrg?(a=!p?.ownerIsOrg&&(0,l.jsxs)("div",{className:"SpaceSharingDialog-module__footerText--TJavK",children:[(0,l.jsx)(z.InfoIcon,{}),(0,l.jsx)("span",{children:"Viewers will only see sources they have access to."})]}),u[1]=p?.ownerIsOrg,u[2]=a):a=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(s={minWidth:"90px"},u[3]=s):s=u[3];let D=m?"Link copied":"";return u[4]!==D?(n=(0,l.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:D}),u[4]=D,u[5]=n):n=u[5],u[6]!==m||u[7]!==p||u[8]!==d||u[9]!==h?(r=m?(0,l.jsx)(q.Q,{className:"color-fg-success",disabled:h||!p,children:"Link copied"}):(0,l.jsx)(q.Q,{onClick:d,leadingVisual:z.LinkIcon,disabled:h||!p,children:"Copy link"}),u[6]=m,u[7]=p,u[8]=d,u[9]=h,u[10]=r):r=u[10],u[11]!==n||u[12]!==r?(i=(0,l.jsxs)("div",{style:s,className:"d-flex flex-items-center gap-2",children:[n,r]}),u[11]=n,u[12]=r,u[13]=i):i=u[13],u[14]!==a||u[15]!==i?(c=(0,l.jsxs)(eu.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[a,i]}),u[14]=a,u[15]=i,u[16]=c):c=u[16],c}let te={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:z.LockIcon,color:"attention"},tt={text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:z.GlobeIcon,color:"accent"},ta=S.W.copilotSpacesPublicAccessToUserOwnedSpaces?[te,tt]:[te];function ts({copilotSpace:e,isSpaceLoading:t,onError:a}){let[s,n]=(0,u.useState)(!1),r=(0,u.useRef)(null),i=ta.find(t=>t.value===e?.baseRole)??te,{upsertCopilotSpace:o,isPending:c}=(0,eU.$)(e);async function d(e){if(!c)try{await o({baseRole:e})}catch{a({base:"An error occurred while updating your space's visibility."})}finally{n(!1)}}let m=i.icon,h=`General access grouping ${i.text} ${i.description}`;return t?(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,l.jsxs)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,l.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,l.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,l.jsxs)("div",{className:"SpaceSharingDialog-module__visibilityChoice--Z75rm",children:[(0,l.jsx)("div",{className:(0,eG.$)("SpaceSharingDialog-module__visibilityIcon--KK57C","accent"===i.color?"SpaceSharingDialog-module__accentIcon--q8VZ5":"SpaceSharingDialog-module__attentionIcon--lZ9Sq"),children:(0,l.jsx)(m,{size:16})}),(0,l.jsxs)("div",{className:"d-flex flex-column",children:[S.W.copilotSpacesPublicAccessToUserOwnedSpaces?(0,l.jsxs)(V.W,{onOpenChange:n,anchorRef:r,open:s,children:[(0,l.jsx)(V.W.Button,{loading:c,variant:"invisible",className:e3,ref:r,onClick:()=>n(!0),disabled:!e.adminable,"aria-label":h,children:i.text}),(0,l.jsx)(V.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,l.jsx)(H.l,{selectionVariant:"single",children:ta.map(t=>{let a=t.icon;return(0,l.jsxs)(H.l.Item,{selected:t.value===e.baseRole,onSelect:()=>d(t.value),children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(a,{})}),(0,l.jsx)("div",{className:"d-flex flex-column",children:(0,l.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}):(0,l.jsx)("span",{className:e3,children:i.text}),(0,l.jsx)("span",{className:"text-small color-fg-muted p-1",children:i.description})]})]})})]}):(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{e4.displayName||(e4.displayName="SpaceSharingDialog")}catch{}try{e6.displayName||(e6.displayName="VisibilitySettings")}catch{}try{e8.displayName||(e8.displayName="BaseRoleSelect")}catch{}try{e9.displayName||(e9.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{ts.displayName||(ts.displayName="UserOwnedVisibilitySettings")}catch{}function tn(e){let t,a,s,n,r,i,c,d,m,h,p,D,f,x,_,C,y,v,b=(0,o.c)(67),{onDelete:j,copilot:I}=e,[w,A]=(0,u.useState)(null),[T,R]=(0,u.useState)(!1),[k,O]=(0,u.useState)(!1),[B,L]=(0,u.useState)(!1),P=(0,u.useRef)(null),M=(0,F.Zp)(),U=S.W.copilotSpacesServerSideMenuActions,$=S.W.copilotSpacesReadAccessToUserOwnedSpaces,W="duplicate"===w,{data:G,isLoading:q}=(0,N.Ao)(W?I:null),{data:J,isLoading:Y,error:X}=(0,N.yV)(B&&U?I.owner:"",B&&U?I.id:-1);e:{let e;if(U&&J){let e;b[0]!==I.collaborative||b[1]!==I.ownerIsOrg||b[2]!==I.shared||b[3]!==J.adminable||b[4]!==J.baseRole||b[5]!==J.editable||b[6]!==J.public||b[7]!==J.shareable?(e={editable:J.editable,adminable:J.adminable,baseRole:J.baseRole,shareable:J.shareable,publicSpace:J.public,collaborative:I.collaborative,shared:I.shared,ownerIsOrg:I.ownerIsOrg},b[0]=I.collaborative,b[1]=I.ownerIsOrg,b[2]=I.shared,b[3]=J.adminable,b[4]=J.baseRole,b[5]=J.editable,b[6]=J.public,b[7]=J.shareable,b[8]=e):e=b[8],t=e;break e}b[9]!==I.adminable||b[10]!==I.baseRole||b[11]!==I.collaborative||b[12]!==I.editable||b[13]!==I.ownerIsOrg||b[14]!==I.public||b[15]!==I.shareable||b[16]!==I.shared?(e={editable:I.editable,adminable:I.adminable,baseRole:I.baseRole,shareable:I.shareable,publicSpace:I.public,collaborative:I.collaborative,shared:I.shared,ownerIsOrg:I.ownerIsOrg},b[9]=I.adminable,b[10]=I.baseRole,b[11]=I.collaborative,b[12]=I.editable,b[13]=I.ownerIsOrg,b[14]=I.public,b[15]=I.shareable,b[16]=I.shared,b[17]=e):e=b[17],t=e}let{editable:Z,adminable:ee,baseRole:et,shareable:ea,publicSpace:es,collaborative:en,shared:er,ownerIsOrg:ei}=t,el=ei&&ee,eo=$&&!ei&&ee,ec=U?ea:el||eo,eu=U?!!(I&&es&&"none"!==et):!!(I&&(ei&&("none"!==et||en)||er));b[18]!==I?(a=I?{id:I.id,owner:I.owner}:null,b[18]=I,b[19]=a):a=b[19];let ed=(0,N.$W)(a);"duplicate"===w&&k&&!q&&G&&O(!1),b[20]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,Q.flushSync)(()=>A(null)),P.current?.focus()},b[20]=s):s=b[20];let em=s;b[21]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),em()},b[21]=n):n=b[21];let eh=n;b[22]===Symbol.for("react.memo_cache_sentinel")?(r=async e=>{em(),R(!0),await e(),R(!1)},b[22]=r):r=b[22];let ep=r;b[23]!==j?(i=async()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await ep(j)},b[23]=j,b[24]=i):i=b[24];let eD=i;b[25]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),A("share")},b[25]=c):c=b[25];let ef=c;b[26]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),A("duplicate"),e.preventDefault()},b[26]=d):d=b[26];let eg=d;b[27]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),A("report")},b[27]=m):m=b[27];let ex=m;return b[28]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{O(e),e&&L(!0)},b[28]=h):h=b[28],b[29]!==T?(p=(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{loading:T,icon:z.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:tr})}),b[29]=T,b[30]=p):p=b[30],b[31]!==ee||b[32]!==I||b[33]!==Z||b[34]!==q||b[35]!==Y||b[36]!==X||b[37]!==M||b[38]!==eu||b[39]!==ec||b[40]!==w?(D=(0,l.jsx)(V.W.Overlay,{side:"outside-bottom",align:"end",children:U&&Y?(0,l.jsx)(H.l,{children:(0,l.jsx)(H.l.Item,{children:(0,l.jsx)(eP.A,{size:"small"})})}):U&&X?(0,l.jsx)(H.l,{children:(0,l.jsx)(H.l.Item,{disabled:!0,children:"Failed to load menu options"})}):(0,l.jsxs)(H.l,{children:[Z&&(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),M((0,E.Cb)(I))},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.PencilIcon,{})}),"Edit"]}),ec&&(0,l.jsxs)(H.l.Item,{onSelect:ef,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ShareIcon,{})}),"Share"]}),(ee||Z)&&(0,l.jsxs)(H.l.Item,{onSelect:e=>{eg(e)},loading:q&&"duplicate"===w,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.CopyIcon,{})}),"Duplicate"]}),S.W.copilotSpacesReportAbuse&&eu&&(0,l.jsxs)(H.l.Item,{onSelect:ex,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ReportIcon,{})}),"Report content"]}),ee&&(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),A("delete")},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]})]})}),b[31]=ee,b[32]=I,b[33]=Z,b[34]=q,b[35]=Y,b[36]=X,b[37]=M,b[38]=eu,b[39]=ec,b[40]=w,b[41]=D):D=b[41],b[42]!==k||b[43]!==p||b[44]!==D?(f=(0,l.jsxs)(V.W,{anchorRef:P,open:k,onOpenChange:h,children:[p,D]}),b[42]=k,b[43]=p,b[44]=D,b[45]=f):f=b[45],b[46]!==eD||b[47]!==w?(x="delete"===w?(0,l.jsx)(ti,{onCancel:em,onConfirm:eD,returnFocusRef:P}):null,b[46]=eD,b[47]=w,b[48]=x):x=b[48],b[49]!==I||b[50]!==el||b[51]!==eo||b[52]!==w?(_="share"===w?(0,l.jsx)(e4,{closeDialog:eh,customCopilotId:I,userOwned:!el&&eo}):null,b[49]=I,b[50]=el,b[51]=eo,b[52]=w,b[53]=_):_=b[53],b[54]!==G||b[55]!==w?(C="duplicate"===w&&G?(0,l.jsx)(eN.D,{dialogTitle:"Duplicate Space",closeDialog:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),A(null)},initialSpace:G,returnFocusRef:P}):null,b[54]=G,b[55]=w,b[56]=C):C=b[56],b[57]!==I||b[58]!==ed||b[59]!==w?(y="report"===w&&I&&ed?(0,l.jsx)(eF,{reportUrl:ed,onClose:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),A(null)},returnFocusRef:P}):null,b[57]=I,b[58]=ed,b[59]=w,b[60]=y):y=b[60],b[61]!==f||b[62]!==x||b[63]!==_||b[64]!==C||b[65]!==y?(v=(0,l.jsxs)(l.Fragment,{children:[f,x,_,C,y]}),b[61]=f,b[62]=x,b[63]=_,b[64]=C,b[65]=y,b[66]=v):v=b[66],v}function tr(){return(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let ti=({onConfirm:e,onCancel:t,returnFocusRef:a})=>{let[s,n]=(0,u.useState)(!1),r=async()=>{n(!0),(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{n(!1)}};return(0,l.jsx)(eM.K,{title:"Delete space",onClose:async e=>{s||("confirm"===e?await r():((0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t(),setTimeout(()=>a?.current?.focus(),0)))},confirmButtonContent:s?(0,l.jsx)(eP.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{tn.displayName||(tn.displayName="CopilotSpacesMenu")}catch{}try{ti.displayName||(ti.displayName="DeleteDialog")}catch{}var tl=a(44956),to=a(86877),tc=a(4175);function tu({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s,maxDescriptionLength:n}){let{upsertCopilotSpace:r,isPending:i}=(0,eU.$)(e),[o,c]=(0,u.useState)(e.description??""),[d,m]=(0,u.useState)(null);async function h(){try{let e=await r({description:o});a?.(e),t()}catch(e){e instanceof Error?m(e.message):m("Failed to save description")}}function p(){c(e.description??""),t()}return(0,l.jsx)(eu.l,{title:"Description",onClose:p,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,l.jsxs)("div",{className:"p-3",children:[d&&(0,l.jsx)(x.l,{variant:"critical",title:d,className:"mb-2"}),(0,l.jsxs)(to.A,{children:[(0,l.jsx)(to.A.Label,{visuallyHidden:!0,children:"Description"}),(0,l.jsx)(tc.Ay,{block:!0,value:o,onChange:e=>c(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,l.jsx)(td,{text:o,promptCharLimit:n})]})]}),renderFooter:()=>(0,l.jsx)(tl.m,{onCancel:p,onSave:h,isLoading:i,loadingAnnouncement:"Saving description",saveButtonText:"Save"})})}function td(e){let t,a,s,n,r=(0,o.c)(10),{text:i,promptCharLimit:c}=e,u=i.length>c;r[0]!==i.length?(t=i.length.toLocaleString(),r[0]=i.length,r[1]=t):t=r[1],r[2]!==c?(a=c.toLocaleString(),r[2]=c,r[3]=a):a=r[3],r[4]!==t||r[5]!==a?(s=(0,l.jsxs)(l.Fragment,{children:[t," / ",a," characters"]}),r[4]=t,r[5]=a,r[6]=s):s=r[6];let d=s;return r[7]!==d||r[8]!==u?(n=u?(0,l.jsx)(to.A.Validation,{variant:"error",children:d}):(0,l.jsx)(to.A.Caption,{children:d}),r[7]=d,r[8]=u,r[9]=n):n=r[9],n}try{tu.displayName||(tu.displayName="DescriptionDialog")}catch{}try{td.displayName||(td.displayName="CharacterCount")}catch{}function tm(e){let t,a,s,n,r,i,c,m,p,D,f,x,_,C,y,v,b,j,I,w,T,R,k,O,B,L,P,U,$,W,G,Q,J,Y,X,Z,ee,et,ea,en,er,ei,el,eo,ec,eu,ed=(0,o.c)(116),{copilotSpace:em}=e,ep=(0,d.Pk)(),{optedInToUserFeedback:eD}=ep,ef=(0,eE.b)(),eg=(0,F.zy)(),ex=(0,M.G)(),{updateGlobalNavigationBreadcrumbs:e_}=es(),eC=(0,eT.Z)(),[ey,ev]=(0,u.useState)(!1),[eb,ej]=(0,u.useState)(!1),[eI,ew]=(0,u.useState)(!1),[eP,eM]=(0,u.useState)(!1),[eU,e$]=(0,u.useState)(!1),[eW,ez]=(0,u.useState)(null),eV=(0,u.useRef)(null),eH=(0,u.useRef)(null),[eG,eq]=(0,u.useState)(null),eK=(0,u.useRef)(null),eQ=(0,u.useRef)(null),eJ=eg.pathname,eY=ex&&eJ!==A.VR,eX=S.W.copilotSpacesReadAccessToUserOwnedSpaces,eZ=eX&&S.W.copilotSpacesPublicAccessToUserOwnedSpaces,{data:e0}=(0,N.Ao)(ex),{mutateAsync:e1}=(0,N.$7)(),{copilotSpacesConfig:e2}=(0,h.X)(),{maxDescriptionLength:e3}=e2;e:if(eZ)t=em??e0??null;else{let e;if(!ex){t=null;break e}ed[0]!==ex||ed[1]!==ep.customCopilots?(e=(0,E.JB)(ep.customCopilots,ex),ed[0]=ex,ed[1]=ep.customCopilots,ed[2]=e):e=ed[2],t=e}let e6=t,e5=e6?.ownerIsOrg&&e6?.adminable,e7=eX&&!e6?.ownerIsOrg&&ex&&e6?.adminable,e8=e5||e7,e9=e6?.ownerIsOrg&&("none"!==e6.baseRole||e6.collaborative),te=!!(e6&&ex&&(e9||e6?.shared)),tt=(0,N.$W)(ex),{starCopilotSpace:ta,isLoading:ts}=((e,t)=>{let a,s,n,r,i,l,c,u=(0,o.c)(20),d=S.W.copilotSpacesReadAccessToUserOwnedSpaces&&S.W.copilotSpacesPublicAccessToUserOwnedSpaces,m=(0,eE.b)(),h=(0,eO.jE)(),{data:p}=(0,N.Ao)(e);u[0]!==e||u[1]!==h||u[2]!==t?(a=async()=>{if(!d&&e&&await h.invalidateQueries({queryKey:(0,ek.dp)(e)}),d&&t){let e={id:t.id,owner:t.owner};await h.invalidateQueries({queryKey:(0,ek.dp)(e)})}return h.invalidateQueries({queryKey:ek.O6})},u[0]=e,u[1]=h,u[2]=t,u[3]=a):a=u[3],u[4]!==p||u[5]!==e||u[6]!==m||u[7]!==t?(s=async a=>{let s=d?t:p;if(!s)return;let n=d?{id:s.id,owner:s.owner}:e,r=`${(0,E.Cb)(n)}/stars`,i=a.starred?"POST":"DELETE";if((await (0,eL.lS)(r,{method:i})).ok)return s={...s,starred:a.starred},m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s},u[4]=p,u[5]=e,u[6]=m,u[7]=t,u[8]=s):s=u[8],u[9]!==a||u[10]!==s?(n={onSuccess:a,mutationFn:s},u[9]=a,u[10]=s,u[11]=n):n=u[11];let D=(0,eB.n)(n);u[12]!==D?({mutateAsync:l,isPending:r,...i}=D,u[12]=D,u[13]=r,u[14]=i,u[15]=l):(r=u[13],i=u[14],l=u[15]);let f=r||!d;return u[16]!==i||u[17]!==l||u[18]!==f?(c={starCopilotSpace:l,isLoading:f,...i},u[16]=i,u[17]=l,u[18]=f,u[19]=c):c=u[19],c})(ex,e6);ed[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eM(!1),ev(!1),ej(!1),ew(!1),e$(!1)},ed[3]=a):a=ed[3],ed[4]!==ex?(s=[ex],ed[4]=ex,ed[5]=s):s=ed[5],(0,u.useEffect)(a,s),ed[6]!==e_?(n=()=>{e_()},r=[e_],ed[6]=e_,ed[7]=n,ed[8]=r):(n=ed[7],r=ed[8]),(0,u.useEffect)(n,r),ed[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),eM(!1)},ed[9]=i):i=ed[9];let tn=i;ed[10]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),ej(!1)},ed[10]=c):c=ed[10];let tr=c;ed[11]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),ev(!1)},ed[11]=m):m=ed[11];let tl=m;ed[12]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),e$(!1)},ed[12]=p):p=ed[12];let to=p;ed[13]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),eM(!0)},ed[13]=D):D=ed[13];let tc=D;ed[14]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),ej(!0)},ed[14]=f):f=ed[14];let td=f;ed[15]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),ev(!0)},ed[15]=x):x=ed[15];let tm=x;ed[16]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),e$(!0)},ed[16]=_):_=ed[16];let tD=_;ed[17]!==e1||ed[18]!==eC||ed[19]!==ex?(C=async()=>{if(ex)try{await e1(ex),ev(!1),eC(A.VR)}catch(e){ez(e instanceof Error?e:Error(String(e))),tl()}},ed[17]=e1,ed[18]=eC,ed[19]=ex,ed[20]=C):C=ed[20];let tf=C;ed[21]!==e6||ed[22]!==ta?(y=()=>{e6&&ta&&((0,g.BI)("dotcom_chat.activate",{target:e6.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),ta({starred:!e6.starred}))},ed[21]=e6,ed[22]=ta,ed[23]=y):y=ed[23];let tg=y,tx=e6?.adminable;ed[24]!==tx?(v=tx&&(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:tm,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]}),ed[24]=tx,ed[25]=v):v=ed[25];let t_=v;ed[26]!==e6?(b=e6&&(0,l.jsxs)(H.l.Item,{onSelect:tc,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.CopyIcon,{})}),"Duplicate"]}),ed[26]=e6,ed[27]=b):b=ed[27];let tC=b;ed[28]!==t_||ed[29]!==tC||ed[30]!==eY||ed[31]!==ep.selectedThreadID?(j=eY&&!ep.selectedThreadID&&(tC||t_)?(0,l.jsxs)(l.Fragment,{children:[tC,t_]}):null,ed[28]=t_,ed[29]=tC,ed[30]=eY,ed[31]=ep.selectedThreadID,ed[32]=j):j=ed[32];let ty=j;ed[33]!==eD?(I=eD?(0,l.jsx)(q.Q,{variant:"link",onClick:()=>{eK.current?.openDialog(),(0,g.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}):null,ed[33]=eD,ed[34]=I):I=ed[34];let tv=I;ed[35]!==e8?(w=e8&&(0,l.jsx)(K.K,{ref:eH,icon:z.ShareIcon,onClick:td,variant:"invisible","aria-label":"Share space",...(0,eA.G)("share-space-button")}),ed[35]=e8,ed[36]=w):w=ed[36];let tb=w;ed[37]!==te?(T=S.W.copilotSpacesReportAbuse&&te&&(0,l.jsx)(K.K,{icon:z.ReportIcon,onClick:tD,variant:"invisible","aria-label":"Report space content",...(0,eA.G)("report-space-button")}),ed[37]=te,ed[38]=T):T=ed[38];let tj=T;ed[39]!==e6||ed[40]!==tg||ed[41]!==ts||ed[42]!==ex?(R=e6&&ex&&(0,l.jsx)(K.K,{ref:eV,onClick:tg,disabled:ts,icon:e6.starred?z.StarFillIcon:z.StarIcon,className:e6.starred?"SpacesHeader-module__starButton--RT51O":void 0,variant:"invisible","aria-label":e6.starred?"Unstar space":"Star space"}),ed[39]=e6,ed[40]=tg,ed[41]=ts,ed[42]=ex,ed[43]=R):R=ed[43];let tS=R;ed[44]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{eK.current?.openDialog(),(0,g.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},ed[44]=k):k=ed[44];let tE=k;ed[45]===Symbol.for("react.memo_cache_sentinel")?(O=(0,l.jsx)(K.K,{icon:z.BookIcon,as:"a",href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces","aria-label":"Copilot Spaces documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:th,...(0,eA.G)("spaces-doc-link")}),ed[45]=O):O=ed[45],ed[46]!==tS||ed[47]!==tv||ed[48]!==tj||ed[49]!==tb?(B=(0,l.jsxs)(l.Fragment,{children:[tv,O,tb,tj,tS]}),ed[46]=tS,ed[47]=tv,ed[48]=tj,ed[49]=tb,ed[50]=B):B=ed[50];let tN=B;ed[51]===Symbol.for("react.memo_cache_sentinel")?(L=(0,l.jsxs)(H.l.LinkItem,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",target:"_blank",rel:"noopener noreferrer",onSelect:tp,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.BookIcon,{})}),"Copilot Spaces documentation"]}),ed[51]=L):L=ed[51],ed[52]!==e8?(P=e8&&(0,l.jsxs)(H.l.Item,{onSelect:td,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ShareIcon,{})}),"Share space"]}),ed[52]=e8,ed[53]=P):P=ed[53],ed[54]!==te?(U=S.W.copilotSpacesReportAbuse&&te&&(0,l.jsxs)(H.l.Item,{onSelect:tD,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ReportIcon,{})}),"Report space content"]}),ed[54]=te,ed[55]=U):U=ed[55],ed[56]!==e6||ed[57]!==tg||ed[58]!==ts||ed[59]!==ex?($=e6&&ex&&(0,l.jsxs)(H.l.Item,{onSelect:tg,disabled:ts,children:[(0,l.jsx)(H.l.LeadingVisual,{children:e6.starred?(0,l.jsx)(z.StarFillIcon,{}):(0,l.jsx)(z.StarIcon,{})}),e6.starred?"Unstar space":"Star space"]}),ed[56]=e6,ed[57]=tg,ed[58]=ts,ed[59]=ex,ed[60]=$):$=ed[60],ed[61]===Symbol.for("react.memo_cache_sentinel")?(W=(0,l.jsx)(H.l.Divider,{}),G=(0,l.jsx)(H.l.Item,{onSelect:tE,children:"Give feedback"}),ed[61]=W,ed[62]=G):(W=ed[61],G=ed[62]),ed[63]!==P||ed[64]!==U||ed[65]!==$?(Q=(0,l.jsxs)(l.Fragment,{children:[L,P,U,$,W,G]}),ed[63]=P,ed[64]=U,ed[65]=$,ed[66]=Q):Q=ed[66];let tI=Q;ed[67]!==tN?(J=(0,l.jsx)("div",{className:"SpacesHeader-module__hideOnMobile--YtpPv",children:tN}),ed[67]=tN,ed[68]=J):J=ed[68],ed[69]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{icon:z.KebabHorizontalIcon,"aria-label":"Space options",variant:"invisible"})}),ed[69]=Y):Y=ed[69],ed[70]!==tI?(X=(0,l.jsx)("div",{className:"SpacesHeader-module__showOnMobile--pZ0cW",children:(0,l.jsxs)(V.W,{children:[Y,(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:tI})})]})}),ed[70]=tI,ed[71]=X):X=ed[71],ed[72]!==J||ed[73]!==X?(Z=(0,l.jsxs)(l.Fragment,{children:[J,X]}),ed[72]=J,ed[73]=X,ed[74]=Z):Z=ed[74];let tw=Z;ed[75]!==ef?(ee=e=>{ef.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},ed[75]=ef,ed[76]=ee):ee=ed[76];let tF=ee,tA=e6?.name||"";return ed[77]!==tw||ed[78]!==ty||ed[79]!==tA?(et=(0,l.jsx)(eh,{showPreviewPaneButton:!1,conversationSpecificItems:ty,customButtons:tw,defaultName:tA,onBreadcrumbMenuRefReady:eq}),ed[77]=tw,ed[78]=ty,ed[79]=tA,ed[80]=et):et=ed[80],ed[81]!==eW?(ea=eW&&(0,l.jsxs)(eR.A,{variant:"danger",children:[(0,l.jsx)(z.AlertIcon,{}),"There was a problem deleting your space."]}),ed[81]=eW,ed[82]=ea):ea=ed[82],ed[83]!==eG||ed[84]!==e0||ed[85]!==eP?(en=eP&&e0?(0,l.jsx)(eN.D,{dialogTitle:"Duplicate Space",closeDialog:tn,initialSpace:e0,returnFocusRef:eG}):null,ed[83]=eG,ed[84]=e0,ed[85]=eP,ed[86]=en):en=ed[86],ed[87]!==eG||ed[88]!==tf||ed[89]!==ex||ed[90]!==ey?(er=ey&&ex?(0,l.jsx)(ti,{onCancel:tl,onConfirm:tf,returnFocusRef:eG}):null,ed[87]=eG,ed[88]=tf,ed[89]=ex,ed[90]=ey,ed[91]=er):er=ed[91],ed[92]!==e5||ed[93]!==ex||ed[94]!==eb||ed[95]!==e7?(ei=eb&&ex?(0,l.jsx)(e4,{closeDialog:tr,customCopilotId:ex,userOwned:!!(!e5&&e7),returnFocusRef:eH}):null,ed[92]=e5,ed[93]=ex,ed[94]=eb,ed[95]=e7,ed[96]=ei):ei=ed[96],ed[97]!==e6||ed[98]!==tF||ed[99]!==e3||ed[100]!==eI?(el=eI&&e6?(0,l.jsx)(tu,{copilotSpace:e6,onClose:()=>ew(!1),returnFocusRef:eV,maxDescriptionLength:e3,onSaved:tF}):null,ed[97]=e6,ed[98]=tF,ed[99]=e3,ed[100]=eI,ed[101]=el):el=ed[101],ed[102]!==e6||ed[103]!==tt||ed[104]!==ex||ed[105]!==eU?(eo=eU&&e6&&ex?(0,l.jsx)(eF,{reportUrl:tt,onClose:to}):null,ed[102]=e6,ed[103]=tt,ed[104]=ex,ed[105]=eU,ed[106]=eo):eo=ed[106],ed[107]===Symbol.for("react.memo_cache_sentinel")?(ec=(0,l.jsx)(eS.l,{ref:eK,mode:"immersive",returnFocusRef:eQ}),ed[107]=ec):ec=ed[107],ed[108]!==et||ed[109]!==ea||ed[110]!==en||ed[111]!==er||ed[112]!==ei||ed[113]!==el||ed[114]!==eo?(eu=(0,l.jsxs)(l.Fragment,{children:[et,ea,en,er,ei,el,eo,ec]}),ed[108]=et,ed[109]=ea,ed[110]=en,ed[111]=er,ed[112]=ei,ed[113]=el,ed[114]=eo,ed[115]=eu):eu=ed[115],eu}function th(){return(0,g.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}function tp(){(0,g.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}try{tm.displayName||(tm.displayName="SpacesHeader")}catch{}var tD=a(97315),tf=a(70346),tg=a(81829),tx=a(79184),t_=a(96002),tC=a(51213),ty=a(53627),tv=a(26956),tb=a(75202),tj=a(19579),tS=a(91497),tE=a(62935),tN=a(13475);function tI(e){let t=!!S.W.copilotSpacesReadAccessToUserOwnedSpaces&&e.collaborative;if(!e.shareable)return"Private";if(t)return"Shared";switch(e.baseRole){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e.visibility?"Shared":"Private"}var tw=a(22116),tF=a(35952);let tA=()=>{let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"SpaceNotFoundComponent-module__container--IrGEt",children:[(0,l.jsx)(z.AlertIcon,{className:"SpaceNotFoundComponent-module__icon--dQYtq"}),(0,l.jsx)("h3",{children:"Space not found"}),(0,l.jsx)("p",{className:"SpaceNotFoundComponent-module__description--klDGL",children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."})]})}),t[0]=e):e=t[0],e};try{tA.displayName||(tA.displayName="SpaceNotFoundComponent")}catch{}var tT=a(71363),tR=a(97564),tk=a(6219),tO=a(60905),tB=a(30456),tL=a(81075),tP=a(75735),tM=a(72439);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,tL._)(this,UploadableFileExtensions,tU))return(0,tL._)(this,UploadableFileExtensions,tU);let e=[...tM.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,tP._)(this,UploadableFileExtensions,tU,new Set(e.map(e=>e.toLowerCase()))),(0,tL._)(this,UploadableFileExtensions,tU)}static images(e){return new Set(tO.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var tU={writable:!0,value:void 0},t$=a(31971);let tW=()=>{let e,t,a,s,n=(0,o.c)(7);n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:tV},n[0]=e):e=n[0];let r=(0,eB.n)(e);return n[1]!==r?({mutateAsync:t,...a}=r,n[1]=r,n[2]=t,n[3]=a):(t=n[2],a=n[3]),n[4]!==t||n[5]!==a?(s={getCopilotSpaceResourceSizes:t,...a},n[4]=t,n[5]=a,n[6]=s):s=n[6],s};function tz(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,t$.M)(e)}}async function tV(e){let t={resources:e.resources?.map(tz)},a=await (0,eL.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),s=await a.json();if(!a.ok)throw s.errorMessages;return s}function tH({onResourcesAdded:e,onError:t,onUploadingChange:a}){let{availableModels:s}=(0,d.Pk)(),{hydrateResourcesWithSizePercentages:n}=function(){let{getCopilotSpaceResourceSizes:e}=tW();return{hydrateResourcesWithSizePercentages:(0,u.useCallback)(async t=>{if(0===t.length)return;let a=await e({resources:t});for(let e of t)e.sizePercentage=a[e.id]??0},[e])}}();return{processFiles:(0,u.useCallback)(async(r,{source:i})=>{if(r&&0!==r.length){(function(e,{source:t}){for(let a of((0,g.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=tG(a.name);(0,g.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:a.type,fileSize:a.size,source:t})}})(r,{source:i}),a?.(!0),t?.([]);try{var l,o;let a,{imageFiles:c,nonImageFiles:u}=(l=r,o=s,a=UploadableFileExtensions.images(o),Array.from(l).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let a=tG(e.name);return t.has(a)}(t,a)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})),[d,m]=await Promise.all([tJ(u),tK(c,s)]),h=[...d.resources,...m.resources];await n(h),h.length>0&&(e(h),(0,E.Pg)(h,i));let p=[...d.errorMessages,...m.errorMessages];p.length>0&&t?.(p)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{a?.(!1)}}},[s,e,t,n,a])}}function tG(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function tq(e){let t=[],a=[];for(let s of e)"fulfilled"===s.status?"resource"in s.value?t.push(s.value.resource):a.push(s.value.error):a.push("An unexpected error occurred while processing a file.");return{errorMessages:a,resources:t}}async function tK(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!S.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let a=e.map(e=>tQ(e,tO.s.getMimeTypes(t)));return tq(await Promise.allSettled(a))}async function tQ(e,t){try{if(e.size>tO.s.getAttachmentSizeLimit())return{error:t0(e.name)};if(!t.includes(e.type))return{error:tZ(e.name)};let{id:a,attachment:s}=tO.s.makeImageReference(e,""),n=await s.prefetch();return{resource:{id:a,type:"media_content",mediaType:e.type,name:e.name||"Image",url:n.href||"",copilotChatAttachmentId:n.id||0,height:s.height||0,width:s.width||0,markedForDestroy:!1}}}catch(t){var a,s;return a=t,s=e,a instanceof Error&&"FileSizeError"===a.name?{error:t0(s.name)}:{error:tX(s.name)}}}async function tJ(e){if(0===e.length)return{errorMessages:[],resources:[]};let t=e.map(e=>tY(e));return tq(await Promise.allSettled(t))}async function tY(e){try{var t;if(!e.type.startsWith("text/")){let t=tG(e.name);if(!UploadableFileExtensions.text.has(t))return{error:tZ(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let a=crypto.randomUUID(),s=await new tB.N(a,e).prefetch();return{resource:{id:a,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:s.id,url:s.href,markedForDestroy:!1}}}catch(n){var a=n,s=e;if(!(a instanceof tk.ZK))return{error:tX(s.name)};let t=a.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||tX(s.name)}}}function tX(e){return`An error occurred uploading "${e}".`}function tZ(e){return`File "${e}" is not a supported file type.`}function t0(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],a=e,s=0;for(;a>=1024&&s<t.length-1;)a/=1024,s++;let n=Math.round(100*a)/100;return`${n}${t[s]}`}(tO.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let t1=(0,u.forwardRef)(({onResourcesAdded:e,onError:t,onUploadingChange:a},s)=>{let{processFiles:n}=tH({onResourcesAdded:e,onError:t,onUploadingChange:a}),{availableModels:r}=(0,d.Pk)(),i=(0,u.useMemo)(()=>["text/*",...Array.from(UploadableFileExtensions.text),...S.W.spacesImagesEnabled?Array.from(UploadableFileExtensions.images(r)):[]].join(","),[r]),o=(0,u.useRef)(null);return(0,u.useImperativeHandle)(s,()=>({addResources:()=>o.current?.click()})),(0,l.jsx)("input",{"data-testid":"file-upload-input",ref:o,type:"file",accept:i,multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&(n(e.target.files,{source:"file-upload"}),e.target.value="")}})});t1.displayName="FileUploadInput";var t2=a(73017),t3=a(83494),t4=a(46747),t6=a(50467);let UrlDetails=class UrlDetails{constructor(e,t="",a="",s="",n=0,r="",i="",l="unknown"){(0,t6._)(this,"url",void 0),(0,t6._)(this,"owner",void 0),(0,t6._)(this,"repo",void 0),(0,t6._)(this,"number",void 0),(0,t6._)(this,"type",void 0),(0,t6._)(this,"id",void 0),(0,t6._)(this,"file_path",void 0),(0,t6._)(this,"errorMessage",void 0),(0,t6._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=a,this.repo=s,this.number=n,this.type=l,this.file_path=i,this.sha=r}};function t5(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function t7(e){let{input:t,spaceOwner:a}=e,s={resources_attributes:t.map(t5),space_owner:a},n=await (0,eL.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:s}),r=await n.json();if(!n.ok)throw r;return r}function t8(e){let t,a,s,n,r,i,c,d,m,h,p,D,f,g,_,C,y,v,b,j,S,N,I,w=(0,o.c)(62),{onClose:F,onSave:A,resourcesToSave:T,owner:R,resourceCounts:k}=e,[O,B]=(0,u.useState)(!1),[L,P]=(0,u.useState)(at),[M,U]=(0,u.useState)(!1),[$,W]=(0,u.useState)(!1),{validateUrlResources:V}=((N=(0,o.c)(7))[0]===Symbol.for("react.memo_cache_sentinel")?(v={mutationFn:t7},N[0]=v):v=N[0],I=(0,eB.n)(v),N[1]!==I?({mutateAsync:j,...b}=I,N[1]=I,N[2]=b,N[3]=j):(b=N[2],j=N[3]),N[4]!==b||N[5]!==j?(S={validateUrlResources:j,...b},N[4]=b,N[5]=j,N[6]=S):S=N[6],S);if(w[0]!==O||w[1]!==F||w[2]!==A||w[3]!==R||w[4]!==T||w[5]!==L||w[6]!==V){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),O||(B(!0),s().finally(()=>{B(!1)}))},w[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.sha,s="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${a}/${s}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.number,s=e.type;return`${t}/${a}/${s}`}return""},w[8]=e):e=w[8];let a=e,s=async()=>{let e,t;U(!1),W(!1);let s=(e=new Set(T?.map(e=>a(e))??[]),t=new Set,L.filter(s=>{let n=a(s);return!(t.has(n)||e.has(n))&&""!==s.url.trim()&&(t.add(n),!0)})),n=ae,r=s.filter(e=>"unknown"===e.type||R&&e.owner!==R||e.file_path&&!n(e.file_path));if(r.length>0){P(L.map(e=>R&&e.owner&&e.owner!==R?{...e,errorMessage:`This doesn't belong to the ${R} organization.`}:e.file_path&&!n(e.file_path)?{...e,errorMessage:"Unsupported file type"}:r.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),U(!0);return}if(0===s.length)return void F();try{let e=await V({input:s,spaceOwner:R});A(e),(0,E.Pg)(e,"url-dialog"),F()}catch(e){if(Array.isArray(e)){for(let t of e){let e=L.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}U(!0)}}};w[0]=O,w[1]=F,w[2]=A,w[3]=R,w[4]=T,w[5]=L,w[6]=V,w[7]=t}else t=w[7];let H=!!k&&k.currentResourceCount+L.length+1>k.maxResourceCount;w[9]!==L||w[10]!==H?(a=()=>{H?W(!0):P([...L,new UrlDetails(crypto.randomUUID())])},w[9]=L,w[10]=H,w[11]=a):a=w[11];let G=a,K=$&&k?`You can select a maximum of ${k.maxResourceCount} sources.`:null;w[12]!==$||w[13]!==k?(s=e=>{$&&k&&(k.currentResourceCount+e.length>k.maxResourceCount||W(!1))},w[12]=$,w[13]=k,w[14]=s):s=w[14];let Q=s;w[15]!==Q||w[16]!==L?(n=e=>{let t=[...L];t.splice(e,1),P(t),Q(t)},w[15]=Q,w[16]=L,w[17]=n):n=w[17];let J=n;if(w[18]!==Q||w[19]!==L){r=(t,a)=>{let s=[...L],n=e(a,s[t]||new UrlDetails(crypto.randomUUID()));s[t]=n,P(s),Q(s)};let e=t9;w[18]=Q,w[19]=L,w[20]=r}else r=w[20];if(w[21]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},w[21]=i):i=w[21],w[22]!==t||w[23]!==O||w[24]!==F||w[25]!==K?(c=()=>(0,l.jsxs)(eu.l.Footer,{children:[(0,l.jsx)("div",{className:"d-flex flex-items-center",children:K&&(0,l.jsx)(to.A.Validation,{variant:"error",children:K})}),(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,l.jsx)(q.Q,{onClick:F,children:"Cancel"}),(0,l.jsx)(q.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:O,children:"Add"})]})]}),w[22]=t,w[23]=O,w[24]=F,w[25]=K,w[26]=c):c=w[26],w[27]!==M?(d=M&&(0,l.jsx)(x.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),w[27]=M,w[28]=d):d=w[28],w[29]!==R?(m=R&&(0,l.jsx)(t2.JR,{html:`from the <b>${R}</b> organization`}),w[29]=R,w[30]=m):m=w[30],w[31]!==m?(h=(0,l.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",m," you want to add. You can include issues and pull requests."]}),w[31]=m,w[32]=h):h=w[32],w[33]!==t?(p={"github:submit-form":()=>t()},w[33]=t,w[34]=p):p=w[34],w[35]!==M||w[36]!==r||w[37]!==J||w[38]!==L){let e;w[40]!==M||w[41]!==r||w[42]!==J||w[43]!==L.length?(e=(e,t)=>(0,l.jsxs)("div",{style:{width:"100%"},children:[(0,l.jsx)(aa,{index:t,removeUrlTextInputRow:J,inputCount:L.length,updateUrls:r,setIsUpdating:B,urlValue:e.url}),M&&void 0!==e.errorMessage&&(0,l.jsx)(to.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),w[40]=M,w[41]=r,w[42]=J,w[43]=L.length,w[44]=e):e=w[44],D=L.map(e),w[35]=M,w[36]=r,w[37]=J,w[38]=L,w[39]=D}else D=w[39];return w[45]!==D?(f=(0,l.jsx)(eV.B,{direction:"vertical",align:"center",children:D}),w[45]=D,w[46]=f):f=w[46],w[47]!==t||w[48]!==f?(g=(0,l.jsx)("form",{onSubmit:t,children:f}),w[47]=t,w[48]=f,w[49]=g):g=w[49],w[50]!==g||w[51]!==p?(_=(0,l.jsx)(t3.tL,{commands:p,children:g}),w[50]=g,w[51]=p,w[52]=_):_=w[52],w[53]!==G?(C=(0,l.jsx)(q.Q,{leadingVisual:z.PlusIcon,className:"mt-3",onClick:G,children:"Add another"}),w[53]=G,w[54]=C):C=w[54],w[55]!==F||w[56]!==_||w[57]!==C||w[58]!==c||w[59]!==d||w[60]!==h?(y=(0,l.jsxs)(eu.l,{position:i,width:"large",title:"Add via GitHub URL",onClose:F,renderFooter:c,children:[d,h,_,C]}),w[55]=F,w[56]=_,w[57]=C,w[58]=c,w[59]=d,w[60]=h,w[61]=y):y=w[61],y}function t9(e,t){let a=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),s=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),n=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_issue"):s?(t.owner=s[1]??"",t.repo=s[2]??"",t.number=parseInt(s[3]??"0",10),t.type="github_pull_request"):n&&(t.owner=n[1]??"",t.repo=n[2]??"",t.sha=n[3]??"",t.file_path=n[4]??"",t.type="github_file"),t}function ae(e){let t=e.replace(/\?.*/,"").replace(/#L\d+(-L\d+)?$/,"").match(/\.([^.]+)$/);if(!t)return!0;let a=`.${t[1]?.toLowerCase()}`;return UploadableFileExtensions.text.has(a)}function at(){return[new UrlDetails(crypto.randomUUID())]}function aa(e){let t,a,s,n,r,i,c,d=(0,o.c)(18),{index:m,removeUrlTextInputRow:h,inputCount:p,updateUrls:D,setIsUpdating:f,urlValue:g}=e,[x,_]=(0,u.useState)(g),[C,y]=(0,u.useState)(!1);d[0]!==g?(t=()=>{_(g)},a=[g],d[0]=g,d[1]=t,d[2]=a):(t=d[1],a=d[2]),(0,u.useEffect)(t,a);let v=e=>{let t=e.target.value;_(t),C||(y(!0),f(!0)),b(t)};d[3]!==m||d[4]!==f||d[5]!==D?(s=e=>{D(m,e),y(!1),f(!1)},d[3]=m,d[4]=f,d[5]=D,d[6]=s):s=d[6];let b=(0,t4.d)(s,400);return d[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(to.A.Label,{visuallyHidden:!0,children:"URL"}),d[7]=n):n=d[7],d[8]!==v||d[9]!==x?(r=(0,l.jsx)(eq.A,{placeholder:"https://github.com/mona/playground/issues/123",value:x,onChange:v,className:"width-full"}),d[8]=v,d[9]=x,d[10]=r):r=d[10],d[11]!==m||d[12]!==p||d[13]!==h?(i=p>1&&(0,l.jsx)(K.K,{icon:z.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>h(m)}),d[11]=m,d[12]=p,d[13]=h,d[14]=i):i=d[14],d[15]!==r||d[16]!==i?(c=(0,l.jsxs)(to.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[n,r,i]}),d[15]=r,d[16]=i,d[17]=c):c=d[17],c}try{t8.displayName||(t8.displayName="GitHubUrlDialog")}catch{}try{(s=AddUrlTextInputRow).displayName||(s.displayName="AddUrlTextInputRow")}catch{}try{aa.displayName||(aa.displayName="UrlTextInputRow")}catch{}var as=a(59788);function an(e){let t,a,s,n=(0,o.c)(14),{isOpen:r,onClose:i,onResourcesAdded:c,owner:d,resourceCounts:m,initialRepo:p,onRepoSelect:D,hideBackButton:f}=e,g=(0,u.useRef)(null),{getCopilotSpaceResourceSizes:x}=tW(),{searchWorkerFilePath:_}=(0,h.X)();n[0]!==i||n[1]!==c||n[2]!==x?(t=async e=>{let t=e.filter(ar);if(0===t.length)return void i();let a=await x({resources:t}),s=t.map(e=>{let t=a[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:t}});c(s),(0,E.Pg)(s,"file-picker"),i()},n[0]=i,n[1]=c,n[2]=x,n[3]=t):t=n[3];let C=t;return r?(n[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],n[4]=a):a=n[4],n[5]!==f||n[6]!==p||n[7]!==i||n[8]!==D||n[9]!==d||n[10]!==m||n[11]!==C||n[12]!==_?(s=(0,l.jsx)(as.Q,{formData:a,onCancel:i,onSaveFiles:C,findFileWorkerPath:_,attachmentButtonRef:g,owner:d,resourceCounts:m,initialRepo:p,onRepoSelect:D,hideBackButton:f,maxFileCount:50}),n[5]=f,n[6]=p,n[7]=i,n[8]=D,n[9]=d,n[10]=m,n[11]=C,n[12]=_,n[13]=s):s=n[13],s):null}function ar(e){return"github_file"===e.type}try{an.displayName||(an.displayName="SpacesFilePicker")}catch{}let ai="TextFileDialog-module__grow--TUgOh";function al({sizePercentage:e,onClose:t,onSave:a,resource:s,readOnly:n=!1}){let{copilotSpacesConfig:{maxContentSize:r}}=(0,h.X)(),[i,o]=(0,u.useState)(s?.name||""),[c,d]=(0,u.useState)(s?.text||""),[m,p]=(0,u.useState)(!1),[D,f]=(0,u.useState)(""),[g,_]=(0,u.useState)(!1),C=s?.text??"",[y,v]=(0,u.useState)({}),{getCopilotSpaceResourceSizes:b}=tW(),j=async e=>{e?.preventDefault(),e?.stopPropagation();let n=!i.trim(),r=!c.trim();if(n||r)return void v(e=>({...e,"resources.name":n?"Name is required":"","resources.text":r?"Content is required":""}));p(!0),f("");try{let e={id:s?.id||Date.now().toString(),databaseId:s?.databaseId,type:"free_text",name:i,text:c,markedForDestroy:!1},n=await b({resources:[e]}),r={...e,sizePercentage:n[e.id]};a(r),(0,E.Pg)([r],"text-file-dialog"),t()}catch{f("An unexpected error occurred while validating the text file")}finally{p(!1)}};return(0,l.jsx)(eu.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,l.jsxs)("div",{className:"TextFileDialog-module__dialogBody--e27Cv",children:[D&&(0,l.jsx)(x.l,{variant:"critical",className:"mb-2",title:D}),(0,l.jsx)(t3.tL,{className:ai,commands:{"github:submit-form":()=>void j()},children:(0,l.jsxs)("form",{onSubmit:j,className:"TextFileDialog-module__form--BVMha",children:[(0,l.jsxs)(to.A,{required:!0,children:[(0,l.jsx)(to.A.Label,{children:"Name"}),(0,l.jsx)(eq.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{o(e.target.value),v(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:y["resources.name"]?"error":void 0,...(0,eA.G)("text-file-name-input"),readOnly:n}),y["resources.name"]&&(0,l.jsx)(to.A.Validation,{variant:"error",children:y["resources.name"]})]}),(0,l.jsxs)(to.A,{required:!0,className:ai,children:[(0,l.jsx)(to.A.Label,{children:"Content"}),(0,l.jsx)(tc.Ay,{block:!0,name:"content",value:c,placeholder:"Enter content here",resize:"none",className:ai,onChange:e=>{d(e.target.value),v(e=>({...e,"resources.text":""}))},...(0,eA.G)("text-file-content-input"),readOnly:n}),y["resources.text"]?(0,l.jsx)(to.A.Validation,{variant:"error",children:y["resources.text"]}):void 0!==e&&(0,l.jsx)(ao,{text:c,percentage:e,resourceContent:C,setOverSpaceLimit:_,maxContentSize:r})]})]})})]}),renderFooter:()=>(0,l.jsxs)("div",{className:"TextFileDialog-module__footerContainer--A_bOn",children:[(0,l.jsx)(q.Q,{onClick:t,children:"Cancel"}),(0,l.jsx)(q.Q,{variant:"primary",onClickCapture:g?void 0:j,loadingAnnouncement:"Validating resource",inactive:g,loading:m,...(0,eA.G)("save-text-file-button"),disabled:n,children:"Add"})]})})}function ao(e){let t,a,s,n,r=(0,o.c)(11),{text:i,percentage:c,resourceContent:d,setOverSpaceLimit:m,maxContentSize:h}=e;r[0]!==d.length||r[1]!==i.length?(t=i.length>d.length?Math.abs(i.length-d.length):-Math.abs(i.length-d.length),r[0]=d.length,r[1]=i.length,r[2]=t):t=r[2];let p=c/100*h+t,D=Math.floor(p/h*100),f=p>h;if(r[3]!==m||r[4]!==f?(a=()=>{m(f)},s=[f,m],r[3]=m,r[4]=f,r[5]=a,r[6]=s):(a=r[5],s=r[6]),(0,u.useEffect)(a,s),f){let e,t=`Total percent used: ${D}%`;return r[7]!==t?(e=(0,l.jsx)(to.A.Validation,{variant:"error",children:t}),r[7]=t,r[8]=e):e=r[8],e}let g=`Total percent used: ${D}%`;return r[9]!==g?(n=(0,l.jsx)(to.A.Caption,{children:g}),r[9]=g,r[10]=n):n=r[10],n}try{al.displayName||(al.displayName="TextFileDialog")}catch{}try{ao.displayName||(ao.displayName="CharacterCount")}catch{}let ac=({children:e,onResourcesAdded:t,onError:a,owner:s,sizePercentage:n,resourcesToSave:r,resourceCounts:i,onUploadingChange:o,initialRepo:c,onRepoSelect:d})=>{let[m,h]=(0,u.useState)(!1),[p,D]=(0,u.useState)(!1),[f,x]=(0,u.useState)(!1),[_,C]=(0,u.useState)(!1),[y,v]=(0,u.useState)(),b=(0,u.useRef)(null),j=(0,u.useRef)(null),S=(0,u.useRef)(!1),E=(0,u.useCallback)(async e=>{if(e){S.current=!0,v(void 0);try{let a=await (0,tR.V)(e),s={type:"repository",id:`${a.id}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,ownerAvatarUrl:a.ownerAvatarUrl,ownerType:a.ownerType,markedForDestroy:!1};t([s]),(0,g.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_REPO_PICKER"}),d?.(a),C(!1)}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";v("Error: failed to attach repository. Please try again."),a?.([e])}finally{S.current=!1}}},[a,d,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t1,{ref:b,onResourcesAdded:t,onError:a,onUploadingChange:o}),(0,l.jsxs)(V.W,{anchorRef:j,children:[(0,l.jsx)(V.W.Anchor,{ref:j,children:e}),(0,l.jsx)(V.W.Overlay,{align:"end",width:"small",children:(0,l.jsxs)(H.l,{children:[(0,l.jsxs)(H.l.Group,{children:[(0,l.jsx)(H.l.GroupHeading,{children:"Repository"}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_REPOSITORY_BUTTON"}),v(void 0),C(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.RepoIcon,{...(0,eA.G)("add-repository-menu-item-icon")})}),"Add repository"]}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),D(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.FileCodeIcon,{...(0,eA.G)("add-github-files-menu-item-icon")})}),"Add files from repository"]}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),x(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.LinkIcon,{})}),"Link files, pull requests, and issues"]})]}),(0,l.jsx)(H.l.Divider,{}),(0,l.jsxs)(H.l.Group,{children:[(0,l.jsx)(H.l.GroupHeading,{children:"Local"}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),b.current?.addResources()},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.UploadIcon,{})}),"Upload a file"]}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),h(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.PasteIcon,{...(0,eA.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})})]}),m&&(0,l.jsx)(al,{sizePercentage:n,onClose:()=>h(!1),onSave:e=>t([e])}),p&&(0,l.jsx)(an,{isOpen:p,onClose:()=>D(!1),onResourcesAdded:t,owner:s,resourceCounts:i,initialRepo:c,onRepoSelect:d}),f&&(0,l.jsx)(t8,{onClose:()=>x(!1),onSave:e=>t(e),resourcesToSave:r,resourceCounts:i,owner:s}),_&&(0,l.jsx)(tT.X,{cancelReturnFocusRef:j,submitReturnFocusRef:j,open:_,onOpenChange:e=>{S.current||C(e)},selectedRepoIds:new Set,onSelectRepo:E,selectionVariant:"instant",description:"Select a repository to add to this space.",error:y,ownerDisplayLogin:s,includeForks:!0})]})};try{ac.displayName||(ac.displayName="AddAttachmentMenu")}catch{}function au(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,t$.M)(e)}}function ad(e){let t,a,s,n,r,i=(0,o.c)(11),{value:c}=e,u=c>100?"CircleProgressBar-module__exceeded--aEYra":"";i[0]!==u?(t=(0,eG.$)("CircleProgressBar-module__circleProgressBar--hRkI1",u),i[0]=u,i[1]=t):t=i[1];let d=`${c}%`;return i[2]!==d?(a={"--progress":d},i[2]=d,i[3]=a):a=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(s={visibility:"hidden",height:0,width:0},i[4]=s):s=i[4],i[5]!==c?(n=(0,l.jsxs)("progress",{value:c,max:"100",style:s,children:[c,"%"]}),i[5]=c,i[6]=n):n=i[6],i[7]!==t||i[8]!==a||i[9]!==n?(r=(0,l.jsx)("div",{className:t,style:a,children:n}),i[7]=t,i[8]=a,i[9]=n,i[10]=r):r=i[10],r}try{ad.displayName||(ad.displayName="CircleProgressBar")}catch{}function am(e){let t,a,s,n,r=(0,o.c)(13),{value:i,maxLength:c,onSave:u,onCancel:d}=e,m=!!(c&&c>0),h=m&&i.length>(c||0);return r[0]!==c||r[1]!==m||r[2]!==i?(t=m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ap,{text:i,promptCharLimit:c||0}),(0,l.jsx)(ah,{})]}),r[0]=c,r[1]=m,r[2]=i,r[3]=t):t=r[3],r[4]!==d?(a=(0,l.jsx)(K.K,{className:"InlineEditActions-module__cancelButton--U8ZhR",variant:"invisible",icon:z.XIcon,"aria-label":"Cancel",size:"small",onClick:d}),r[4]=d,r[5]=a):a=r[5],r[6]!==u||r[7]!==h?(s=(0,l.jsx)(K.K,{className:"InlineEditActions-module__saveButton--gEB1L",variant:"invisible",icon:z.CheckIcon,"aria-label":"Save",disabled:h,size:"small",onClick:u}),r[6]=u,r[7]=h,r[8]=s):s=r[8],r[9]!==t||r[10]!==a||r[11]!==s?(n=(0,l.jsxs)("div",{className:"InlineEditActions-module__actionButtons--pTPNY",children:[t,a,s]}),r[9]=t,r[10]=a,r[11]=s,r[12]=n):n=r[12],n}let ah=()=>{let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"InlineEditActions-module__line--_RREL"}),t[0]=e):e=t[0],e};function ap(e){let t,a,s,n,r=(0,o.c)(9),{text:i,promptCharLimit:c}=e,u=i.length/c*100;r[0]!==u?(t=(0,l.jsx)(ad,{value:u}),r[0]=u,r[1]=t):t=r[1];let d=c-i.length;return r[2]!==d?(a=d.toLocaleString(),r[2]=d,r[3]=a):a=r[3],r[4]!==a?(s=(0,l.jsx)("span",{className:"InlineEditActions-module__characterCountText--wZa2z",children:a}),r[4]=a,r[5]=s):s=r[5],r[6]!==t||r[7]!==s?(n=(0,l.jsxs)("div",{className:"InlineEditActions-module__characterCountStatus--5NnYz",children:[t,s]}),r[6]=t,r[7]=s,r[8]=n):n=r[8],n}try{am.displayName||(am.displayName="InlineEditActions")}catch{}try{ah.displayName||(ah.displayName="Line")}catch{}try{ap.displayName||(ap.displayName="CharacterCountStatus")}catch{}function aD(e){let t,a,s,n,r,i,c,d,m,h,p,D,f,g=(0,o.c)(40),{value:x,onChange:_,maxLength:C,placeholder:y,className:v,defaultEditing:b,ariaPrefix:j}=e,S=void 0===C?null:C,E=void 0===y?"":y,N=void 0===v?"":v,I=void 0===j?"":j,[w,F]=(0,u.useState)(void 0!==b&&b),[A,T]=(0,u.useState)(x),[R,k]=(0,u.useState)(null),O=(0,u.useRef)(null),B=(0,u.useRef)(null),L=(0,u.useRef)(null);g[0]!==A||g[1]!==w||g[2]!==_?(t=()=>{let e=e=>{w&&L.current&&!L.current.contains(e.target)&&(F(!1),_(A.trim()))};return w&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},a=[w,A,L,_],g[0]=A,g[1]=w,g[2]=_,g[3]=t,g[4]=a):(t=g[3],a=g[4]),(0,u.useEffect)(t,a),g[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{O.current&&k(O.current.offsetHeight)},g[5]=s):s=g[5],g[6]!==x?(n=[x],g[6]=x,g[7]=n):n=g[7],(0,u.useEffect)(s,n),g[8]!==w||g[9]!==R?(r=()=>{w&&B.current&&(B.current.focus(),B.current.style.height=`${R}px`)},i=[w,R],g[8]=w,g[9]=R,g[10]=r,g[11]=i):(r=g[10],i=g[11]),(0,u.useEffect)(r,i),g[12]!==A||g[13]!==_?(c=()=>{F(!1),_(A.trim())},g[12]=A,g[13]=_,g[14]=c):c=g[14];let P=c;g[15]!==x?(d=()=>{F(!1),T(x)},g[15]=x,g[16]=d):d=g[16];let M=d;g[17]!==P?(m=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},g[17]=P,g[18]=m):m=g[18];let U=m;return g[19]!==N?(h=(0,eG.$)("InlineEditableText-module__container--cFwHs",N),g[19]=N,g[20]=h):h=g[20],g[21]!==I||g[22]!==N||g[23]!==A||g[24]!==U||g[25]!==w||g[26]!==R||g[27]!==E||g[28]!==x?(p=w?(0,l.jsx)(tc.Ay,{ref:B,value:A,onChange:e=>T(e.target.value),onKeyDown:U,placeholder:E,className:"InlineEditableText-module__textarea--TLSf0",style:{height:R||"auto"},resize:"none"}):(0,l.jsxs)("button",{ref:O,onClick:()=>F(!0),"aria-label":`${I} ${x.trim()||E}. Activate to edit.`.trim(),className:"InlineEditableText-module__readModeContainer--WowEK",children:[(0,l.jsx)("span",{className:(0,eG.$)("InlineEditableText-module__readModeText--EolGT",N),children:x?.trim()||(0,l.jsx)("span",{className:"InlineEditableText-module__placeholder--cxzop",children:E})}),(0,l.jsx)(z.PencilIcon,{className:"InlineEditableText-module__editIcon--nVeiq",size:16})]}),g[21]=I,g[22]=N,g[23]=A,g[24]=U,g[25]=w,g[26]=R,g[27]=E,g[28]=x,g[29]=p):p=g[29],g[30]!==A||g[31]!==M||g[32]!==P||g[33]!==w||g[34]!==S?(D=w&&(0,l.jsx)(am,{value:A,maxLength:S,onSave:P,onCancel:M}),g[30]=A,g[31]=M,g[32]=P,g[33]=w,g[34]=S,g[35]=D):D=g[35],g[36]!==h||g[37]!==p||g[38]!==D?(f=(0,l.jsxs)("div",{ref:L,className:h,children:[p,D]}),g[36]=h,g[37]=p,g[38]=D,g[39]=f):f=g[39],f}try{aD.displayName||(aD.displayName="InlineEditableText")}catch{}var af=a(46720),ag=a(74753),ax=a(25744),a_=a(3803);function aC(e){let t=(0,o.c)(14),{attachment:a,className:s}=e;switch(a.type){case"github_file":{let e;return t[0]!==s?(e=(0,l.jsx)(z.FileIcon,{className:s}),t[0]=s,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==s?(e=(0,l.jsx)(z.PasteIcon,{className:s}),t[2]=s,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==s?(e=(0,l.jsx)(z.FileIcon,{className:s}),t[4]=s,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==s?(e=(0,l.jsx)(z.IssueOpenedIcon,{className:s}),t[6]=s,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==s?(e=(0,l.jsx)(z.GitPullRequestIcon,{className:s}),t[8]=s,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==s?(e=(0,l.jsx)(z.ImageIcon,{className:s}),t[10]=s,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==s?(e=(0,l.jsx)(z.RepoIcon,{className:s}),t[12]=s,t[13]=e):e=t[13],e}default:return null}}try{aC.displayName||(aC.displayName="AttachmentIcon")}catch{}let ay="AttachmentPreview-module__attachmentText--ELczx";function av(e){let t=(0,o.c)(13),{attachment:a}=e;if(!a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("p",{className:ay,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(a.type){case"free_text":{let e;return t[1]!==a.text?(e=(0,l.jsx)("p",{className:ay,children:a.text}),t[1]=a.text,t[2]=e):e=t[2],e}case"media_content":{let e,s,n,r=`image: ${a.name}`;return t[3]!==a.url||t[4]!==r?(e=(0,l.jsx)("img",{alt:r,src:a.url}),t[3]=a.url,t[4]=r,t[5]=e):e=t[5],t[6]!==a.name||t[7]!==a.url?(s=(0,l.jsx)(q.Q,{onClick:()=>(function(e,t,a="image"){let s=document.createElement("a");s.href=e,s.setAttribute("download",t||a),document.body.appendChild(s),s.click(),document.body.removeChild(s)})(a.url,a.name),children:"Download"}),t[6]=a.name,t[7]=a.url,t[8]=s):s=t[8],t[9]!==e||t[10]!==s?(n=(0,l.jsxs)("div",{className:"AttachmentPreview-module__attachmentPreviewImage--hqleR",children:[e,s]}),t[9]=e,t[10]=s,t[11]=n):n=t[11],n}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{av.displayName||(av.displayName="AttachmentPreview")}catch{}let ab="ReferencesTable-module__referenceTitle--X4GB2",aj="ReferencesTable-module__referenceSubtitle--cUDlc",aS="ReferencesTable-module__referenceTitleLink--rezaS";function aE({resources:e,resourceCounts:t,onDeleteResources:a,onUpdateResource:s,sizePercentage:n,onResourcesAdded:r,owner:i,readOnly:o=!1}){let c=(0,u.useMemo)(()=>Object.values(e.reduce((e,t)=>{let a=aw(t);return{...e,[a]:t}},{})),[e]),[d,m]=(0,u.useState)(!1),[h,p]=(0,u.useState)(null),D=(0,u.useRef)(null),[f,g]=(0,u.useState)([]),x=(0,u.useCallback)(()=>{f.length>0&&(a(f),g([]))},[a,f]),_=(0,u.useCallback)(()=>{f.length>0?g([]):g(c)},[f,c]),C=(0,u.useMemo)(()=>{let e={id:"id",header:()=>(0,l.jsx)("span",{className:"ReferencesTable-module__headerText--HR4t9",children:f.length>0?`${f.length} selected`:`${c.length} ${1===c.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:a,fileUrl:s,sha:n}=(0,E.q5)(e);return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(aC,{attachment:e,className:"fgColor-muted"}),(0,l.jsxs)(eV.B,{gap:"none",children:[(0,l.jsx)("div",{children:e.fileExists?(0,l.jsxs)(eV.B,{direction:"horizontal",wrap:"wrap",children:[(0,l.jsx)(eH.A,{title:a,className:ab,children:(0,l.jsx)(eI.A,{rel:"noopener",target:"_blank",href:s,className:aS,children:a})}),n&&(0,l.jsx)(G.A,{className:"ml-1",children:n.substring(0,7)})]}):(0,l.jsx)(eH.A,{title:a,className:ab,children:a})}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:t,className:(0,eG.$)(aj,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(aC,{attachment:e,className:"fgColor-muted"}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.name,maxWidth:300,className:ab,children:e.name})})]});case"repository":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(eW.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,l.jsxs)(eV.B,{gap:"none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.nwo,maxWidth:300,className:ab,children:(0,l.jsx)(eI.A,{className:aS,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),!o&&(0,l.jsx)("div",{className:"ReferencesTable-module__repositoryWarning--obEpu",...(0,eA.G)("repo-warning"),children:"Spaces work best with specific files added."})]})]});case"uploaded_text_file":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(aC,{attachment:e,className:"fgColor-muted"}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.name,maxWidth:300,className:ab,children:(0,l.jsx)(eI.A,{className:aS,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)("span",{children:(0,l.jsx)(aC,{attachment:e,className:"fgColor-success"})}),(0,l.jsxs)(eV.B,{gap:"none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.title||"",className:ab,children:(0,l.jsxs)(eI.A,{rel:"noopener",target:"_blank",href:e.url,className:aS,children:[e.title," ",(0,l.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.nwo||"",className:(0,eG.$)(aj,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)("span",{className:"fgColor-muted",children:(0,l.jsx)(aC,{attachment:e,className:"fgColor-muted"})}),(0,l.jsx)(eI.A,{as:"button",className:aS,ref:D,onClick:t=>{t.preventDefault(),p(e),m(!0)},"aria-haspopup":"dialog","aria-expanded":d,children:(0,l.jsx)(eH.A,{title:e.name,maxWidth:300,className:(0,eG.$)(ab),children:e.name})})]});default:return null}}},u={id:"size",header:()=>(0,l.jsx)(ag.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,l.jsx)(aN,{row:e,onResourcesAdded:r,owner:i,resourceCounts:t})},h={id:"actions",header:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ag.s,{children:"Actions"}),(0,l.jsx)(q.Q,{style:{visibility:f.length>0&&!o?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:x,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let t="github_file"===e.type&&!e.fileExists;return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(K.K,{className:"ReferencesTable-module__warningIcon--ZQ8GD",icon:z.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,l.jsx)(aI,{row:e,onEdit:s,onDelete:e=>a([e]),sizePercentage:n,readOnly:o})]})}};return o?[e,u,h]:[{id:"select",header:()=>(0,l.jsx)(af.A,{checked:f.length===c.length,indeterminate:f.length>0&&f.length<c.length,"aria-label":"Select all sources",value:"default",onChange:_}),width:"auto",renderCell:e=>(0,l.jsx)(af.A,{checked:f.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{g(a=>t.target.checked?[...a,e]:a.filter(t=>t.id!==e.id))}})},e,u,h]},[f,c.length,_,d,x,s,n,r,i,a,o,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ax.X.Container,{children:(0,l.jsx)(a_.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:c,columns:C})}),d&&h&&"media_content"===h.type&&(0,l.jsx)(eu.l,{onClose:()=>{p(null),m(!1)},position:{narrow:"fullscreen"},returnFocusRef:D,title:h.name,children:(0,l.jsx)(av,{attachment:h})})]})}let aN=({row:e,onResourcesAdded:t,owner:a,resourceCounts:s})=>{let[n,r]=(0,u.useState)(!1),[i,o]=(0,u.useState)(null),[c,d]=(0,u.useState)(!1),m=(0,u.useRef)(null),h=async e=>{d(!0);try{let t=await (0,tR.V)(e);o(t),r(!0)}finally{d(!1)}};return"repository"===e.type?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(K.K,{variant:"invisible",className:"float-left",ref:m,loading:c,"aria-label":"Add specific files",onClick:async()=>{await h(e.repositoryId)},icon:z.PencilIcon}),n&&i&&(0,l.jsx)(an,{resourceCounts:s,isOpen:n,onClose:()=>r(!1),onResourcesAdded:t,owner:a,initialRepo:i,hideBackButton:!0})]}):"sizePercentage"in e?(0,l.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):void 0},aI=({row:e,onDelete:t,onEdit:a,sizePercentage:s,readOnly:n=!1})=>{let[r,i]=(0,u.useState)(null),o="";switch(e.type){case"github_pull_request":case"github_issue":o=e.title;break;case"github_file":o=e.filePath;break;case"repository":o=e.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":o=e.name}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"d-md-none",children:(!n||n&&"free_text"===e.type)&&(0,l.jsxs)(V.W,{children:[(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{"aria-label":`Attachment actions: ${o}`,title:"Attachment actions",icon:z.KebabHorizontalIcon,variant:"invisible"})}),(0,l.jsx)(V.W.Overlay,{align:"end",children:(0,l.jsxs)(H.l,{children:["free_text"===e.type&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(H.l.Item,{"aria-label":`${n?"View":"Edit"} attachment: ${e.id}`,onSelect:()=>i(e),children:[(0,l.jsx)(H.l.LeadingVisual,{children:n?(0,l.jsx)(z.EyeIcon,{}):(0,l.jsx)(z.PencilIcon,{})}),n?"View":"Edit"]})}),!n&&(0,l.jsxs)(H.l.Item,{"aria-label":`Delete attachment: ${e.id}`,variant:"danger",onSelect:()=>t(e),children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]})]})})]})}),(0,l.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:["free_text"===e.type&&(0,l.jsx)(K.K,{onClick:()=>i(e),variant:"invisible","aria-label":n?"View":"Edit",icon:n?z.EyeIcon:z.PencilIcon}),!n&&(0,l.jsx)(K.K,{onClick:()=>t(e),variant:"invisible","aria-label":"Delete",icon:z.TrashIcon})]}),r&&(0,l.jsx)(al,{sizePercentage:s,resource:r,onSave:a,onClose:()=>i(null),readOnly:n})]})},aw=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return String(e.id)}};try{aE.displayName||(aE.displayName="ReferencesTable")}catch{}try{aN.displayName||(aN.displayName="RowSize")}catch{}try{aI.displayName||(aI.displayName="RowActions")}catch{}var aF=a(58855),aA=a(81945);function aT(e){let t,a=(0,o.c)(3),{height:s,width:n}=e;return a[0]!==s||a[1]!==n?(t=(0,l.jsx)(aA.O,{animationStyle:"pulse",height:s,variant:"rounded",width:n,"data-testid":"skeleton"}),a[0]=s,a[1]=n,a[2]=t):t=a[2],t}function aR(){let e,t,a,s,n,r,i=(0,o.c)(6);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(aT,{height:"22px",width:"10%"}),t=(0,l.jsx)(aT,{height:"42px",width:"40%"}),a=(0,l.jsx)(aT,{height:"32px",width:"60%"}),s=(0,l.jsx)(aT,{height:"105px",width:"100%"}),n=(0,l.jsx)(aT,{height:"125px",width:"100%"}),i[0]=e,i[1]=t,i[2]=a,i[3]=s,i[4]=n):(e=i[0],t=i[1],a=i[2],s=i[3],n=i[4]),i[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("div",{className:"SpaceLoader-module__container--SdiaA",children:(0,l.jsx)("div",{role:"region","aria-label":"Loading space",className:"SpaceLoader-module__wrapper--fqS0s",children:(0,l.jsxs)(eV.B,{direction:"vertical",gap:"spacious",children:[e,t,a,s,n,(0,l.jsxs)(eV.B,{direction:"horizontal",className:"SpaceLoader-module__horizontalStack--Y6yoV",children:[(0,l.jsxs)(eV.B,{direction:"horizontal",gap:"normal",className:"SpaceLoader-module__leftGroup--IaK8B",children:[(0,l.jsx)(aT,{height:"32px",width:"30%"}),(0,l.jsx)(aT,{height:"32px",width:"40%"})]}),(0,l.jsx)(aT,{height:"32px",width:"17%"})]}),(0,l.jsx)(aT,{height:"300px",width:"100%"})]})})}),i[5]=r):r=i[5],r}try{aT.displayName||(aT.displayName="Skeleton")}catch{}try{aR.displayName||(aR.displayName="SpaceLoader")}catch{}let ak="InstructionsDialog-module__grow--mfJpQ";function aO({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s}){let{upsertCopilotSpace:n,isPending:r}=(0,eU.$)(e),[i,o]=(0,u.useState)(e.generalInstructions??""),[c,d]=(0,u.useState)(null);async function m(){try{let e=await n({generalInstructions:i});a?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save instructions")}}function h(){o(e.generalInstructions??""),t()}return(0,l.jsx)(eu.l,{width:"xlarge",height:"large",title:"Instructions",onClose:h,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,l.jsxs)("div",{className:"InstructionsDialog-module__instructionsContainer--tvd1E",children:[c&&(0,l.jsx)(x.l,{variant:"critical",title:c,className:"mb-2"}),(0,l.jsxs)(to.A,{className:ak,disabled:!e.editable,children:[(0,l.jsx)(to.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,l.jsx)(tc.Ay,{block:!0,value:i,onChange:e=>o(e.target.value),placeholder:"Define Copilot's role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D.",resize:"none",className:ak}),(0,l.jsx)(aB,{text:i,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,l.jsx)(tl.m,{onCancel:h,onSave:m,isLoading:r,loadingAnnouncement:"Saving instructions",saveButtonText:"Save"})})}function aB(e){let t,a,s,n,r=(0,o.c)(10),{text:i,promptCharLimit:c}=e,u=i.length>c;r[0]!==i.length?(t=i.length.toLocaleString(),r[0]=i.length,r[1]=t):t=r[1],r[2]!==c?(a=c.toLocaleString(),r[2]=c,r[3]=a):a=r[3],r[4]!==t||r[5]!==a?(s=(0,l.jsxs)(l.Fragment,{children:[t," / ",a," characters"]}),r[4]=t,r[5]=a,r[6]=s):s=r[6];let d=s;return r[7]!==d||r[8]!==u?(n=u?(0,l.jsx)(to.A.Validation,{variant:"error",children:d}):(0,l.jsx)(to.A.Caption,{children:d}),r[7]=d,r[8]=u,r[9]=n):n=r[9],n}try{aO.displayName||(aO.displayName="InstructionsDialog")}catch{}try{aB.displayName||(aB.displayName="CharacterCount")}catch{}let aL="SpacesConversation-module__tabEmptyContainer--dnmPR",aP="SpacesConversation-module__tabEmptyTitle--Pw6Ln",aM="SpacesConversation-module__tabEmptyText--SxP9A";function aU({customCopilotId:e,selectedThreadID:t,textAreaRef:a}){let{currentTopic:s,messages:n,streamingMessage:r,ambientError:i,threads:c}=(0,d.Pk)(),m=(0,eE.b)(),[p]=(0,F.ok)(),D=(0,Z.G)(),f=(0,tF.j)(),{chatQuotaExceeded:g,isLicensedLimited:_}=(0,tx.xR)(),C=_&&g,[y,v]=(0,u.useState)(()=>p.get("tab")||"attachments"),[b,j]=(0,u.useState)(!1),[S,I]=(0,u.useState)(null),w=(0,u.useRef)(null),[A,T]=(0,u.useState)(null),[R,k]=(0,u.useState)([]),[O,B]=(0,u.useState)(null),[L,P]=(0,u.useState)(null),[M,U]=(0,u.useState)(!1),[W,V]=(0,u.useState)([]),[H,K]=(0,u.useState)(null),Q=(0,u.useRef)(null),J=(0,u.useRef)(s),Y=n.length,X=(0,tN.T)(J,Y),{isPending:ee,data:et,error:ea}=(0,N.Ao)(e),{upsertCopilotSpace:es,error:en}=(0,eU.$)(A||void 0),{deleteCopilotSpaceResources:er,error:ei}=(e=>{let t,a,s,n,r,i,l,c=(0,o.c)(15),d=(0,eO.jE)(),[m,h]=(0,u.useState)(!1);c[0]!==e?(t={mutationFn:async t=>{if(!e)return;h(!0);let a=(0,E.fn)(e),s={custom_copilot:{resources_attributes:t.map(au)}},n=await (0,eL.lS)(a,{method:"PUT",body:s}),r=await n.json();if(!n.ok&&404!==n.status)throw Error("Unable to delete resources.");return r}},c[0]=e,c[1]=t):t=c[1];let p=(0,eB.n)(t);return c[2]!==p?({mutateAsync:a,isPending:s,...n}=p,c[2]=p,c[3]=a,c[4]=s,c[5]=n):(a=c[3],s=c[4],n=c[5]),c[6]!==e||c[7]!==s||c[8]!==d||c[9]!==m?(r=()=>{e&&m&&!s&&(h(!1),d.invalidateQueries({queryKey:(0,ek.dp)(e)}))},i=[m,s,e,d],c[6]=e,c[7]=s,c[8]=d,c[9]=m,c[10]=r,c[11]=i):(r=c[10],i=c[11]),(0,u.useEffect)(r,i),c[12]!==a||c[13]!==n?(l={deleteCopilotSpaceResources:a,...n},c[12]=a,c[13]=n,c[14]=l):l=c[14],l})(A||void 0);(0,u.useEffect)(()=>{(0,$.D)(A?.name?`${A.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[A?.name]),(0,u.useEffect)(()=>{if(W.length>0){let e=setTimeout(()=>{Q.current?.focus()},100);return()=>clearTimeout(e)}},[W]);let{processFiles:el}=tH({onResourcesAdded:e=>void eC(e),onError:V,onUploadingChange:U}),{copilotSpacesConfig:{maxResourceCount:eo,maxDescriptionLength:ec}}=(0,h.X)(),eu=en||ea||L||ei,ed=(0,u.useRef)(!1),em=R.filter(e=>!e.markedForDestroy).length,eh=(0,u.useMemo)(()=>A?m.sortAndFilterThreads(c,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[c,e,m,A]),ep=(0,u.useMemo)(()=>A?A.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[A]);(0,u.useEffect)(()=>{et&&(T(et),k(e=>et.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:et})),m.clearCurrentReferences(["image"])},[et,m]),(0,u.useEffect)(()=>()=>{ed.current||(m.clearCurrentReferences(),ed.current=!1)},[m,e]);let eD=(0,u.useCallback)(async e=>{ed.current=!0,await X(e)},[X]),ef=(0,u.useCallback)(e=>{v(e);let t=new URLSearchParams(window.location.search);t.set("tab",e),(0,ty.MM)(t)},[]),eg=(0,u.useCallback)(e=>{m.deleteThread(e)},[m]);async function ex(e){let t=[];if(k(a=>{for(let s of(t=[...a],e))t=s.databaseId?t.map(e=>s.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==s.id);return t}),A)try{await er(e),P(null)}catch{k(t=>[...t,...e])}}async function e_(e){let t=[];if(k(a=>t=a.map(t=>t.id===e.id?e:t)),A)try{await es({...A,resources:t}),P(null)}catch{k(A.resources)}}let eC=(0,u.useCallback)(async e=>{let t=function(e,t){let a=new Map(e.map(e=>[e.id,e]));for(let s of t){if("repository"===s.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===s.repositoryId);if(t){a.set(t.id,{...t,markedForDestroy:!1});continue}}a.set(s.id,s)}return Array.from(a.values())}(R,e);k(t);try{await es({...A,resources:t}),P(null)}catch{A&&k(A.resources)}},[A,es,R]),ey=(0,u.useCallback)(()=>{P(`You can select a maximum of ${eo} sources`)},[eo]),ev=(0,u.useCallback)(e=>{el(e,{source:"drag-and-drop"})},[el]),eb=(0,u.useCallback)(async e=>{if(A&&e){B(e);try{let t=await es({name:e});T(t),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),B(null),P(null)}catch{T(A),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:A}),B(null)}}},[A,es,m]),ej=(0,u.useCallback)(async e=>{if(A){T({...A,description:e});try{let t=await es({description:e});T(t),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{T(A),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:A})}}},[A,es,m]);if(ea instanceof N.OW||ea instanceof N.i9)return(0,l.jsx)(tA,{});if(ee||!A)return(0,l.jsx)(aR,{});let eS=A.ownerIsOrg&&!A.allowsPrivateReposFromOtherOrgs?A.owner:void 0,eN=O??A.name,eI=(0,E.Hh)(et);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tb.t,{fallback:(0,l.jsx)(tw.x,{regionName:"This space"}),children:(0,l.jsxs)(tv.Zf.Container,{width:"small",children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__header--GkfTQ",children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__headerTopRow--vpBF1",children:[(0,l.jsx)("div",{children:(0,l.jsx)(G.A,{children:tI(A)})}),(0,l.jsx)(q.Q,{leadingVisual:z.McpIcon,as:"a",href:E.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install MCP"})]}),(0,l.jsx)("h1",{children:A.editable?(0,l.jsx)(aD,{ariaPrefix:"Space name:",className:"SpacesConversation-module__titleText--czjJm",value:eN,onChange:eb}):(0,l.jsx)("span",{className:"SpacesConversation-module__text--v551F",children:eN})}),A.editable?(0,l.jsx)(aD,{className:"SpacesConversation-module__descriptionText--hYXsZ",placeholder:"Add a short description to explain this space's purpose (e.g., 'Frontend design system' or 'API docs hub').",ariaPrefix:"Space description:",value:A.description||"",maxLength:ec,onChange:ej}):A.description&&(0,l.jsx)("p",{className:"SpacesConversation-module__spaceDescription--nRmSr",children:A.description})]}),(0,l.jsxs)("div",{className:"SpacesConversation-module__chatInput--Nrvmc",children:[i&&(0,l.jsx)(tD.P,{ambientError:i}),eI&&(0,l.jsx)(aF.Sy,{}),!eI&&f.visible&&(0,l.jsx)(tF.I,{onDismiss:f.onDismiss}),!eI&&(0,l.jsxs)("div",{className:"SpacesConversation-module__inputSection--D3JWF",children:[(0,l.jsx)(tf.V,{textAreaRef:a,onSubmit:eD,isStreaming:!!r,size:"large",disabled:C,modes:[{name:tC.II.Ask,supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:z.SpaceIcon,placeholder:"How can I help you?"}],showPlanningToggle:!t,onNewThreadSelected:D},t),C&&(0,l.jsx)(t_.u,{})]})]}),(0,l.jsxs)("button",{ref:w,className:"SpacesConversation-module__instructions--t36Ks",onClick:()=>j(!0),"aria-haspopup":"dialog","aria-expanded":b,children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__instructionsHeader--ynDM7",children:[(0,l.jsx)(z.SlidersIcon,{size:16,className:"SpacesConversation-module__instructionsIcon--KKXjS"}),(0,l.jsx)("h2",{className:"SpacesConversation-module__instructionsTitle--xAAKT",children:"Instructions"})]}),A.generalInstructions?(0,l.jsx)("p",{className:"SpacesConversation-module__instructionsContent--DYqhz",children:A.generalInstructions}):(0,l.jsx)("p",{className:"SpacesConversation-module__instructionsEmptyState--wlbTe",children:"Define Copilot\u2019s role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D."})]}),eu&&(0,l.jsx)(x.l,{title:L?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof eu?eu:"object"==typeof eu&&null!==eu&&"base"in eu?String(eu.base):eu instanceof Error?eu.message:"An error occurred"}),W.length>0&&(0,l.jsx)(aF.kX,{errorMessages:W,onDismiss:()=>V([]),bannerRef:Q}),(0,l.jsxs)("div",{className:"SpacesConversation-module__content--FPhr6",children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__tabContainer--rTZgf",children:[(0,l.jsx)("div",{className:"SpacesConversation-module__underlineNav--qjoAn",children:(0,l.jsxs)(tj.O,{"aria-label":"Space content",children:[(0,l.jsx)(tj.O.Item,{as:"button","aria-current":"attachments"===y?"page":void 0,onSelect:()=>ef("attachments"),counter:em,children:"Sources"}),(0,l.jsx)(tj.O.Item,{as:"button","aria-current":"conversations"===y?"page":void 0,onSelect:()=>ef("conversations"),counter:eh.length,children:"Conversations"})]})}),(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"none",children:[ep>80&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tS.z,{inline:!0,barSize:"small",progress:ep,className:"SpacesConversation-module__referencesSizeProgressBar--pRjZw","aria-hidden":"true"}),(0,l.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-ep))}% remaining attachment capacity`}),(0,l.jsxs)("span",{className:"SpacesConversation-module__referencesSizeText--buwhH",children:[ep<1?"<1":Math.round(ep),"%"]})]}),A.editable&&(0,l.jsx)("div",{className:"SpacesConversation-module__attachButton--Hr8sv",children:em>=eo?(0,l.jsx)(q.Q,{leadingVisual:z.PlusIcon,onClick:ey,children:"Add sources"}):(0,l.jsx)(ac,{sizePercentage:ep,owner:eS,onResourcesAdded:eC,resourcesToSave:R,resourceCounts:{currentResourceCount:em,maxResourceCount:eo},onError:V,initialRepo:H,onRepoSelect:K,onUploadingChange:e=>{e&&V([]),U(e)},children:(0,l.jsx)(q.Q,{leadingVisual:z.PlusIcon,children:"Add sources"})})})]})]}),(0,l.jsx)("div",{className:"SpacesConversation-module__tabContent--zCP1V",children:(()=>{if("attachments"===y){let e=R.filter(e=>!e.markedForDestroy);return e.length>0?(0,l.jsx)(aE,{resources:e,resourceCounts:{currentResourceCount:em,maxResourceCount:eo},sizePercentage:ep,onDeleteResources:ex,onUpdateResource:e_,onResourcesAdded:eC,readOnly:!A?.editable}):(0,l.jsxs)("div",{className:aL,children:[(0,l.jsx)(z.FileIcon,{size:24,className:"fgColor-muted mb-2"}),(0,l.jsx)("h2",{className:aP,children:A?.editable?"Add sources to get started":"Welcome"}),(0,l.jsx)("p",{className:aM,children:A?.editable?"Provide files, docs, issues, or repositories so Copilot can give more relevant answers.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===y)return eh.length>0?(0,l.jsx)("ul",{role:"menu",className:"SpacesConversation-module__conversationsList--KLG2n",children:eh.map(e=>(0,l.jsx)(a$,{conversation:e,activeMenuConversationId:S,setActiveMenuConversationId:I,onDelete:eg},e.id))}):(0,l.jsxs)("div",{className:aL,children:[(0,l.jsx)("h2",{className:aP,children:"No conversations yet"}),(0,l.jsx)("p",{className:aM,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),b&&(0,l.jsx)(aO,{copilotSpace:A,onClose:()=>j(!1),returnFocusRef:w,onSaved:e=>{T(e),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(0,l.jsx)(tg.A,{onFilesDrop:ev,isUploading:M})]})}function a$({conversation:e,activeMenuConversationId:t,setActiveMenuConversationId:a,onDelete:s}){let n=(0,eT.Z)(),r=(0,A.CB)(e),i=`${A.Jz}/c/${e.id}`;return(0,l.jsxs)("li",{role:"menuitem",onClick:()=>n(i),onKeyDown:e=>{"Enter"===e.key&&n(i)},className:(0,eG.$)("SpacesConversation-module__conversationItem--kxjxw",null!==t&&"SpacesConversation-module__conversationItemMenuOpen--Z1mQR"),children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",children:[(0,l.jsx)("div",{className:"SpacesConversation-module__conversationName--wbn54",children:r}),(0,l.jsxs)("div",{className:"SpacesConversation-module__conversationTimestamp--tcI92",children:[(0,l.jsx)(z.ClockIcon,{})," ",(0,l.jsx)(tE.A,{format:"relative",prefix:"",date:new Date(e.updatedAt)})]})]}),(0,l.jsxs)(V.W,{open:t===e.id,onOpenChange:t=>{a(t?e.id:null)},children:[(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{variant:"invisible","aria-label":"Conversation options",icon:z.KebabHorizontalIcon,onClick:e=>{e.stopPropagation()}})}),(0,l.jsx)(V.W.Overlay,{onClick:e=>e.stopPropagation(),align:"end",children:(0,l.jsx)(H.l,{children:(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:()=>s(e),children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]})})})]})]})}try{aU.displayName||(aU.displayName="SpacesConversation")}catch{}try{a$.displayName||(a$.displayName="ConversationItem")}catch{}var aW=a(4559),az=a(69599),aV=a(30388);function aH(e,t){var a=["name","description","owner"],s=!1;if(!t.trim())return!0;let n=s?t.trim():t.toLowerCase().trim();return a.some(t=>{let a;return null!=(a="function"==typeof t?t(e):e[t])&&(s?String(a):String(a).toLowerCase()).includes(n)})}var aG=a(21229),aq=a(82156);function aK(e){let t,a,s,n,r,i=(0,o.c)(9),{primary:c}=e,[d,m]=(0,u.useState)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),m(!1)},i[0]=t):t=i[0];let h=t;i[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),m(!0)},i[1]=a):a=i[1];let p=a;i[2]!==d?(s=d?(0,l.jsx)(eN.D,{closeDialog:h,onSubmit:aQ}):null,i[2]=d,i[3]=s):s=i[3];let D=void 0!==c&&c?"primary":"default";return i[4]!==D?(n=(0,l.jsx)(q.Q,{variant:D,onClick:p,children:"Create space"}),i[4]=D,i[5]=n):n=i[5],i[6]!==s||i[7]!==n?(r=(0,l.jsxs)(l.Fragment,{children:[s,n]}),i[6]=s,i[7]=n,i[8]=r):r=i[8],r}function aQ(){(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACES_SPACE_CREATED",mode:"immersive"})}try{aK.displayName||(aK.displayName="CreateSpaceButton")}catch{}let aJ="SpacesView-module__button--j38nS",aY="SpacesView-module__counter--ZdDOv",aX="SpacesView-module__metadataItem--rLi5j",aZ="SpacesView-module__benefitSection--GRkgW",a0="SpacesView-module__benefitIcon--Pk9zH",a1="SpacesView-module__benefitTitle--NOGgu",a2="SpacesView-module__benefitDescription--FU6Sj";function a3(){return(0,l.jsx)(eI.A,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",className:"mt-4 f5",target:"_blank",inline:!0,rel:"noopener noreferrer",children:"Need help? Read the docs"})}function a4({copilotSpace:e,onDelete:t,onClick:a}){let s=e.ownerIsOrg?z.OrganizationIcon:z.PersonIcon,n=tI(e),r="Shared"===n?z.PeopleIcon:z.LockIcon,i=e.adminable||e.editable;return(0,l.jsxs)(aV.qJ.Item,{href:(0,E.Cb)(e),onClick:a,children:[(0,l.jsx)(aV.qJ.Item.Title,{children:e.name}),(0,l.jsx)(aV.qJ.Item.Description,{children:(0,l.jsx)("div",{className:"SpacesView-module__description--IyY7g",children:e.description})}),(0,l.jsx)(aV.qJ.Item.Metadata,{children:(0,l.jsxs)("div",{className:"SpacesView-module__metadata--Sw1rv",children:[(0,l.jsxs)("span",{className:aX,children:[(0,l.jsx)(s,{size:16}),e.owner]}),(0,l.jsxs)("span",{className:aX,children:[(0,l.jsx)(r,{size:16}),n]})]})}),(i||S.W.copilotSpacesReportAbuse)&&(0,l.jsx)(aV.qJ.Item.Actions,{children:(0,l.jsx)(tn,{copilot:e,onDelete:t})})]})}function a6(){return(0,l.jsxs)("li",{children:[(0,l.jsxs)("div",{className:"my-8 d-flex flex-column gap-3 text-center",children:[(0,l.jsx)("h2",{className:"f3 fgColor-default",children:"Start your first space"}),(0,l.jsxs)("div",{className:"d-flex flex-items-center flex-column",children:[(0,l.jsx)(aK,{}),(0,l.jsx)(a3,{})]})]}),(0,l.jsxs)("div",{className:"SpacesView-module__benefitSections--ZQRGR",children:[(0,l.jsxs)("div",{className:aZ,children:[(0,l.jsx)("div",{className:a0,children:(0,l.jsx)(z.CodeIcon,{size:16})}),(0,l.jsx)("h3",{className:a1,children:"Generate code"}),(0,l.jsx)("p",{className:a2,children:"Produce code that follows your team's patterns."})]}),(0,l.jsxs)("div",{className:aZ,children:[(0,l.jsx)("div",{className:a0,children:(0,l.jsx)(z.BookIcon,{size:16})}),(0,l.jsx)("h3",{className:a1,children:"Share knowledge"}),(0,l.jsx)("p",{className:a2,children:"Centralize docs so your team can quickly find answers."})]}),(0,l.jsxs)("div",{className:aZ,children:[(0,l.jsx)("div",{className:a0,children:(0,l.jsx)(z.ProjectIcon,{size:16})}),(0,l.jsx)("h3",{className:a1,children:"Plan projects"}),(0,l.jsx)("p",{className:a2,children:"Create requirements and issues your team can ship."})]})]})]})}let a5=e=>e.shared&&e.collaborative;function a7(){return(0,l.jsx)(aq.f,{width:"1.75em",height:"1.4em",className:aY})}function a8({spaces:e,categorizedSpaces:t,starredSpaces:a,isLoading:s,categorizedLoading:n,spacesCounts:r,isCountsLoading:i,onDelete:o,onSpaceClick:c,searchQuery:d,currentUserLogin:m}){let h=el.Jt.getSpacesSelectedTab(),[p,D]=(0,u.useState)(h),f=(0,u.useCallback)(e=>{D(e),el.Jt.setSpacesSelectedTab(e)},[]),g=a&&a.length>0,x=S.W.copilotSpacesReadAccessToUserOwnedSpaces;(0,u.useEffect)(()=>{g&&f("starred")},[g,f]);let _=(0,u.useMemo)(()=>{if(!n)return s;switch(p){case"starred":return n.starred;case"personal":return n.userOwned;case"org":return n.orgOwned;case"shared":return n.sharedWithUser;default:return s}},[n,p,s]),C=(0,u.useMemo)(()=>{if(t)switch(p){case"starred":return t.starred;case"personal":return t.userOwned;case"org":return t.orgOwned;case"shared":return t.sharedWithUser;default:return}if(e)return e.filter(e=>"starred"===p&&e.starred||"personal"===p&&!e.ownerIsOrg&&!e.shared||"org"===p&&e.ownerIsOrg||!!x&&"shared"===p&&a5(e))},[t,e,p,x]),y=(0,u.useMemo)(()=>C?d.trim()?C.filter(e=>aH(e,d)):C:[],[C,d]),{personalSpacesCount:v,orgSpacesCount:b,starredSpacesCount:j,sharedSpacesCount:E}=(0,u.useMemo)(()=>{if(r&&!d.trim())return{personalSpacesCount:r.user_owned_spaces,orgSpacesCount:r.org_owned_spaces,starredSpacesCount:r.starred_spaces,sharedSpacesCount:x?r.shared_with_me_spaces:0};if(t){let e=e=>e?d.trim()?e.filter(e=>aH(e,d)).length:e.length:0;return{personalSpacesCount:e(t.userOwned),orgSpacesCount:e(t.orgOwned),starredSpacesCount:e(t.starred),sharedSpacesCount:x?e(t.sharedWithUser):0}}if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0,sharedSpacesCount:0};let a=d.trim()?e.filter(e=>aH(e,d)):e;return{personalSpacesCount:a.filter(e=>!e.ownerIsOrg&&!e.shared).length,orgSpacesCount:a.filter(e=>e.ownerIsOrg).length,starredSpacesCount:a.filter(e=>e.starred).length,sharedSpacesCount:x?a.filter(a5).length:0}},[r,t,e,d,x]),N=(0,u.useCallback)(()=>r?r.starred_spaces+r.user_owned_spaces+r.org_owned_spaces+r.shared_with_me_spaces:t?(t.starred?.length??0)+(t.userOwned?.length??0)+(t.orgOwned?.length??0)+(t.sharedWithUser?.length??0):e?.length??0,[r,t,e]),I=(0,u.useCallback)(()=>t?[...t.starred??[],...t.userOwned??[],...t.orgOwned??[],...t.sharedWithUser??[]]:e??[],[t,e]),w=N()>0,F=(0,u.useMemo)(()=>{let e=I();return e.length>0&&!e.some(e=>e.creator===m)&&!_},[I,m,_]),A=w&&y?.length===0&&!_;return(0,u.useEffect)(()=>{if(_||!d.trim())return;let e=y.length,t=0===e?"No spaces found.":`${e} ${1===e?"space":"spaces"} found.`;(0,aW.i)(t)},[y.length,d,_]),(0,l.jsxs)(aV.qJ,{children:[(0,l.jsx)(aV.qJ.Header,{children:(0,l.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:"SpacesView-module__filterButtons--qTV2E",children:[(0,l.jsxs)("button",{onClick:()=>f("starred"),role:"tab","aria-selected":"starred"===p,"aria-controls":"spaces-list",id:"starred-tab",className:aJ,children:["Starred"," ",i&&!d?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aY,children:j})]}),(0,l.jsxs)("button",{onClick:()=>f("personal"),role:"tab","aria-selected":"personal"===p,"aria-controls":"spaces-list",id:"personal-tab",className:aJ,children:["Yours"," ",i&&!d?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aY,children:v})]}),x&&(0,l.jsxs)("button",{onClick:()=>f("shared"),role:"tab","aria-selected":"shared"===p,"aria-controls":"spaces-list",id:"shared-with-me-tab",className:(0,eG.$)(aJ,"SpacesView-module__sharedSpacesTab--dS9e3"),children:["Shared with me"," ",i&&!d?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aY,children:E})]}),(0,l.jsxs)("button",{onClick:()=>f("org"),role:"tab","aria-selected":"org"===p,"aria-controls":"spaces-list",id:"org-tab",className:aJ,children:["Organizations"," ",i&&!d?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aY,children:b})]})]})}),(0,l.jsx)(aV.qJ.List,{loading:_,id:"spaces-list","aria-labelledby":p,children:w||_?F&&"personal"===p?(0,l.jsx)(a6,{}):A?(0,l.jsxs)(aV.qJ.EmptyState,{children:[(0,l.jsxs)("p",{children:["starred"===p&&"Spaces you star will appear here.","personal"===p&&"Spaces you create will appear here.","org"===p&&"Spaces belonging to your organizations will appear here.","shared"===p&&"Shared spaces will appear here."]}),(0,l.jsx)(aK,{}),(0,l.jsx)(a3,{})]}):y?.map(e=>(0,l.jsx)(a4,{copilotSpace:e,onDelete:()=>o(e),onClick:c},e.owner?`${e.owner}/${e.id}`:e.id)):(0,l.jsx)(a6,{})})]})}function a9({copilotSpaces:e}){let t=(0,d.Pk)(),a=(0,az.G7)("copilot_spaces_split_index_calls"),{categorizedSpaces:s,categorizedLoading:n}=(0,N.yk)(a),[r,i]=(0,u.useState)(null),[o,c]=(0,u.useState)(""),m=el.Jt.getSpacesMcpBannerDismissalCount(),[h,p]=(0,u.useState)(m<2),{data:D,isLoading:f}=(0,N.a5)(a),_=void 0===e,C=a?s?.starred:e?.filter(e=>e.starred),{mutateAsync:y}=(0,N.$7)(),v=async e=>{try{await y(e),i(null)}catch(e){i(e instanceof Error?e:Error(String(e)))}};return(0,l.jsxs)(tb.t,{fallback:(0,l.jsx)(tw.x,{regionName:"Spaces"}),children:[r&&(0,l.jsxs)(eR.A,{variant:"danger",children:[(0,l.jsx)(z.AlertIcon,{}),"There was a problem deleting your space."]}),(0,l.jsxs)(tv.Zf.Container,{width:"small",children:[h&&(0,l.jsx)(tv.Zf.Banner,{children:(0,l.jsx)(x.l,{title:"Try Spaces in VSCode",hideTitle:!0,icon:(0,l.jsx)(z.McpIcon,{}),description:"Spaces are now available through the GitHub MCP in VSCode.",variant:"upsell",primaryAction:(0,l.jsx)(x.l.PrimaryAction,{as:"a",href:E.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install"}),onDismiss:()=>{let e;e=el.Jt.getSpacesMcpBannerDismissalCount(),el.Jt.setSpacesMcpBannerDismissalCount(e+1),p(!1)}})}),(0,l.jsxs)(tv.Zf.Header,{children:[(0,l.jsx)(tv.Zf.Title,{children:"Spaces"}),(0,l.jsx)(tv.Zf.Description,{children:"Spaces organize your files, pull requests, issues, and standards so Copilot can give more relevant help for your work."}),(0,l.jsx)(tv.Zf.Actions,{children:(0,l.jsx)(aK,{primary:!0})})]}),(0,l.jsx)(aG.D,{onSearch:c,"aria-label":"Search spaces"}),(0,l.jsx)(tv.Zf.Section,{children:(0,l.jsx)(a8,{spaces:e,categorizedSpaces:a?s:void 0,starredSpaces:C,isLoading:_,categorizedLoading:a?n:void 0,spacesCounts:D,isCountsLoading:f,onDelete:v,onSpaceClick:()=>{(0,g.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})},searchQuery:o,currentUserLogin:t.currentUserLogin})})]})]})}try{a3.displayName||(a3.displayName="DocsLink")}catch{}try{a4.displayName||(a4.displayName="SpacesListItem")}catch{}try{a6.displayName||(a6.displayName="FirstSpaceEmptyState")}catch{}try{a7.displayName||(a7.displayName="CounterSkeleton")}catch{}try{a8.displayName||(a8.displayName="SpacesList")}catch{}try{a9.displayName||(a9.displayName="SpacesView")}catch{}function se(){let e,t,a,s,n,r,i,c,m,h,p,D,f,g,x=(0,o.c)(52),_=(0,d.Pk)(),{customCopilots:C}=_,y=(0,I.U)(),P=(0,b.v)(),M=(0,F.zy)(),U=(0,N.BV)(),$=(0,E.y_)(),W=U&&$,z=(0,E.iI)(),{isNarrowViewport:V}=(0,R.B)();(0,N.e9)(U),function(){let e,t=(0,d.Pk)(),{referenceId:a,messageIndex:s}=(e=(0,F.zy)(),(0,u.useMemo)(()=>{let t=new URLSearchParams(e.search),a=t.get("reference_id"),s=t.get("message_index"),n=null;if(null!==s){let e=parseInt(s,10);isNaN(e)||(n=e)}return{referenceId:a,messageIndex:n}},[e.search])),[,n]=(0,F.ok)(),{isNarrowViewport:r}=(0,R.B)(),i=(0,u.useMemo)(()=>t.messages??[],[t.messages]),l=(0,u.useMemo)(()=>null!==s&&s>=0&&s<i.length?i[s]:null,[i,s]),o=(0,u.useMemo)(()=>l?.references??t.currentReferences??[],[l?.references,t.currentReferences]),c=(0,u.useMemo)(()=>a&&o.length?o.find(e=>(0,A.Vb)(e)===a)??null:null,[a,o]),m=(0,T.I)({messageIndex:s??i.length,messageId:l?.id,messageTimestamp:l?.createdAt});(0,u.useEffect)(()=>{c&&(r||m(c),n(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[c,r,m,n])}();let H=(0,B.tZ)(),G=(0,B.wI)(),{closePreviewPane:q,openPreviewPane:K,closeResourcePanel:Q,openResourcePanel:J}=(0,B.xx)();x[0]!==q||x[1]!==K?(e=e=>{e?K():q()},x[0]=q,x[1]=K,x[2]=e):e=x[2];let Y=e;x[3]!==Q||x[4]!==J?(t=e=>{e?J():Q()},x[3]=Q,x[4]=J,x[5]=t):t=x[5];let X=t;x[6]!==P||x[7]!==M?(a=(0,j.bG)(P,M),x[6]=P,x[7]=M,x[8]=a):a=x[8];let Z=a;if(P&&Z){let e,t,a=Z.Component;return x[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("span",{"data-favicon-override":k.i}),x[9]=e):e=x[9],x[10]!==a||x[11]!==P||x[12]!==_?(t=(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(u.Suspense,{children:(0,l.jsx)(a,{chatState:_,plugin:P})})]}),x[10]=a,x[11]=P,x[12]=_,x[13]=t):t=x[13],t}x[14]!==z||x[15]!==C||x[16]!==W||x[17]!==_.selectedThreadID||x[18]!==y?(s=W?(0,l.jsx)(a9,{copilotSpaces:C}):z?(0,l.jsx)(aU,{customCopilotId:z,selectedThreadID:_.selectedThreadID,textAreaRef:y}):null,x[14]=z,x[15]=C,x[16]=W,x[17]=_.selectedThreadID,x[18]=y,x[19]=s):s=x[19];let ee=s;if(ee){let e,t,a;return x[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(w.P.Header,{children:(0,l.jsx)(tm,{})}),x[20]=e):e=x[20],x[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(w.P.Sidebar,{children:(0,l.jsx)(v.U,{})}),x[21]=t):t=x[21],x[22]!==ee?(a=(0,l.jsxs)(w.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:k.i,children:[e,t,(0,l.jsx)(w.P.ColumnLeft,{children:ee})]}),x[22]=ee,x[23]=a):a=x[23],a}x[24]!==H||x[25]!==Y?(n=[H,Y],x[24]=H,x[25]=Y,x[26]=n):n=x[26],x[27]!==G||x[28]!==X?(r=[G,X],x[27]=G,x[28]=X,x[29]=r):r=x[29],x[30]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(w.P.Sidebar,{children:(0,l.jsx)(v.U,{})}),x[30]=i):i=x[30],x[31]!==_.selectedThreadID?(c=!_.selectedThreadID&&(0,l.jsx)(ev,{}),x[31]=_.selectedThreadID,x[32]=c):c=x[32],x[33]!==c?(m=(0,l.jsx)(w.P.Header,{children:(0,l.jsx)(eh,{customButtons:c})}),x[33]=c,x[34]=m):m=x[34];let et=S.W.stableConversationView?void 0:_.selectedThreadID;return x[35]!==V||x[36]!==et||x[37]!==y?(h=(0,l.jsx)(w.P.ColumnLeft,{children:(0,l.jsx)(L.L,{isMobile:V,textAreaRef:y},et)}),x[35]=V,x[36]=et,x[37]=y,x[38]=h):h=x[38],x[39]!==G?(p=S.W.copilotResourcePanel&&G&&(0,l.jsx)(ej.R,{}),x[39]=G,x[40]=p):p=x[40],x[41]!==y?(D=(0,l.jsx)(O.U,{returnFocusRef:y}),x[41]=y,x[42]=D):D=x[42],x[43]!==p||x[44]!==D?(f=(0,l.jsxs)(w.P.ColumnRight,{className:"d-flex",children:[p,D]}),x[43]=p,x[44]=D,x[45]=f):f=x[45],x[46]!==h||x[47]!==f||x[48]!==n||x[49]!==r||x[50]!==m?(g=(0,l.jsxs)(w.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:k.i,secondaryColumnState:n,resourcePanelState:r,children:[i,m,h,f]}),x[46]=h,x[47]=f,x[48]=n,x[49]=r,x[50]=m,x[51]=g):g=x[51],g}try{se.displayName||(se.displayName="Layout")}catch{}var st=a(31223),sa=a(40235);let ss=(0,p.E7)();function sn(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(p.mf,{environment:ss,children:(0,l.jsx)(sr,{})}),t[0]=e):e=t[0],e}function sr(){let e=(0,o.c)(4),t=(0,h.X)();if(t?.copilotChatSettingEnabled){let a,s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(si,{}),e[0]=a):a=e[0],e[1]!==t?(s=(0,l.jsx)(D.K,{payload:t,children:a}),e[1]=t,e[2]=s):s=e[2],s}{let t;return e[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(C,{}),e[3]=t):t=e[3],t}}function si(){let e,t,a,s,n,r=(0,o.c)(1);return!function(){let e,t,a=(0,o.c)(7),s=(0,X.g)(),n=(0,u.useRef)(!0),r=(0,u.useRef)(null),i=(0,eE.b)(),{threads:l,selectedThreadID:c}=(0,d.Pk)(),m=(0,Y.H)();!function(){let{selectedThreadID:e,sharedThreadChannel:t}=(0,d.Pk)(),a=(0,eE.b)();(0,sa.x)(t,()=>{a.fetchSharedThreadMessages(e)})}(),a[0]!==m||a[1]!==i||a[2]!==c||a[3]!==s||a[4]!==l?(e=()=>{if(n.current){n.current=!1,r.current=s,m?i.fetchSharedThreadMessages(c):i.fetchMessages(c);return}if(r.current!==s){if(r.current=s,s===c)return;let e=s&&l?.get(s);i.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[i,s,l,c,m],a[0]=m,a[1]=i,a[2]=c,a[3]=s,a[4]=l,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,u.useEffect)(e,t)}(),function(){let e,t,a=(0,o.c)(12),{selectedThreadID:s,shouldReplaceHistoryOnNavigation:n}=(0,d.Pk)(),r=(0,b.v)(),i=(0,eE.b)(),l=(0,st.M)((0,F.Zp)());a[0]!==i||a[1]!==l||a[2]!==r?.skipSyncRouteToThread||a[3]!==s||a[4]!==n?(e=()=>{if(!s||r?.skipSyncRouteToThread)return;let e=`${A.Jz}/c/${s}`,t=`${A.Jz}/share/${s}`,a=window.location.pathname;if(!a.startsWith(e)&&!a.startsWith(t)){let t=n?{replace:!0}:void 0;n&&i.setShouldReplaceHistoryOnNavigation(!1),l.current(e,t)}},a[0]=i,a[1]=l,a[2]=r?.skipSyncRouteToThread,a[3]=s,a[4]=n,a[5]=e):e=a[5];let c=r?.skipSyncRouteToThread;a[6]!==i||a[7]!==l||a[8]!==s||a[9]!==n||a[10]!==c?(t=[l,c,s,n,i],a[6]=i,a[7]=l,a[8]=s,a[9]=n,a[10]=c,a[11]=t):t=a[11],(0,u.useEffect)(e,t)}(),s=(0,o.c)(3),n=(0,eE.b)(),s[0]!==n?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(n.showTopicPicker(!1),n.selectThread(null)):window.location.href.includes("/c/")||(n.showTopicPicker(!0),n.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},a=[n],s[0]=n,s[1]=t,s[2]=a):(t=s[1],a=s[2]),(0,u.useEffect)(t,a),!function(){let e,t,a,s,n=(0,o.c)(11),r=(0,m.y)(),{selectedThreadID:i,fetchSharedThreads:l}=(0,d.bP)("selectedThreadID","fetchSharedThreads"),c=!!l?.shareId&&i===l?.shareId;n[0]!==c||n[1]!==i||n[2]!==r?(e=()=>{i&&!c&&r.fetchAndLoadTraces(i)},t=[i,r,c],n[0]=c,n[1]=i,n[2]=r,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,u.useEffect)(e,t),n[5]!==l||n[6]!==c||n[7]!==i||n[8]!==r?(a=()=>{l?.ok&&l.originalThreadId&&c&&i&&r.fetchAndLoadTraces(l.originalThreadId,i)},s=[l,r,c,i],n[5]=l,n[6]=c,n[7]=i,n[8]=r,n[9]=a,n[10]=s):(a=n[9],s=n[10]),(0,u.useEffect)(a,s)}(),r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(se,{}),r[0]=e):e=r[0],e}try{sn.displayName||(sn.displayName="CopilotImmersive")}catch{}try{sr.displayName||(sr.displayName="CopilotImmersiveNoRelay")}catch{}try{si.displayName||(si.displayName="Immersive")}catch{}(0,i.o)("copilot-immersive-v1",()=>({App:c,routes:[(0,r.a)({path:"/copilot",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/c/:threadID",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/r/:owner/:repository",Component:sn}),(0,r.a)({path:"/copilot/share/:threadID",Component:sn}),(0,r.a)({path:"/copilot/loops",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/l/:loopID",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/workbench",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/spark",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/spaces",Component:sn}),(0,r.a)({path:"/copilot/spaces/:spaceID",Component:sn}),(0,r.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:sn}),(0,r.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:sn}),(0,r.a)({path:"/copilot/spaces/:spaceID/edit",Component:sn}),(0,r.a)({path:"/copilot/spaces/new",Component:sn}),(0,r.a)({path:"/copilot/agents",Component:sn}),(0,r.a)({path:"/copilot/tasks/pull/:globalID",Component:sn,transitionType:n.E.TRANSITION_WITHOUT_FETCH})]}))},23827:(e,t,a)=>{a.d(t,{H:()=>r});var s=a(21728),n=a(61526);function r(){let e,t=(0,s.c)(2),a=(0,n.zy)().pathname;return t[0]!==a?(e=a.includes("/share/"),t[0]=a,t[1]=e):e=t[1],e}},25942:(e,t,a)=>{a.d(t,{C:()=>g});var s=/(?:^\s+|\s+$)/g,n=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function r(e){var t=e.nodeType,a="";if(1===t||9===t||11===t)if("string"==typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)a+=r(e);else if(3===t||4===t)return e.nodeValue;return a}function i(e,t,a,r,i){if(e+="",a&&(e=e.trim?e.trim():e.replace(s,"")),t&&""!==t)return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var l,o,c=[],u=e.length,d=0;d<u;d++)((o=e.charAt(d)).charCodeAt(0)>=55296&&56319>=o.charCodeAt(0)||e.charCodeAt(d+1)>=65024&&65039>=e.charCodeAt(d+1))&&(l=((e.substr(d,12).split(n)||[])[1]||"").length||2,o=e.substr(d,l),c.emoji=1,d+=l-1),c.push(i?o:">"===o?"&gt;":"<"===o?"&lt;":r&&" "===o&&(" "===e.charAt(d-1)||" "===e.charAt(d+1))?"&nbsp;":o);return c}var l,o,c=function(){function e(e){this.chars=i(e),this.sets=[],this.length=50;for(var t=0;t<20;t++)this.sets[t]=m(80,this.chars)}return e.prototype.grow=function(e){for(var t=0;t<20;t++)this.sets[t]+=m(e-this.length,this.chars);this.length=e},e}(),u=function(){return l||"undefined"!=typeof window&&(l=window.gsap)&&l.registerPlugin&&l},d=/\s+/g,m=function(e,t){for(var a=t.length,s="";--e>-1;)s+=t[~~(Math.random()*a)];return s},h="ABCDEFGHIJKLMNOPQRSTUVWXYZ",p=h.toLowerCase(),D={upperCase:new c(h),lowerCase:new c(p),upperAndLowerCase:new c(h+p)},f=function(){o=l=u()},g={version:"3.13.0",name:"scrambleText",register:function(e,t,a){l=e,f()},init:function(e,t,a,s,n){if(o||f(),this.prop="innerHTML"in e?"innerHTML":"textContent"in e?"textContent":0,this.prop){this.target=e,"object"!=typeof t&&(t={text:t});var l,u,m,h,p=t.text||t.value||"",g=!1!==t.trim;return this.delimiter=l=t.delimiter||"",this.original=i(r(e).replace(d," ").split("&nbsp;").join(""),l,g),("{original}"===p||!0===p||null==p)&&(p=this.original.join(l)),this.text=i((p||"").replace(d," "),l,g),this.hasClass=!!(t.newClass||t.oldClass),this.newClass=t.newClass,this.oldClass=t.oldClass,h=""===l,this.textHasEmoji=h&&!!this.text.emoji,this.charsHaveEmoji=!!t.chars&&!!i(t.chars).emoji,this.length=h?this.original.length:this.original.join(l).length,this.lengthDif=(h?this.text.length:this.text.join(l).length)-this.length,this.fillChar=t.fillChar||t.chars&&~t.chars.indexOf(" ")?"&nbsp;":"",this.charSet=m=D[t.chars||"upperCase"]||new c(t.chars),this.speed=.05/(t.speed||1),this.prevScrambleTime=0,this.setIndex=20*Math.random()|0,(u=this.length+Math.max(this.lengthDif,0))>m.length&&m.grow(u),this.chars=m.sets[this.setIndex],this.revealDelay=t.revealDelay||0,this.tweenLength=!1!==t.tweenLength,this.tween=a,this.rightToLeft=!!t.rightToLeft,this._props.push("scrambleText","text"),1}},render:function(e,t){var a,s,n,r,l,o,c,u,d,m,h,p=t.target,D=t.prop,f=t.text,g=t.delimiter,x=t.tween,_=t.prevScrambleTime,C=t.revealDelay,y=t.setIndex,v=t.chars,b=t.charSet,j=t.length,S=t.textHasEmoji,E=t.charsHaveEmoji,N=t.lengthDif,I=t.tweenLength,w=t.oldClass,F=t.newClass,A=t.rightToLeft,T=t.fillChar,R=t.speed,k=t.original,O=t.hasClass,B=f.length,L=x._time,P=L-_;C&&(x._from&&(L=x._dur-L),e=0===L?0:L<C?1e-6:L===x._dur?1:x._ease((L-C)/(x._dur-C))),e<0?e=0:e>1&&(e=1),A&&(e=1-e),a=~~(e*B+.5),e?((P>R||P<-R)&&(t.setIndex=y=(y+(19*Math.random()|0))%20,t.chars=b.sets[y],t.prevScrambleTime+=P),r=v):r=k.join(g),h=x._from?e:1-e,m=j+(I?x._from?h*h*h:1-h*h*h:1)*N,A?1===e&&(x._from||"isFromStart"===x.data)?(n="",r=k.join(g)):(c=f.slice(a).join(g),n=E?i(r).slice(0,m-(S?i(c):c).length+.5|0).join(""):r.substr(0,m-(S?i(c):c).length+.5|0),r=c):(n=f.slice(0,a).join(g),s=(S?i(n):n).length,r=E?i(r).slice(s,m+.5|0).join(""):r.substr(s,m-s+.5|0)),O?(u=A?w:F,d=A?F:w,c=((l=u&&0!==a)?"<span class='"+u+"'>":"")+n+(l?"</span>":"")+((o=d&&a!==B)?"<span class='"+d+"'>":"")+g+r+(o?"</span>":"")):c=n+g+r,p[D]="&nbsp;"===T&&~c.indexOf("  ")?c.split("  ").join("&nbsp;&nbsp;"):c}};g.emojiSafeSplit=i,g.getText=r,u()&&l.registerPlugin(g)},28259:(e,t,a)=>{a.d(t,{J:()=>m});var s=a(74848),n=a(21728),r=a(86877),i=a(84268),l=a(99511),o=a(56149),c=a(15220),u=a(96540),d=a(44902);let m=e=>{let t,a,m,p,D,f,g,x,_,C,y,v,b,j,S,E=(0,n.c)(34),{onDismiss:N,experimentsDialogRef:I}=e,[w,F]=(0,u.useState)(h),[A,T]=(0,u.useState)(void 0),R=(0,u.useRef)("\u200B");E[0]!==w||E[1]!==N?(t=()=>{let e=[];for(let t of w.split(","))if(""!==t.trim()){if(2!==t.split("=").length){T(`Invalid experiment key=value pair${R.current}`),R.current=R.current+"\u200B";return}T(""),e.push(t)}(0,d.R)(e),N()},E[0]=w,E[1]=N,E[2]=t):t=E[2];let k=t;E[3]!==N?(a=()=>{F(""),(0,d.R)([]),T(""),N()},E[3]=N,E[4]=a):a=E[4];let O=a;return E[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(r.A.Label,{children:"Experiments"}),E[5]=m):m=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsx)("code",{children:"key=value"}),E[6]=p):p=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(D=(0,s.jsx)(r.A.Caption,{children:(0,s.jsxs)("span",{children:["List experiments as comma separated ",p," pairs. To see available experiments,"," ",(0,s.jsx)(i.A,{inline:!0,target:"_blank",href:`/search?q=${encodeURIComponent("repo:github/copilot-api path:experiments.go")}`,children:"read this code"}),"."]})}),E[7]=D):D=E[7],E[8]===Symbol.for("react.memo_cache_sentinel")?(f=e=>F(e.target.value),E[8]=f):f=E[8],E[9]!==k?(g=e=>{"Enter"===e.key&&k()},E[9]=k,E[10]=g):g=E[10],E[11]!==w||E[12]!==g?(x=(0,s.jsx)(l.A,{"aria-label":"Experiments",name:"experiments",value:w,onChange:f,onKeyDown:g,className:"ExperimentsDialog-module__experimentsInput--Uko5H"}),E[11]=w,E[12]=g,E[13]=x):x=E[13],E[14]!==A?(_=A&&(0,s.jsx)(r.A.Validation,{variant:"error",children:A}),E[14]=A,E[15]=_):_=E[15],E[16]!==x||E[17]!==_?(C=(0,s.jsx)(c.l.Body,{children:(0,s.jsx)("div",{className:"ExperimentsDialog-module__dialogContentContainer--mWDus",children:(0,s.jsxs)(r.A,{children:[m,D,x,_]})})}),E[16]=x,E[17]=_,E[18]=C):C=E[18],E[19]!==O?(y={type:"button",onClick:O,content:"Clear all",buttonType:"danger"},E[19]=O,E[20]=y):y=E[20],E[21]!==N?(v={type:"button",onClick:N,content:"Cancel"},E[21]=N,E[22]=v):v=E[22],E[23]!==k?(b={type:"button",onClick:k,content:"Save",buttonType:"primary"},E[23]=k,E[24]=b):b=E[24],E[25]!==y||E[26]!==v||E[27]!==b?(j=(0,s.jsx)(c.l.Footer,{children:(0,s.jsx)(c.l.Buttons,{buttons:[y,v,b]})}),E[25]=y,E[26]=v,E[27]=b,E[28]=j):j=E[28],E[29]!==I||E[30]!==N||E[31]!==C||E[32]!==j?(S=(0,s.jsx)(o.ZL,{children:(0,s.jsxs)(c.l,{ref:I,onClose:N,title:"Experiments",width:"xlarge",children:[C,j]})}),E[29]=I,E[30]=N,E[31]=C,E[32]=j,E[33]=S):S=E[33],S};try{m.displayName||(m.displayName="ExperimentsDialog")}catch{}function h(){return(0,d.f)().join(",")}},35952:(e,t,a)=>{a.d(t,{I:()=>f,j:()=>p});var s=a(74848),n=a(21728),r=a(79184),i=a(25641),l=a(51213),o=a(35247),c=a(79064),u=a(53419),d=a(73077),m=a(11680),h=a(96540);function p(){let e,t,a,s,i=(0,n.c)(12),{isLicensedLimited:l,chatQuotaRemaining:u,premiumChatQuotaRemaining:d,premiumInteractionsQuotaExceeded:m,overagesEnabled:p}=(0,r.xR)(),[f,g]=(0,h.useState)(D);i[0]!==u||i[1]!==p||i[2]!==m?(e=()=>{if(o.W.premiumRequestQuotasEnabled&&void 0!==u){let e=c.Jt.getQuotaExceededBannerFlag();o.W.premiumRequestQuotasEnabled&&!p&&m?null===e?(c.Jt.setQuotaExceededBannerFlag(!0),g(!0)):g(e):(c.Jt.removeQuotaExceededBannerFlag(),g(!1))}},i[0]=u,i[1]=p,i[2]=m,i[3]=e):e=i[3],i[4]!==u||i[5]!==p||i[6]!==d||i[7]!==m?(t=[u,d,p,m],i[4]=u,i[5]=p,i[6]=d,i[7]=m,i[8]=t):t=i[8],(0,h.useEffect)(e,t),i[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{c.Jt.setQuotaExceededBannerFlag(!1),g(!1)},i[9]=a):a=i[9];let x=a,_=f&&!l&&void 0!==u&&o.W.premiumRequestQuotasEnabled;return i[10]!==_?(s={visible:_,onDismiss:x},i[10]=_,i[11]=s):s=i[11],s}function D(){return c.Jt.getQuotaExceededBannerFlag()??!1}function f(e){let t,a,o=(0,n.c)(9),{onDismiss:c}=e,{plan:h,canUpgradePlan:p,resetDate:D}=(0,r.xR)(),f=null,C=null;if(h===l.UH.IndividualFree){let e;f=`You have used all requests available this month. Upgrade your plan to increase your limit. Limit resets on ${D}.`,o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(d.z,{as:"a",href:i.Zs,onClick:_,children:"Upgrade"}),o[0]=e):e=o[0],C=e}else if(h===l.UH.IndividualPro||h===l.UH.IndividualProPlus)if(p){let e;f=`You have used all premium requests available this month. Upgrade your plan to increase your limit. Limit resets on ${D}.`,o[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(d.z,{as:"a",href:i.Zs,onClick:x,children:"Upgrade"}),o[1]=e):e=o[1],C=e}else{let e;f=`You have used all premium requests available this month. Enable additional requests to get more. Limit resets on ${D}.`,o[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(d.z,{as:"a",href:i.pF,onClick:g,children:"Enable additional requests"}),o[2]=e):e=o[2],C=e}else(h===l.UH.Business||h===l.UH.Enterprise)&&(f=`You have reached your monthly limit for premium requests. Ask your admin to increase your limit. Limit resets on ${D}.`);return o[3]!==c?(t=()=>{c(),(0,u.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},o[3]=c,o[4]=t):t=o[4],o[5]!==f||o[6]!==C||o[7]!==t?(a=(0,s.jsx)("div",{className:"QuotaExceededBanner-module__container--ETlPC",children:(0,s.jsx)(m.l,{variant:"upsell",title:"Limit reached",description:f,hideTitle:!0,primaryAction:C,onDismiss:t})}),o[5]=f,o[6]=C,o[7]=t,o[8]=a):a=o[8],a}function g(){(0,u.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function x(){(0,u.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function _(){(0,u.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{f.displayName||(f.displayName="QuotaExceededBanner")}catch{}},37204:(e,t,a)=>{a.d(t,{X:()=>x});var s=a(74848),n=a(21728),r=a(38621),i=a(86877),l=a(4175),o=a(99511),c=a(46251),u=a(64138),d=a(26108),m=a(21373),h=a(56149),p=a(15220),D=a(96540),f=a(79064),g=a(33592);let x=e=>{let t,a,x,C,y,v,b,j,S,E,N,I,w,F,A,T,R,k,O,B,L,P,M,U=(0,n.c)(53),{onDismiss:$,promptDialogRef:W}=e,z=(0,g.b)(),V=f.Jt.settings,[H,G]=(0,D.useState)(V?.instructionPrompt||void 0);U[0]===Symbol.for("react.memo_cache_sentinel")?(t=V?.skillOverrides??[],U[0]=t):t=U[0];let[q,K]=(0,D.useState)(t),[Q,J]=(0,D.useState)(V?.temperature||.7),Y=(0,D.useRef)(void 0);U[1]!==z||U[2]!==$||U[3]!==H||U[4]!==Q||U[5]!==q?(a=()=>{let e=q.filter(_);z.setCopilotSettings({instructionPrompt:H||"",skillOverrides:e,temperature:Q}),$()},U[1]=z,U[2]=$,U[3]=H,U[4]=Q,U[5]=q,U[6]=a):a=U[6];let X=a;U[7]!==z?(x=async()=>{if(Y.current)return void G(Y.current);let e=await z.getSystemPrompt();Y.current=e,G(e)},U[7]=z,U[8]=x):x=U[8];let Z=x;U[9]!==Z||U[10]!==H?(C=()=>{(async()=>{void 0===H&&await Z()})()},U[9]=Z,U[10]=H,U[11]=C):C=U[11],U[12]!==Z||U[13]!==z||U[14]!==H?(y=[Z,z,H],U[12]=Z,U[13]=z,U[14]=H,U[15]=y):y=U[15],(0,D.useEffect)(C,y),U[16]!==Z?(v=()=>{Z(),K([]),J(.7)},U[16]=Z,U[17]=v):v=U[17];let ee=v;return U[18]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsx)(i.A.Label,{children:"System Instructions"}),U[18]=b):b=U[18],U[19]===Symbol.for("react.memo_cache_sentinel")?(j=(0,s.jsx)(i.A.Caption,{children:(0,s.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),U[19]=j):j=U[19],U[20]===Symbol.for("react.memo_cache_sentinel")?(S=e=>G(e.target.value),U[20]=S):S=U[20],U[21]!==H?(E=(0,s.jsxs)(i.A,{children:[b,j,(0,s.jsx)(l.Ay,{block:!0,"aria-label":"Prompt",name:"Prompt",value:H,onChange:S,className:"PromptDialog-module__systemInstructionsTextarea--JIAZO"})]}),U[21]=H,U[22]=E):E=U[22],U[23]===Symbol.for("react.memo_cache_sentinel")?(N=(0,s.jsx)(i.A.Label,{children:"Temperature"}),I=(0,s.jsx)(i.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),U[23]=N,U[24]=I):(N=U[23],I=U[24]),U[25]===Symbol.for("react.memo_cache_sentinel")?(w=e=>J(Number(e.target.value)),U[25]=w):w=U[25],U[26]!==Q?(F=(0,s.jsxs)(i.A,{className:"PromptDialog-module__temperatureFormControl--oJoQJ",children:[N,I,(0,s.jsx)(o.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:Q,onChange:w})]}),U[26]=Q,U[27]=F):F=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(A=(0,s.jsx)("div",{className:"PromptDialog-module__toolsSectionHeader--jFBxE",children:"Tools"}),U[28]=A):A=U[28],U[29]!==q?(T=q.map((e,t)=>(0,s.jsxs)(D.Fragment,{children:[(0,s.jsxs)(c.B,{direction:"horizontal",className:"py-2",children:[(0,s.jsxs)(i.A,{children:[(0,s.jsx)(i.A.Label,{children:"Name"}),(0,s.jsx)(i.A.Caption,{children:(0,s.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,s.jsx)(o.A,{defaultValue:e.slug,onChange:e=>{q.map((a,s)=>{s===t&&(a.slug=e.target.value)})}})]}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(i.A.Label,{children:"Description"}),(0,s.jsx)(i.A.Caption,{children:(0,s.jsx)("span",{children:"Make changes to the tool description"})}),(0,s.jsx)(o.A,{defaultValue:e.description,onChange:a=>{q.map((s,n)=>{n===t&&(e.description=a.target.value)})}})]}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(i.A.Label,{id:"toggle",children:"Enabled?"}),(0,s.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{q.map((a,s)=>{s===t&&(a.enabled=e)})}})]}),(0,s.jsx)(d.K,{icon:r.TrashIcon,"aria-label":"Delete tool",variant:"invisible",onClick:()=>{let e=[...q];1===q.length?K([]):(e.splice(t,1),K(e))},className:"PromptDialog-module__deleteToolButton--PRDPZ"})]}),t===q.length-1&&(0,s.jsx)(m.Q,{leadingVisual:(0,s.jsx)(r.PlusIcon,{}),onClick:()=>K([...q,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),U[29]=q,U[30]=T):T=U[30],U[31]!==q?(R=0===q.length&&(0,s.jsx)(m.Q,{leadingVisual:(0,s.jsx)(r.PlusIcon,{}),onClick:()=>K([...q,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"}),U[31]=q,U[32]=R):R=U[32],U[33]!==E||U[34]!==F||U[35]!==T||U[36]!==R?(k=(0,s.jsxs)(p.l.Body,{children:[E,F,A,T,R]}),U[33]=E,U[34]=F,U[35]=T,U[36]=R,U[37]=k):k=U[37],U[38]!==$?(O={type:"button",onClick:$,content:"Cancel"},U[38]=$,U[39]=O):O=U[39],U[40]!==ee?(B={type:"button",onClick:ee,content:"Reset"},U[40]=ee,U[41]=B):B=U[41],U[42]!==X?(L={type:"button",onClick:X,content:"Save",buttonType:"primary"},U[42]=X,U[43]=L):L=U[43],U[44]!==O||U[45]!==B||U[46]!==L?(P=(0,s.jsx)(p.l.Footer,{children:(0,s.jsx)(p.l.Buttons,{buttons:[O,B,L]})}),U[44]=O,U[45]=B,U[46]=L,U[47]=P):P=U[47],U[48]!==$||U[49]!==W||U[50]!==k||U[51]!==P?(M=(0,s.jsx)(h.ZL,{children:(0,s.jsxs)(p.l,{ref:W,onClose:$,title:"Prompt Settings",width:"xlarge",className:"PromptDialog-module__Dialog--gvqi7",children:[k,P]})}),U[48]=$,U[49]=W,U[50]=k,U[51]=P,U[52]=M):M=U[52],M};try{x.displayName||(x.displayName="PromptDialog")}catch{}function _(e){return e.slug&&e.description}},37351:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}},39595:(e,t,a)=>{let s;a.d(t,{CF:()=>D,p_:()=>F,FB:()=>d,Se:()=>j,aC:()=>I,zV:()=>w});let n=new WeakSet,r=new WeakMap;function i(e=document){if(r.has(e))return r.get(e);let t=!1,a=new MutationObserver(e=>{for(let t of e)if("attributes"===t.type&&t.target instanceof Element)u(t.target);else if("childList"===t.type&&t.addedNodes.length)for(let e of t.addedNodes)e instanceof Element&&l(e)});a.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let s={get closed(){return t},unsubscribe(){t=!0,r.delete(e),a.disconnect()}};return r.set(e,s),s}function l(e){for(let t of e.querySelectorAll("[data-action]"))u(t);e instanceof Element&&e.hasAttribute("data-action")&&u(e)}function o(e){let t=e.currentTarget;for(let a of c(t))if(e.type===a.type){let s=t.closest(a.tag);n.has(s)&&"function"==typeof s[a.method]&&s[a.method](e);let r=t.getRootNode();if(r instanceof ShadowRoot&&n.has(r.host)&&r.host.matches(a.tag)){let t=r.host;"function"==typeof t[a.method]&&t[a.method](e)}}}function*c(e){for(let t of(e.getAttribute("data-action")||"").trim().split(/\s+/)){let e=t.lastIndexOf(":"),a=Math.max(0,t.lastIndexOf("#"))||t.length;yield{type:t.slice(0,e),tag:t.slice(e+1,a),method:t.slice(a+1)||"handleEvent"}}}function u(e){for(let t of c(e))e.addEventListener(t.type,o)}function d(e,t){let a=e.tagName.toLowerCase();if(e.shadowRoot){for(let s of e.shadowRoot.querySelectorAll(`[data-target~="${a}.${t}"]`))if(!s.closest(a))return s}for(let s of e.querySelectorAll(`[data-target~="${a}.${t}"]`))if(s.closest(a)===e)return s}let m=e=>String("symbol"==typeof e?e.description:e).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),h=(e,t="property")=>{let a=m(e);if(!a.includes("-"))throw new DOMException(`${t}: ${String(e)} is not a valid ${t} name`,"SyntaxError");return a},p="attr";function D(e,t){N(e,p).add(t)}let f=new WeakSet;function g(e,t){if(f.has(e))return;f.add(e);let a=Object.getPrototypeOf(e),s=a?.constructor?.attrPrefix??"data-";for(let n of(t||(t=N(a,p)),t)){let t=e[n],a=h(`${s}${n}`),r={configurable:!0,get(){return this.getAttribute(a)||""},set(e){this.setAttribute(a,e||"")}};"number"==typeof t?r={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(e){this.setAttribute(a,e)}}:"boolean"==typeof t&&(r={configurable:!0,get(){return this.hasAttribute(a)},set(e){this.toggleAttribute(a,e)}}),Object.defineProperty(e,n,r),n in e&&!e.hasAttribute(a)&&r.set.call(e,t)}}let x=new Map,_=new Promise(e=>{"loading"!==document.readyState?e():document.addEventListener("readystatechange",()=>e(),{once:!0})}),C=new Promise(e=>{let t=new AbortController;t.signal.addEventListener("abort",()=>e());let a={once:!0,passive:!0,signal:t.signal},s=()=>t.abort();document.addEventListener("mousedown",s,a),document.addEventListener("touchstart",s,a),document.addEventListener("keydown",s,a),document.addEventListener("pointerdown",s,a)}),y={ready:()=>_,firstInteraction:()=>C,visible:e=>new Promise(t=>{let a=new IntersectionObserver(e=>{for(let s of e)if(s.isIntersecting){t(),a.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let t of document.querySelectorAll(e))a.observe(t)})},v=new WeakMap;function b(e){cancelAnimationFrame(v.get(e)||0),v.set(e,requestAnimationFrame(()=>{for(let t of x.keys()){let a=e instanceof Element&&e.matches(t)?e:e.querySelector(t);if(customElements.get(t)||a){let s=a?.getAttribute("data-load-on")||"ready",n=s in y?y[s]:y.ready;for(let e of x.get(t)||[])n(t).then(e);x.delete(t),v.delete(e)}}}))}function j(e,t){for(let[a,s]of("string"==typeof e&&t&&(e={[e]:t}),Object.entries(e)))x.has(a)||x.set(a,new Set),x.get(a).add(s);S(document)}function S(e){s||(s=new MutationObserver(e=>{if(x.size)for(let t of e)for(let e of t.addedNodes)e instanceof Element&&b(e)})),b(e),s.observe(e,{subtree:!0,childList:!0})}let E=Symbol.for("catalyst");let CatalystDelegate=class CatalystDelegate{constructor(e){const t=this,a=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){t.connectedCallback(this,a)};const s=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){t.disconnectedCallback(this,s)};const n=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(e,a,s){t.attributeChangedCallback(this,e,a,s,n)};let r=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return t.observedAttributes(this,r)},set(e){r=e}}),function(e){let t=e.observedAttributes||[],a=e.attrPrefix??"data-",s=e=>h(`${a}${e}`);Object.defineProperty(e,"observedAttributes",{configurable:!0,get:()=>[...N(e.prototype,p)].map(s).concat(t),set(e){t=e}})}(e),function(e){let t=m(e.name).replace(/-element$/,"");try{window.customElements.define(t,e),window[e.name]=customElements.get(t)}catch(e){if(!(e instanceof DOMException&&"NotSupportedError"===e.name))throw e}}(e)}observedAttributes(e,t){return t}connectedCallback(e,t){var a,s;for(let t of(e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),e.querySelectorAll("template[data-shadowroot]")))t.parentElement===e&&e.attachShadow({mode:"closed"===t.getAttribute("data-shadowroot")?"closed":"open"}).append(t.content.cloneNode(!0));(g(e),n.add(e),e.shadowRoot&&(l(s=e.shadowRoot),i(s)),l(e),i(e.ownerDocument),t?.call(e),e.shadowRoot)&&(l(a=e.shadowRoot),i(a),S(e.shadowRoot))}disconnectedCallback(e,t){t?.call(e)}attributeChangedCallback(e,t,a,s,n){g(e),"data-catalyst"!==t&&n&&n.call(e,t,a,s)}};function N(e,t){if(!Object.prototype.hasOwnProperty.call(e,E)){let t=e[E],a=e[E]=new Map;if(t)for(let[e,s]of t)a.set(e,new Set(s))}let a=e[E];return a.has(t)||a.set(t,new Set),a.get(t)}function I(e,t){N(e,"target").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return d(this,t)}})}function w(e,t){N(e,"targets").add(t),Object.defineProperty(e,t,{configurable:!0,get(){let e=this.tagName.toLowerCase(),a=[];if(this.shadowRoot)for(let s of this.shadowRoot.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)||a.push(s);for(let s of this.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)===this&&a.push(s);return a}})}function F(e){new CatalystDelegate(e)}},44953:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}},48217:(e,t,a)=>{a.d(t,{K:()=>g});var s=a(74848),n=a(21728),r=a(47865),i=a(37294),l=a(47789),o=a(79064),c=a(2635),u=a(42312),d=a(94195),m=a(96540),h=a(61382),p=a(19769),D=a(90918),f=a(1747);function g(e){let t,a,g,x,_,C,y,v,b,j,S,E,N,I,w,F=(0,n.c)(41),{payload:A,children:T}=e,R=(0,D.g)(),k=A.requestedTopic;if(A.reference){let e,a;F[0]!==A.reference?(e=[A.reference],F[0]=A.reference,F[1]=e):e=F[1],F[2]!==k||F[3]!==e?(a={refs:e,topic:k},F[2]=k,F[3]=e,F[4]=a):a=F[4],t=a}else{let e,a;F[5]===Symbol.for("react.memo_cache_sentinel")?(e=[],F[5]=e):e=F[5],F[6]!==k?(a={refs:e,topic:k},F[6]=k,F[7]=a):a=F[7],t=a}let{refs:O,topic:B}=t;F[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],F[8]=a):a=F[8];let[L,P]=(0,m.useState)(a);F[9]===Symbol.for("react.memo_cache_sentinel")?(g={onError:(e,t)=>{P(e=>[{...t},...e])}},F[9]=g):g=F[9];let{createTask:M}=(0,r.Z)(g);F[10]!==M?(x=(e,t,a,s,n,r)=>{let i=e.trim();""!==i&&a&&""!==a.trim()&&t&&M({nwo:t.nameWithOwner,problemStatement:i,baseRef:a,eventType:"immersive_page",eventContent:i,selectedAgent:s,modelId:r})},F[10]=M,F[11]=x):x=F[11];let U=x,$=(0,m.useRef)(U);F[12]!==A.reference?(_=()=>{A.reference?.type==="repository"&&o.Jt.setLastUsedRepository(A.reference)},C=[A.reference],F[12]=A.reference,F[13]=_,F[14]=C):(_=F[13],C=F[14]),(0,m.useEffect)(_,C),F[15]!==U?(y=()=>{$.current=U},v=[U],F[15]=U,F[16]=y,F[17]=v):(y=F[16],v=F[17]),(0,m.useEffect)(y,v),F[18]!==A?(b={payload:A,handleUserSubmitRef:$},F[18]=A,F[19]=b):b=F[19];let W=(0,p.N)(b);F[20]!==M||F[21]!==L?(j={failedTasks:L,setFailedTasks:P,createTask:M},F[20]=M,F[21]=L,F[22]=j):j=F[22];let z=j;return F[23]!==T?(S=(0,s.jsx)(f.BH,{children:T}),F[23]=T,F[24]=S):S=F[24],F[25]!==z||F[26]!==S?(E=(0,s.jsx)(h.t,{value:z,children:S}),F[25]=z,F[26]=S,F[27]=E):E=F[27],F[28]!==A||F[29]!==O||F[30]!==E||F[31]!==R||F[32]!==B?(N=(0,s.jsx)(c.Mj,{workerPath:A.searchWorkerFilePath,threadId:R,refs:O,mode:"immersive",topic:B,ssoOrganizations:A.ssoOrganizations,copilotChatPayload:A,children:E}),F[28]=A,F[29]=O,F[30]=E,F[31]=R,F[32]=B,F[33]=N):N=F[33],F[34]!==A.apiURL||F[35]!==A.ssoOrganizations||F[36]!==N?(I=(0,s.jsx)(i.hh,{apiURL:A.apiURL,ssoOrgs:A.ssoOrganizations,children:N}),F[34]=A.apiURL,F[35]=A.ssoOrganizations,F[36]=N,F[37]=I):I=F[37],F[38]!==W||F[39]!==I?(w=(0,s.jsx)(u.KL,{children:(0,s.jsx)(d.LB,{children:(0,s.jsx)(l.Hb,{plugins:W,children:I})})}),F[38]=W,F[39]=I,F[40]=w):w=F[40],w}try{g.displayName||(g.displayName="CopilotImmersiveProviders")}catch{}},50766:(e,t,a)=>{a.d(t,{R:()=>k});var s=a(74848),n=a(21728),r=a(71363),i=a(33592),l=a(61180),o=a(25641),c=a(66990),u=a(6551),d=a(38621),m=a(21373),h=a(26108),p=a(19579),D=a(34164),f=a(96540),g=a(1747),x=a(31078),_=a(53552),C=a(54030),y=a(51213),v=a(54114),b=a(39176),j=a(78314),S=a(91547);let E="ResourcePanel-module__resourcePanelHeaderRow--U3piY",N="ResourcePanel-module__resourcePanelPlaceholder--Tzewz",I="ResourcePanel-module__resourcePanelNavItem--Q9A53";function w(e){let t=(0,n.c)(16),{fetchError:a,loading:r,selectedBranch:i,selectedRepo:l}=e,[o,c,u]=(0,S.E)(l?.ownerLogin,l?.name,i===l?.defaultBranch?void 0:i,"/"),d=c&&!!l&&i!==l.defaultBranch,m=i===l?.defaultBranch?l?.commitOID:o?.oid;if(l)if(r||d||!m){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:N,children:"Loading repository..."}),t[1]=e):e=t[1],e}else{let e,n,r,o;t[2]!==m||t[3]!==l.refInfo.name?(e={name:l.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:m},t[2]=m,t[3]=l.refInfo.name,t[4]=e):e=t[4];let c=i||l.defaultBranch,d=!!a||!!u;return t[5]!==m||t[6]!==l||t[7]!==c||t[8]!==d?(n=(0,s.jsx)(F,{branch:c,currentRepo:l,fetchError:d,oid:m}),t[5]=m,t[6]=l,t[7]=c,t[8]=d,t[9]=n):n=t[9],t[10]!==e||t[11]!==n?(r=(0,s.jsx)(x.Ck,{children:(0,s.jsx)(_.qV,{refInfo:e,path:"test",action:"tree",copilotAccessAllowed:!0,children:n})}),t[10]=e,t[11]=n,t[12]=r):r=t[12],t[13]!==l||t[14]!==r?(o=(0,s.jsx)("div",{children:(0,s.jsx)(j.d,{repository:l,children:r})}),t[13]=l,t[14]=r,t[15]=o):o=t[15],o}{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:N,children:"Select a repository to view files"}),t[0]=e):e=t[0],e}}function F(e){let t,a,r,l,c,u=(0,n.c)(19),{branch:d,currentRepo:m,fetchError:h,oid:p}=e,{openPreviewPane:D,openItem:x,updateItem:_}=(0,g.xx)(),j=(0,i.b)(),{list:S,directories:E,loading:N}=(0,C.o)(p,!0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],u[0]=t):t=u[0];let[I,w]=(0,f.useState)(t),[F,T]=(0,f.useState)(R);u[1]!==d||u[2]!==m||u[3]!==j.service||u[4]!==p||u[5]!==x||u[6]!==D||u[7]!==_?(a=async e=>{if(0===e.size)return;let t=Array.from(e)[0],a=await j.service.fetchFileContents(m.id,p,t);if(a.ok&&a.payload){let e={messageId:y.Wp,id:`file:${t}#0`,timestamp:new Date,isUserEdited:!1,value:a.payload?.content,type:"file",name:t,isStreaming:!1,language:a.payload?.language??"plaintext",reference:(0,o.Od)(t,m,d,p)};_(e),x(e.id),D()}T(new Set([t]))},u[1]=d,u[2]=m,u[3]=j.service,u[4]=p,u[5]=x,u[6]=D,u[7]=_,u[8]=a):a=u[8];let k=a;u[9]!==E||u[10]!==S?(r=()=>{w((0,b.k)({paths:S,directories:E}))},l=[S,E,w],u[9]=E,u[10]=S,u[11]=r,u[12]=l):(r=u[11],l=u[12]),(0,f.useEffect)(r,l);let O=N||!1,B=!!h;return u[13]!==k||u[14]!==I||u[15]!==F||u[16]!==O||u[17]!==B?(c=(0,s.jsx)(v.Rw,{rootItems:I,expandedPath:"",setRootItems:w,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:F,onSelectionChange:k,loading:O,fetchError:B,sortDirectoryItems:A,singleSelect:!0}),u[13]=k,u[14]=I,u[15]=F,u[16]=O,u[17]=B,u[18]=c):c=u[18],c}function A(e){return e.sort(T)}function T(e,t){return e.data.name.localeCompare(t.data.name)}function R(){return new Set}try{w.displayName||(w.displayName="FileTab")}catch{}try{F.displayName||(F.displayName="ResourcePanelFileTree")}catch{}function k(e){let t,a,o,x,_,C,y,v,b,j,S,F,A,T,R,k,B,L,P,M,U,$,W,z=(0,n.c)(53),{className:V}=e,{closeResourcePanel:H}=(0,g.xx)(),[G,q]=(0,f.useState)(!1),{fetchError:K,loading:Q,selectedBranch:J,selectedRepo:Y,setSelectedBranch:X,setSelectedRepo:Z}=function(){let e,t,a,s,r,o,c=(0,n.c)(23),d=(0,i.b)(),{items:m,selectedItem:h}=(0,g.xx)(),p=(0,u.S)(h),[D,x]=(0,l.T)(),[_,C]=(0,f.useState)("");c[0]!==m||c[1]!==D||c[2]!==h?(e=()=>{let e=O(h&&m.get(h));return e?{repo:null,repoID:e,branch:void 0}:D?{repo:D,repoID:D.id,branch:D.defaultBranch}:{repo:null,repoID:-1,branch:void 0}},c[0]=m,c[1]=D,c[2]=h,c[3]=e):e=c[3];let[y,v]=(0,f.useState)(e);c[4]!==d.service||c[5]!==x?(t=(e,t)=>{let a=d.service.getCachedRepo(e);a?(v({repo:a,repoID:e,branch:t??a.defaultBranch}),x(a)):v({repo:null,repoID:e,branch:t})},c[4]=d.service,c[5]=x,c[6]=t):t=c[6];let b=t;c[7]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{v(t=>({...t,branch:e}))},c[7]=a):a=c[7];let j=a;if(p!==h&&h){let e=O(m.get(h));e&&e!==y.repoID&&b(e)}c[8]!==d.service||c[9]!==y.repo||c[10]!==y.repoID||c[11]!==x?(s=()=>{let e=async e=>{let t=await d.service.fetchRepo(e);t.ok&&t.payload?(v(e=>({repo:t.payload,repoID:t.payload.id,branch:e.branch??t.payload.defaultBranch})),x(t.payload)):t.error&&C(t.error)};y.repoID>0&&!y.repo&&e(y.repoID)},c[8]=d.service,c[9]=y.repo,c[10]=y.repoID,c[11]=x,c[12]=s):s=c[12],c[13]!==d||c[14]!==y||c[15]!==x?(r=[d,y,x],c[13]=d,c[14]=y,c[15]=x,c[16]=r):r=c[16],(0,f.useEffect)(s,r);let S=y.repoID>0&&!y.repo;return c[17]!==_||c[18]!==b||c[19]!==y.branch||c[20]!==y.repo||c[21]!==S?(o={fetchError:_,loading:S,selectedBranch:y.branch,selectedRepo:y.repo,setSelectedBranch:j,setSelectedRepo:b},c[17]=_,c[18]=b,c[19]=y.branch,c[20]=y.repo,c[21]=S,c[22]=o):o=c[22],o}(),[ee,et]=(0,f.useState)("files"),ea=(0,f.useRef)(null),es=Y?`${Y.ownerLogin}/${Y.name}`:"Select Repo";z[0]!==V?(t=(0,D.$)("ResourcePanel-module__resourcePanel--QFUYz",V),z[0]=V,z[1]=t):t=z[1],z[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>q(!0),z[2]=a):a=z[2],z[3]!==es?(o=(0,s.jsx)(m.Q,{ref:ea,onClick:a,variant:"invisible",trailingVisual:d.ChevronDownIcon,className:"ResourcePanel-module__resourcePanelRepoButton--W2AOy",children:es}),z[3]=es,z[4]=o):o=z[4],z[5]===Symbol.for("react.memo_cache_sentinel")?(x=new Set,z[5]=x):x=z[5],z[6]!==Z?(_=async e=>{e&&Z(e)},z[6]=Z,z[7]=_):_=z[7],z[8]!==G||z[9]!==_?(C=(0,s.jsx)(r.X,{selectionVariant:"instant",open:G,onOpenChange:q,selectedRepoIds:x,onSelectRepo:_,submitReturnFocusRef:ea,cancelReturnFocusRef:ea,anchorRef:ea,includeForks:!0}),z[8]=G,z[9]=_,z[10]=C):C=z[10],z[11]!==H?(y=(0,s.jsx)("div",{className:"d-flex flex-justify-end",children:(0,s.jsx)(h.K,{size:"small",icon:d.SidebarCollapseIcon,"aria-label":"Close resource panel",onClick:H,variant:"invisible"})}),z[11]=H,z[12]=y):y=z[12],z[13]!==o||z[14]!==C||z[15]!==y?(v=(0,s.jsxs)("div",{className:E,children:[o,C,y]}),z[13]=o,z[14]=C,z[15]=y,z[16]=v):v=z[16],z[17]!==J||z[18]!==Y||z[19]!==X?(b=Y&&(0,s.jsx)(c.PI,{cacheKey:"anything",canCreate:!1,closeOnSelect:!0,currentCommitish:J??Y.defaultBranch,defaultBranch:Y.defaultBranch,onSelectItem:e=>{X(e)},owner:Y.ownerLogin,repo:Y.name,selectedRefType:"branch"}),z[17]=J,z[18]=Y,z[19]=X,z[20]=b):b=z[20],z[21]!==b?(j=(0,s.jsx)("div",{className:E,children:b}),z[21]=b,z[22]=j):j=z[22];let en="files"===ee?"location":void 0;z[23]===Symbol.for("react.memo_cache_sentinel")?(S=e=>{et("files"),e.preventDefault()},z[23]=S):S=z[23],z[24]===Symbol.for("react.memo_cache_sentinel")?(F=(0,s.jsx)(d.CodeIcon,{}),z[24]=F):F=z[24],z[25]!==en?(A=(0,s.jsx)(p.O.Item,{"aria-current":en,"aria-label":"Files",onSelect:S,className:I,children:F}),z[25]=en,z[26]=A):A=z[26];let er="pull-requests"===ee?"location":void 0;z[27]===Symbol.for("react.memo_cache_sentinel")?(T=e=>{et("pull-requests"),e.preventDefault()},z[27]=T):T=z[27],z[28]===Symbol.for("react.memo_cache_sentinel")?(R=(0,s.jsx)(d.GitPullRequestIcon,{}),z[28]=R):R=z[28],z[29]!==er?(k=(0,s.jsx)(p.O.Item,{"aria-current":er,"aria-label":"Pull requests",onSelect:T,className:I,children:R}),z[29]=er,z[30]=k):k=z[30];let ei="issues"===ee?"location":void 0;return z[31]===Symbol.for("react.memo_cache_sentinel")?(B=e=>{et("issues"),e.preventDefault()},z[31]=B):B=z[31],z[32]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsx)(d.IssueOpenedIcon,{}),z[32]=L):L=z[32],z[33]!==ei?(P=(0,s.jsx)(p.O.Item,{"aria-current":ei,"aria-label":"Issues",onSelect:B,className:I,children:L}),z[33]=ei,z[34]=P):P=z[34],z[35]!==A||z[36]!==k||z[37]!==P?(M=(0,s.jsxs)(p.O,{"aria-label":"Resource panel navigation",children:[A,k,P]}),z[35]=A,z[36]=k,z[37]=P,z[38]=M):M=z[38],z[39]!==j||z[40]!==M||z[41]!==v?(U=(0,s.jsxs)("div",{className:"ResourcePanel-module__resourcePanelHeader--xpYIo",children:[v,j,M]}),z[39]=j,z[40]=M,z[41]=v,z[42]=U):U=z[42],z[43]!==K||z[44]!==Q||z[45]!==J||z[46]!==Y||z[47]!==ee?($=(0,s.jsx)("div",{className:"ResourcePanel-module__resourcePanelContent--zjIvl",children:"files"===ee?(0,s.jsx)(w,{fetchError:K,loading:Q,selectedBranch:J,selectedRepo:Y}):(0,s.jsx)("div",{className:N,children:"Coming soon..."})}),z[43]=K,z[44]=Q,z[45]=J,z[46]=Y,z[47]=ee,z[48]=$):$=z[48],z[49]!==t||z[50]!==U||z[51]!==$?(W=(0,s.jsxs)("div",{className:t,"data-testid":"resource-panel",children:[U,$]}),z[49]=t,z[50]=U,z[51]=$,z[52]=W):W=z[52],W}function O(e){return e?.type==="file"&&(0,o.SI)(e.reference)?e.reference.repoID:null}try{k.displayName||(k.displayName="ResourcePanel")}catch{}},51438:(e,t,a)=>{a.d(t,{L:()=>tB});var s,n=a(74848),r=a(21728),i=a(79184),l=a(8939),o=a(37294),c=a(33592),u=a(14521),d=a(35247),m=a(79064),h=a(2635),p=a(68637),D=a(84646),f=a(17485),g=a(69599),x=a(75202),_=a(96540),C=a(13475),y=a(23827),v=a(70346),b=a(62421);function j(){let e=(0,h.A3)("messagesLoading")?.missingOrgIds,t=(0,h.A3)("ssoOrganizations"),a=e?.map(e=>{let a=t?.find(t=>t.id===String(e));return a?.login})?.filter(e=>!!e);return{needsSsoAuthentication:!!(e&&e.length>0),ssoOrgNames:a||[]}}var S=a(51213),E=a(38621),N=a(79634),I=a(62828),w=a(7812),F=a(1747),A=a(97315),T=a(53419),R=a(73077),k=a(11680);function O(){let e,t,a=(0,r.c)(3),{resetDate:s}=(0,i.xR)(),l=`You have reached your free plan limit. Limit resets on ${s}.`;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(R.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:B,children:"Upgrade"}),a[0]=e):e=a[0];let o=e;return a[1]!==l?(t=(0,n.jsx)("div",{className:"FreeChatExceededBanner-module__container--iiSMU",children:(0,n.jsx)(k.l,{variant:"upsell",title:"Limit reached",description:l,hideTitle:!0,primaryAction:o})}),a[1]=l,a[2]=t):t=a[2],t}function B(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{O.displayName||(O.displayName="FreeChatExceededBanner")}catch{}var L=a(35952),P=a(25641),M=a(84268);let U=d.W.premiumRequestQuotasEnabled?P.mF:10;function $(){return m.Jt.getMeterBannerFlag()??!1}function W(e){let t,a,s,l,o,c=(0,r.c)(18),{onDismiss:u,className:d}=e,{isLicensedLimited:m,canUpgradePlan:h,canPurchaseAdditionalQuota:p,premiumInteractionsQuotaExceeded:D,resetDate:f}=(0,i.xR)(),g=m?`You have used ${100-U}% of your free requests this month.`:D?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-U}% of your premium responses this month. ${h?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;c[0]!==p||c[1]!==h||c[2]!==D?(t=h&&!D?(0,n.jsx)(R.z,{as:"a",href:P.Zs,onClick:G,children:"Upgrade"}):p&&!D?(0,n.jsx)(R.z,{as:"a",href:P.pF,onClick:H,children:"Enable additional requests"}):p&&(0,n.jsx)(R.z,{as:"a",href:P.MB,onClick:V,children:"Manage billing"}),c[0]=p,c[1]=h,c[2]=D,c[3]=t):t=c[3];let x=t;c[4]!==p||c[5]!==h||c[6]!==D?(a=h&&p&&!D?(0,n.jsx)(M.A,{as:"a",href:P.Zs,onClick:z,children:"Enable additional requests"}):null,c[4]=p,c[5]=h,c[6]=D,c[7]=a):a=c[7];let _=a;return c[8]!==u?(s=()=>{u(),(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},c[8]=u,c[9]=s):s=c[9],c[10]!==g||c[11]!==x||c[12]!==_||c[13]!==s?(l=(0,n.jsx)(k.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:x,secondaryAction:_,onDismiss:s}),c[10]=g,c[11]=x,c[12]=_,c[13]=s,c[14]=l):l=c[14],c[15]!==d||c[16]!==l?(o=(0,n.jsx)("div",{className:d,children:l}),c[15]=d,c[16]=l,c[17]=o):o=c[17],o}function z(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function V(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function H(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function G(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{W.displayName||(W.displayName="QuotaMeterBanner")}catch{}var q=a(58855),K=a(23657);let Q="spaceHomepage",J="customCopilotDisabled",Y="customCopilotSizeExceeded";function X(e,t){let a,s,n=(0,r.c)(9),{isPending:i,data:l,error:o}=(0,D.Ao)(e),c=o instanceof D.i9,u=o instanceof D.OW;if(o&&!c&&!u)throw o;let d=i||c||u||!l?void 0:l;n[0]!==d||n[1]!==e||n[2]!==i||n[3]!==t?(a=function(e,t,a,s){if(e&&!s)return Q;if(a)return null;let n=!!t;return e&&!n?J:(0,K.Hh)(t)?Y:null}(e,d,i,t),n[0]=d,n[1]=e,n[2]=i,n[3]=t,n[4]=a):a=n[4];let m=a;return n[5]!==d||n[6]!==i||n[7]!==m?(s={variant:m,customCopilot:d,isLoading:i},n[5]=d,n[6]=i,n[7]=m,n[8]=s):s=n[8],s}try{(s=function(e){let t=(0,r.c)(4),{variant:a,customCopilot:s}=e;switch(a){case J:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(q.U7,{}),t[0]=e):e=t[0],e}case Y:{let e;return t[1]!==s?(e=(0,n.jsx)(q.$s,{customCopilot:s}),t[1]=s,t[2]=e):e=t[2],e}case Q:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}).displayName||(s.displayName="SpaceConversationBanner")}catch{}function Z(){let e,t=(0,r.c)(13),{ambientError:a,selectedThreadID:s}=(0,h.Pk)(),l=(0,u.G)(),{chatQuotaExceeded:o,isLicensedLimited:c}=(0,i.xR)(),{variant:p,customCopilot:D}=X(l,s),f=!!D,g=(!p||f)&&!(c&&o),x=function(){let e,t,a,s,n=(0,r.c)(10),{isLicensedLimited:l,chatQuotaRemaining:o,premiumChatQuotaRemaining:c,premiumInteractionsQuotaExceeded:u,overagesEnabled:h}=(0,i.xR)(),[p,D]=(0,_.useState)($);n[0]!==o||n[1]!==l||n[2]!==h||n[3]!==c||n[4]!==u?(e=()=>{if((l||d.W.premiumRequestQuotasEnabled)&&void 0!==o){let e=m.Jt.getMeterBannerFlag();o>0&&o<=U||!l&&c>0&&c<=U||!l&&u&&h?null===e?(m.Jt.setMeterBannerFlag(!0),D(!0)):D(e):(m.Jt.removeMeterBannerFlag(),D(!1))}},t=[l,o,c,h,u],n[0]=o,n[1]=l,n[2]=h,n[3]=c,n[4]=u,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,_.useEffect)(e,t),n[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{m.Jt.setMeterBannerFlag(!1),D(!1)},n[7]=a):a=n[7];let f=a,g=p&&void 0!==o&&(l||d.W.premiumRequestQuotasEnabled);return n[8]!==g?(s={visible:g,onDismiss:f},n[8]=g,n[9]=s):s=n[9],s}(),C=(0,L.j)(),y=p===J,v=p===Y,b=g&&a,j=g&&C.visible,S=g&&x.visible,E=!g,N=y||v,I=y||v||b||j||S||E;return t[0]!==a||t[1]!==D||t[2]!==C||t[3]!==x||t[4]!==b||t[5]!==E||t[6]!==j||t[7]!==S||t[8]!==I||t[9]!==y||t[10]!==N||t[11]!==v?(e=I&&(0,n.jsxs)("section",{"aria-label":"Notifications",className:"NotificationsSection-module__notificationsSection--K0_2c",children:[N&&(0,n.jsxs)("div",{className:"NotificationsSection-module__spaceBannerContainer--G0_MH",children:[y&&(0,n.jsx)(q.U7,{}),v&&(0,n.jsx)(q.$s,{customCopilot:D})]}),b&&(0,n.jsx)(A.P,{ambientError:a,useLargerBorderRadius:!0}),!N&&(0,n.jsxs)(n.Fragment,{children:[j&&(0,n.jsx)(L.I,{onDismiss:C.onDismiss}),S&&(0,n.jsx)(W,{className:"NotificationsSection-module__banner--a4C8F",onDismiss:x.onDismiss}),E&&(0,n.jsx)(O,{})]})]}),t[0]=a,t[1]=D,t[2]=C,t[3]=x,t[4]=b,t[5]=E,t[6]=j,t[7]=S,t[8]=I,t[9]=y,t[10]=N,t[11]=v,t[12]=e):e=t[12],e}try{Z.displayName||(Z.displayName="NotificationsSection")}catch{}function ee(e){let t,a,s,l,o,c=(0,r.c)(28),{activeModeName:d,onClickMode:m,textAreaRef:p,handleUserSubmit:D,nextMessageIndex:f,chatInputRef:g,isNewConversation:x,onChatCommandChange:_,containerRef:C,slashCommandsEnabled:y,showDisabledInputOnQuotaExceeded:A,attachmentMenuSide:T}=e,R=(0,h.Pk)(),{chatQuotaExceeded:k,isLicensedLimited:O}=(0,i.xR)(),{needsSsoAuthentication:B}=j(),L=(0,u.G)(),P=B&&L,M=(0,b.G)(),U=function(){let e,t=(0,r.c)(2),{figmaAuthUrl:a}=(0,N.X)();if(a){if(t[0]!==a){let s=new URL(a,location.origin);s.searchParams.set("return_url",location.pathname+location.search),e=s.toString(),t[0]=a,t[1]=e}else e=t[1];return e}}();c[0]!==f?(t={messageIndex:f},c[0]=f,c[1]=t):t=c[1];let $=(0,I.I)(t),{versionedItems:W,items:z}=(0,F.xx)();if(c[2]!==z){for(let[,e]of(a=new Set,z))"file"===e.type&&a.add(e.name);c[2]=z,c[3]=a}else a=c[3];let V=a,H=O&&k,G=!H&&!P||H&&void 0!==A&&A;return c[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(Z,{}),c[4]=s):s=c[4],c[5]!==d||c[6]!==T||c[7]!==g||c[8]!==C||c[9]!==V||c[10]!==U||c[11]!==D||c[12]!==x||c[13]!==M||c[14]!==f||c[15]!==_||c[16]!==m||c[17]!==$||c[18]!==H||c[19]!==L||c[20]!==G||c[21]!==y||c[22]!==R||c[23]!==p||c[24]!==W?(l=G&&(0,n.jsx)(v.V,{activeModeName:d,onClickMode:m,modes:[{name:S.II.Ask,supportsMCP:!L,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:E.CommentIcon,placeholder:R.usePlanningIntent&&!R.selectedThreadID?"What would you like to create?":"Ask anything"}],onNewThreadSelected:M,textAreaRef:p,chatInputRef:g,containerRef:C,onSubmit:D,isStreaming:!!R.streamingMessage,size:"large",showPlanningToggle:!R.selectedThreadID,onSelectReference:$,getReferenceVersion:e=>(0,w.wt)(e,f,W),existingFileNames:V,figmaAuthUrl:U,isNewConversation:x,onChatCommandChange:_,disableSavedUserMessage:!0,slashCommandsEnabled:y,disabled:H,attachmentMenuSide:T}),c[5]=d,c[6]=T,c[7]=g,c[8]=C,c[9]=V,c[10]=U,c[11]=D,c[12]=x,c[13]=M,c[14]=f,c[15]=_,c[16]=m,c[17]=$,c[18]=H,c[19]=L,c[20]=G,c[21]=y,c[22]=R,c[23]=p,c[24]=W,c[25]=l):l=c[25],c[26]!==l?(o=(0,n.jsxs)("div",{className:"Layout-module__chatInputContainer--ty1RG",children:[s,l]}),c[26]=l,c[27]=o):o=c[27],o}try{ee.displayName||(ee.displayName="ChatInputContainer")}catch{}var et=a(22116),ea=a(63262),es=a(7104),en=a(35673),er=a(87419),ei=a(88392),el=a(73952),eo=a(72303),ec=a(42312),eu=a(88431),ed=a(6551),em=a(26108),eh=a(34164),ep=a(46665),eD=a(59524),ef=a(88752),eg=a(32744),ex=a(82178),e_=a(94517),eC=a(73010),ey=a(11633),ev=a(31958),eb=a(42983),ej=a(95896),eS=a(82151),eE=a(45244),eN=a(52940),eI=a(16946),ew=a(72206),eF=a(98755),eA=a(29731),eT=a(83494),eR=a(31223),ek=a(55009);let eO=e=>{let t,a,s,i,l=(0,r.c)(18),{messageId:o,src:c,alt:u,name:d,mode:m,squareView:h}=e,{openPreviewPane:p,openItem:D,updateItem:f}=(0,F.xx)(),g=`image:${c}`;l[0]!==g||l[1]!==D||l[2]!==p?(t=e=>{e.metaKey||e.ctrlKey||((0,T.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),D(g),p(),e.preventDefault())},l[0]=g,l[1]=D,l[2]=p,l[3]=t):t=l[3];let x=t;return l[4]!==u||l[5]!==g||l[6]!==o||l[7]!==d||l[8]!==c||l[9]!==f?(a=()=>{f({altText:u,id:g,messageId:o,name:d,type:"image",url:c})},s=[g,u,o,d,c,f],l[4]=u,l[5]=g,l[6]=o,l[7]=d,l[8]=c,l[9]=f,l[10]=a,l[11]=s):(a=l[10],s=l[11]),(0,_.useEffect)(a,s),l[12]!==u||l[13]!==m||l[14]!==x||l[15]!==h||l[16]!==c?(i=(0,n.jsx)("div",{className:"ChatImageAttachment-module__imageAttachment--Kt80m",children:(0,n.jsx)(ek.o,{src:c,alt:u,onClick:x,mode:m,useOverlay:!0,squareView:h})}),l[12]=u,l[13]=m,l[14]=x,l[15]=h,l[16]=c,l[17]=i):i=l[17],i},eB=(0,_.memo)(eO);try{eO.displayName||(eO.displayName="ChatImageAttachmentUnmemoized")}catch{}try{eB.displayName||(eB.displayName="ChatImageAttachment")}catch{}var eL=a(37673);let eP="ChatPagingComponent-module__disabledButton--qwjg3";function eM(e){let t,a,s,i,l,o,c=(0,r.c)(23),{currentPage:u,totalPages:d,onPrev:m,onNext:p,isUserMessage:D}=e,f=(0,h.A3)("isWaitingOnCopilot");if(u<1)throw Error("currentPage must be greater than or equal to 1");if(d<1)throw Error("totalPages must be greater than or equal to 1");if(u>d)throw Error("currentPage must be less than or equal to totalPages");let g=1===u||f,x=u===d||f,_=g?eP:"",C=x?eP:"";c[0]!==u||c[1]!==D||c[2]!==m||c[3]!==g?(t=()=>{if(g)return;let e=D?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,T.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),m(u-1)},c[0]=u,c[1]=D,c[2]=m,c[3]=g,c[4]=t):t=c[4];let y=t;c[5]!==u||c[6]!==D||c[7]!==x||c[8]!==p?(a=()=>{if(x)return;let e=D?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,T.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),p(u+1)},c[5]=u,c[6]=D,c[7]=x,c[8]=p,c[9]=a):a=c[9];let v=a;return c[10]!==y||c[11]!==_?(s=(0,n.jsx)(em.K,{variant:"invisible","aria-label":"Previous response",onClick:y,icon:E.ChevronLeftIcon,className:_}),c[10]=y,c[11]=_,c[12]=s):s=c[12],c[13]!==u||c[14]!==d?(i=(0,n.jsxs)("span",{className:"ChatPagingComponent-module__pageIndicator--hEqlR",children:[u,"/",d]}),c[13]=u,c[14]=d,c[15]=i):i=c[15],c[16]!==v||c[17]!==C?(l=(0,n.jsx)(em.K,{variant:"invisible","aria-label":"Next response",onClick:v,icon:E.ChevronRightIcon,className:C}),c[16]=v,c[17]=C,c[18]=l):l=c[18],c[19]!==s||c[20]!==i||c[21]!==l?(o=(0,n.jsxs)("div",{className:"ChatPagingComponent-module__container--HQpDa","data-testid":"chat-paging-component",children:[s,i,l]}),c[19]=s,c[20]=i,c[21]=l,c[22]=o):o=c[22],o}try{eM.displayName||(eM.displayName="ChatPagingComponent")}catch{}function eU(e){let t,a,s,i=(0,r.c)(5),{authorName:l,clientConfirmations:o}=e,c=o?.[0],u=c?.state;return l=c?.userLogin||l,i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eh.$)("my-1","ClientConfirmations-module__container--rZT37"),i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(E.CheckIcon,{}),i[1]=a):a=i[1],i[2]!==l||i[3]!==u?(s=(0,n.jsx)("div",{className:t,children:(0,n.jsxs)("span",{className:"ClientConfirmations-module__text--KBSlX",children:[a," ",l," ",u," the action"]})}),i[2]=l,i[3]=u,i[4]=s):s=i[4],s}try{eU.displayName||(eU.displayName="ClientConfirmations")}catch{}var e$=a(80947),eW=a(38447),ez=a(16425),eV=a(55910);function eH(e){let t,a,s,i,l,o,c,u,d,m=(0,r.c)(28),{isOpen:h,handleClick:p,waitingForCopilotContent:D,currentSkillExecution:f,toolCallsMetadata:g,contentId:x}=e,_=void 0===x?"tool-call-header":x;m[0]!==f?(t=f?(0,ey.KF)(f):"Thinking...",m[0]=f,m[1]=t):t=m[1];let C=t;m[2]!==g?(a=g.length>0&&g.every(eG),m[2]=g,m[3]=a):a=m[3];let y=a,v=!D&&y;m[4]!==h?(s=(0,n.jsx)(E.ChevronRightIcon,{className:"ToolCallHeader-module__icon--cSyjz","data-expanded":h}),m[4]=h,m[5]=s):s=m[5],m[6]!==_||m[7]!==p||m[8]!==h||m[9]!==s?(i=(0,n.jsx)("button",{onClick:p,type:"button",className:"ToolCallHeader-module__toggleButton--TxGio","aria-expanded":h,"aria-controls":_,"aria-labelledby":"header-title",children:s}),m[6]=_,m[7]=p,m[8]=h,m[9]=s,m[10]=i):i=m[10];let b=v?"ToolCallHeader-module__text--d1gXo":"ToolCallHeader-module__textWithShimmer--gD6hZ";if(m[11]!==v||m[12]!==C?(l=!v&&(0,n.jsx)(eE.b,{className:"ToolCallHeader-module__titleWithShimmer--ULcHI",children:C}),m[11]=v,m[12]=C,m[13]=l):l=m[13],m[14]!==v||m[15]!==g){let e,t,a;o=v&&(0,n.jsx)("span",{children:(t=(e=[...new Set(g.filter(e=>"completed"===e.status||"error"===e.status).map(e=>e.name))]).length,a=e.length<=3?`: ${e.join(", ")}`:"",`${t} tool${1!==t?"s":""} used${a}`)}),m[14]=v,m[15]=g,m[16]=o}else o=m[16];return m[17]!==b||m[18]!==l||m[19]!==o?(c=(0,n.jsxs)("span",{className:b,id:"header-title",children:[l,o]}),m[17]=b,m[18]=l,m[19]=o,m[20]=c):c=m[20],m[21]!==i||m[22]!==c?(u=(0,n.jsxs)("div",{className:"ToolCallHeader-module__mainContent--mi9NX",children:[i,c]}),m[21]=i,m[22]=c,m[23]=u):u=m[23],m[24]!==h||m[25]!==u||m[26]!==D?(d=(0,n.jsx)("div",{className:"ToolCallHeader-module__containerWrapper--xBEjJ",children:(0,n.jsx)("div",{"data-active":D,"data-expanded":h,className:"ToolCallHeader-module__container--OE3Ct",children:u})}),m[24]=h,m[25]=u,m[26]=D,m[27]=d):d=m[27],d}function eG(e){return["completed","error"].includes(e.status)}try{eH.displayName||(eH.displayName="ToolCallHeader")}catch{}function eq(e){let t,a,s,i,l,o,c=(0,r.c)(18),{waitingForCopilotContent:u,currentSkillExecution:d}=e,{message:m}=(0,ep.V)(),h=(m.skillExecutions?.length??0)>0,[p,D]=(0,_.useState)(!1);if(c[0]!==m.skillExecutions){let e=new Map;for(let t of m.skillExecutions??[]){let a=(0,ey.gB)(t),s="";if(a){"started"===t.status||"progress"===t.status?s=a.loadingText:"completed"===t.status?s=a.completedText:"error"===t.status&&(s=`${a.completedText} completed with errors.`);let n={...a,logMessage:s,status:t.status,references:t.references?(0,P.rT)(t.references):void 0};a.callId?e.set(a.callId,n):e.set(a.id,n)}}t=Array.from(e.values()),c[0]=m.skillExecutions,c[1]=t}else t=c[1];let f=t;c[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{D(eQ)},c[2]=a):a=c[2];let g=a;if(!h&&u){let e;return c[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(eE.b,{className:"ToolCallLogs-module__loadingText--U66HO",children:"Thinking..."}),c[3]=e):e=c[3],e}if(!h)return null;let x=!!u,C=!!u;return c[4]!==d||c[5]!==p||c[6]!==C||c[7]!==f?(s=(0,n.jsx)(eH,{isOpen:p,handleClick:g,waitingForCopilotContent:C,toolCallsMetadata:f,currentSkillExecution:d,contentId:"tool-call-logs-content"}),c[4]=d,c[5]=p,c[6]=C,c[7]=f,c[8]=s):s=c[8],c[9]!==f?(i=(0,n.jsx)("div",{className:"ToolCallLogs-module__logsContainer--i04Ik",children:(0,n.jsx)(ez.$X,{variant:"chat",children:f.map(eK)})}),c[9]=f,c[10]=i):i=c[10],c[11]!==p||c[12]!==i?(l=(0,n.jsx)("div",{id:"tool-call-logs-content",className:"ToolCallLogs-module__contentContainer--J6RnL","data-expanded":p,"data-testid":"tool-call-logs-content",children:i}),c[11]=p,c[12]=i,c[13]=l):l=c[13],c[14]!==x||c[15]!==s||c[16]!==l?(o=(0,n.jsxs)("div",{className:"ToolCallLogs-module__detailsContainer--Tudvp","data-active":x,"data-session-id":"tool-call-logs-content",children:[s,l]}),c[14]=x,c[15]=s,c[16]=l,c[17]=o):o=c[17],o}function eK(e){return(0,n.jsx)(eV.NL,{title:e.logMessage,isError:"error"===e.status,isPending:"started"===e.status||"progress"===e.status,children:e.references&&e.references.length>0&&(0,n.jsx)(ef.dX,{references:e.references,isImmersive:!0})},e.callId||e.id)}function eQ(e){return!e}try{eq.displayName||(eq.displayName="ToolCallLogs")}catch{}let eJ=e=>{let t,a,s,i,l,o,c,u,d,m,p,D,f,g=(0,r.c)(25),{messageContent:x,onSubmit:C,onCancel:y}=e,v=(0,h.A3)("isWaitingOnCopilot"),[b,j]=(0,_.useState)(x),S=(0,_.useRef)(null),E=(0,_.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==b?(a=[b],g[1]=b,g[2]=a):a=g[2],(0,_.useEffect)(t,a),g[3]!==b||g[4]!==x||g[5]!==y||g[6]!==C?(i=()=>{document.activeElement===E.current?s():((0,T.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),C(b))},s=()=>{y(),j(x),(0,T.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[3]=b,g[4]=x,g[5]=y,g[6]=C,g[7]=s,g[8]=i):(s=g[7],i=g[8]);let N=v?void 0:i;return g[9]!==s||g[10]!==N?(l={"copilot-chat:send-message":N,"github:cancel":s},g[9]=s,g[10]=N,g[11]=l):l=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,eA.G)("user-message-edit-box"),g[12]=o):o=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(c=e=>j(e.target.value),g[13]=c):c=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},g[14]=u):u=g[14],g[15]!==b?(d=(0,n.jsx)("div",{className:"UserMessageEdit-module__inputContainer--iXdUm",children:(0,n.jsx)("textarea",{ref:S,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:b,onChange:c,className:"UserMessageEdit-module__input--cgkv0",autoFocus:!0,onInput:u,onFocus:eY})}),g[15]=b,g[16]=d):d=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(eT.cQ,{commandId:"github:cancel",ref:E,children:"Cancel"}),g[17]=m):m=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,eA.G)("user-message-edit-submit"),g[18]=p):p=g[18],g[19]!==v?(D=(0,n.jsxs)("div",{className:"UserMessageEdit-module__actions--GxMb3",children:[m,(0,n.jsx)(eT.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...p,disabled:v,children:"Send"})]}),g[19]=v,g[20]=D):D=g[20],g[21]!==D||g[22]!==l||g[23]!==d?(f=(0,n.jsxs)(eT.tL,{commands:l,className:"UserMessageEdit-module__container--wVL0b",...o,children:[d,D]}),g[21]=D,g[22]=l,g[23]=d,g[24]=f):f=g[24],f};try{eJ.displayName||(eJ.displayName="UserMessageEdit")}catch{}function eY(e){return e.target.setSelectionRange(0,e.target.value.length)}let eX=({excludeFeedback:e,inputRef:t,isLatestMessage:a,isLatestUserMessage:s,isFirstReply:r,isStreaming:i,parentMessage:l,messageIndex:o,autoOpenPreviewPane:m,...p})=>{let{message:f}=(0,ep.V)(),g=(0,_.useMemo)(()=>(0,P.H2)(f.references??[]),[f.references]),x=(0,c.b)(),C=(0,h.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),v=(0,ew.tD)(),{items:j,versionedItems:N,openItem:A,removeItems:R,getOpenItems:k,openItemsBeforeSubthreadChange:O,setOpenItemsBeforeSubthreadChange:B,enableLoadingState:L,disableLoadingState:M}=(0,F.xx)(),U=(0,I.I)({messageIndex:o,messageId:f.id,messageTimestamp:f.createdAt}),$=(0,_.useCallback)(()=>{let e=v(),t=[],a=f;for(;null!=a;)t.push(a.id),a=void 0!==a.selectedChildIndex?e.messages[a.selectedChildIndex]:void 0;let s=new Map;for(let[e,t]of j){let a=s.get(t.messageId)||[];a.push(e),s.set(t.messageId,a)}let n=[];for(let e of t){let t=s.get(e);if(t)for(let e of t)n.push(e)}for(let[e,t]of j)t.messageId===S.Wp&&n.push(e);let r=k();B([...r]),n.some(e=>r.includes(e))&&L(),R(n)},[j,L,v,f,k,R,B]),{author:W,handleConfirmationAction:z,handleRetryErrorMessage:V,handleRetryCopilotResponse:H,handleEditUserMessage:G,hasClientConfirmations:q,isAgentError:K,isAI:Q,isCopilot:J,isError:Z,isInterrupted:ee,isUser:et,myRef:ea,rendererConfig:es,renderFeedback:en,shouldShowMessageActions:er,skillExecutionToUseForRespondingText:ei,showRetryButton:el}=(0,eN.p)({excludeFeedback:e,inputRef:t,isLatestMessage:a,isStreaming:i,removeOutdatedContentPreviewItems:$}),eo=(0,y.H)(),ec=C.editingMessage===f.id,eu=i&&!Z&&!f.confirmations&&!er&&a&&(!e||Q),ed=(l?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,ek=l?.childMessageIndexes?.length||1,eO=ek>=eI.L9,eP=x.maxMessagesReached(),eW=ek>1,ez=(0,_.useMemo)(()=>f.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[f.mediaContent]),eV=(0,_.useMemo)(()=>!!ez?.length,[ez]),eH=er&&eo&&(J||eW),eG=(0,_.useRef)(null),eK=(0,eR.M)(e=>{let t=N.get((0,w.oy)(e))?.at(-1);t&&A(t,!1)});(0,_.useEffect)(()=>{if(f.error?.type!=="publicCode")return;let e=[];for(let[t,a]of j)(a.messageId===f.id||a.messageId===eG.current)&&e.push(t);e.length>0&&R(e)},[f.error?.type,f.id,j,R]),(0,_.useEffect)(()=>{if(eG.current!==f.id&&a&&O.length>0){let e=setTimeout(()=>{for(let e of O)eK.current(e);M(),B([])});return()=>clearTimeout(e)}eG.current=f.id},[M,f.id,O,a,B,eK]);let eQ=(0,_.useCallback)(()=>{let{messages:e}=v(),t=ed-1;x.setSelectedMessage(e[l.childMessageIndexes[t-1]]),$()},[ed,x,l,$,v]),eY=(0,_.useCallback)(()=>{let{messages:e}=v(),t=ed-1;x.setSelectedMessage(e[l.childMessageIndexes[t+1]]),$()},[ed,x,l,$,v]),eX=(0,b.G)(),{model:e0,availableModels:e1}=(0,h.bP)("model","availableModels"),e2=e0;f.model&&(e2=(e1??[e2]).find(e=>e.id===f.model)||e2);let e3=()=>x.startEditingMessage(f.id),e4=(0,u.G)(),{data:e6}=(0,D.Ao)(e4),{selectedThreadID:e5}=(0,h.bP)("selectedThreadID"),{variant:e7}=X(e4,e5),e8=eO||eP||!!e4&&!e6||e7===Y,e9=J&&i&&a&&!f.content,te=(0,_.useCallback)(e=>{x.setWrapCodeLines(e)},[x]),tt=i?e$.G:e$.o;return(0,n.jsxs)("div",{className:(0,eh.$)("message-container","ChatMessage-module__chatMessage--mrG0f",et&&"ChatMessage-module__user--D7H_T",Q&&"ChatMessage-module__ai--l6YpD",ec?"ChatMessage-module__editing--yOYer":"",a&&"ChatMessage-module__latest--AGxtS"),ref:ea,"data-center-avatar":(f.skillExecutions?.length??0)>0&&d.W.enableToolCallLogs?"":void 0,...(0,eA.G)(`message-${Z?"error":i?"streaming":f.id}`),children:[Q?(0,n.jsx)(ex.W,{isLoading:i&&a,isLoadingSkills:(f.skillExecutions??[]).length>0&&i&&""===f.content&&a,isError:Z&&f.error?.type!=="agentUnauthorized",className:"ChatMessage-module__avatar--hKTWx",mode:C.mode,isFirstMessage:r,message:f.content||"",createdAt:f.createdAt}):null,et&&eV&&(0,n.jsx)("div",{className:ez?.length===4?"ChatMessage-module__imageGrid--yEdjI":"ChatMessage-module__imageRow--NNiyM",children:ez?.map(e=>(0,n.jsx)(eB,{name:e?.name||"Uploaded image",messageId:f.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:C.mode,squareView:ez?.length>=2},e?.url||""))}),et&&f.references&&f.references.length>0&&(0,n.jsx)(eL.K,{className:"ChatMessage-module__references--Pi5OH",messageId:f.id,messageTimestamp:f.createdAt,messageIndex:o,references:f.references,size:"medium"}),!ec&&(0,n.jsx)("div",{className:"ChatMessage-module__content--sWQll",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,eh.$)("js-snippet-clipboard-copy-unpositioned","ChatMessage-module__messageArea--gxJTG"),children:[q?(0,n.jsx)(eU,{authorName:W.name,clientConfirmations:f.clientConfirmations??[]}):et?(0,n.jsx)(eS.R,{accessibleHeader:(0,P.hV)("You",f.content??""),className:"ChatMessage-module__userMessage--K0oH6"}):(0,n.jsxs)(n.Fragment,{children:[d.W.enableToolCallLogs&&(0,n.jsx)(eq,{waitingForCopilotContent:e9,currentSkillExecution:ei}),e9&&!d.W.enableToolCallLogs&&(0,n.jsx)(eE.b,{className:(0,eh.$)("ChatMessage-module__skillExecutionText--Jbpi1","mb-2"),children:`${(0,ey.WA)(ei)}...`}),f.references&&f.references.length>0&&f.content&&!d.W.enableToolCallLogs&&(0,n.jsx)(ef.sV,{className:"mb-2",references:f.references,isImmersive:!0,onClick:(e,t)=>{("draft-issue"===e.type||"draft-update-issue"===e.type)&&U(e,t)}}),"assistant"===f.role&&(g.length?(0,n.jsx)(eD.Q,{mcpToolResults:g}):null),!q&&f.content&&(0,n.jsx)(eZ,{children:(0,n.jsx)(tt,{autoOpenPreviewPane:m,markdown:f.content,messageId:f.id,messageIndex:o,messageTimestamp:f.createdAt,accessibleHeader:(0,P.hV)("Copilot",f.content??""),copilotAnnotations:f.copilotAnnotations,wrapCodeLines:C.wrapCodeLines,onWrapCodeLinesChange:te,...es})}),Z?(0,n.jsx)(e_.K,{manager:x}):null,K&&f.agentErrors&&(0,n.jsx)(e_.h,{errors:f.agentErrors}),ee?(0,n.jsx)(ev.h,{messageHasContent:!!f.content||!!f.skillExecutions?.length}):null,Q&&!e9&&(0,P.Ye)(f.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,n.jsx)(eg.m,{confirmation:e,handleConfirmation:z,isLatestMessage:a},t))]}),eW&&!a&&(0,n.jsxs)("div",{className:"ChatMessage-module__messageSubthreadIndicator--fjOXe","data-testid":"chat-paging-indicator",children:[ed,"/",ek]})]}),eu&&(0,n.jsx)("div",{className:"ChatMessage-module__actionsPlaceholder--gN7Zq"}),!er&&el&&(0,n.jsx)(eb.$,{handleRetryMessage:V,disabled:e8}),er&&!eo&&(0,n.jsxs)(ej.M,{"aria-label":"Message tools",className:"ChatMessage-module__actions--CS2_w","data-testid":"nonshared-toolbar",children:[et&&(s?(0,n.jsx)(eT.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:e3,icon:E.PencilIcon,disabled:e8,...(0,eA.G)("edit-message-button")}):(0,n.jsx)(em.K,{variant:"invisible","aria-label":"Edit message",onClick:e3,icon:E.PencilIcon,disabled:e8,...(0,eA.G)("edit-message-button")})),J&&(0,n.jsxs)(n.Fragment,{children:[en&&(0,n.jsx)(eC.G,{iconSize:"medium"}),!!f.content&&!i&&(0,n.jsx)(eF.T,{textToCopy:f.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,T.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),el&&Z?(0,n.jsx)(eb.$,{handleRetryMessage:V,disabled:e8}):Q&&!Z&&!f.clientSide&&(0,n.jsx)(eb.$,{handleRetryMessage:H,disabled:e8,showModelPicker:!!e1&&e1.length>1,model:e2,navigateToNewThread:eX}),eW&&(0,n.jsx)(eM,{currentPage:ed,totalPages:ek,onPrev:eQ,onNext:eY,isUserMessage:et})]}),eH&&(0,n.jsxs)(ej.M,{"aria-label":"Message tools",className:"ChatMessage-module__sharedThreadActions--j7Y3f ChatMessage-module__actions--CS2_w","data-testid":"shared-toolbar",children:[J&&(0,n.jsx)(n.Fragment,{children:!!f.content&&!i&&(0,n.jsx)(eF.T,{textToCopy:f.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,T.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),eW&&(0,n.jsx)(eM,{currentPage:ed,totalPages:ek,onPrev:eQ,onNext:eY,isUserMessage:et})]})]})}),ec&&(0,n.jsx)(eJ,{messageContent:f.content||"",onSubmit:G,onCancel:()=>x.cancelEditingMessage()})]})},eZ=({children:e})=>(0,n.jsx)(x.t,{fallback:(0,n.jsx)(k.l,{className:"ChatMessage-module__errorFallback--h1kRS",variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),children:e}),e0=({message:e,messageIndex:t,isSharedMessage:a,isLatestMessage:s,...r})=>{let i=(0,y.H)();return(0,n.jsxs)(ep.$,{message:e,children:[!(0,eW.E)(e)&&(0,n.jsx)(eX,{...r,messageIndex:t,isSharedMessage:a,isLatestMessage:s,isViewingSharedThread:i}),(0,n.jsx)(eW.p,{message:e,messageIndex:t,isViewingSharedThread:i,isSharedMessage:a,isLatestMessage:s})]})},e1=(0,_.memo)(e0),e2=e=>{let{message:t}=e,a=(0,h.Pk)(),s=(0,el.CX)(a.messages,t),r="user"===t.role&&a.messages.findLast(e=>"user"===e.role)?.id===t.id;return(0,n.jsx)(e1,{...e,parentMessage:s,isLatestUserMessage:r})},e3=e=>(0,n.jsx)(eZ,{children:(0,n.jsx)(e2,{...e})});try{eX.displayName||(eX.displayName="InnerChatMessage")}catch{}try{eZ.displayName||(eZ.displayName="MessageErrorBoundary")}catch{}try{e0.displayName||(e0.displayName="ChatMessageUnmemoized")}catch{}try{e1.displayName||(e1.displayName="ChatMessageMemoized")}catch{}try{e2.displayName||(e2.displayName="ChatMessageWrapped")}catch{}try{e3.displayName||(e3.displayName="ChatMessage")}catch{}var e4=a(81945);function e6(){let e,t,a=(0,r.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"ConversationLoader-module__ConversationLoader__userGroup--sBc4O",children:(0,n.jsx)(e4.O,{variant:"rounded",height:"20px",width:"random"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("div",{className:"ConversationLoader-module__ConversationLoader--kdZTM","data-testid":"conversation-loader",children:[e,(0,n.jsxs)("div",{className:"ConversationLoader-module__ConversationLoader__assistantGroup--sA3MD",children:[(0,n.jsx)(e4.O,{className:(0,eh.$)("ConversationLoader-module__ConversationLoader__assistantAvatar--Bt7IA","ConversationLoader-module__assistantAvatarSkeleton--f2f7n"),variant:"elliptical"}),Array.from({length:Math.floor(4*Math.random())+2}).map(e5)]})]}),a[1]=t):t=a[1],t}function e5(e,t){return(0,n.jsx)(e4.O,{variant:"rounded",height:"20px",width:"random"},t)}try{e6.displayName||(e6.displayName="ConversationLoader")}catch{}var e7=a(76720);let e8="ErrorState-module__container--FoMc5",e9="ErrorState-module__icon--ykhTC",te="ErrorState-module__description--zsnez";function tt(e){let t,a,s,i,l,o=(0,r.c)(9),{title:c,description:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(e7.E.Visual,{children:(0,n.jsx)(E.AlertIcon,{size:"medium",className:e9})}),o[1]=a):a=o[1],o[2]!==c?(s=(0,n.jsx)(e7.E.Heading,{as:"h2",children:c}),o[2]=c,o[3]=s):s=o[3],o[4]!==u?(i=void 0!==u&&(0,n.jsx)("div",{className:te,children:(0,n.jsx)(e7.E.Description,{children:(0,n.jsx)("span",{children:u})})}),o[4]=u,o[5]=i):i=o[5],o[6]!==s||o[7]!==i?(l=(0,n.jsxs)("div",{className:e8,children:[t,(0,n.jsxs)(e7.E,{border:!1,children:[a,s,i]})]}),o[6]=s,o[7]=i,o[8]=l):l=o[8],l}function ta(e){let t,a,s,i,l,o,c,u=(0,r.c)(9),{mode:d}=e,{helpUrl:m}=(0,N.X)();u[0]!==d?(t=()=>{d&&(0,T.BI)("dotcom_chat.activate.error",{target:"ERROR_SHARED_THREAD_NO_ACCESS",mode:d,message:"Shared thread no access"})},a=[d],u[0]=d,u[1]=t,u[2]=a):(t=u[1],a=u[2]),(0,_.useEffect)(t,a),u[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),u[3]=s):s=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(e7.E.Visual,{children:(0,n.jsx)(E.LockIcon,{size:"medium",className:e9})}),l=(0,n.jsx)(e7.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),u[4]=i,u[5]=l):(i=u[4],l=u[5]),u[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(e7.E.Description,{children:(0,n.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),u[6]=o):o=u[6];let h=`${m}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return u[7]!==h?(c=(0,n.jsxs)("div",{className:e8,children:[s,(0,n.jsxs)(e7.E,{border:!1,children:[i,l,(0,n.jsxs)("div",{className:te,children:[o,(0,n.jsx)(M.A,{inline:!0,href:h,children:"Learn more"})]})]})]}),u[7]=h,u[8]=c):c=u[8],c}try{tt.displayName||(tt.displayName="ErrorState")}catch{}try{ta.displayName||(ta.displayName="SharedThreadForbidden")}catch{}let ts=e=>{let t,a,s,l,o,c,u,m,p,D,f,g=(0,r.c)(42),{inputRef:x,isMobile:C}=e,{scrollToBottom:y}=(0,es.b)(),v=(0,h.Pk)(),{isWaitingOnCopilot:b,messagesLoading:j,streamingMessage:S,messages:E}=v,{reloadQuota:N,premiumChatQuotaRemaining:I,isLicensedLimited:w}=(0,i.xR)();g[0]!==v?(a=(0,eo.W)(v),t=(0,P.CB)(a),g[0]=v,g[1]=t,g[2]=a):(t=g[1],a=g[2]);let F=t,A=a?.sharedMessageID,{messages:T,groupedMessages:R}=(0,ei.a)(v);g[3]!==T?(s=T.find(tc)?.id,g[3]=T,g[4]=s):s=g[4];let k=s;g[5]!==y?(l=()=>y("instant"),o=[y],g[5]=y,g[6]=l,g[7]=o):(l=g[6],o=g[7]),(0,eu.N)(l,o);let O=(0,ed.S)(v.streamingMessage);if(g[8]!==w||g[9]!==b||g[10]!==T.length||g[11]!==j.state||g[12]!==I||g[13]!==O||g[14]!==N||g[15]!==S?(c=()=>{T.length>0&&!w&&d.W.premiumRequestQuotasEnabled&&I<=P.aX&&!b&&"loaded"===j.state&&O&&!S&&N("quota_low_trigger")},u=[w,b,T.length,j.state,I,O,N,S],g[8]=w,g[9]=b,g[10]=T.length,g[11]=j.state,g[12]=I,g[13]=O,g[14]=N,g[15]=S,g[16]=c,g[17]=u):(c=g[16],u=g[17]),(0,_.useEffect)(c,u),g[18]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)("h1",{children:"Copilot Chat"}),g[18]=m):m=g[18],g[19]!==F?(p=(0,n.jsxs)("div",{className:"sr-only",children:[m,(0,n.jsx)("h2",{children:F})]}),g[19]=F,g[20]=p):p=g[20],g[21]!==E||g[22]!==k||g[23]!==R||g[24]!==x||g[25]!==C||g[26]!==b||g[27]!==A||g[28]!==S?.id){let e;g[30]!==E||g[31]!==k||g[32]!==R.length||g[33]!==x||g[34]!==C||g[35]!==b||g[36]!==A||g[37]!==S?.id?(e=(e,t)=>(0,n.jsx)(ea.i,{isLastGroup:t===R.length-1,children:e.map((a,s)=>{let r=-1===a.messageIndex?E.length:a.messageIndex,i=t===R.length-1&&s===e.length-1;return(0,n.jsx)(e3,{isLatestMessage:i,isSharedMessage:a.id===A,isFirstReply:a.id===k,message:a,messageIndex:r,inputRef:x,isStreaming:a.id===S?.id||i&&b,autoOpenPreviewPane:!C},s)})},t),g[30]=E,g[31]=k,g[32]=R.length,g[33]=x,g[34]=C,g[35]=b,g[36]=A,g[37]=S?.id,g[38]=e):e=g[38],D=R.map(e),g[21]=E,g[22]=k,g[23]=R,g[24]=x,g[25]=C,g[26]=b,g[27]=A,g[28]=S?.id,g[29]=D}else D=g[29];return g[39]!==p||g[40]!==D?(f=(0,n.jsxs)("div",{children:[p,D]}),g[39]=p,g[40]=D,g[41]=f):f=g[41],f},tn=()=>{let e,t,a,s=(0,r.c)(4),{mode:i}=(0,h.Pk)();return s[0]!==i?(e=()=>{(0,T.BI)("dotcom_chat.activate.error",{target:"ERROR_CONVERSATION_FAILED_TO_LOAD",mode:i,message:"Chat failed to load"})},t=[i],s[0]=i,s[1]=e,s[2]=t):(e=s[1],t=s[2]),(0,_.useEffect)(e,t),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(tt,{title:"Chat failed to load",description:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.A,{href:"",onClick:tu,inline:!0,children:"Reload the page"})," ","to try again."]})}),s[3]=a):a=s[3],a},tr=()=>{let e,t,a,s=(0,r.c)(4),{mode:i}=(0,h.Pk)();return s[0]!==i?(e=()=>{(0,T.BI)("dotcom_chat.activate.error",{target:"ERROR_ACCESS_DENIED",mode:i,message:"Access denied"})},t=[i],s[0]=i,s[1]=e,s[2]=t):(e=s[1],t=s[2]),(0,_.useEffect)(e,t),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(tt,{title:"Access denied",description:"You do not have permission to view this."}),s[3]=a):a=s[3],a},ti=e=>{let t,a,s,i=(0,r.c)(8),{isSharedThread:l}=e,{mode:o}=(0,h.Pk)(),{needsSsoAuthentication:c}=j(),d=(0,u.G)(),m=l?"Shared chat not found":"Chat not found",p=c?`This URL may be incorrect, you may be signed out of your organization or the ${d?"space":"chat"} may have been deleted.`:"This URL may be incorrect or the chat may have been deleted.";return i[0]!==l||i[1]!==o||i[2]!==m?(t=()=>{(0,T.BI)("dotcom_chat.activate.error",{target:l?"ERROR_SHARED_CONVERSATION_NOT_FOUND":"ERROR_CONVERSATION_NOT_FOUND",mode:o,message:m})},a=[o,l,m],i[0]=l,i[1]=o,i[2]=m,i[3]=t,i[4]=a):(t=i[3],a=i[4]),(0,_.useEffect)(t,a),i[5]!==p||i[6]!==m?(s=(0,n.jsx)(tt,{title:m,description:p}),i[5]=p,i[6]=m,i[7]=s):s=i[7],s},tl=e=>{let t,a,s,i,l,o=(0,r.c)(20),{inputRef:c,isMobile:u}=e,d=(0,h.Pk)(),{messagesLoading:m,threadsLoading:p,messages:D,showTopicPicker:f,pendingFirstMessage:g}=d,x=(0,eo.W)(d),{textAreaRef:_}=(0,er.Y)(c),C=(0,y.H)(),v=null,b=null;if((0,el.B)(D,g).length&&"loaded"===m.state){let e;o[0]!==u||o[1]!==_?(e=(0,n.jsx)(ts,{inputRef:_,isMobile:u}),o[0]=u,o[1]=_,o[2]=e):e=o[2],v=e}else if(("loading"===m.state||"pending"===m.state)&&d.selectedThreadID&&!f){let e;o[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(e6,{}),o[3]=e):e=o[3],v=e}else if("error"===m.state&&d.selectedThreadID&&(null===x&&"error"!==p.state||m.notFound))if(C&&d.fetchSharedThreads?.ok===!1&&(403===d.fetchSharedThreads.status||401===d.fetchSharedThreads.status)){let e;o[4]!==d.mode?(e=(0,n.jsx)(ta,{mode:d.mode}),o[4]=d.mode,o[5]=e):e=o[5],b=e}else{let e;o[6]!==C?(e=(0,n.jsx)(ti,{isSharedThread:C}),o[6]=C,o[7]=e):e=o[7],b=e}else if("error"===m.state||"error"===p.state){let e;o[8]!==p.status?(e=403===p.status?(0,n.jsx)(tr,{}):(0,n.jsx)(tn,{}),o[8]=p.status,o[9]=e):e=o[9],b=e}let j=(0,ec.U)();return o[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(to,{}),o[10]=t):t=o[10],o[11]!==b?(a=b&&(0,n.jsx)("div",{className:"ImmersiveChat-module__emptyContent--a_vXm",children:b}),o[11]=b,o[12]=a):a=o[12],o[13]!==v?(s=v&&(0,n.jsxs)("div",{className:"ImmersiveChat-module__messageContent--JE3f_",children:[v,(0,n.jsx)(en.Cb,{})]}),o[13]=v,o[14]=s):s=o[14],o[15]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(en.zc,{}),o[15]=i):i=o[15],o[16]!==j||o[17]!==a||o[18]!==s?(l=(0,n.jsxs)(es.$,{className:"ImmersiveChat-module__container--h_Pmt",containerRef:j,children:[t,a,s,i]}),o[16]=j,o[17]=a,o[18]=s,o[19]=l):l=o[19],l},to=()=>{let e,t,a,s=(0,r.c)(7),{isScrolledUp:i,scrollToBottom:l}=(0,es.b)(),o=!i&&"ImmersiveChat-module__hidden--b_DNj";return s[0]!==o?(e=(0,eh.$)("ImmersiveChat-module__scrollToBottomButton--FbWSF",o),s[0]=o,s[1]=e):e=s[1],s[2]!==l?(t=()=>l("smooth"),s[2]=l,s[3]=t):t=s[3],s[4]!==e||s[5]!==t?(a=(0,n.jsx)(em.K,{"aria-label":"Scroll to bottom",className:e,onClick:t,icon:E.ArrowDownIcon,tooltipDirection:"n"}),s[4]=e,s[5]=t,s[6]=a):a=s[6],a};try{ts.displayName||(ts.displayName="Messages")}catch{}try{tn.displayName||(tn.displayName="FailedToLoadThreadError")}catch{}try{tr.displayName||(tr.displayName="AccessDeniedError")}catch{}try{ti.displayName||(ti.displayName="NotFoundError")}catch{}try{tl.displayName||(tl.displayName="ImmersiveChat")}catch{}try{to.displayName||(to.displayName="ScrollToBottomButton")}catch{}function tc(e){return"assistant"===e.role}function tu(e){e.preventDefault(),window.location.reload()}var td=a(67925),tm=a(97189),th=a(92130),tp=a(93412),tD=a(14095),tf=a(82460),tg=a(56128),tx=a(91747),t_=a(46251),tC=a(61382),ty=a(74807),tv=a(52870);function tb(e){let t,a,s,i,l,o=(0,r.c)(12),{className:c}=e,[u,d]=(0,_.useState)(ty.L.Static),[h,p]=(0,_.useState)(!0),{safeSetTimeout:D}=(0,tv.A)();return o[0]!==D?(t=()=>{let e=D(()=>{m.Jt.getAnimationFlag()?(d(ty.L.Activate),p(!1)):(d(ty.L.Idle),p(!0))},1e3);return()=>clearTimeout(e)},a=[D],o[0]=D,o[1]=t,o[2]=a):(t=o[1],a=o[2]),(0,_.useEffect)(t,a),o[3]!==u?(s=()=>{u===ty.L.Activate&&(d(ty.L.Idle),p(!0),m.Jt.removeAnimationFlag())},o[3]=u,o[4]=s):s=o[4],o[5]!==u||o[6]!==h||o[7]!==s?(i=(0,n.jsx)(ty.N,{animationType:u,onAnimationEnd:s,loopAnimation:h,size:48}),o[5]=u,o[6]=h,o[7]=s,o[8]=i):i=o[8],o[9]!==c||o[10]!==i?(l=(0,n.jsx)("div",{className:c,children:i}),o[9]=c,o[10]=i,o[11]=l):l=o[11],l}try{tb.displayName||(tb.displayName="CopilotEmptyStateAnimation")}catch{}var tj=a(89781);let tS="ChatInputBanners-module__banner--itq1j",tE={trial:{title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",dismissTarget:"TRIAL_SUCCESS_BANNER_DISMISS",clearFlagsOnDismiss:[]},pro_plus:{title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",dismissTarget:"PRO_PLUS_SUCCESS_BANNER_DISMISS",clearFlagsOnDismiss:["trial"]}};function tN(e){let t,a,s,i=(0,r.c)(10),{skuType:l,onDismiss:o,className:c}=e,u=tE[l];return u?(i[0]!==u.dismissTarget||i[1]!==o?(t=()=>{o(),(0,T.BI)("dotcom_chat.activate",{target:u.dismissTarget,mode:"immersive"})},i[0]=u.dismissTarget,i[1]=o,i[2]=t):t=i[2],i[3]!==u.description||i[4]!==u.title||i[5]!==t?(a=(0,n.jsx)(k.l,{variant:"success",title:u.title,description:u.description,hideTitle:!0,onDismiss:t}),i[3]=u.description,i[4]=u.title,i[5]=t,i[6]=a):a=i[6],i[7]!==c||i[8]!==a?(s=(0,n.jsx)("div",{className:c,children:a}),i[7]=c,i[8]=a,i[9]=s):s=i[9],s):null}try{tN.displayName||(tN.displayName="SkuSuccessBanner")}catch{}let tI=["pro_plus","trial"],tw=()=>{let e=Object.create(null);for(let t of tI)e[t]=m.Jt.getSkuSuccessBannerFlag(t)??!1;return e};function tF(){let e,t,a,s=(0,r.c)(11),l=(0,i.xR)().licenseType,{activeSku:o,visibility:c}=function(){let e,t,a,s=(0,r.c)(7),[n,i]=(0,_.useState)(tw);s[0]!==n?(e=tI.find(e=>n[e])||null,s[0]=n,s[1]=e):e=s[1];let l=e;if(s[2]!==l){for(let e of(t={},tI)){let a=tE[e],s=new Set([e,...a?.clearFlagsOnDismiss??[]]);t[e]={visible:l===e,onDismiss:()=>{for(let e of s)m.Jt.removeSkuSuccessBannerFlag(e);i(e=>{let t={...e};for(let e of s)t[e]=!1;return t})}}}s[2]=l,s[3]=t}else t=s[3];return s[4]!==l||s[5]!==t?(a={activeSku:l,visibility:t},s[4]=l,s[5]=t,s[6]=a):a=s[6],a}(),u="trial"===o&&l===S.mF.LicensedFull,d=o&&"trial"!==o;return s[0]!==o||s[1]!==u||s[2]!==c?(e=u&&c.trial&&(0,n.jsx)(tN,{skuType:o,className:tS,onDismiss:c.trial.onDismiss}),s[0]=o,s[1]=u,s[2]=c,s[3]=e):e=s[3],s[4]!==o||s[5]!==d||s[6]!==c?(t=d&&c[o]&&(0,n.jsx)(tN,{skuType:o,className:tS,onDismiss:c[o].onDismiss}),s[4]=o,s[5]=d,s[6]=c,s[7]=t):t=s[7],s[8]!==e||s[9]!==t?(a=(0,n.jsxs)(n.Fragment,{children:[e,t]}),s[8]=e,s[9]=t,s[10]=a):a=s[10],a}try{tF.displayName||(tF.displayName="NewConversationBanners")}catch{}let tA=e=>{switch(e){case"displayed":(0,T.BI)("view",{category:"universe_banner",action:"banner_view",label:"banner_universe_loggedIn"});break;case"clicked":(0,T.BI)("click",{category:"universe_banner",action:"banner_click_openModal",label:"banner_universe_loggedIn"});break;case"dismissed":(0,T.BI)("click",{category:"universe_banner",action:"banner_dismiss",label:"banner_universe_loggedIn"})}},tT=(e,t)=>{switch(e){case"opened":(0,T.BI)("view",{category:"universe_modal",action:"modal_view",label:"modal_universe_loggedIn"});break;case"closed":(0,T.BI)("click",{category:"universe_modal",action:"modal_close",label:"modal_universe_loggedIn"});break;case"tab_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_nav_click",label:"modal_universe_loggedIn",navItem:t?.tabName});break;case"main_cta_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_primary_cta_left_click",label:"modal_universe_loggedIn"});break;case"see_all_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_seeAllAnnouncements_left_click",label:"modal_universe_loggedIn"});break;case"tab_cta_1_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_primary_cta_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"primary_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_cta_2_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_secondary_cta_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"secondary_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_link_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_link_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"learn_more_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_description_link_clicked":(0,T.BI)("click",{category:"universe_modal",action:"modal_description_link_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"link",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex})}};function tR(e){let t,a,s,l,o,c,u,m,p,D,f,x,C,y,v,b,j,S,E,N=(0,r.c)(48),{textAreaRef:I,handleUserSubmit:w,nextMessageIndex:F}=e,A=(0,h.Pk)(),R=(0,_.useRef)(null),k=(0,_.useRef)(!1),{chatQuotaExceeded:O,isLicensedLimited:B}=(0,i.xR)(),L=B&&O,[P,M]=(0,_.useState)(null),U=(0,_.useRef)(null);N[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.G7)("hyperspace_nudges_universe25")?"universe25":"",N[0]=t):t=N[0];let $=t,{plan:W}=(0,i.xR)(),z=(0,tx.u)("copilot_swe_agent_progress_commands")&&A.agentsEnabled,V=(0,tx.u)("copilot_agent_task_list_v2"),{failedTasks:H,setFailedTasks:G,createTask:q}=(0,tC.H)();N[1]!==q||N[2]!==H||N[3]!==G?(a=e=>{let t=H[e];t&&(G(t=>t.filter((t,a)=>a!==e)),q({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:t.eventType,eventContent:t.eventContent,selectedAgent:t.selectedAgent}))},N[1]=q,N[2]=H,N[3]=G,N[4]=a):a=N[4];let K=a;N[5]!==G?(s=e=>{G(t=>t.filter((t,a)=>a!==e))},N[5]=G,N[6]=s):s=N[6];let Q=s;N[7]!==w?(l=async e=>{k.current=!0,await w(e)},N[7]=w,N[8]=l):l=N[8];let J=l;N[9]===Symbol.for("react.memo_cache_sentinel")?(o=()=>((0,T.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_VIEW_LOADED",defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl}),()=>{k.current||(0,T.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_BOUNCE",mode:"immersive",bounceToUrl:document.location.href,defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl})}),c=[],N[9]=o,N[10]=c):(o=N[9],c=N[10]),(0,_.useEffect)(o,c);let Y=d.W.copilotIcebreakersExperimentHyperspace;N[11]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("div",{className:"NewConversation-module__banner--binRv",children:(0,n.jsx)(tF,{})}),N[11]=u):u=N[11];let X=z&&V;N[12]!==X?(m=(0,eh.$)("NewConversation-module__main--P10kO",{"NewConversation-module__withTaskList--iIEmp":X}),N[12]=X,N[13]=m):m=N[13],N[14]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),N[14]=p):p=N[14];let Z=(0,tx.u)("copilot_pro_plus_animation")?(0,n.jsx)(tb,{}):(0,n.jsx)(th.A,{hidden:!0});return N[15]!==J||N[16]!==F||N[17]!==I?(D=(0,n.jsx)(ee,{chatInputRef:U,textAreaRef:I,handleUserSubmit:J,nextMessageIndex:F,onChatCommandChange:M,isNewConversation:!0,containerRef:R,slashCommandsEnabled:!0,showDisabledInputOnQuotaExceeded:!0}),N[15]=J,N[16]=F,N[17]=I,N[18]=D):D=N[18],N[19]!==P||N[20]!==W||N[21]!==L||N[22]!==I?(f=!L&&(d.W.chatInputCommands&&!d.W.askModeDropdown?(0,n.jsx)("div",{className:"NewConversation-module__commandStartersContainer--noJst",children:(0,n.jsx)(tj.A,{chatCommand:P,chatInputRef:U,textAreaRef:I,containerRef:R,iceBreakersExperimentEnabled:Y,paidUser:(0,tD.U1)(W)})}):null),N[19]=P,N[20]=W,N[21]=L,N[22]=I,N[23]=f):f=N[23],N[24]!==Z||N[25]!==D||N[26]!==f?(x=(0,n.jsxs)("div",{className:"NewConversation-module__inputAndStartersContainer--jSg3S",children:[Z,D,f]}),N[24]=Z,N[25]=D,N[26]=f,N[27]=x):x=N[27],N[28]!==W?(C=$&&(0,n.jsx)(tg.A,{id:"copilot-immersive-v1",announcementId:$,shouldShowTabCtas:(0,tD.U1)(W),shouldShowMainCta:!(0,tD.U1)(W),useLocalStorage:!0,onBannerEvent:tA,onModalEvent:tT}),N[28]=W,N[29]=C):C=N[29],N[30]!==H||N[31]!==Q||N[32]!==K?(y=H.length>0&&(0,n.jsx)("div",{className:"NewConversation-module__failedTasksContainer--GuwFv",children:(0,n.jsx)(t_.B,{direction:"vertical",gap:"condensed",children:H.map((e,t)=>(0,n.jsx)(td.Q,{problemStatement:e.problemStatement,handleRetry:()=>K(t),handleDismiss:()=>Q(t)},`${e.clientGeneratedId??""}-${e.nwo}-${e.problemStatement}`))})}),N[30]=H,N[31]=Q,N[32]=K,N[33]=y):y=N[33],N[34]!==z||N[35]!==V?(v=z&&V&&(0,n.jsx)("div",{className:"NewConversation-module__agentListContainer--uNTRm",children:(0,n.jsx)(tm.Fn,{children:(0,n.jsx)(tf.f,{showViewAll:!0,title:"Recent agent sessions",initialResultCount:5})})}),N[34]=z,N[35]=V,N[36]=v):v=N[36],N[37]!==x||N[38]!==C||N[39]!==y||N[40]!==v?(b=(0,n.jsx)("div",{className:"NewConversation-module__content--cXGzS",children:(0,n.jsxs)("div",{className:"NewConversation-module__innerContainer--u29kY",children:[p,x,C,y,v]})}),N[37]=x,N[38]=C,N[39]=y,N[40]=v,N[41]=b):b=N[41],N[42]!==b||N[43]!==m?(j=(0,n.jsx)("div",{className:m,children:b}),N[42]=b,N[43]=m,N[44]=j):j=N[44],N[45]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)("div",{className:"NewConversation-module__footer--HIKDz",children:(0,n.jsx)(tp.h,{})}),N[45]=S):S=N[45],N[46]!==j?(E=(0,n.jsx)("div",{className:"NewConversation-module__scrollContainer--pS_a1",children:(0,n.jsxs)("div",{className:"NewConversation-module__container--fMmET",children:[u,j,S]})}),N[46]=j,N[47]=E):E=N[47],E}try{tR.displayName||(tR.displayName="NewConversation")}catch{}function tk(e){let t,a,s,x,v,b,j=(0,r.c)(30),{isMobile:S,textAreaRef:E,attachmentMenuSide:N}=e,I=(0,h.Pk)(),w=(0,c.b)(),F=(0,o.Kf)(),{messages:A,messagesLoading:T,threadsLoading:R}=I,{chatQuotaExceeded:k}=(0,i.xR)(),O=(0,u.G)(),{data:B}=(0,D.Ao)(O),{variant:L}=X(O,I.selectedThreadID),P=(!L||!!B)&&L!==Y,{handleSpaceSelect:M}=(0,f.C)(),U=(0,_.useRef)(I.currentTopic),$=(0,y.H)(),W=!I.selectedThreadID&&m.Jt.getEntrypointMessage();e:{if(I.selectedThreadID||I.pendingFirstMessage||W||O||"error"===T.state||"error"===R.state||I.shouldReplaceHistoryOnNavigation){t=!1;break e}t=!0}let z=t,V=A.length,H=(0,C.T)(U,V);return j[0]!==I.currentTopic?(a=()=>{U.current=I.currentTopic},s=[I.currentTopic],j[0]=I.currentTopic,j[1]=a,j[2]=s):(a=j[1],s=j[2]),(0,_.useEffect)(a,s),j[3]!==k||j[4]!==M||j[5]!==H||j[6]!==w||j[7]!==I.selectedThreadID||j[8]!==I.threadsLoading.state?(x=()=>{let e=async e=>{m.Jt.clearEntrypointMessage(I.selectedThreadID);let t=e?.references?.find?.(tO),a=t?{id:t.id,owner:t.owner}:null;a&&M(a);let s=(0,g.G7)("copilot_chat_action_logs_redirect")&&e.message===(0,p.oo)(void 0,!0);e.model&&w.selectModel(e.model),w.setShouldReplaceHistoryOnNavigation(!0);let n=I.selectedThreadID?w.getThreadById(I.selectedThreadID):null;if(I.selectedThreadID&&!n&&"loaded"!==I.threadsLoading.state){let e=await w.fetchThreads();n=e?.find(e=>e.id===I.selectedThreadID)||null}setTimeout(()=>{H(e.message,e.references,s,e.model,a,e.mediaContent,n)},100)},t=m.Jt.getEntrypointMessage(I.selectedThreadID);t&&!k&&e(t)},j[3]=k,j[4]=M,j[5]=H,j[6]=w,j[7]=I.selectedThreadID,j[8]=I.threadsLoading.state,j[9]=x):x=j[9],j[10]!==k||j[11]!==M||j[12]!==H||j[13]!==w||j[14]!==I.currentReferences||j[15]!==I.selectedThreadID||j[16]!==I.threadsLoading.state?(v=[H,k,I.currentReferences,w,M,I.selectedThreadID,I.threadsLoading.state],j[10]=k,j[11]=M,j[12]=H,j[13]=w,j[14]=I.currentReferences,j[15]=I.selectedThreadID,j[16]=I.threadsLoading.state,j[17]=v):v=j[17],(0,_.useEffect)(x,v),j[18]!==N||j[19]!==H||j[20]!==S||j[21]!==$||j[22]!==V||j[23]!==z||j[24]!==P||j[25]!==I.selectedThreadID||j[26]!==I.sharedThreadChannel||j[27]!==E||j[28]!==F.traceInfo?.visible?(b=(0,n.jsx)("div",{className:"ConversationView-module__root--k4AIo",children:F.traceInfo?.visible?(0,n.jsx)(l.k,{sharedThreadChannel:I.sharedThreadChannel,threadId:I.selectedThreadID}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ConversationView-module__container--XaY36",children:z?(0,n.jsx)(tR,{textAreaRef:E,handleUserSubmit:H,nextMessageIndex:V}):(0,n.jsx)(tl,{inputRef:E,isMobile:S})}),(!$||d.W.copilotDuplicateThread)&&!z&&(0,n.jsxs)("div",{className:"ConversationView-module__footer--xr6HB",children:[!P&&(0,n.jsx)(Z,{}),P&&(0,n.jsx)(ee,{textAreaRef:E,handleUserSubmit:H,nextMessageIndex:V,slashCommandsEnabled:!0,attachmentMenuSide:N})]})]})}),j[18]=N,j[19]=H,j[20]=S,j[21]=$,j[22]=V,j[23]=z,j[24]=P,j[25]=I.selectedThreadID,j[26]=I.sharedThreadChannel,j[27]=E,j[28]=F.traceInfo?.visible,j[29]=b):b=j[29],b}function tO(e){return"copilot-space"===e.type}function tB(e){let t,a=(0,r.c)(2);return a[0]!==e?(t=(0,n.jsx)(tL,{children:(0,n.jsx)(tk,{...e})}),a[0]=e,a[1]=t):t=a[1],t}function tL(e){let t,a,s,i,l,o=(0,r.c)(8),{selectedThreadID:c}=(0,h.bP)("selectedThreadID"),[u,m]=(0,_.useState)(0),p=(0,_.useRef)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{p.current=!0},o[0]=t):t=o[0];let D=t;return o[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{d.W.stableConversationView&&p.current&&(m(tP),p.current=!1)},o[1]=a):a=o[1],o[2]!==c?(s=[c],o[2]=c,o[3]=s):s=o[3],(0,_.useEffect)(a,s),o[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(et.x,{regionName:"This conversation"}),o[4]=i):i=o[4],o[5]!==u||o[6]!==e.children?(l=(0,n.jsx)(x.t,{fallback:i,onError:D,children:e.children},u),o[5]=u,o[6]=e.children,o[7]=l):l=o[7],l}function tP(e){return e+1}try{tk.displayName||(tk.displayName="ConversationViewInner")}catch{}try{tB.displayName||(tB.displayName="ConversationView")}catch{}try{tL.displayName||(tL.displayName="ConversationViewErrorBoundary")}catch{}},52475:(e,t,a)=>{a.d(t,{_S:()=>r,cB:()=>l,cW:()=>i});var s=a(53627),n=a(71315);let r=()=>{let e=(0,s.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},i=e=>{(0,s.C3)({appId:e})},l=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};n.cg?.addEventListener("hashchange",()=>{(0,s.C3)({appId:l()})},!0)},56487:(e,t,a)=>{a.d(t,{F:()=>o,t:()=>c});var s=a(74848),n=a(35247),r=a(53419),i=a(5524),l=a(62491);function o({eventName:e,menuLocation:t,mode:a,action:s,text:n}){let i=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,r.BI)("dotcom_chat.activate",{target:i,text:n,category:t,action:s,mode:a})}function c({menuLocation:e,mode:t,onItemClick:a}){return Object.entries(l.A).map(([r,{name:l,url:c,icon:u}])=>(0,s.jsxs)(i.l.LinkItem,{href:c,onClick:()=>{a?.(),n.W.freeToPaidTelemetry&&o({eventName:r,menuLocation:e,mode:t,action:"menu_item_click",text:l})},children:[l,(0,s.jsx)(i.l.LeadingVisual,{children:(0,s.jsx)("img",{src:u,alt:"",height:"20",width:"20"})})]},r))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},58855:(e,t,a)=>{a.d(t,{$s:()=>d,Sy:()=>m,U7:()=>u,kX:()=>h});var s,n=a(74848),r=a(21728),i=a(23657),l=a(61526),o=a(11680),c=a(73077);function u(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function d(e){let t,a=(0,r.c)(3),{customCopilot:s}=e,u=(0,l.Zp)();return a[0]!==s||a[1]!==u?(t=s&&(0,n.jsx)(o.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,n.jsx)(c.z,{as:"a",href:(0,i.Cb)(s),onClick:e=>{e.preventDefault(),u((0,i.Cb)(s))},children:"Edit"})}),a[0]=s,a[1]=u,a[2]=t):t=a[2],t}function m(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function h(e){let t,a,s,i,l=(0,r.c)(10),{errorMessages:c,onDismiss:u,className:d,bannerRef:m}=e,h=void 0===d?"":d;if(0===c.length)return null;if(l[0]!==c){let e=Array.from(new Set(c));t=1===e.length?e[0]:(0,n.jsxs)(n.Fragment,{children:["Errors during attachment upload:",(0,n.jsx)("ul",{style:{paddingLeft:"1.2em"},children:e.map(p)})]}),l[0]=c,l[1]=t}else t=l[1];let D=t;return l[2]===Symbol.for("react.memo_cache_sentinel")?(a={outline:"none"},l[2]=a):a=l[2],l[3]!==m||l[4]!==D?(s=(0,n.jsx)("div",{ref:m,tabIndex:-1,style:a,children:D}),l[3]=m,l[4]=D,l[5]=s):s=l[5],l[6]!==h||l[7]!==u||l[8]!==s?(i=(0,n.jsx)(o.l,{variant:"critical",description:s,title:"Error during attachment upload",hideTitle:!0,className:h,onDismiss:u}),l[6]=h,l[7]=u,l[8]=s,l[9]=i):i=l[9],i}function p(e){return(0,n.jsx)("li",{children:e},e)}try{u.displayName||(u.displayName="SpaceDeletedBanner")}catch{}try{d.displayName||(d.displayName="SpaceSizeExceededBanner")}catch{}try{m.displayName||(m.displayName="ReferenceSizeExceededBanner")}catch{}try{(s=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}).displayName||(s.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{h.displayName||(h.displayName="UploadErrorBanner")}catch{}},61382:(e,t,a)=>{a.d(t,{H:()=>o,t:()=>l});var s=a(74848),n=a(21728),r=a(96540);let i=(0,r.createContext)(void 0);function l(e){let t,a=(0,n.c)(3),{value:r,children:l}=e;return a[0]!==l||a[1]!==r?(t=(0,s.jsx)(i.Provider,{value:r,children:l}),a[0]=l,a[1]=r,a[2]=t):t=a[2],t}function o(){let e=(0,r.useContext)(i);if(!e)throw Error("useFailedTasks must be used within a FailedTasksProvider");return e}try{i.displayName||(i.displayName="FailedTasksContext")}catch{}try{l.displayName||(l.displayName="FailedTasksProvider")}catch{}},61767:(e,t,a)=>{let s;a.d(t,{FC:()=>m,I0:()=>u,dV:()=>d,h$:()=>p,hW:()=>i,jK:()=>h,o:()=>o,zT:()=>l});let n=null,r=!1;function i(e){s&&s!==e||(s=e,n&&(n(e),n=null))}function l(){s=void 0}function o(e){let t=e?.source??"both",a=e?.silent??!0,n=null;return(("element"===t||"both"===t)&&(n=document.querySelector("context-region")),n||"react"!==t&&"both"!==t||(n=s??null),n)?"isConnected"in n&&!n.isConnected||!n.pushCrumb||"function"!=typeof n.pushCrumb?null:n:(a||console.error("The global navigation's context region cannot be found! Make sure the <context-region> element exists on the page before calling any of the global navigation breadcrumb methods."),null)}function c(e){let t=o();t?e(t):(n=e,function(){if(r)return;r=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{n&&(n(e.contextRegion),n=null)},{once:!0})}())}function u(e){c(t=>t.pushCrumb(e))}function d(){c(e=>e.popCrumb())}function m(e){c(t=>t.replaceCrumbs(e))}function h(e){c(t=>t.renameCurrentCrumb(e))}function p(e){c(t=>t.replaceCurrentCrumb(e))}},62491:(e,t,a)=>{a.d(t,{A:()=>i});let s=a.p+"eclipse-962a3cf29dea.png",n=a.p+"jetbrains-e16495e63a33.png",r=a.p+"neovim-3301f23c4307.png",i={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:a.p+"vscode-380056900de8.png",name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:a.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:a.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:n,name:"JetBrains",eventName:"JETBRAINS"},eclipse:{url:"https://marketplace.eclipse.org/content/github-copilot",icon:s,name:"Eclipse",eventName:"ECLIPSE"},neovim:{url:"https://github.com/github/copilot.vim",icon:r,name:"Neovim",eventName:"NEOVIM"}}},75735:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(5570),n=a(37351),r=a(44953);function i(e,t,a,i){return(0,n._)(e,t),(0,r._)(a,"set"),(0,s._)(e,a,i),i}},81075:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(50894),n=a(37351),r=a(44953);function i(e,t,a){return(0,n._)(e,t),(0,r._)(a,"get"),(0,s._)(e,a)}},87255:(e,t,a)=>{a.d(t,{Y:()=>S});var s,n=a(74848),r=a(21728),i=a(70170),l=a(53419),o=a(29731),c=a(83494),u=a(88431),d=a(96379),m=a(56149),h=a(86877),p=a(4175),D=a(21373),f=a(15220),g=a(96540),x=a(40961),_=a(2635),C=a(33592),y=a(38621),v=a(5524);let b={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},j=(0,g.forwardRef)(function(e,t){let a,s,i,l,o,c,u,d,m=(0,r.c)(19),{onSelect:h}=e,[p,D]=(0,g.useState)(!1);m[0]!==p?(a=()=>D(!p),m[0]=p,m[1]=a):a=m[1];let f=a;m[2]===Symbol.for("react.memo_cache_sentinel")?(s={marginBottom:"1px"},m[2]=s):s=m[2],m[3]!==h||m[4]!==p?(i=p&&Object.entries(b)?.map(e=>{let[t,a]=e;return(0,n.jsxs)(v.l.Item,{"aria-label":`${a.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>h(t,a.body),children:[(0,n.jsx)(y.PlusIcon,{}),t]},t)}),m[3]=h,m[4]=p,m[5]=i):i=m[5],m[6]!==i?(l=(0,n.jsx)(v.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:i}),m[6]=i,m[7]=l):l=m[7];let x=p?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(o={border:"1px solid transparent"},m[8]=o):o=m[8],m[9]!==p?(c=p?(0,n.jsx)(y.XIcon,{}):(0,n.jsx)(y.LightBulbIcon,{}),m[9]=p,m[10]=c):c=m[10],m[11]!==x||m[12]!==c||m[13]!==f?(u=(0,n.jsx)(v.l,{className:"d-flex flex-column flex-justify-end",children:(0,n.jsx)(v.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:o,onSelect:f,children:c})}),m[11]=x,m[12]=c,m[13]=f,m[14]=u):u=m[14],m[15]!==t||m[16]!==l||m[17]!==u?(d=(0,n.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:s,children:[l,u]}),m[15]=t,m[16]=l,m[17]=u,m[18]=d):d=m[18],d});try{j.displayName||(j.displayName="PersonalInstructionsTemplates")}catch{}try{(s=PersonalInstructionsTemplatesWithRef).displayName||(s.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let S=({onDismiss:e,returnFocusRef:t})=>{let a=(0,_.Pk)(),s=(0,C.b)(),[y,v]=(0,g.useState)(a.personalInstructions??""),[b,S]=(0,g.useState)(void 0),[N,I]=(0,g.useState)(!1),w=(0,g.useRef)(null),F=(0,g.useRef)(null),[A,T]=(0,g.useState)(""),R=((e,t)=>{let a,s,n=(0,r.c)(4),[l,o]=(0,g.useState)(48);return n[0]!==e||500!==n[1]?(a=()=>{let t=(0,i.s)(()=>{e?.current&&o(e.current.clientHeight??48)},500),a=new ResizeObserver(t);return e?.current&&a.observe(e.current),()=>{t.cancel(),a?.disconnect?.()}},s=[e,500],n[0]=e,n[1]=500,n[2]=a,n[3]=s):(a=n[2],s=n[3]),(0,g.useEffect)(a,s),l})(F);(0,u.N)(()=>{w?.current&&(w.current.scrollTop=w.current.scrollHeight)},[y]);let k=(0,g.useCallback)(async()=>{if(!N){I(!0),A&&(0,l.BI)("copilot_personal_instruction_template_usage",{content:A});try{let t=await (0,d.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:y}});if(t.ok)(0,l.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),s.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:y}),(0,x.flushSync)(()=>e());else{let e=await t.json();S(String(e.errorMessage))}}catch{S("An error occurred while saving your personal instructions.")}finally{I(!1)}}},[N,y,s,e,A]),O=(e,t)=>{t&&(v(y?`${y}
${t}`:t),T(e),w?.current?.focus())},B=()=>{k()},L=(0,g.useCallback)(()=>{(0,l.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,n.jsx)(m.ZL,{children:(0,n.jsx)(f.l,{onClose:L,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,n.jsx)(f.l.Body,{children:(0,n.jsx)("form",{onSubmit:k,children:(0,n.jsxs)(h.A,{children:[(0,n.jsx)(h.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,n.jsx)("div",{className:"width-full position-relative",children:(0,n.jsxs)(c.tL,{commands:{"github:submit-form":B},children:[(0,n.jsx)(p.Ay,{ref:w,className:"width-full",style:{paddingBottom:`${R}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:y,validationStatus:b||y.length>4e3?"error":void 0,...(0,o.G)("prompt-input"),onChange:e=>{v(e.target.value),S(void 0)}}),(0,n.jsx)(j,{ref:F,onSelect:O})]})}),(0,n.jsx)(E,{text:y,promptCharLimit:4e3}),b&&(0,n.jsx)(h.A.Validation,{variant:"error",children:(0,n.jsx)("span",{...(0,o.G)("error-message"),children:b})})]})})}),renderFooter:()=>(0,n.jsxs)("div",{className:"PersonalInstructionsDialog-module__footerContainer--T9wxr",children:[(0,n.jsx)(D.Q,{variant:"default",onClick:L,children:"Cancel"}),(0,n.jsx)(D.Q,{loading:N,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:k,children:"Save"})]})})})};function E(e){let t,a,s,i,l=(0,r.c)(10),{text:c,promptCharLimit:u}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G)("current-character-count"),l[0]=t):t=l[0],l[1]!==c.length?(a=(0,n.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),l[1]=c.length,l[2]=a):a=l[2],l[3]!==u||l[4]!==a?(s=(0,n.jsxs)(n.Fragment,{children:[a," ","/ ",u," characters"]}),l[3]=u,l[4]=a,l[5]=s):s=l[5];let d=s;return l[6]!==d||l[7]!==u||l[8]!==c.length?(i=(0,n.jsx)(n.Fragment,{children:c.length>u?(0,n.jsx)(h.A.Validation,{variant:"error",children:d}):(0,n.jsx)(h.A.Caption,{children:d})}),l[6]=d,l[7]=u,l[8]=c.length,l[9]=i):i=l[9],i}try{S.displayName||(S.displayName="PersonalInstructionsDialog")}catch{}try{E.displayName||(E.displayName="CharacterCount")}catch{}},90918:(e,t,a)=>{a.d(t,{g:()=>n});var s=a(61526);function n(){let{threadID:e}=(0,s.g)();return e??null}},91547:(e,t,a)=>{a.d(t,{E:()=>m,q:()=>d});var s=a(5225),n=a(25407),r=a(82591),i=a(96379),l=a(96540);async function o(e){let t=await (0,i.lS)(e);return t.ok?await t.json():void 0}let c=new Map,u=(0,s.A)(o,{cache:c});function d(){c.clear()}function m(e,t,a,s){let[i,o]=(0,l.useState)(),[c,m]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!0),D=t&&e&&a&&s?(0,n.IO9)({repo:{name:t,ownerLogin:e},commitish:a,action:"latest-commit",path:s}):null;return(0,l.useEffect)(()=>{let e=new AbortController;return document.addEventListener(r.z.START,d,{signal:e.signal}),()=>{e.abort()}},[]),(0,l.useEffect)(()=>{let e=!1;return(async()=>{if(!D)return;m(!1),p(!0),o(void 0);let t=await u(D);if(!e){try{t?o(t):m(!0)}catch{m(!0)}p(!1)}})(),function(){e=!0}},[D,a]),[i,h,c]}}},e=>{e.O(0,[3088,43934,82216,67733,62094,69676,913,6488,31475,48775,42892,23832,99418,30587,72471,55229,33915,4712,3086,82081,96537,51220,34542,28546,26744,40489,18312,347,89332,15874,45230,5298,5853,16007,55368,88324,43862,20382,60023,1376,68988,36511,39671,9288,25407,83494,83463,87670,40771,5168,66990,29665,4817,37294,2635,30721,99808,52302,81171,67071,84597,10422,78192,34522,16442,86247,34031,6623,44185,12077,20876,39837,47453,1460,97633,36183,42861,20166,33721,88508,98320,8939],()=>e(e.s=22580)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-55ffe40d8f93.js.map