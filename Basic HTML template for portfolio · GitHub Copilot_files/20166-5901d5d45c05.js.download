"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[20166],{1587:(e,t,n)=>{n.d(t,{K:()=>r,l:()=>a});let r={APPLY_PATCH:"apply_patch",STR_REPLACE_EDITOR:"str_replace_editor",STR_REPLACE:"str_replace",EDIT:"edit",CREATE:"create",VIEW:"view",INSERT:"insert",UNDO_EDIT:"undo_edit",BASH:"bash",WRITE_BASH:"write_bash",READ_BASH:"read_bash",STOP_BASH:"stop_bash",ASYNC_BASH:"async_bash",READ_ASYNC_BASH:"read_async_bash",STOP_ASYNC_BASH:"stop_async_bash",GREP:"grep",RG:"rg",GLOB:"glob",GITHUB_MCP_SERVER_WEB_SEARCH:"github-mcp-server-web_search",GITHUB_MCP_SERVER_BING_SEARCH:"github-mcp-server-bing_search",COMMIT_CHANGES:"commit_changes",CODE_REVIEW:"code_review",RUN_CUSTOM_SETUP_STEP:"run_custom_setup_step",RUN_SETUP:"run_setup",THINK:"think",SKILL:"skill",REPORT_PROGRESS:"report_progress",REPLY_TO_COMMENT:"reply_to_comment",PROPOSE_WORK:"propose_work"},a={[r.APPLY_PATCH]:{getTitle:e=>`Apply ${e} patches`,iconToolName:r.APPLY_PATCH},[r.STR_REPLACE_EDITOR]:{getTitle:e=>`Edit ${e} files`,iconToolName:r.EDIT},[r.STR_REPLACE]:{getTitle:e=>`Edit ${e} files`,iconToolName:r.EDIT},[r.EDIT]:{getTitle:e=>`Edit ${e} files`,iconToolName:r.EDIT},[r.CREATE]:{getTitle:e=>`Create ${e} files`,iconToolName:r.CREATE},[r.VIEW]:{getTitle:e=>`View ${e} files`,iconToolName:r.VIEW},[r.INSERT]:{getTitle:e=>`Insert at ${e} locations`,iconToolName:r.INSERT},[r.UNDO_EDIT]:{getTitle:e=>`Undo ${e} edits`,iconToolName:r.UNDO_EDIT},[r.BASH]:{getTitle:e=>`Run ${e} Bash commands`,iconToolName:r.BASH},[r.WRITE_BASH]:{getTitle:e=>`Write ${e} Bash commands`,iconToolName:r.BASH},[r.READ_BASH]:{getTitle:e=>`Read output of ${e} Bash commands`,iconToolName:r.BASH},[r.STOP_BASH]:{getTitle:e=>`Stop ${e} Bash commands`,iconToolName:r.BASH},[r.ASYNC_BASH]:{getTitle:e=>`Run ${e} async Bash commands`,iconToolName:r.BASH},[r.READ_ASYNC_BASH]:{getTitle:e=>`Read ${e} async command outputs`,iconToolName:r.BASH},[r.STOP_ASYNC_BASH]:{getTitle:e=>`Stop ${e} async Bash commands`,iconToolName:r.BASH},[r.GREP]:{getTitle:e=>`Search ${e} times`,iconToolName:r.GREP},[r.RG]:{getTitle:e=>`Search ${e} times`,iconToolName:r.GREP},[r.GLOB]:{getTitle:()=>"Find files",iconToolName:r.GLOB},[r.GITHUB_MCP_SERVER_WEB_SEARCH]:{getTitle:e=>`Web search ${e} times`,iconToolName:r.GREP},[r.GITHUB_MCP_SERVER_BING_SEARCH]:{getTitle:e=>`Web search ${e} times`,iconToolName:r.GREP},[r.COMMIT_CHANGES]:{getTitle:e=>`Commit ${e} changes`,iconToolName:r.COMMIT_CHANGES},[r.CODE_REVIEW]:{getTitle:e=>`Review ${e} changes`,iconToolName:r.CODE_REVIEW},[r.RUN_CUSTOM_SETUP_STEP]:{getTitle:()=>"Setting up environment",iconToolName:r.RUN_SETUP},[r.RUN_SETUP]:{getTitle:()=>"Setting up environment",iconToolName:r.RUN_SETUP},[r.THINK]:{getTitle:e=>`Thought ${e} times`,iconToolName:r.THINK},[r.SKILL]:{getTitle:e=>`Activate ${e} skills`,iconToolName:r.SKILL},[r.REPORT_PROGRESS]:{getTitle:e=>`${e} progress updates`,iconToolName:r.REPORT_PROGRESS},[r.REPLY_TO_COMMENT]:{getTitle:e=>`Reply to ${e} comments`,iconToolName:r.REPLY_TO_COMMENT},[r.PROPOSE_WORK]:{getTitle:e=>`${e} work proposals`,iconToolName:r.PROPOSE_WORK}}},7892:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(21728),a=n(97286);function s(e){let t,n,s,i,o,l=(0,r.c)(11),{sessions:c,initialData:d}=e;l[0]!==c?(t=c||[],l[0]=c,l[1]=t):t=l[1],l[2]!==t?(n=function(e){let t=new Set;for(let n of e)t.add(n.user_id);return Array.from(t).sort((e,t)=>e-t).join(",")}(t),l[2]=t,l[3]=n):n=l[3];let u=n;return l[4]!==u?(s=["agent-sessions-users",u],i=async()=>{let e=await fetch(`/copilot/agent-sessions/users?user_ids=${encodeURIComponent(u)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Failed to fetch session owners");return(await e.json()).users},l[4]=u,l[5]=s,l[6]=i):(s=l[5],i=l[6]),l[7]!==d||l[8]!==s||l[9]!==i?(o={queryKey:s,queryFn:i,initialData:d},l[7]=d,l[8]=s,l[9]=i,l[10]=o):o=l[10],(0,a.I)(o)}},9238:(e,t,n)=>{n.d(t,{E:()=>_});var r=n(74848),a=n(21728),s=n(38621),i=n(69726),o=n(21373),l=n(69599);let c="ToolHeader-module__summaryButtonMissionControl--MuMQb",d="ToolHeader-module__toggleIcon--Ym361",u="ToolHeader-module__text--SYGGt",m="ToolHeader-module__title--Uw_ur";var p=n(34164),g=n(16425),h=n(53419),f=n(45244);function _(e){let t,n,_,y,b,w,v,x,j,S=(0,a.c)(75),{leadingVisual:N,title:E,path:C,isCollapsed:T,isError:I,isPending:k,isInGroup:P,onModifierClick:R,hasChildren:A}=e,G=void 0!==I&&I,$=void 0!==k&&k,L=void 0!==P&&P,H=void 0===A||A,{variant:O,onToolExpand:B}=(0,g._$)();S[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G7)("mission_control_use_tool_header_icons"),S[0]=t):t=S[0];let W=t;S[1]!==T||S[2]!==R||S[3]!==B||S[4]!==E?(n=e=>{if(B?.(!!T),(e.altKey||e.metaKey)&&R)return e.preventDefault(),e.stopPropagation(),R(!!T),(0,h.BI)("agent_sessions.task_view",{target:"TOOL_HEADER_MODIFIER",action:T?"EXPAND_ALL":"COLLAPSE_ALL",tool_title:E}),!1;(0,h.BI)("agent_sessions.task_view",{target:"TOOL_HEADER",action:T?"EXPAND":"COLLAPSE",tool_title:E})},S[1]=T,S[2]=R,S[3]=B,S[4]=E,S[5]=n):n=S[5];let M=n;if("mission-control"===O){let e,t,n,a,o,l,g,h,f;S[6]!==N?(e=W&&(0,r.jsx)("span",{className:"ToolHeader-module__leadingVisualContainer--kLSVd",children:N}),S[6]=N,S[7]=e):e=S[7],S[8]!==T?(t=!W&&(0,r.jsx)(s.ChevronRightIcon,{size:12,className:d,"data-expanded":!T,"aria-hidden":"true"}),S[8]=T,S[9]=t):t=S[9];let _=!0===L,y=!0!==L;return S[10]!==y||S[11]!==_?(n=(0,p.$)({"ToolHeader-module__titleInGroup--yfBDP":_,[m]:y}),S[10]=y,S[11]=_,S[12]=n):n=S[12],S[13]!==n||S[14]!==E?(a=(0,r.jsx)("span",{className:n,children:E}),S[13]=n,S[14]=E,S[15]=a):a=S[15],S[16]!==C?(o=C&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("span",{className:"ToolHeader-module__path--IbYwi",children:C})]}),S[16]=C,S[17]=o):o=S[17],S[18]!==a||S[19]!==o?(l=(0,r.jsxs)("span",{className:u,children:[a,o]}),S[18]=a,S[19]=o,S[20]=l):l=S[20],S[21]!==$?(g=$&&(0,r.jsx)("div",{className:"ToolHeader-module__spinnerContainer--Fe4p_",children:(0,r.jsx)(i.A,{size:"small"})}),S[21]=$,S[22]=g):g=S[22],S[23]!==T?(h=W&&(0,r.jsx)(s.ChevronRightIcon,{size:12,className:d,"data-expanded":!T}),S[23]=T,S[24]=h):h=S[24],S[25]!==M||S[26]!==l||S[27]!==g||S[28]!==h||S[29]!==e||S[30]!==t?(f=(0,r.jsxs)("summary",{className:c,onClick:M,children:[e,t,l,g,h]}),S[25]=M,S[26]=l,S[27]=g,S[28]=h,S[29]=e,S[30]=t,S[31]=f):f=S[31],f}if("chat"===O){let e,t,n,a,i,o,l,g=!H;S[32]!==g?(e=(0,p.$)(c,{"ToolHeader-module__nonInteractive--QyePc":g}),S[32]=g,S[33]=e):e=S[33];let h=H?M:void 0,_=!H;S[34]!==H||S[35]!==T?(t=H?(0,r.jsx)(s.ChevronRightIcon,{size:12,className:d,"data-expanded":!T}):(0,r.jsx)(s.DotFillIcon,{size:12,className:"ToolHeader-module__bulletIcon--LOz1S"}),S[34]=H,S[35]=T,S[36]=t):t=S[36];let y=$?"ToolHeader-module__textWithShimmer--gfMkb":u;return S[37]!==$||S[38]!==E?(n=$&&(0,r.jsx)(f.b,{className:"ToolHeader-module__titleWithShimmer--EUw3f",children:E}),S[37]=$,S[38]=E,S[39]=n):n=S[39],S[40]!==$||S[41]!==E?(a=!$&&(0,r.jsx)("span",{className:m,children:E}),S[40]=$,S[41]=E,S[42]=a):a=S[42],S[43]!==y||S[44]!==n||S[45]!==a||S[46]!==E?(i=(0,r.jsxs)("span",{className:y,title:E,children:[n,a]}),S[43]=y,S[44]=n,S[45]=a,S[46]=E,S[47]=i):i=S[47],S[48]!==G?(o=G&&(0,r.jsx)(s.AlertIcon,{size:16,className:"color-fg-attention flex-shrink-0"}),S[48]=G,S[49]=o):o=S[49],S[50]!==_||S[51]!==t||S[52]!==i||S[53]!==o||S[54]!==e||S[55]!==h?(l=(0,r.jsxs)("summary",{className:e,onClick:h,"aria-disabled":_,children:[t,i,o]}),S[50]=_,S[51]=t,S[52]=i,S[53]=o,S[54]=e,S[55]=h,S[56]=l):l=S[56],l}S[57]===Symbol.for("react.memo_cache_sentinel")?(_=(0,p.$)("Button","ToolHeader-module__summaryButton--yGhGb"),S[57]=_):_=S[57];let D=!T;return S[58]!==T?(y=T?(0,r.jsx)(s.ChevronRightIcon,{}):(0,r.jsx)(s.ChevronDownIcon,{}),S[58]=T,S[59]=y):y=S[59],S[60]!==G?(b=G?(0,r.jsx)(s.AlertIcon,{size:16,className:"color-fg-attention flex-shrink-0"}):null,S[60]=G,S[61]=b):b=S[61],S[62]!==E?(w=(0,r.jsx)("span",{className:"overflow-hidden text-truncate flex-1",children:E}),S[62]=E,S[63]=w):w=S[63],S[64]!==C?(v=C&&(0,r.jsx)("span",{className:"text-mono fgColor-default",children:C}),S[64]=C,S[65]=v):v=S[65],S[66]!==w||S[67]!==v?(x=(0,r.jsxs)(r.Fragment,{children:[w," ",v]}),S[66]=w,S[67]=v,S[68]=x):x=S[68],S[69]!==M||S[70]!==b||S[71]!==x||S[72]!==D||S[73]!==y?(j=(0,r.jsx)(o.Q,{as:"summary",block:!0,className:_,alignContent:"start","aria-expanded":D,"aria-labelledby":"tool-header-title",leadingVisual:y,trailingVisual:b,onClick:M,children:x}),S[69]=M,S[70]=b,S[71]=x,S[72]=D,S[73]=y,S[74]=j):j=S[74],j}try{_.displayName||(_.displayName="ToolHeader")}catch{}},10701:(e,t,n)=>{function r(e){let t=e.artifacts?.find(e=>"github"===e.provider);if(!t)return null;let n=e.agent_collaborators?.[0]?.agent_id?.toString();return{resource_type:t.data.type,resource_id:t.data.id,resource_global_id:t.data.global_id,session_count:e.session_count,latest_session_state:e.status,latest_session_updated_at:e.last_updated_at,agentId:n}}function a(e){return e.map(r).filter(e=>null!==e)}function s(e,t){let n=e.map(e=>{let n=t.find(t=>e.event_identifiers?.includes(t.clientGeneratedId));return{...e,isOptimistic:!!n,...n&&{problemStatement:n.problemStatement,nwo:n.nwo,baseRef:n.baseRef,clientGeneratedId:n.clientGeneratedId}}}),r=t.filter(e=>!n.some(t=>t.event_identifiers?.includes(e.clientGeneratedId)));return i([...n,...r])}function i(e){return[...e].sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}n.d(t,{HG:()=>r,Mv:()=>i,Qm:()=>a,v_:()=>s})},12385:(e,t,n)=>{n.d(t,{l:()=>m});var r=n(74848),a=n(21728),s=n(96540),i=n(21373),o=n(38621),l=n(67154),c=n(44296),d=n(42455),u=n(51120);function m(e){let t,n,m,p,g,h,f,_=(0,a.c)(23),{nwo:y,currentUserCanPush:b,variant:w,onStoppingStateChange:v,loading:x}=e,{session:j}=(0,c.Lg)(),[S,N]=(0,s.useState)(!1),E=[l.Yj.InProgress,l.Yj.Idle,l.Yj.WaitingForUser].includes(j.state)&&!S;_[0]!==y||_[1]!==j.id?(t={queryKey:["stopSession",y,j.id],queryFn:async()=>await (0,u.I)({path:`/agents/swe/jobs/${y}/session/${j.id}/cancel`,method:"POST"}),enabled:!1,retry:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1},_[0]=y,_[1]=j.id,_[2]=t):t=_[2];let C=(0,d.b)(t);_[3]!==C.isLoading||_[4]!==C.isSuccess?(n=()=>{C.isSuccess&&!C.isLoading&&N(!0)},m=[C.isSuccess,C.isLoading],_[3]=C.isLoading,_[4]=C.isSuccess,_[5]=n,_[6]=m):(n=_[5],m=_[6]),(0,s.useEffect)(n,m);let T=C.isFetching||C.isLoading,I=T?"Stopping session...":"Stop session";_[7]!==C?(p=()=>C.refetch(),_[7]=C,_[8]=p):p=_[8];let k=p;_[9]!==v||_[10]!==T?(g=()=>{v?.(T)},h=[T,v],_[9]=v,_[10]=T,_[11]=g,_[12]=h):(g=_[11],h=_[12]),(0,s.useEffect)(g,h);let P=x??T,R=P?"":"Stop";if("icon-text-button"===(void 0===w?"button":w)){let e;return _[13]!==k||_[14]!==R||_[15]!==P||_[16]!==T?(e=(0,r.jsx)(i.Q,{leadingVisual:o.SquareCircleIcon,"aria-label":"Stop session",variant:"invisible",size:"small",onClick:k,"aria-disabled":T,loading:P,children:R}),_[13]=k,_[14]=R,_[15]=P,_[16]=T,_[17]=e):e=_[17],e}return y&&b&&E?(_[18]!==I||_[19]!==k||_[20]!==P||_[21]!==T?(f=(0,r.jsx)(i.Q,{className:"mr-2",leadingVisual:o.SquareFillIcon,variant:"danger",onClick:k,loading:P,loadingAnnouncement:"Stopping session","aria-disabled":T,children:I}),_[18]=I,_[19]=k,_[20]=P,_[21]=T,_[22]=f):f=_[22],f):null}try{m.displayName||(m.displayName="SessionStopButton")}catch{}},15759:(e,t,n)=>{n.d(t,{i:()=>r});function r(e){try{let t=e.replace("/home/runner/work/","").split("/").slice(2).join("/");return t.length>0?t:void 0}catch{return e}}},16425:(e,t,n)=>{n.d(t,{$X:()=>l,_$:()=>o});var r=n(74848),a=n(21728),s=n(96540);let i=(0,s.createContext)({variant:"default",onToolExpand:null,session:null,sessionNwo:null});function o(){return(0,s.useContext)(i)}function l(e){let t,n,s=(0,a.c)(8),{variant:o,onToolExpand:l,session:c,sessionNwo:d,children:u}=e,m=void 0===l?null:l,p=void 0===c?null:c,g=void 0===d?null:d;s[0]!==m||s[1]!==p||s[2]!==g||s[3]!==o?(t={variant:o,onToolExpand:m,session:p,sessionNwo:g},s[0]=m,s[1]=p,s[2]=g,s[3]=o,s[4]=t):t=s[4];let h=t;return s[5]!==u||s[6]!==h?(n=(0,r.jsx)(i.Provider,{value:h,children:u}),s[5]=u,s[6]=h,s[7]=n):n=s[7],n}try{i.displayName||(i.displayName="SessionLogsContext")}catch{}try{l.displayName||(l.displayName="SessionLogsProvider")}catch{}},17816:(e,t,n)=>{n.d(t,{S:()=>i});var r=n(74848),a=n(38621),s=n(1587);function i(e=""){switch(e){case s.K.APPLY_PATCH:return(0,r.jsx)(a.FileDiffIcon,{className:"fgColor-attention","aria-label":"File Edit: "});case s.K.BASH:return(0,r.jsx)(a.TerminalIcon,{"aria-label":"CLI output: "});case s.K.THINK:return(0,r.jsx)(a.LightBulbIcon,{"aria-label":"Copilot Thought: "});case s.K.STR_REPLACE_EDITOR:case s.K.STR_REPLACE:case s.K.EDIT:return(0,r.jsx)(a.FileDiffIcon,{className:"fgColor-attention","aria-label":"File Edit: "});case s.K.CREATE:return(0,r.jsx)(a.FileAddedIcon,{className:"fgColor-success","aria-label":"File Creation: "});case s.K.VIEW:return(0,r.jsx)(a.FileIcon,{"aria-label":"File View: "});case s.K.GREP:case s.K.RG:return(0,r.jsx)(a.SearchIcon,{"aria-label":"Search: "});case s.K.GLOB:return(0,r.jsx)(a.FileDirectoryIcon,{"aria-label":"Find files: "});case s.K.RUN_CUSTOM_SETUP_STEP:case s.K.RUN_SETUP:return(0,r.jsx)(a.CodespacesIcon,{"aria-label":"Custom Setup Run: "});case s.K.PROPOSE_WORK:return(0,r.jsx)(a.TasklistIcon,{"aria-label":"Propose Work: "});case s.K.REPORT_PROGRESS:case s.K.REPLY_TO_COMMENT:default:return(0,r.jsx)(a.DotFillIcon,{size:12,"aria-label":"Tool output: "})}}},24939:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(74848),a=n(21728),s=n(96540);function i(e,t){let n=new Date(e).getTime(),r=Math.floor(((t&&"0001-01-01T00:00:00Z"!==t?new Date(t).getTime():Date.now())-n)/1e3),a=[{value:Math.floor(r/86400),label:"d"},{value:Math.floor(r%86400/3600),label:"h"},{value:Math.floor(r%3600/60),label:"m"},{value:r%60,label:"s"}].filter(e=>e.value>0);return 0===a.length?"0s":1===a.length?`${a[0]?.value??0}${a[0]?.label??""}`:a[1]?`${a[0]?.value}${a[0]?.label} ${a[1].value}${a[1].label??""}`:`${a[0]?.value??0}${a[0]?.label??""}`}var o=n(67154);function l(e){let t,n,l,c,d=(0,a.c)(10),{createdAt:u,completedAt:m,state:p}=e;d[0]!==m||d[1]!==u?(t=()=>i(u,m),d[0]=m,d[1]=u,d[2]=t):t=d[2];let[g,h]=(0,s.useState)(t);return d[3]!==m||d[4]!==u||d[5]!==p?(n=()=>{if(h(i(u,m)),p===o.Yj.InProgress||p===o.Yj.Queued){let e=setInterval(()=>{h(i(u,m))},500);return()=>clearInterval(e)}},l=[u,m,p],d[3]=m,d[4]=u,d[5]=p,d[6]=n,d[7]=l):(n=d[6],l=d[7]),(0,s.useEffect)(n,l),d[8]!==g?(c=(0,r.jsx)("time",{"aria-live":"off",className:"text-tabular-nums",children:g}),d[8]=g,d[9]=c):c=d[9],c}let c=l;try{l.displayName||(l.displayName="SessionElapsedTime")}catch{}},27566:(e,t,n)=>{n.d(t,{A:()=>r});function r(e,t){if(null!=e&&null!=t)return`/${e}/actions/runs/${t}`}},34001:(e,t,n)=>{n.d(t,{t:()=>p});var r=n(42455),a=n(67154),s=n(78314),i=n(51120),o=n(96540),l=n(61526),c=n(97665),d=n(58612),u=n(69599),m=n(46747);function p({pullId:e,initialData:t,sessionsPollingInterval:n}){let p=(0,s.t)(),[g,h]=(0,o.useState)(0),[f,_]=(0,o.useState)(!1),y=(0,l.g)(),[b]=(0,l.ok)(),w=b.get("session_id"),v=y.session_id||w,x=(0,o.useRef)(!0),j=(0,c.jE)(),S=(0,u.G7)("copilot_agent_sessions_alive_updates"),N=(0,o.useCallback)(()=>{j.invalidateQueries({queryKey:["agent-sessions",p.ownerLogin,p.name,e]})},[j,p.ownerLogin,p.name,e]),E=(0,m.d)(N,n,{maxWait:1e4});return(0,d.N)({onEvent:E,enableCreateEvents:!1,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:S}),{...(0,r.b)({queryKey:["agent-sessions",p.ownerLogin,p.name,e],queryFn:async()=>{try{let t=[];if(x.current){let n=await (0,i.I)({path:`/agents/sessions/resource/pull/${e}`}),r=(t=(await n.json()).sessions).some(e=>e.id===v);(0===t.length||v&&!r)&&(x.current=!1)}if(!x.current){let e=await (0,i.I)({path:`/agents/sessions/${v}`}),n=await e.json();n&&n.id&&(t=[n])}return h(0),_(!1),t.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}catch(e){throw h(e=>{let t=e+1;return t>=10&&_(!0),t}),e}},initialData:t,refetchInterval:e=>{if(S)return!1;let t=e.state.data;return t?t.some(e=>e.state===a.Yj.InProgress||e.state===a.Yj.Idle||e.state===a.Yj.WaitingForUser||e.state===a.Yj.Queued)?n:10*n:n},enabled:g<10}),timedOut:f,isRetrying:g>0&&!f}}},44296:(e,t,n)=>{n.d(t,{Lg:()=>o,PS:()=>l});var r=n(74848),a=n(21728),s=n(96540);let i=(0,s.createContext)(void 0);function o(){let e=(0,s.useContext)(i);if(!e)throw Error("useSessionContext must be used within a SessionContextProvider");return e}function l(e){let t,n,o,l=(0,a.c)(10),{session:c,sessionOwner:d,logs:u,logsAreLoading:m,children:p}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0];let[g,h]=(0,s.useState)(t);l[1]!==u||l[2]!==m||l[3]!==g||l[4]!==c||l[5]!==d?(n={session:c,sessionOwner:d,logs:u,logsAreLoading:m,mcpToolNameMappings:g,setMcpToolNameMappings:h},l[1]=u,l[2]=m,l[3]=g,l[4]=c,l[5]=d,l[6]=n):n=l[6];let f=n;return l[7]!==p||l[8]!==f?(o=(0,r.jsx)(i.Provider,{value:f,children:p}),l[7]=p,l[8]=f,l[9]=o):o=l[9],o}try{i.displayName||(i.displayName="SessionContext")}catch{}try{l.displayName||(l.displayName="SessionContextProvider")}catch{}},47865:(e,t,n)=>{n.d(t,{Z:()=>u,c:()=>CreateJobError});var r=n(50467),a=n(21728),s=n(97665),i=n(94747),o=n(51120),l=n(55899),c=n(93654),d=n(53419);let CreateJobError=class CreateJobError extends Error{constructor(e){let t,n;switch(e&&"object"==typeof e&&"status"in e&&"number"==typeof e.status&&(t=e.status),t){case 0:n="Network error. Please check your connection and try again.";break;case 400:n="We couldn't start the task with the information provided. Please verify your input and try again.";break;case 401:n="You don't have permission to create a pull request in this repository.";break;case 402:n="You've run out of Copilot premium quota for automated changes.";break;case 403:n="The Coding Agent isn't available for this repository or organization.";break;case 404:n="We couldn't find the repository or resource needed to create the pull request. If this is a new repository, make sure it has at least one commit.";break;case 409:n="A pull request already exists for these branches.";break;case 422:n="A repository rule blocked automatic branch or PR creation.";break;default:n="An unexpected error occurred. Please try again."}super(n,{cause:e}),(0,r._)(this,"status",void 0),this.name="CreateJobError",this.status=t}};function u(e){let t,n,r,o,d,u,p,g=(0,a.c)(21),{onError:h,queryKey:f}=e,_=void 0===f?c.ZL:f,y=(0,s.jE)();g[0]===Symbol.for("react.memo_cache_sentinel")?(t=["createTask"],g[0]=t):t=g[0],g[1]!==y||g[2]!==_?(n=async e=>{await y.cancelQueries({queryKey:_});let t=y.getQueryData(_)??[],n=function({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,eventType:a,selectedAgent:s}){return{resource_type:"pull",resource_id:-1,resource_global_id:"",session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:a,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,custom_agent:s?.subAgentSlug,agentId:s?.topLevelAgentId}}(e);return y.setQueryData(_,[n,...t]),{previousTasks:t}},g[1]=y,g[2]=_,g[3]=n):n=g[3],g[4]!==h||g[5]!==y||g[6]!==_?(r=(e,t)=>{let n=(y.getQueryData(_)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);y.setQueryData(_,n),h?.(e,t)},g[4]=h,g[5]=y,g[6]=_,g[7]=r):r=g[7],g[8]!==y||g[9]!==_?(o=()=>{y.invalidateQueries({queryKey:_})},g[8]=y,g[9]=_,g[10]=o):o=g[10],g[11]!==n||g[12]!==r||g[13]!==o?(d={mutationKey:t,onMutate:n,mutationFn:m,onError:r,onSuccess:o},g[11]=n,g[12]=r,g[13]=o,g[14]=d):d=g[14];let b=(0,i.n)(d);g[15]!==b?(u=(e,t)=>{let n=t??(0,l.u)();b.mutate({...e,clientGeneratedId:n})},g[15]=b,g[16]=u):u=g[16];let w=u;return g[17]!==w||g[18]!==b.error||g[19]!==b.isPending?(p={createTask:w,isCreating:b.isPending,createError:b.error},g[17]=w,g[18]=b.error,g[19]=b.isPending,g[20]=p):p=g[20],p}async function m(e){(0,d.BI)("copilot.agent_session.job_creation_requested",{event_identifiers:e.clientGeneratedId,event_type:e.eventType,nwo:e.nwo});let t=await p({...e,title:e.title??e.problemStatement});if(!t.ok)throw(0,d.BI)("copilot.agent_session.job_creation_failed",{event_identifiers:e.clientGeneratedId,event_type:e.eventType,nwo:e.nwo,status:t.status,error:t.statusText}),Error(`Failed to create task: ${e.clientGeneratedId}`);let n=await t.json();return(0,d.BI)("copilot.agent_session.job_creation_completed",{event_identifiers:e.clientGeneratedId,event_type:e.eventType,nwo:e.nwo,session_id:n.session_id,job_id:n.job_id}),e.clientGeneratedId}async function p({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,eventType:a,eventContent:s,title:i,reference:l,selectedAgent:c,modelId:d,createPullRequest:u}){let m=`/agents/swe/jobs/${t}`,p=l?`On ${l}, `:"";try{return await (0,o.I)({path:m,method:"POST",body:{problem_statement:p+n,event_identifiers:[e],event_type:a,event_content:s,custom_agent:c?.subAgentSlug,...d&&{model:d},agent_id:c?.topLevelAgentId,features:!1===u?{branch:{...r&&{base_ref:`refs/heads/${r}`}}}:{pull_request:{...r&&{base_ref:`refs/heads/${r}`},...i&&{title:i}}}}})}catch(e){if(e instanceof o.Y)throw new CreateJobError(e);throw e}}},55899:(e,t,n)=>{n.d(t,{u:()=>r});function r(){return crypto.randomUUID()}},55910:(e,t,n)=>{n.d(t,{NL:()=>et,cD:()=>en,sr:()=>K});var r=n(74848),a=n(21728),s=n(4817),i=n(9238),o=n(85094),l=n(96540);function c(e){let t,n,s,i,o,c=(0,a.c)(12),{bashLoading:d,children:u}=e,m=(0,l.useId)(),[p,g]=(0,l.useState)("|");return c[0]!==d?(t=()=>{let e;if(d){let t=["|","/","-","\\"],n=0;e=setInterval(()=>{n=(n+1)%t.length,g(t[n]||"|")},250)}else g("|");return()=>clearInterval(e)},n=[d],c[0]=d,c[1]=t,c[2]=n):(t=c[1],n=c[2]),(0,l.useEffect)(t,n),c[3]!==d||c[4]!==p?(s=d&&(0,r.jsx)("span",{children:p}),c[3]=d,c[4]=p,c[5]=s):s=c[5],c[6]!==u||c[7]!==s?(i=(0,r.jsx)("div",{className:"ToolCodeBlock-module__codeContainer--V645Q",children:(0,r.jsx)("pre",{className:"ToolCodeBlock-module__code--ITGLQ",tabIndex:0,children:(0,r.jsxs)("code",{className:"ToolCodeBlock-module__codeWrap--mnqde",children:[u,s]})})}),c[6]=u,c[7]=s,c[8]=i):i=c[8],c[9]!==m||c[10]!==i?(o=(0,r.jsx)("figure",{className:"ToolCodeBlock-module__container--D9MMx","aria-labelledby":m,children:i}),c[9]=m,c[10]=i,c[11]=o):o=c[11],o}try{c.displayName||(c.displayName="ToolCodeBlock")}catch{}var d=n(47970);let u="data-tool-codeblock-props",m=(0,o.F)(u),p={code:(e,t)=>{let n=(0,o.k)(e,u);return n?(0,r.jsx)(c,{...n,children:e.children}):t}};function g(e={}){let{bashLoading:t}=e;return{transformMarkdown:e=>(0,d.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[m]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1,bashLoading:!!t})}}}),transformHtml:e=>(0,d.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&"code"===r.tagName&&m in r.properties&&n.children.splice(t,1,r)}),reactComponents:p}}var h=n(17816),f=n(1587),_=n(98552),y=n(46251),b=n(40090),w=n(15759);let v="Tool-module__detailsContainer--QPsTQ",x="Tool-module__diffPreview--xgOwZ";var j=n(34164),S=n(16425),N=n(69599),E=n(66358);function C(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,e=>t[e]??e)}function T(e){let t=e.split(`
`),n=[],r=0,a=0;for(let e of t)if(e.startsWith("@@")){let t=e.match(/@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@/);t&&t[1]&&t[2]&&(r=parseInt(t[1],10),a=parseInt(t[2],10)),n.push({type:E.w$.Hunk,left:null,right:null,html:C(e),text:e})}else if(e.startsWith("+")&&!e.startsWith("+++")){let t=e.slice(1);n.push({type:E.w$.Addition,left:null,right:a++,html:C(t),text:t})}else if(e.startsWith("-")&&!e.startsWith("---")){let t=e.slice(1);n.push({type:E.w$.Deletion,left:r++,right:null,html:C(t),text:t})}else if(e.startsWith(" ")){let t=e.slice(1);n.push({type:E.w$.Context,left:r++,right:a++,html:C(t),text:t})}return n}var I=n(98091),k=n(91747),P=n(15220),R=n(21373),A=n(69726),G=n(38621),$=n(47865),L=n(54571),H=n(60284);function O(e){let t,n,i,o,c,d,u,m,p,g,h,f,_,y,b,w,v,x=(0,a.c)(49),{title:j,description:N,type:E}=e;x[0]===Symbol.for("react.memo_cache_sentinel")?(t={},x[0]=t):t=x[0];let{createTask:C,isCreating:T}=(0,$.Z)(t),{session:I,sessionNwo:k}=(0,S._$)(),[R,A]=(0,l.useState)(!1),[O,M]=(0,l.useState)(!1);x[1]===Symbol.for("react.memo_cache_sentinel")?(n=[],x[1]=n):n=x[1];let[D]=(0,L.I)(B,!0,n);x[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{M(!1)},x[2]=i):i=x[2];let F=i;x[3]!==C||x[4]!==N||x[5]!==T||x[6]!==R||x[7]!==k||x[8]!==j||x[9]!==E?(o=e=>{e.preventDefault(),R||T||!k||(C({title:j,problemStatement:N,eventType:"propose_work",eventContent:`Proposed work: ${j}`,nwo:k,createPullRequest:"code_change"===E}),A(!0))},x[3]=C,x[4]=N,x[5]=T,x[6]=R,x[7]=k,x[8]=j,x[9]=E,x[10]=o):o=x[10];let q=o;x[11]!==C||x[12]!==j||x[13]!==E?(c=async(e,t,n,r,a,s,i)=>{t&&(C({title:j,problemStatement:e,eventType:"propose_work",eventContent:`Proposed work: ${j}`,nwo:t.nameWithOwner,baseRef:n,selectedAgent:r,modelId:s,createPullRequest:i??"code_change"===E}),A(!0),F())},x[11]=C,x[12]=j,x[13]=E,x[14]=c):c=x[14];let U=c;x[15]!==k?(d=k?k.split("/"):[null,null],x[15]=k,x[16]=d):d=x[16];let[K,V]=d;x[17]!==K||x[18]!==V||x[19]!==I||x[20]!==k?(u=k&&V&&K&&I?.repo_id?{nameWithOwner:k,name:V,ownerLogin:K,id:I.repo_id}:void 0,x[17]=K,x[18]=V,x[19]=I,x[20]=k,x[21]=u):u=x[21];let Y=u;return x[22]!==N||x[23]!==U||x[24]!==Y||x[25]!==O||x[26]!==D?(m=O&&!D&&(0,r.jsx)(P.l,{title:"Start a task",onClose:F,position:{narrow:"fullscreen"},children:(0,r.jsx)(P.l.Body,{className:"p-2",children:(0,r.jsx)(H.Q,{isInPortal:!0,initialText:N,handleUserSubmit:U,initialRepo:Y,eventType:"propose_work"})})}),x[22]=N,x[23]=U,x[24]=Y,x[25]=O,x[26]=D,x[27]=m):m=x[27],x[28]!==j?(p=(0,r.jsx)("h3",{className:"h4",children:j}),x[28]=j,x[29]=p):p=x[29],x[30]===Symbol.for("react.memo_cache_sentinel")?(g=()=>M(!0),x[30]=g):g=x[30],x[31]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("button",{type:"button",className:"ToolProposeWork-module__expandButton--NZiHJ",onClick:g,"aria-label":"Edit task",children:(0,r.jsx)(G.MaximizeIcon,{})}),x[31]=h):h=x[31],x[32]!==T||x[33]!==R?(f=(0,r.jsx)(W,{isCreating:T,isStarted:R}),x[32]=T,x[33]=R,x[34]=f):f=x[34],x[35]!==q||x[36]!==f?(_=(0,r.jsxs)("div",{className:"ToolProposeWork-module__buttonsContainer--TxH3V",children:[h,(0,r.jsx)("form",{onSubmit:q,className:"ToolProposeWork-module__startTaskButton--jzOme",children:f})]}),x[35]=q,x[36]=f,x[37]=_):_=x[37],x[38]!==_||x[39]!==p?(y=(0,r.jsxs)("div",{className:"ToolProposeWork-module__titleContainer--vgBKL",children:[p,_]}),x[38]=_,x[39]=p,x[40]=y):y=x[40],x[41]!==N?(b=(0,r.jsx)("div",{className:"ToolProposeWork-module__descriptionContainer--SNVoI",children:(0,r.jsx)(s.To,{markdown:N})}),x[41]=N,x[42]=b):b=x[42],x[43]!==y||x[44]!==b?(w=(0,r.jsxs)("div",{className:"ToolProposeWork-module__container--FXuyj",children:[y,b]}),x[43]=y,x[44]=b,x[45]=w):w=x[45],x[46]!==w||x[47]!==m?(v=(0,r.jsxs)(r.Fragment,{children:[m,w]}),x[46]=w,x[47]=m,x[48]=v):v=x[48],v}function B(){return!1}function W(e){let t,n,s=(0,a.c)(7),{isCreating:i,isStarted:o}=e;e:{let e;if(i){let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e=["Creating...",M],s[0]=e):e=s[0],t=e;break e}if(o){let e;s[1]===Symbol.for("react.memo_cache_sentinel")?(e=["Task started",G.CheckCircleIcon],s[1]=e):e=s[1],t=e;break e}s[2]===Symbol.for("react.memo_cache_sentinel")?(e=["Start task",G.PlayIcon],s[2]=e):e=s[2],t=e}let[l,c]=t,d=i||o;return s[3]!==c||s[4]!==d||s[5]!==l?(n=(0,r.jsx)(R.Q,{type:"submit",leadingVisual:c,inactive:d,children:l}),s[3]=c,s[4]=d,s[5]=l,s[6]=n):n=s[6],n}function M(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(A.A,{size:"small",srText:"Starting task\u2026"}),t[0]=e):e=t[0],e}try{O.displayName||(O.displayName="ToolProposeWork")}catch{}try{W.displayName||(W.displayName="StartTaskButton")}catch{}try{M.displayName||(M.displayName="ButtonSpinner")}catch{}let D=({language:e,markdown:t})=>t?`~~~${e}
${t}
~~~`:`~~~
Nothing to display
~~~`;function F(e,t=1e5){return!e||e.length<=t?{markdown:e}:{markdown:e.slice(0,t)+`

\u{26A0}\u{FE0F} **Output truncated**`}}let q="Review changes with Copilot code review",U={"playwright-browser_navigate":"Navigate Playwright web browser to a URL","playwright-browser_navigate_back":"Navigate back in Playwright web browser","playwright-browser_navigate_forward":"Navigate forward in Playwright web browser","playwright-browser_click":"Click element in Playwright web browser","playwright-browser_take_screenshot":"Take screenshot of Playwright web browser","playwright-browser_type":"Type in Playwright web browser","playwright-browser_wait_for":"Wait for text to appear/disappear in Playwright web browser","playwright-browser_evaluate":"Run JavaScript in Playwright web browser","playwright-browser_snapshot":"Take snapshot of page in Playwright web browser","playwright-browser_resize":"Resize Playwright web browser window","playwright-browser_close":"Close Playwright web browser","playwright-browser_press_key":"Press key in Playwright web browser","playwright-browser_select_option":"Select option in Playwright web browser","playwright-browser_handle_dialog":"Interact with dialog in Playwright web browser","playwright-browser_console_messages":"Get console messages from Playwright web browser","playwright-browser_drag":"Drag mouse between elements in Playwright web browser","playwright-browser_file_upload":"Upload file in Playwright web browser","playwright-browser_hover":"Hover mouse over element in Playwright web browser","playwright-browser_network_requests":"Get network requests from Playwright web browser","github-mcp-server-get_file_contents":"Get file contents from GitHub","github-mcp-server-get_pull_request":"Get pull request from GitHub","github-mcp-server-get_issue":"Get issue from GitHub","github-mcp-server-get_pull_request_files":"Get pull request changed files from GitHub","github-mcp-server-list_pull_requests":"List pull requests on GitHub","github-mcp-server-list_branches":"List branches on GitHub","github-mcp-server-get_pull_request_diff":"Get pull request diff from GitHub","github-mcp-server-get_pull_request_comments":"Get pull request comments from GitHub","github-mcp-server-get_commit":"Get commit from GitHub","github-mcp-server-search_repositories":"Search repositories on GitHub","github-mcp-server-search_code":"Search code on GitHub","github-mcp-server-get_issue_comments":"Get issue comments from GitHub","github-mcp-server-list_issues":"List issues on GitHub","github-mcp-server-search_pull_requests":"Search pull requests on GitHub","github-mcp-server-list_commits":"List commits on GitHub","github-mcp-server-get_pull_request_status":"Get pull request status from GitHub","github-mcp-server-search_issues":"Search issues on GitHub","github-mcp-server-get_pull_request_reviews":"Get pull request reviews from GitHub","github-mcp-server-download_workflow_run_artifact":"Download GitHub Actions workflow run artifact","github-mcp-server-get_job_logs":"Get GitHub Actions job logs","github-mcp-server-get_workflow_run":"Get GitHub Actions workflow run","github-mcp-server-get_workflow_run_logs":"Get GitHub Actions workflow run logs","github-mcp-server-get_workflow_run_usage":"Get GitHub Actions workflow usage","github-mcp-server-list_workflow_jobs":"List GitHub Actions workflow jobs","github-mcp-server-list_workflow_run_artifacts":"List GitHub Actions workflow run artifacts","github-mcp-server-list_workflow_runs":"List GitHub Actions workflow runs","github-mcp-server-list_workflows":"List GitHub Actions workflows","gh-advisory-database":"Check new dependencies against the GitHub Advisory Database",codeql_checker:"Run CodeQL security scan on changed files",code_review:q};function K(e){let t,n=(0,a.c)(373),{name:s,delta:o,args:l,mcpToolNameMappings:c,isInGroup:d}=e,u=(0,k.u)("copilot_swe_agent_progress_commands");n[0]!==d||n[1]!==s?(t=d?void 0:(0,h.S)(s),n[0]=d,n[1]=s,n[2]=t):t=n[2];let m=t;switch(s){case f.K.BASH:{let e,t,a,s,i=`$ ${l.command}`,c=d?l.description||l.command:l.description?`Bash: ${l.description}`:"Run Bash command";n[3]!==o.content?(e=es(o.content),n[3]=o.content,n[4]=e):e=n[4];let{isError:u,content:p}=e,g=void 0===p;n[5]!==m?(t={leadingVisual:m},n[5]=m,n[6]=t):t=n[6];let h=l.command?.startsWith("git diff")?"diff":"bash",f=`${i}${p?`
${p}`:""}`;return n[7]!==g||n[8]!==h||n[9]!==f?(a=(0,r.jsx)(en,{language:h,markdown:f,bashLoading:g}),n[7]=g,n[8]=h,n[9]=f,n[10]=a):a=n[10],n[11]!==u||n[12]!==d||n[13]!==g||n[14]!==t||n[15]!==a||n[16]!==c?(s=(0,r.jsx)(et,{title:c,isError:u,isPending:g,isInGroup:d,toolHeaderProps:t,children:a}),n[11]=u,n[12]=d,n[13]=g,n[14]=t,n[15]=a,n[16]=c,n[17]=s):s=n[17],s}case f.K.GITHUB_MCP_SERVER_WEB_SEARCH:case f.K.GITHUB_MCP_SERVER_BING_SEARCH:{let e,t,a,s,i=`Web Search: ${l.query}`;n[18]!==o.content?(e=es(o.content),n[18]=o.content,n[19]=e):e=n[19];let{isError:c,content:u}=e;return n[20]!==m?(t={leadingVisual:m},n[20]=m,n[21]=t):t=n[21],n[22]!==u?(a=(0,r.jsx)(en,{language:"json",markdown:u}),n[22]=u,n[23]=a):a=n[23],n[24]!==c||n[25]!==d||n[26]!==t||n[27]!==a||n[28]!==i?(s=(0,r.jsx)(et,{title:i,isError:c,isInGroup:d,toolHeaderProps:t,children:a}),n[24]=c,n[25]=d,n[26]=t,n[27]=a,n[28]=i,n[29]=s):s=n[29],s}case f.K.WRITE_BASH:{let e,t,a,s,i=`$ ${l.input}`;n[30]!==o.content?(e=es(o.content),n[30]=o.content,n[31]=e):e=n[31];let{isError:c,content:u}=e,p=void 0===u,g=`Send input to Bash session ${l.sessionId}`;n[32]!==m?(t={leadingVisual:m},n[32]=m,n[33]=t):t=n[33];let h=`${i}${u?`
${u}`:""}`;return n[34]!==p||n[35]!==h?(a=(0,r.jsx)(en,{language:"bash",markdown:h,bashLoading:p}),n[34]=p,n[35]=h,n[36]=a):a=n[36],n[37]!==c||n[38]!==d||n[39]!==p||n[40]!==g||n[41]!==t||n[42]!==a?(s=(0,r.jsx)(et,{title:g,isError:c,isPending:p,isInGroup:d,toolHeaderProps:t,children:a}),n[37]=c,n[38]=d,n[39]=p,n[40]=g,n[41]=t,n[42]=a,n[43]=s):s=n[43],s}case f.K.READ_BASH:{let e,t,a,s;n[44]!==o.content?(e=es(o.content),n[44]=o.content,n[45]=e):e=n[45];let{isError:i,content:c}=e,u=void 0===c,p=`Read logs from Bash session ${l.sessionId}`;n[46]!==m?(t={leadingVisual:m},n[46]=m,n[47]=t):t=n[47];let g=c?`
${c}`:"";return n[48]!==u||n[49]!==g?(a=(0,r.jsx)(en,{language:"bash",markdown:g,bashLoading:u}),n[48]=u,n[49]=g,n[50]=a):a=n[50],n[51]!==i||n[52]!==d||n[53]!==u||n[54]!==p||n[55]!==t||n[56]!==a?(s=(0,r.jsx)(et,{title:p,isError:i,isPending:u,isInGroup:d,toolHeaderProps:t,children:a}),n[51]=i,n[52]=d,n[53]=u,n[54]=p,n[55]=t,n[56]=a,n[57]=s):s=n[57],s}case f.K.STOP_BASH:{let e,t,a,s;n[58]!==o.content?(e=es(o.content),n[58]=o.content,n[59]=e):e=n[59];let{isError:i,content:c}=e,u=void 0===c,p=`Stop Bash session ${l.sessionId}`;n[60]!==m?(t={leadingVisual:m},n[60]=m,n[61]=t):t=n[61];let g=c||"";return n[62]!==u||n[63]!==g?(a=(0,r.jsx)(en,{language:"bash",markdown:g,bashLoading:u}),n[62]=u,n[63]=g,n[64]=a):a=n[64],n[65]!==i||n[66]!==d||n[67]!==u||n[68]!==p||n[69]!==t||n[70]!==a?(s=(0,r.jsx)(et,{title:p,isError:i,isPending:u,isInGroup:d,toolHeaderProps:t,children:a}),n[65]=i,n[66]=d,n[67]=u,n[68]=p,n[69]=t,n[70]=a,n[71]=s):s=n[71],s}case f.K.THINK:{let e,t,a,s;n[72]!==l.thought?(e=es(l.thought),n[72]=l.thought,n[73]=e):e=n[73];let{isError:i,content:o}=e;return n[74]!==m?(t={leadingVisual:m},n[74]=m,n[75]=t):t=n[75],n[76]!==o?(a=(0,r.jsx)(en,{language:"markdown",markdown:o}),n[76]=o,n[77]=a):a=n[77],n[78]!==i||n[79]!==d||n[80]!==t||n[81]!==a?(s=(0,r.jsx)(et,{title:"Thought",isError:i,isInGroup:d,toolHeaderProps:t,children:a}),n[78]=i,n[79]=d,n[80]=t,n[81]=a,n[82]=s):s=n[82],s}case f.K.SKILL:{let e,t,a,i,c;n[83]!==o.content?(e=es(o.content),n[83]=o.content,n[84]=e):e=n[84];let{isError:u,content:m}=e,p=d?l.skill:`Activate ${l.skill} skill`,g=void 0===m;return n[85]!==s?(t=(0,h.S)(s),n[85]=s,n[86]=t):t=n[86],n[87]!==t?(a={leadingVisual:t},n[87]=t,n[88]=a):a=n[88],n[89]!==m?(i=(0,r.jsx)(en,{language:"markdown",markdown:m}),n[89]=m,n[90]=i):i=n[90],n[91]!==u||n[92]!==d||n[93]!==g||n[94]!==a||n[95]!==i||n[96]!==p?(c=(0,r.jsx)(et,{title:p,isError:u,isPending:g,isInGroup:d,toolHeaderProps:a,children:i}),n[91]=u,n[92]=d,n[93]=g,n[94]=a,n[95]=i,n[96]=p,n[97]=c):c=n[97],c}case f.K.RUN_CUSTOM_SETUP_STEP:{let e,t,a,s,i;n[98]!==o.content?(e=es(o.content),n[98]=o.content,n[99]=e):e=n[99];let{isError:c,content:u}=e;n[100]!==d||n[101]!==l.name?(t=d?l.name?.trim()||"custom setup step":l.name?.trim()?`Run "${l.name.trim()}" custom setup step`:"Run custom setup step",n[100]=d,n[101]=l.name,n[102]=t):t=n[102];let p=t,g=void 0===u;return n[103]!==m?(a={leadingVisual:m},n[103]=m,n[104]=a):a=n[104],n[105]!==g||n[106]!==u?(s=(0,r.jsx)(en,{language:"console",markdown:u,bashLoading:g}),n[105]=g,n[106]=u,n[107]=s):s=n[107],n[108]!==c||n[109]!==d||n[110]!==g||n[111]!==a||n[112]!==s||n[113]!==p?(i=(0,r.jsx)(et,{title:p,isError:c,isPending:g,isInGroup:d,toolHeaderProps:a,children:s}),n[108]=c,n[109]=d,n[110]=g,n[111]=a,n[112]=s,n[113]=p,n[114]=i):i=n[114],i}case f.K.RUN_SETUP:{let e,t,a,s,i;n[115]!==o.content?(e=es(o.content),n[115]=o.content,n[116]=e):e=n[116];let{isError:c,content:u}=e;n[117]!==l.name?(t=l.name.trim(),n[117]=l.name,n[118]=t):t=n[118];let p=t,g=void 0===u;return n[119]!==m?(a={leadingVisual:m},n[119]=m,n[120]=a):a=n[120],n[121]!==g||n[122]!==u?(s=(0,r.jsx)(en,{language:"console",markdown:u,bashLoading:g}),n[121]=g,n[122]=u,n[123]=s):s=n[123],n[124]!==c||n[125]!==d||n[126]!==g||n[127]!==a||n[128]!==s||n[129]!==p?(i=(0,r.jsx)(et,{title:p,isError:c,isPending:g,isInGroup:d,toolHeaderProps:a,children:s}),n[124]=c,n[125]=d,n[126]=g,n[127]=a,n[128]=s,n[129]=p,n[130]=i):i=n[130],i}case f.K.STR_REPLACE_EDITOR:case f.K.CREATE:case f.K.STR_REPLACE:case f.K.EDIT:case f.K.VIEW:{let e,t,a=s===f.K.EDIT?"str_replace":l.command||s;n[131]!==l.path?(e=l.path?.split(".").pop()||"",n[131]=l.path,n[132]=e):e=n[132];let i=e,c="md"===i?"markdown":i||"text";if(n[133]!==a||n[134]!==o.content||n[135]!==d||n[136]!==u||n[137]!==c||n[138]!==l.insert_line||n[139]!==l.path||n[140]!==l.view_range||n[141]!==m){t=Symbol.for("react.early_return_sentinel");t:{let{isError:e,content:s}=es(o.content);switch(a){case"create":case"insert":case"view":case"undo_edit":{let i,o,u=function(e){if(e)try{let t=e.split(`
`),n=-1;for(let e=0;e<t.length;e++)if(t[e]?.startsWith("@@")){n=e+1;break}return t.slice(n).map(e=>{if(!(e.startsWith("+")||e.startsWith("-")))return e.startsWith(" ")?e.substring(1):e;{let t=e.substring(1);return t.startsWith(" ")?t.substring(1):t}}).filter(e=>null!==e).join(`
`).trim()}catch{return e}}(s),p=(0,w.i)(l.path),g=p+eo(a,l.view_range,l.insert_line);n[143]!==a||n[144]!==d||n[145]!==l.path?(i=ei({command:a,path:l.path,isInGroup:d}),n[143]=a,n[144]=d,n[145]=l.path,n[146]=i):i=n[146],n[147]!==m?(o={leadingVisual:m},n[147]=m,n[148]=o):o=n[148],t=(0,r.jsx)(et,{title:i,isError:e,path:p?g:void 0,isInGroup:d,toolHeaderProps:o,children:(0,r.jsx)(en,{language:c,markdown:u})});break t}case"str_replace":{let i,o,c,p,g,h=s?.trim();if(h&&u){let s=T(h);if(s.length>0){let i,o,c,u,p;n[149]!==a||n[150]!==d||n[151]!==l.path?(i=ei({command:a,path:l.path,isInGroup:d}),n[149]=a,n[150]=d,n[151]=l.path,n[152]=i):i=n[152],n[153]!==l.path?(o=(0,w.i)(l.path),n[153]=l.path,n[154]=o):o=n[154],n[155]!==m?(c={leadingVisual:m},n[155]=m,n[156]=c):c=n[156],n[157]!==s?(u=(0,r.jsx)(I.i,{diffLines:s,tabSize:4,className:x}),n[157]=s,n[158]=u):u=n[158],n[159]!==e||n[160]!==d||n[161]!==i||n[162]!==o||n[163]!==c||n[164]!==u?(p=(0,r.jsx)(et,{title:i,isError:e,path:o,isInGroup:d,toolHeaderProps:c,children:u}),n[159]=e,n[160]=d,n[161]=i,n[162]=o,n[163]=c,n[164]=u,n[165]=p):p=n[165],t=p;break t}}n[166]!==a||n[167]!==d||n[168]!==l.path?(i=ei({command:a,path:l.path,isInGroup:d}),n[166]=a,n[167]=d,n[168]=l.path,n[169]=i):i=n[169],n[170]!==l.path?(o=(0,w.i)(l.path),n[170]=l.path,n[171]=o):o=n[171],n[172]!==m?(c={leadingVisual:m},n[172]=m,n[173]=c):c=n[173],n[174]!==h?(p=(0,r.jsx)(en,{language:"diff",markdown:h}),n[174]=h,n[175]=p):p=n[175],n[176]!==e||n[177]!==d||n[178]!==i||n[179]!==o||n[180]!==c||n[181]!==p?(g=(0,r.jsx)(et,{title:i,isError:e,path:o,isInGroup:d,toolHeaderProps:c,children:p}),n[176]=e,n[177]=d,n[178]=i,n[179]=o,n[180]=c,n[181]=p,n[182]=g):g=n[182],t=g;break t}}}n[133]=a,n[134]=o.content,n[135]=d,n[136]=u,n[137]=c,n[138]=l.insert_line,n[139]=l.path,n[140]=l.view_range,n[141]=m,n[142]=t}else t=n[142];if(t!==Symbol.for("react.early_return_sentinel"))return t;break}case f.K.REPORT_PROGRESS:{let e;n[183]!==o.content?(e=es(o.content),n[183]=o.content,n[184]=e):e=n[184];let{isError:t,content:a}=e;if("prDescription"in l){let e,s,i,o,c,u;n[185]!==l.prDescription?(e=es(l.prDescription),n[185]=l.prDescription,n[186]=e):e=n[186];let{isError:p,content:g}=e;n[187]!==l.commitMessage?(s=l.commitMessage.split(`
`)[0]||l.commitMessage,n[187]=l.commitMessage,n[188]=s):s=n[188];let h=s,f=`Progress update: ${h}`,_=p||t;return n[189]!==m?(i={leadingVisual:m},n[189]=m,n[190]=i):i=n[190],n[191]!==g?(o=(0,r.jsx)(en,{language:"markdown",markdown:g}),n[191]=g,n[192]=o):o=n[192],n[193]!==a?(c=(0,r.jsx)(er,{type:"output",language:"json",markdown:a}),n[193]=a,n[194]=c):c=n[194],n[195]!==d||n[196]!==f||n[197]!==_||n[198]!==i||n[199]!==o||n[200]!==c?(u=(0,r.jsxs)(et,{title:f,isError:_,isInGroup:d,toolHeaderProps:i,children:[o,c]}),n[195]=d,n[196]=f,n[197]=_,n[198]=i,n[199]=o,n[200]=c,n[201]=u):u=n[201],u}{let e,a,s,i=`Start next task: ${l.nextTask}`;return n[202]!==m?(e={leadingVisual:m},n[202]=m,n[203]=e):e=n[203],n[204]!==l.tasksChecklist?(a=(0,r.jsx)(en,{language:"markdown",markdown:l.tasksChecklist}),n[204]=l.tasksChecklist,n[205]=a):a=n[205],n[206]!==d||n[207]!==t||n[208]!==i||n[209]!==e||n[210]!==a?(s=(0,r.jsx)(et,{title:i,isError:t,isInGroup:d,toolHeaderProps:e,children:a}),n[206]=d,n[207]=t,n[208]=i,n[209]=e,n[210]=a,n[211]=s):s=n[211],s}}case f.K.COMMIT_CHANGES:{let e,t,a,s,i;n[212]!==o.content?(e=es(o.content),n[212]=o.content,n[213]=e):e=n[213];let{isError:c,content:u}=e;n[214]!==l.commitMessage?(t=l.commitMessage.split(`
`)[0]||l.commitMessage,n[214]=l.commitMessage,n[215]=t):t=n[215];let p=t,g=`Commit changes: ${p}`;return n[216]!==m?(a={leadingVisual:m},n[216]=m,n[217]=a):a=n[217],n[218]!==u?(s=(0,r.jsx)(er,{type:"output",language:"json",markdown:u}),n[218]=u,n[219]=s):s=n[219],n[220]!==d||n[221]!==c||n[222]!==g||n[223]!==a||n[224]!==s?(i=(0,r.jsx)(et,{title:g,isError:c,isInGroup:d,toolHeaderProps:a,children:s}),n[220]=d,n[221]=c,n[222]=g,n[223]=a,n[224]=s,n[225]=i):i=n[225],i}case f.K.REPLY_TO_COMMENT:{let e,t,a,s;n[226]!==l.reply?(e=es(l.reply),n[226]=l.reply,n[227]=e):e=n[227];let{isError:i,content:o}=e;return n[228]!==m?(t={leadingVisual:m},n[228]=m,n[229]=t):t=n[229],n[230]!==o?(a=(0,r.jsx)(en,{language:"markdown",markdown:o}),n[230]=o,n[231]=a):a=n[231],n[232]!==i||n[233]!==d||n[234]!==t||n[235]!==a?(s=(0,r.jsx)(et,{title:"Reply to comment",isError:i,isInGroup:d,toolHeaderProps:t,children:a}),n[232]=i,n[233]=d,n[234]=t,n[235]=a,n[236]=s):s=n[236],s}case f.K.ASYNC_BASH:{let e,t,a,s,i=`$ ${l.command}`;n[237]!==o.content?(e=es(o.content),n[237]=o.content,n[238]=e):e=n[238];let{isError:c,content:u}=e,p=void 0===u,g=`Start or send input to long-running Bash session ${l.sessionId}`;n[239]!==m?(t={leadingVisual:m},n[239]=m,n[240]=t):t=n[240];let h=`${i}${u?`
${u}`:""}`;return n[241]!==p||n[242]!==h?(a=(0,r.jsx)(en,{language:"bash",markdown:h,bashLoading:p}),n[241]=p,n[242]=h,n[243]=a):a=n[243],n[244]!==c||n[245]!==d||n[246]!==p||n[247]!==g||n[248]!==t||n[249]!==a?(s=(0,r.jsx)(et,{title:g,isError:c,isPending:p,isInGroup:d,toolHeaderProps:t,children:a}),n[244]=c,n[245]=d,n[246]=p,n[247]=g,n[248]=t,n[249]=a,n[250]=s):s=n[250],s}case f.K.READ_ASYNC_BASH:{let e,t,a,s;n[251]!==o.content?(e=es(o.content),n[251]=o.content,n[252]=e):e=n[252];let{isError:i,content:c}=e,u=void 0===c,p=`View logs from long-running Bash session ${l.sessionId}`;n[253]!==m?(t={leadingVisual:m},n[253]=m,n[254]=t):t=n[254];let g=c||"";return n[255]!==u||n[256]!==g?(a=(0,r.jsx)(en,{language:"bash",markdown:g,bashLoading:u}),n[255]=u,n[256]=g,n[257]=a):a=n[257],n[258]!==i||n[259]!==d||n[260]!==u||n[261]!==p||n[262]!==t||n[263]!==a?(s=(0,r.jsx)(et,{title:p,isError:i,isPending:u,isInGroup:d,toolHeaderProps:t,children:a}),n[258]=i,n[259]=d,n[260]=u,n[261]=p,n[262]=t,n[263]=a,n[264]=s):s=n[264],s}case f.K.STOP_ASYNC_BASH:{let e,t,a,s;n[265]!==o.content?(e=es(o.content),n[265]=o.content,n[266]=e):e=n[266];let{isError:i,content:c}=e,u=void 0===c,p=`Stop long-running Bash session ${l.sessionId}`;n[267]!==m?(t={leadingVisual:m},n[267]=m,n[268]=t):t=n[268];let g=c||"";return n[269]!==u||n[270]!==g?(a=(0,r.jsx)(en,{language:"bash",markdown:g,bashLoading:u}),n[269]=u,n[270]=g,n[271]=a):a=n[271],n[272]!==i||n[273]!==d||n[274]!==u||n[275]!==p||n[276]!==t||n[277]!==a?(s=(0,r.jsx)(et,{title:p,isError:i,isPending:u,isInGroup:d,toolHeaderProps:t,children:a}),n[272]=i,n[273]=d,n[274]=u,n[275]=p,n[276]=t,n[277]=a,n[278]=s):s=n[278],s}case f.K.RG:case f.K.GREP:{let e,t,a,i,c,u;n[279]!==l?(e=l??{},n[279]=l,n[280]=e):e=n[280];let m=e;n[281]!==o.content?(t=es(o.content),n[281]=o.content,n[282]=t):t=n[282];let{isError:p,content:g}=t,f=void 0===g,_=d?"":"Search",y=m.pattern;return n[283]!==s?(a=(0,h.S)(s),n[283]=s,n[284]=a):a=n[284],n[285]!==a?(i={leadingVisual:a},n[285]=a,n[286]=i):i=n[286],n[287]!==g?(c=(0,r.jsx)(el,{output:g}),n[287]=g,n[288]=c):c=n[288],n[289]!==p||n[290]!==d||n[291]!==f||n[292]!==y||n[293]!==i||n[294]!==c||n[295]!==_?(u=(0,r.jsx)(et,{title:_,isError:p,isPending:f,path:y,isInGroup:d,toolHeaderProps:i,children:c}),n[289]=p,n[290]=d,n[291]=f,n[292]=y,n[293]=i,n[294]=c,n[295]=_,n[296]=u):u=n[296],u}case f.K.GLOB:{let e,t,a,s,i;n[297]!==l?(e=l??{},n[297]=l,n[298]=e):e=n[298];let c=e;n[299]!==o.content?(t=es(o.content),n[299]=o.content,n[300]=t):t=n[300];let{isError:u,content:p}=t,g=void 0===p,h=d?"":"Find files",f=c.pattern;return n[301]!==m?(a={leadingVisual:m},n[301]=m,n[302]=a):a=n[302],n[303]!==p?(s=(0,r.jsx)(eg,{output:p}),n[303]=p,n[304]=s):s=n[304],n[305]!==u||n[306]!==d||n[307]!==g||n[308]!==f||n[309]!==a||n[310]!==s||n[311]!==h?(i=(0,r.jsx)(et,{title:h,isError:u,isPending:g,path:f,isInGroup:d,toolHeaderProps:a,children:s}),n[305]=u,n[306]=d,n[307]=g,n[308]=f,n[309]=a,n[310]=s,n[311]=h,n[312]=i):i=n[312],i}case f.K.APPLY_PATCH:{let e,t;n[313]!==o.content?(e=es(o.content),n[313]=o.content,n[314]=e):e=n[314];let{isError:a,content:i}=e,c=("string"==typeof l?l:l?.arguments??l?.content??l?.patch)??"";if(n[315]!==a||n[316]!==d||n[317]!==u||n[318]!==s||n[319]!==i||n[320]!==c){let e,o,l,m,p=function(e){let t=e.split(/\r?\n/),n=[],r=!1,a=null,s=()=>{a&&(n.push(a),a=null)};for(let e of t){if(e.startsWith("*** Begin Patch")){r=!0;continue}if(r){if(e.startsWith("*** End Patch")){s();break}if(e.startsWith("*** Add File: ")){s(),a={type:"add",path:e.replace("*** Add File: ","").trim(),lines:[]};continue}if(e.startsWith("*** Delete File: ")){s(),a={type:"delete",path:e.replace("*** Delete File: ","").trim()};continue}if(e.startsWith("*** Update File: ")){s(),a={type:"update",path:e.replace("*** Update File: ","").trim(),lines:[]};continue}if(e.startsWith("*** Move to: ")&&a&&"update"===a.type){a.newPath=e.replace("*** Move to: ","").trim();continue}a&&"lines"in a&&a.lines.push(e)}}return n}(c);n[322]!==u||n[323]!==i?(e=e=>{let t=(0,w.i)(e.path)??"unknown file";switch(e.type){case"add":{let n=[`diff --git a/${t} b/${t}`,"new file mode 100644","--- /dev/null",`+++ b/${t}`,"@@ @@",...e.lines.map(X).join(`
`).split(`
`).map(J)].join(`
`);if(u){let e=T(n).map(z);if(e.length>0)return(0,r.jsx)(I.i,{diffLines:e,tabSize:4,className:x})}return(0,r.jsx)(en,{language:"diff",markdown:n})}case"delete":return(0,r.jsx)(en,{language:"text",markdown:"File deleted"});case"update":{let t=function(e){if(!e.lines||0===e.lines.length)return"";let t=e.path,n=e.newPath||t,r=[];for(let a of(r.push(`diff --git a/${t} b/${n}`),r.push(`--- a/${t}`),r.push(`+++ b/${n}`),r.push("@@ @@"),e.lines))a.startsWith("@@")||(a.startsWith("+")||a.startsWith("-")||a.startsWith(" ")?r.push(a):r.push(` ${a}`));return r.join(`
`)}(e);if(t&&u){let e=T(t).map(Q);if(e.length>0)return(0,r.jsx)(I.i,{diffLines:e,tabSize:4,className:x})}return(0,r.jsx)(en,{language:"diff",markdown:t||i})}default:return(0,r.jsx)(en,{language:"text",markdown:i})}},n[322]=u,n[323]=i,n[324]=e):e=n[324];let g=e,f=Y,y=V,b="Edit File(s)";if(1===p.length){let e=p[0];e&&(b=f(e)??"Edit File(s)",o=y(e))}let v=b,j=o;n[325]!==s?(l=(0,h.S)(s),n[325]=s,n[326]=l):l=n[326],n[327]!==l?(m={leadingVisual:l},n[327]=l,n[328]=m):m=n[328],t=(0,r.jsx)(et,{title:v,isError:a,path:j,isInGroup:d,toolHeaderProps:m,children:(()=>{if(0===p.length)return(0,r.jsx)(en,{language:"text",markdown:c||i});if(1===p.length){let e=p[0];if(!e)return(0,r.jsx)(en,{language:"text",markdown:c||i});let t="update"===e.type&&e.newPath;return(0,r.jsxs)("div",{className:"border-top px-3 py-2",children:[t&&(0,r.jsxs)("span",{className:"d-block fgColor-muted mb-2",style:{fontSize:"12px"},children:["Renamed from ",(0,w.i)(e.path)]}),g(e)]})}return p.map(e=>(0,r.jsxs)("div",{className:"border-top px-3 py-2",children:[(0,r.jsxs)(_.A,{as:"div",weight:"semibold",className:"mb-2",children:[f(e)," ",(0,r.jsx)("span",{className:"fgColor-muted",children:y(e)}),"update"===e.type&&e.newPath&&(0,r.jsxs)("span",{className:"fgColor-muted",style:{fontSize:"12px"},children:[" ","(from ",(0,w.i)(e.path),")"]})]}),g(e)]},`${e.type}-${e.path}-${e.newPath??""}`))})()}),n[315]=a,n[316]=d,n[317]=u,n[318]=s,n[319]=i,n[320]=c,n[321]=t}else t=n[321];return t}case f.K.CODE_REVIEW:{var p;let e,t,a,s;n[329]!==o.content?(e=es(o.content),n[329]=o.content,n[330]=e):e=n[330];let{isError:i,content:c}=e,u=void 0===c;if("prTitle"in(p=l)&&"prDescription"in p){let{prTitle:e,prDescription:n}=l;t=`#### ${e}

${n}`}else t="No code review details provided.";return c&&(t+=`

---

${c}`),n[331]!==t?(a=(0,r.jsx)(en,{language:"markdown",markdown:t}),n[331]=t,n[332]=a):a=n[332],n[333]!==i||n[334]!==d||n[335]!==u||n[336]!==a?(s=(0,r.jsx)(et,{title:q,isError:i,isPending:u,isInGroup:d,children:a}),n[333]=i,n[334]=d,n[335]=u,n[336]=a,n[337]=s):s=n[337],s}case f.K.PROPOSE_WORK:{let e,t,a,c,d;n[338]!==o.content?(e=es(o.content),n[338]=o.content,n[339]=e):e=n[339];let{isError:u}=e;return n[340]!==s?(t=(0,h.S)(s),n[340]=s,n[341]=t):t=n[341],n[342]!==u||n[343]!==t?(a=(0,r.jsx)(i.E,{leadingVisual:t,title:"Propose Work",isCollapsed:!1,isPending:!1,isError:u}),n[342]=u,n[343]=t,n[344]=a):a=n[344],n[345]!==l.workDescription||n[346]!==l.workTitle||n[347]!==l.workType?(c=(0,r.jsx)(O,{title:l.workTitle,description:l.workDescription,type:l.workType}),n[345]=l.workDescription,n[346]=l.workTitle,n[347]=l.workType,n[348]=c):c=n[348],n[349]!==a||n[350]!==c?(d=(0,r.jsxs)("div",{children:[a,c]}),n[349]=a,n[350]=c,n[351]=d):d=n[351],d}default:{let e,t,a,i,u,p,g,h;if(n[352]!==o.content){let{isError:r,content:a}=es(o.content);e=r,t=Z(a),n[352]=o.content,n[353]=e,n[354]=t}else e=n[353],t=n[354];let{language:f,output:_}=t;n[355]!==l?(a=l??{},n[355]=l,n[356]=a):a=n[356];let y=a;n[357]!==y?(i=0===Object.keys(y).length?null:JSON.stringify(y,null,2),n[357]=y,n[358]=i):i=n[358];let b=i,w=c?.[s]||s,v=U[s]||`Call to ${w}`;return n[359]!==m?(u={leadingVisual:m},n[359]=m,n[360]=u):u=n[360],n[361]!==b?(p=b&&(0,r.jsx)(er,{type:"input",language:"json",markdown:b}),n[361]=b,n[362]=p):p=n[362],n[363]!==_||n[364]!==f?(g=(0,r.jsx)(en,{language:f,markdown:_}),n[363]=_,n[364]=f,n[365]=g):g=n[365],n[366]!==e||n[367]!==d||n[368]!==u||n[369]!==p||n[370]!==g||n[371]!==v?(h=(0,r.jsxs)(et,{title:v,isError:e,isInGroup:d,toolHeaderProps:u,children:[p,g]}),n[366]=e,n[367]=d,n[368]=u,n[369]=p,n[370]=g,n[371]=v,n[372]=h):h=n[372],h}}}function V(e){if(!e)return;let t=(0,w.i)(e.path);return"update"===e.type&&e.newPath?(0,w.i)(e.newPath):t}function Y(e){if(e)switch(e.type){case"add":return"Create";case"delete":return"Delete";case"update":return"Edit";default:return`Apply patch (${e.type??"unknown"})`}}function Q(e){return{...e,left:null,right:null}}function z(e){return{...e,left:null,right:null}}function J(e){return`+${e}`}function X(e){return e.startsWith("+")?e.slice(1):e}let Z=e=>{if(void 0===e)return{language:"text",output:e};try{let t=JSON.parse(e),n=JSON.stringify(t,null,2);return{language:"json",output:n}}catch{return{language:"text",output:e}}};function ee(e){return"markdown"!==e&&"text"!==e&&""!==e}function et({title:e,isError:t=!1,isPending:n=!1,path:a,toolHeaderProps:s,children:o,isOpenOverride:c,isInGroup:d=!1}){let{variant:u}=(0,S._$)(),[m,p]=(0,l.useState)(c??!1),g=(0,l.useRef)(!1),h=(0,l.useRef)(c);(0,l.useEffect)(()=>{h.current!==c&&(h.current=c,g.current=!1,void 0!==c&&p(c))},[c]);let f=(0,l.useRef)({}),_=(0,l.useRef)(null),y=(0,l.useRef)(null);y.current=e=>{if(e.detail.excludeInstance!==f.current&&_.current){let t=e.detail.expand;_.current.open=t,p(t)}},(0,l.useEffect)(()=>{let e=e=>{y.current?.(e)};return document.addEventListener("tool-global-toggle",e),()=>{document.removeEventListener("tool-global-toggle",e)}},[]),(0,l.useEffect)(()=>{let e=_.current;if(!e)return;void 0===c&&p(e.hasAttribute("open"));let t=new MutationObserver(()=>{p(e.hasAttribute("open"))});return t.observe(e,{attributes:!0,attributeFilter:["open"]}),()=>t.disconnect()},[c]);let b=e=>{g.current=!0,_.current&&(_.current.open=e),p(e);let t=new CustomEvent("tool-global-toggle",{detail:{expand:e,excludeInstance:f.current}});document.dispatchEvent(t)},w=(0,N.G7)("mission_control_use_tool_header_icons"),x=l.Children.toArray(o).filter(Boolean).length>0;return"chat"!==u||x?(0,r.jsxs)("details",{ref:_,open:m,onToggle:e=>{g.current=!0,p(e.currentTarget.open)},className:(0,j.$)(v,{"Tool-module__detailsContainerDefault--M2g13":"default"===u}),"data-testid":"tool-log-entry",children:[(0,r.jsx)(i.E,{leadingVisual:w?s?.leadingVisual:void 0,title:e,path:a,isCollapsed:!m,isPending:n,isError:t,isInGroup:d,onModifierClick:b,hasChildren:x}),"chat"===u?o:(0,r.jsx)("div",{className:"default"===u?"border-top Tool-module__toolContent--Rlnrn":"Tool-module__toolContentMissionControl--P3Bgh",children:o})]}):(0,r.jsx)("div",{className:(0,j.$)(v,"Tool-module__detailsContainerNoChildren--Lt_9F"),"data-testid":"tool-log-entry",children:(0,r.jsx)(i.E,{leadingVisual:w?s?.leadingVisual:void 0,title:e,path:a,isCollapsed:!m,isPending:n,isError:t,onModifierClick:b,hasChildren:x})})}function en(e){let t,n=(0,a.c)(2);if(n[0]!==e){let{language:a,markdown:i,...o}=e,{markdown:l}=F(i);t=void 0===i?(0,r.jsx)(ea,{}):(0,r.jsx)(s.To,{markdown:ee(a)?D({language:a,markdown:l||""}):l||"",extensions:[g({...o})],className:(0,j.$)(!ee(a)&&"p-3")}),n[0]=e,n[1]=t}else t=n[1];return t}function er(e){let t,n=(0,a.c)(6),{type:i,language:o,markdown:l}=e;if(n[0]!==o||n[1]!==l||n[2]!==i){let e,{markdown:a}=F(l),c="input"===i?"Input":"Output";n[4]!==c?(e=(0,r.jsx)(_.A,{size:"small",weight:"medium",className:"fgColor-muted",children:c}),n[4]=c,n[5]=e):e=n[5],t=(0,r.jsxs)(y.B,{direction:"vertical",padding:"normal",gap:"condensed",children:[e,void 0===l?(0,r.jsx)(ea,{}):(0,r.jsx)(s.To,{className:(0,j.$)(!ee&&"p-3","border rounded bgColor-default overflow-hidden"),markdown:D({language:o,markdown:a||""}),extensions:[g()]})]}),n[0]=o,n[1]=l,n[2]=i,n[3]=t}else t=n[3];return t}function ea(e){let t,n=(0,a.c)(3),{lines:s,maxWidth:i}=e,o=void 0===s?3:s,l=void 0===i?"45ch":i;return n[0]!==o||n[1]!==l?(t=(0,r.jsx)("div",{className:"py-3 px-4",children:(0,r.jsx)(b.r,{lines:o,maxWidth:l})}),n[0]=o,n[1]=l,n[2]=t):t=n[2],t}function es(e){if(!e)return{isError:!1,content:e};let t=e.match(/<error>(.*?)<\/error>/s);return t&&void 0!==t[1]?{isError:!0,content:t[1]}:{isError:!1,content:e}}let ei=({command:e,path:t,isInGroup:n})=>{let r=!!(0,w.i)(t)?.length;if(n)return"";switch(e){case"create":return"Create";case"insert":return"Insert lines at";case"view":return`View${r?"":" repository"}`;case"str_replace":return"Edit";case"undo_edit":return"Undo edit";default:return e||"Unknown"}},eo=(e,t,n)=>"view"===e&&t?`:${t[0]}-${t[1]}`:"insert"===e&&void 0!==n?`:${n}`:"";function el(e){let t,n,s,i,o=(0,a.c)(18),{output:l}=e;if(!l){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ea,{}),o[0]=e):e=o[0],e}if("No matches found."===l.trim()||"No matches found"===l.trim()){let e;return o[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("span",{className:"fgColor-muted",children:"No matches found"})}),o[1]=e):e=o[1],e}if(o[2]!==l){s=Symbol.for("react.early_return_sentinel");e:{let e=l.split(`
`).filter(ep);if(e.length>0&&e.every(em)){let t,n,a,i,l=[];for(let t of e){let e=t.match(/^([^:]+):(\d+)$/);e&&l.push({file:e[1]??"",count:parseInt(e[2]??"0",10)})}o[6]===Symbol.for("react.memo_cache_sentinel")?(t={fontSize:"12px"},o[6]=t):t=o[6];let c=1===l.length?"file":"files";o[7]!==c?(n=(0,r.jsx)("span",{children:c}),o[7]=c,o[8]=n):n=o[8],o[9]!==l||o[10]!==n?(a=(0,r.jsxs)("span",{className:"fgColor-muted mb-2 d-block",style:t,children:[l.length," ",n," with matches"]}),o[9]=l,o[10]=n,o[11]=a):a=o[11];let d=(0,r.jsx)("div",{className:"border rounded bgColor-default overflow-hidden",children:l.map(eu)});o[12]!==a||o[13]!==d?(i=(0,r.jsxs)("div",{className:"p-3",children:[a,d]}),o[12]=a,o[13]=d,o[14]=i):i=o[14],s=i;break e}let a=new Map,i="";for(let t of e){if("--"===t)continue;let e=t.match(/^(\d+):(.*)$/),n=t.match(/^(\d+)-(.*)$/),r=t.match(/^([^:]+):(\d+):(.*)$/),s=t.match(/^([^-]+)-(\d+)-(.*)$/);r?(i=r[1]??"",a.has(i)||a.set(i,[]),a.get(i)?.push({lineNumber:r[2],content:r[3]??"",isContext:!1})):s?(i=s[1]??"",a.has(i)||a.set(i,[]),a.get(i)?.push({lineNumber:s[2],content:s[3]??"",isContext:!0})):e&&i?a.get(i)?.push({lineNumber:e[1],content:e[2]??"",isContext:!1}):n&&i?a.get(i)?.push({lineNumber:n[1],content:n[2]??"",isContext:!0}):(i=t,a.has(i)||a.set(i,[]))}t="p-3",n=a.size>0?Array.from(a.entries()).map(ec):(0,r.jsx)("span",{className:"fgColor-muted",children:"No matches found"})}o[2]=l,o[3]=t,o[4]=n,o[5]=s}else t=o[3],n=o[4],s=o[5];return s!==Symbol.for("react.early_return_sentinel")?s:(o[15]!==t||o[16]!==n?(i=(0,r.jsx)("div",{className:t,children:n}),o[15]=t,o[16]=n,o[17]=i):i=o[17],i)}function ec(e){let[t,n]=e;return(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)(_.A,{as:"div",weight:"semibold",className:"mb-2 fgColor-accent",children:(0,w.i)(t)}),(0,r.jsx)("div",{className:"border rounded bgColor-default overflow-hidden",children:n.map(ed)})]},t)}function ed(e,t){return(0,r.jsxs)("div",{className:(0,j.$)("px-3 py-1",e.isContext?"fgColor-muted":"",t>0&&"border-top"),style:{fontFamily:"var(--fontStack-monospace)",fontSize:"12px"},children:[e.lineNumber&&(0,r.jsxs)("span",{className:"fgColor-muted",style:{minWidth:"3em",display:"inline-block"},children:[e.lineNumber,":"]}),(0,r.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:e.content})]},t)}function eu(e,t){let{file:n,count:a}=e;return(0,r.jsxs)("div",{className:(0,j.$)("px-3 py-2 d-flex",t>0&&"border-top"),style:{fontFamily:"var(--fontStack-monospace)",fontSize:"12px"},children:[(0,r.jsx)("span",{className:"flex-1",children:(0,w.i)(n)}),(0,r.jsxs)("span",{className:"fgColor-muted ml-2",children:[a," ",(0,r.jsx)("span",{children:1===a?"match":"matches"})]})]},t)}function em(e){return null!==e.match(/^([^:]+):(\d+)$/)}function ep(e){return e.trim()}function eg(e){let t,n,s,i,o,l,c,d=(0,a.c)(18),{output:u}=e;if(!u){let e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ea,{}),d[0]=e):e=d[0],e}if(d[1]!==u){o=Symbol.for("react.early_return_sentinel");e:{let e,a,l=u.split(`
`).filter(ef);if(0===l.length){let e;d[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("span",{className:"fgColor-muted",children:"No files found"})}),d[7]=e):e=d[7],o=e;break e}s="p-3",d[8]===Symbol.for("react.memo_cache_sentinel")?(e={fontSize:"12px"},d[8]=e):e=d[8];let c=1===l.length?"file":"files";d[9]!==c?(a=(0,r.jsx)("span",{children:c}),d[9]=c,d[10]=a):a=d[10],i=(0,r.jsxs)("span",{className:"fgColor-muted mb-2 d-block",style:e,children:[l.length," ",a," found"]}),t="border rounded bgColor-default overflow-hidden",n=l.map(eh)}d[1]=u,d[2]=t,d[3]=n,d[4]=s,d[5]=i,d[6]=o}else t=d[2],n=d[3],s=d[4],i=d[5],o=d[6];return o!==Symbol.for("react.early_return_sentinel")?o:(d[11]!==t||d[12]!==n?(l=(0,r.jsx)("div",{className:t,children:n}),d[11]=t,d[12]=n,d[13]=l):l=d[13],d[14]!==s||d[15]!==i||d[16]!==l?(c=(0,r.jsxs)("div",{className:s,children:[i,l]}),d[14]=s,d[15]=i,d[16]=l,d[17]=c):c=d[17],c)}function eh(e,t){return(0,r.jsx)("div",{className:(0,j.$)("px-3 py-2",t>0&&"border-top"),style:{fontFamily:"var(--fontStack-monospace)",fontSize:"12px"},children:(0,w.i)(e)},t)}function ef(e){return e.trim()}try{K.displayName||(K.displayName="ToolRenderer")}catch{}try{et.displayName||(et.displayName="Tool")}catch{}try{en.displayName||(en.displayName="ToolPrimaryContent")}catch{}try{er.displayName||(er.displayName="ToolSecondaryContent")}catch{}try{ea.displayName||(ea.displayName="MarkdownLoading")}catch{}try{el.displayName||(el.displayName="GrepOutput")}catch{}try{eg.displayName||(eg.displayName="GlobOutput")}catch{}},56430:(e,t,n)=>{n.d(t,{U:()=>eh});var r=n(74848),a=n(21728),s=n(4817),i=n(11680),o=n(96540),l=n(67154),c=n(98747),d=n(42455),u=n(44296),m=n(51120),p=n(97665),g=n(58612),h=n(69599),f=n(46747);function _(e){return e.id.startsWith("optimistic-")}var y=n(72931);let b={[l.Yj.Completed]:"success",[l.Yj.InProgress]:"pending",[l.Yj.Idle]:"pending",[l.Yj.WaitingForUser]:"pending",[l.Yj.Queued]:"pending",[l.Yj.TimedOut]:"failure",[l.Yj.Failed]:"failure",[l.Yj.Cancelled]:"failure"};function w(){(0,y.gd)()}var v=n(55910),x=n(86101);function j(e){let t,n,s=(0,a.c)(6),{errorMessage:o,workflowRunLink:l}=e,{session:c}=(0,u.Lg)(),{data:d}=(0,x.B)(c.agent_id),m=o||"An unexpected error occurred. For more details, see the detailed logs in GitHub Actions.",p=`${d?.display_name||"Agent"} stopped work due to an error`;return s[0]!==l?(t=l&&(0,r.jsx)(i.l.PrimaryAction,{as:"a",href:l,children:"View detailed logs"}),s[0]=l,s[1]=t):t=s[1],s[2]!==m||s[3]!==p||s[4]!==t?(n=(0,r.jsx)(i.l,{"aria-label":"Session Error",title:p,description:m,variant:"critical",primaryAction:t}),s[2]=m,s[3]=p,s[4]=t,s[5]=n):n=s[5],n}try{j.displayName||(j.displayName="SessionFailedBanner")}catch{}var S=n(27566),N=n(74807),E=n(81457),C=n(45244),T=n(46251);let I=["Spinning up dev environment\u2026","Fueling the runtime engines\u2026","Clearing the airspace for MCP traffic\u2026","Cabin pressure stable. Almost ready\u2026","Reticulating goggles...","Calibrating flux capacitor...","Adjusting seatbelt\u2026","Waiting for clearance from GitHub tower\u2026","Final systems check, standing by\u2026","Takeoff soon\u2122\u2026"];function k(e){let t,n,s,i=(0,a.c)(5),{agentId:l}=e,[c,d]=(0,o.useState)(0),u=(0,o.useRef)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>(u.current?(clearInterval(u.current),u.current=null):u.current=setInterval(()=>{d(P)},7e3),()=>{u.current&&(clearInterval(u.current),u.current=null)}),n=[],i[0]=t,i[1]=n):(t=i[0],n=i[1]),(0,o.useEffect)(t,n);let m=I[c]||"Loading\u2026";return i[2]!==l||i[3]!==m?(s=(0,r.jsx)(R,{message:m,agentId:l}),i[2]=l,i[3]=m,i[4]=s):s=i[4],s}function P(e){return e<I.length-1?e+1:e}function R(e){let t,n,s,i=(0,a.c)(7),{message:o,agentId:l}=e;return i[0]!==l?(t=(0,r.jsx)(E.l,{animationType:N.L.Thinking,loopAnimation:!0,agentId:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o?(n=(0,r.jsx)(C.b,{className:"color-fg-muted",children:o}),i[2]=o,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(s=(0,r.jsxs)(T.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:[t,n]}),i[4]=t,i[5]=n,i[6]=s):s=i[6],s}try{k.displayName||(k.displayName="BootingUpMessage")}catch{}try{R.displayName||(R.displayName="LoadingMessage")}catch{}var A=n(47801),G=n.n(A),$=n(8394),L=n.n($);function H(e,t){let n,r;return t?(n=!1,r=e.choices.map(e=>"assistant"===e.delta.role&&e.delta.content&&!e.delta.assistant_content&&(e.delta.tool_calls?.length??0)>0?(n=!0,{...e,delta:{...e.delta,assistant_content:e.delta.content}}):e),n?{...e,choices:r}:e):e}function O(e,t){if(Array.isArray(e)&&Array.isArray(t)&&e[0]?.hasOwnProperty("delta")&&t[0]?.hasOwnProperty("delta")){let n=[],r=new Map;for(let a of e.concat(t)){let e=a.delta.tool_calls?.[0];if(!e||!e.id){n.push(a);continue}let t=a,s=r.get(e.id);s&&(t=G()({},s,a)),r.set(e.id,t)}return n.concat(Array.from(r.values()))}}var B=n(38621),W=n(26108),M=n(83494);function D(e){let t,n,s,i,l,c,d,u,m,p,g=(0,a.c)(24),{onSubmit:h,error:f}=e,[_,y]=(0,o.useState)(""),b=(0,o.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{y(e.target.value);let t=e.target;t.style.height="auto",t.style.height=`${Math.min(t.scrollHeight,256)}px`},g[0]=t):t=g[0];let w=t;g[1]!==h||g[2]!==_?(n=()=>{_.trim()&&(h(_),y(""),b.current&&(b.current.style.height="auto"))},g[1]=h,g[2]=_,g[3]=n):n=g[3];let v=n;g[4]!==v?(s={"copilot-chat:send-message":v},g[4]=v,g[5]=s):s=g[5],g[6]!==_?(i=(0,r.jsx)("textarea",{ref:b,className:"SteeringCommandInput-module__steeringCommandInputTextarea--jpLKJ",value:_,onChange:w,placeholder:"What would you like to change?",autoComplete:"off",autoCorrect:"off",spellCheck:"false",rows:1}),g[6]=_,g[7]=i):i=g[7],g[8]!==_?(l=_.trim(),g[8]=_,g[9]=l):l=g[9];let x=!l;return g[10]!==v||g[11]!==x?(c=(0,r.jsx)(W.K,{className:"SteeringCommandInput-module__steeringCommandInputSubmitButton--PZsnB",variant:"invisible",size:"small",icon:B.PaperAirplaneIcon,"aria-label":"Send",disabled:x,onClick:v}),g[10]=v,g[11]=x,g[12]=c):c=g[12],g[13]!==i||g[14]!==c?(d=(0,r.jsxs)("div",{className:"SteeringCommandInput-module__steeringCommandInputWrapper--iM8oN",children:[i,c]}),g[13]=i,g[14]=c,g[15]=d):d=g[15],g[16]!==f?(u=f&&(0,r.jsxs)("div",{className:"SteeringCommandInput-module__errorMessage--N97CH",children:[(0,r.jsx)(B.AlertIcon,{className:"SteeringCommandInput-module__errorIcon--a2BvJ"}),(0,r.jsx)("span",{children:f})]}),g[16]=f,g[17]=u):u=g[17],g[18]!==d||g[19]!==u?(m=(0,r.jsxs)("div",{className:"SteeringCommandInput-module__steeringCommandInputContainer--Mez66",children:[d,u]}),g[18]=d,g[19]=u,g[20]=m):m=g[20],g[21]!==m||g[22]!==s?(p=(0,r.jsx)(M.tL,{commands:s,children:m}),g[21]=m,g[22]=s,g[23]=p):p=g[23],p}try{D.displayName||(D.displayName="SteeringCommandInput")}catch{}function F(e){let t,n=(0,a.c)(3),{onSubmit:s,error:i}=e;return n[0]!==i||n[1]!==s?(t=(0,r.jsx)("div",{className:"StickySteeringCommand-module__stickyContainer--HSHC7",children:(0,r.jsx)(D,{onSubmit:s,error:i})}),n[0]=i,n[1]=s,n[2]=t):t=n[2],t}try{F.displayName||(F.displayName="StickySteeringCommand")}catch{}let q="UserCommand-module__containerMuted--d2LWH";var U=n(77430),K=n(55127),V=n.n(K);function Y({sessionIsActive:e,commandState:t,inLogs:n}){if(n)return"in_logs";let r=["queued","in_progress","completed"];if(!e&&r.includes(t))return"dismissed";if(r.includes(t))return"queued";if(["failed","dismissed"].includes(t))return t;throw Error(`Unexpected command state: ${t}`)}function Q(e){let{rawCommands:t,commandData:n}=e,a=[],{session:s}=(0,u.Lg)(),i=(0,l.v5)(s);for(let e of t){let t,r=function(e,t){let n=e.find(e=>`command-${e.external_id}`===t.source);return n&&"string"==typeof t.content?n:null}(n,e);r&&(t={state:Y({sessionIsActive:i,commandState:r.state,inLogs:!0}),content:r.content},a.push(t))}return(0,r.jsx)(J,{commands:a})}function z(e){let{commands:t}=e,n=[],{session:a}=(0,u.Lg)(),s=(0,l.v5)(a);for(let e of t){let t={state:Y({sessionIsActive:s,commandState:e.state,inLogs:!1}),content:e.content};n.push(t)}return(0,r.jsx)(J,{commands:n})}function J(e){let t,n=(0,a.c)(2),{commands:s}=e;if(n[0]!==s){let e=[];for(let t of s){let n=e[e.length-1];n?.state===t.state?n.commands.push(t.content):e.push({state:t.state,commands:[t.content]})}t=(0,r.jsx)(r.Fragment,{children:e.map(X)}),n[0]=s,n[1]=t}else t=n[1];return t}function X(e,t){return(0,r.jsx)(Z,{contents:e.commands,state:e.state},t)}function Z(e){let t,n,s,i,o=(0,a.c)(11),{contents:l,state:c}=e;o[0]!==l.length||o[1]!==c?(t=function({state:e,count:t}){return({queued:{actionText:"Queued for Copilot",containerStateClass:q},failed:{actionText:`Unable to submit ${V()("message",t)}`,containerStateClass:q},in_logs:{},dismissed:{actionText:`Copilot finished the session before it could pick up ${V()("this",t)} ${V()("message",t)}`,containerStateClass:q}})[e]}({state:c,count:l.length}),o[0]=l.length,o[1]=c,o[2]=t):t=o[2];let d=t,u=d.actionText,m=d.containerStateClass,p=`mb-2 UserCommand-module__commandContainer--CDd84 ${m??""}`;return o[3]!==u?(n=u&&(0,r.jsx)("div",{className:"mb-2 UserCommand-module__actionText--i05T_",children:u}),o[3]=u,o[4]=n):n=o[4],o[5]!==l?(s=l.map(ee),o[5]=l,o[6]=s):s=o[6],o[7]!==p||o[8]!==n||o[9]!==s?(i=(0,r.jsx)(T.B,{children:(0,r.jsxs)("div",{className:p,children:[n,s]})}),o[7]=p,o[8]=n,o[9]=s,o[10]=i):i=o[10],i}function ee(e,t){return(0,r.jsx)(et,{content:e},t)}function et(e){let t,n,s,i=(0,a.c)(8),{content:o}=e,{sessionOwner:l}=(0,u.Lg)(),c=l?.login??"user";return i[0]!==o?(t=(0,r.jsx)("span",{className:"p-2 UserCommand-module__commandBox--VV0Is",children:o}),i[0]=o,i[1]=t):t=i[1],i[2]!==c||i[3]!==l?(n=l?.primaryAvatarUrl&&(0,r.jsx)(U.r,{src:l.primaryAvatarUrl,alt:`${c}'s avatar`,size:28,className:"ml-1"}),i[2]=c,i[3]=l,i[4]=n):n=i[4],i[5]!==t||i[6]!==n?(s=(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsxs)(T.B,{align:"center",direction:"horizontal",gap:"condensed",children:[t,n]})}),i[5]=t,i[6]=n,i[7]=s):s=i[7],s}try{Q.displayName||(Q.displayName="LogCommands")}catch{}try{z.displayName||(z.displayName="ChatCommands")}catch{}try{J.displayName||(J.displayName="ProcessedUserCommands")}catch{}try{Z.displayName||(Z.displayName="UserCommandGroup")}catch{}try{et.displayName||(et.displayName="UserCommand")}catch{}var en=n(35898),er=n(16425),ea=n(91747);let es="SessionLogs-module__markdownWrapper--sELfE";var ei=n(9238);function eo(e){let t,n,s,i,o=(0,a.c)(11),{group:l,groupHeaderFn:c,children:d}=e;o[0]!==l||o[1]!==c?(t=c(l),o[0]=l,o[1]=c,o[2]=t):t=o[2];let u=t;return o[3]!==u.leadingVisual||o[4]!==u.title?(n=(0,r.jsx)("div",{className:"ToolGroupRenderer-module__toolGroupHeader--LRTna",children:(0,r.jsx)(ei.E,{title:u.title,leadingVisual:u.leadingVisual,isError:!1,isPending:!1})}),o[3]=u.leadingVisual,o[4]=u.title,o[5]=n):n=o[5],o[6]!==d?(s=(0,r.jsx)("div",{className:"ToolGroupRenderer-module__toolGroupContent--QUddo",children:d}),o[6]=d,o[7]=s):s=o[7],o[8]!==n||o[9]!==s?(i=(0,r.jsxs)("div",{className:"ToolGroupRenderer-module__toolGroupContainer--imVo8",children:[n,s]}),o[8]=n,o[9]=s,o[10]=i):i=o[10],i}try{eo.displayName||(eo.displayName="ToolGroupRenderer")}catch{}function el(e){let t,n=(0,a.c)(5),{entries:s,groupingFn:i,groupHeaderFn:l,children:c}=e;if(n[0]!==c||n[1]!==s||n[2]!==l||n[3]!==i){let e=[],a=null;for(let t of s){let n=i(t,a);if(n.shouldGroup&&n.groupId&&a&&!a.metadata?.standalone&&a.id===n.groupId&&a)a.entries.push(t),n.groupMetadata&&(a.metadata={...a.metadata,...n.groupMetadata});else if(n.shouldGroup&&n.groupId){let r={id:n.groupId,entries:[t],metadata:n.groupMetadata};e.push(r),a=r}else{let n={id:`standalone-${t.entryId}-${t.choiceIndex}`,entries:[t],metadata:{standalone:!0}};e.push(n),a=n}}t=(0,r.jsx)(r.Fragment,{children:e.map(e=>{let t=e.metadata?.standalone===!0,n=e.entries[0],a=1===e.entries.length;return(t||a)&&n?(0,r.jsx)(o.Fragment,{children:c(n)},e.id):(0,r.jsx)(eo,{group:e,groupHeaderFn:l,children:e.entries.map(t=>c(t,{isInGroup:!0,groupId:e.id}))},e.id)})}),n[0]=c,n[1]=s,n[2]=l,n[3]=i,n[4]=t}else t=n[4];return t}try{el.displayName||(el.displayName="ToolGrouping")}catch{}var ec=n(15759);let ed=(e,t)=>{let n=function(e){let{choice:t}=e,n=t?.delta;if(!n?.tool_calls||0===n.tool_calls.length)return null;let r=n.tool_calls[0];return r?.function?.name??r?.custom?.name??null}(e);if(!n)return{shouldGroup:!1};let r="view"===n&&!function(e){let{choice:t}=e,n=t?.delta?.tool_calls?.[0];if(!n)return!1;let r=n.function?.arguments;if(!r)return!1;try{let e=JSON.parse(r);return!!(0,ec.i)(e.path||"")?.length}catch{return!1}}(e),a=t?.metadata?.toolName,s=t?.metadata?.isViewRepository??!1;return"view"===n&&"view"===a&&r!==s?{shouldGroup:!1}:a===n&&!t?.metadata?.standalone&&t?{shouldGroup:!0,groupId:t.id,groupMetadata:{toolName:n,isViewRepository:r}}:n?{shouldGroup:!0,groupId:crypto.randomUUID(),groupMetadata:{toolName:n,isViewRepository:r}}:{shouldGroup:!1}};var eu=n(17816),em=n(1587);let ep=e=>{let t=e.metadata?.toolName,n=e.entries.length;if(!t)return{title:`${n} operations`,leadingVisual:void 0};if(t in em.l){let e=em.l[t];if(e){var r,a;return r=e.getTitle(n),a=e.iconToolName,{title:r,leadingVisual:(0,eu.S)(a)}}}return{title:`${t}`,leadingVisual:(0,eu.S)(t)}},eg="assistant";function eh(e){var t;let n,s,v,N,E,C,T,I,P,A,G,$,B,W,M,D,q,U,K,V=(0,a.c)(67),{logsPollingInterval:Y,nwo:Q,batchCompletedSessions:J,currentUser:X,onLogsLoadingChange:Z}=e,{session:ee,setMcpToolNameMappings:et}=(0,u.Lg)(),es=(0,en.i)(),ei=X?.id===ee.user_id||es?.id===ee.user_id,{variant:eo}=(0,er._$)(),el=(0,ea.u)("copilot_swe_agent_progress_commands"),ec=(0,h.G7)("mission_control_use_tool_header_icons"),{data:ed}=(0,x.B)(ee.agent_id);V[0]!==Y?(n={pollingInterval:Y},V[0]=Y,V[1]=n):n=V[1];let{data:eu}=function(e){let t,n,r,s,i,o,c,y,b,w,v,x=(0,a.c)(29),{pollingInterval:j}=e,{session:S}=(0,u.Lg)(),N=S.id,E=(0,p.jE)();x[0]!==N?(t=["agent-session-commands",N],x[0]=N,x[1]=t):t=x[1];let C=t;x[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,h.G7)("copilot_agent_sessions_alive_updates"),x[2]=n):n=x[2];let T=n;x[3]!==N||x[4]!==E?(r=()=>{E.invalidateQueries({queryKey:["agent-session-commands",N]})},x[3]=N,x[4]=E,x[5]=r):r=x[5];let I=r;x[6]===Symbol.for("react.memo_cache_sentinel")?(s={maxWait:5e3},x[6]=s):s=x[6];let k=(0,f.d)(I,j,s);x[7]!==k?(i={onEvent:k,enableCreateEvents:!1,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:T},x[7]=k,x[8]=i):i=x[8],(0,g.N)(i),x[9]!==N||x[10]!==E?(o=async e=>{let{queryKey:t}=e,n=await (0,m.I)({path:`/agents/sessions/${N}/commands?sort=created_at,asc`,method:"GET"});if(!n.ok)throw Error(`Failed to fetch commands: ${n.statusText}`);let r=await n.json(),a=E.getQueryData(t);if(a){let e=a.commands.filter(_);return{commands:[...r.commands,...e]}}return r},x[9]=N,x[10]=E,x[11]=o):o=x[11],x[12]!==j||x[13]!==S.state?(c=()=>!T&&("in_progress"===S.state||"queued"===S.state)&&j,x[12]=j,x[13]=S.state,x[14]=c):c=x[14],x[15]!==S?(y=(0,l.VY)(S),x[15]=S,x[16]=y):y=x[16];let P=!y;x[17]!==C||x[18]!==o||x[19]!==c||x[20]!==P?(b={queryKey:C,queryFn:o,refetchInterval:c,enabled:P},x[17]=C,x[18]=o,x[19]=c,x[20]=P,x[21]=b):b=x[21];let R=(0,d.b)(b);return x[22]!==R.data?.commands?(w=R.data?.commands??[],x[22]=R.data?.commands,x[23]=w):w=x[23],x[24]!==R.error||x[25]!==R.isError||x[26]!==R.isLoading||x[27]!==w?(v={data:w,isLoading:R.isLoading,isError:R.isError,error:R.error},x[24]=R.error,x[25]=R.isError,x[26]=R.isLoading,x[27]=w,x[28]=v):v=x[28],v}(n),[em,ep]=(0,o.useState)(null);V[2]!==ee.id?(s=async e=>{try{ep(null);let t=await (0,m.I)({path:`/agents/sessions/${ee.id}/commands`,method:"POST",body:{content:e}});if(!t.ok){let e=`Failed to create command: ${t.statusText}`;ep(e);return}}catch{ep("Failed to submit command. Please try again.")}},V[2]=ee.id,V[3]=s):s=V[3];let eg=s;V[4]!==J||V[5]!==ei||V[6]!==Y?(v={logsPollingInterval:Y,batchCompletedSessions:J,currentUserIsSessionOwner:ei},V[4]=J,V[5]=ei,V[6]=Y,V[7]=v):v=V[7];let{data:eh,isLoading:e_,showPollingError:ey}=(0,c.jg)(v);t=ee.state,(K=(0,a.c)(3))[0]!==t?(q=()=>{let e=b[t];return(0,y.iD)(e),w},U=[t],K[0]=t,K[1]=q,K[2]=U):(q=K[1],U=K[2]),(0,o.useEffect)(q,U),V[8]===Symbol.for("react.memo_cache_sentinel")?(N=(0,h.G7)("use_new_capi_logs_sessions"),V[8]=N):N=V[8];let eb=N,ev=function(e,t={}){if(!e)return[];let n=t.preserveAssistantNarration??!1,r=new Map;for(let t of e){let e=H(t,n),a=e,s=r.get(t.id);s&&(a=L()({},s,e,O)),r.set(t.id,a)}return[...r.values()]}((eh??[]).filter(l.Qx),{preserveAssistantNarration:eb});V[9]!==eh?(E=function(e,t={}){if(!e)return[];let n=t.preserveAssistantNarration??!1,r=new Map,a=null,s=[];for(let t of e)if((0,l.Qx)(t)){let e=H(t,n),i=e,o=r.get(t.id);o&&(i=L()({},o,e,O)),r.set(t.id,i),a=null,s=[]}else if((0,l.JK)(t)){let e=null,n=[];a&&s.length>0?(e=a,n=[...s,t]):(e=t.source,n=[t]),r.set(e,n),a=e,s=n}return[...r.values()]}(eh,{preserveAssistantNarration:eb}),V[9]=eh,V[10]=E):E=V[10];let ex=E;if(V[11]!==e_||V[12]!==Z?(C=()=>{Z?.(!!e_)},T=[e_,Z],V[11]=e_,V[12]=Z,V[13]=C,V[14]=T):(C=V[13],T=V[14]),(0,o.useEffect)(C,T),V[15]!==ex||V[16]!==et?(I=()=>{let e=function(e){let t={};for(let n of e)if((0,l.Qx)(n))for(let e of n.choices)for(let n of e.delta.tool_calls??[]){let e=n?.function;if(e&&"run_setup"===e.name&&"string"==typeof e.arguments)try{let n=JSON.parse(e.arguments.replace(/\n/g,"\\n"));n.details?.type==="mcp_setup"&&"object"==typeof n.details.toolNamesToDisplayNames&&Object.assign(t,n.details.toolNamesToDisplayNames??{})}catch{}}return t}(ex);Object.keys(e).length>0&&et(t=>({...t,...e}))},P=[ex,et],V[15]=ex,V[16]=et,V[17]=I,V[18]=P):(I=V[17],P=V[18]),(0,o.useEffect)(I,P),"queued"===ee.state){let e,t,n,a;return V[19]!==ee.agent_id?(e=(0,r.jsx)(k,{agentId:ee.agent_id}),V[19]=ee.agent_id,V[20]=e):e=V[20],V[21]!==eu||V[22]!==eh?(t=eS(eu,eh),V[21]=eu,V[22]=eh,V[23]=t):t=V[23],V[24]!==t?(n=(0,r.jsx)(z,{commands:t}),V[24]=t,V[25]=n):n=V[25],V[26]!==e||V[27]!==n?(a=(0,r.jsxs)(r.Fragment,{children:[e,n]}),V[26]=e,V[27]=n,V[28]=a):a=V[28],a}V[29]!==Q||V[30]!==ee.workflow_run_id?(A=ee.workflow_run_id?(0,S.A)(Q??null,ee.workflow_run_id):void 0,V[29]=Q,V[30]=ee.workflow_run_id,V[31]=A):A=V[31];let eN=A;V[32]!==e_||V[33]!==ee.agent_id||V[34]!==ey?(G=e_&&!ey&&(0,r.jsx)(R,{message:"Loading\u2026",agentId:ee.agent_id}),V[32]=e_,V[33]=ee.agent_id,V[34]=ey,V[35]=G):G=V[35],V[36]!==eh?.length||V[37]!==e_||V[38]!==ee.state||V[39]!==ey?($=!e_&&!ey&&eh?.length===0&&"in_progress"!==ee.state&&(0,r.jsx)("div",{children:"No logs to display"}),V[36]=eh?.length,V[37]=e_,V[38]=ee.state,V[39]=ey,V[40]=$):$=V[40];let eE=!e_&&eh&&eh?.length>0&&(0,r.jsxs)(r.Fragment,{children:[el?ec?(0,r.jsx)(ew,{preprocessedLogEntries:ex,commandsData:eu}):ex?.map((e,t)=>(0,r.jsx)(ej,{logEntry:e,commandData:eu??[],isNewLogParsingEnabled:eb},`logEntry-${t}`)):ev.map(e=>(0,r.jsx)(ef,{...e,isNewLogParsingEnabled:eb},`entry-${e.id}`)),el&&(0,r.jsx)(z,{commands:eS(eu,eh)})]});return V[41]!==ey||V[42]!==eN?(B=ey&&(0,r.jsx)(i.l,{title:"Error",hideTitle:!0,description:"There was an error loading the logs. Please try again later.",variant:"critical",primaryAction:eN?(0,r.jsx)(i.l.PrimaryAction,{as:"a",href:eN,children:"View detailed logs"}):void 0}),V[41]=ey,V[42]=eN,V[43]=B):B=V[43],V[44]!==ed?.display_name||V[45]!==ei||V[46]!==eg||V[47]!==el||V[48]!==eh||V[49]!==e_||V[50]!==ee.agent_id||V[51]!==ee.state||V[52]!==ey||V[53]!==em||V[54]!==eo?(W="in_progress"===ee.state&&!e_&&!ey&&(0,r.jsxs)(r.Fragment,{children:[eh&&eh.length>0?(0,r.jsx)(R,{message:`${ed?.display_name??"Agent"} is working\u{2026}`,agentId:ee.agent_id}):(0,r.jsx)(k,{agentId:ee.agent_id}),el&&"default"===eo&&ei&&(0,r.jsx)(F,{onSubmit:eg,error:em})]}),V[44]=ed?.display_name,V[45]=ei,V[46]=eg,V[47]=el,V[48]=eh,V[49]=e_,V[50]=ee.agent_id,V[51]=ee.state,V[52]=ey,V[53]=em,V[54]=eo,V[55]=W):W=V[55],V[56]!==ee.error||V[57]!==ey||V[58]!==eN?(M=ee.error?.message&&!ey&&(0,r.jsx)(j,{errorMessage:ee.error.message,workflowRunLink:eN??null}),V[56]=ee.error,V[57]=ey,V[58]=eN,V[59]=M):M=V[59],V[60]!==G||V[61]!==$||V[62]!==eE||V[63]!==B||V[64]!==W||V[65]!==M?(D=(0,r.jsxs)(r.Fragment,{children:[G,$,eE,B,W,M]}),V[60]=G,V[61]=$,V[62]=eE,V[63]=B,V[64]=W,V[65]=M,V[66]=D):D=V[66],D}function ef(e){let t,n,s=(0,a.c)(7),{choices:i,isNewLogParsingEnabled:o}=e;if(s[0]!==i||s[1]!==o){let e;s[3]!==o?(e=(e,t)=>(0,r.jsx)(e_,{choice:e,isNewLogParsingEnabled:o},`choice-${t}`),s[3]=o,s[4]=e):e=s[4],t=i.map(e),s[0]=i,s[1]=o,s[2]=t}else t=s[2];return s[5]!==t?(n=(0,r.jsx)(r.Fragment,{children:t}),s[5]=t,s[6]=n):n=s[6],n}function e_(e){let t,n=(0,a.c)(8),{choice:s,isNewLogParsingEnabled:i,isInGroup:o}=e,{mcpToolNameMappings:l}=(0,u.Lg)();if(i){let e;return n[0]!==s||n[1]!==o||n[2]!==l?(e=function(e,t,n){let a=(e.delta.tool_calls??[])[0],s=a?.function?.name??a?.custom?.name,i=!!a&&!!a.id&&!!s,o=e.delta.role===eg?e.delta.assistant_content??(i?void 0:e.delta.content):void 0,l=e.delta.reasoning_text?(0,r.jsx)(eb,{content:e.delta.reasoning_text}):null;if(!i){let e=o?(0,r.jsx)(ey,{content:o}):null;return e||l?(0,r.jsxs)(r.Fragment,{children:[e,l]}):null}let c=!!a?.custom,d=c?a?.custom?.input:a?.function?.arguments,u={},m=!1;if(c)u="string"==typeof d?{content:d}:{};else if("string"==typeof d)try{u=JSON.parse(d.replace(/\n/g,"\\n"))}catch{m=!0}else d&&(u=d);let p=c||"run_setup"!==s||m?void 0:u,g=p?.details?.type==="mcp_setup",h=o&&!g?(0,r.jsx)(ey,{content:o}):null,f=m?(0,r.jsx)(v.NL,{title:"Error parsing tool call arguments",isError:!0,children:(0,r.jsx)(v.cD,{language:"text",markdown:"string"==typeof d?d:JSON.stringify(d??{},null,2)})}):(0,r.jsx)(v.sr,{name:s,delta:e.delta,args:u,mcpToolNameMappings:t,isInGroup:n});return(0,r.jsxs)(r.Fragment,{children:[h,l,f]})}(s,l,o),n[0]=s,n[1]=o,n[2]=l,n[3]=e):e=n[3],e}return n[4]!==s||n[5]!==o||n[6]!==l?(t=function(e,t,n){let a=(e.delta.tool_calls??[])[0];if(!a&&e.delta.content&&e.delta.role===eg)return(0,r.jsx)(ey,{content:e.delta.content});let s=!!a?.custom,i=a?.function?.name??a?.custom?.name,o=s?a?.custom?.input:a?.function?.arguments;if(!a||!a.id||!i)return null;let l={},c=!1;if(s)l="string"==typeof o?{content:o}:{};else if("string"==typeof o)try{l=JSON.parse(o.replace(/\n/g,"\\n"))}catch{c=!0}else o&&(l=o);let d=c?(0,r.jsx)(v.NL,{title:"Error parsing tool call arguments",isError:!0,children:(0,r.jsx)(v.cD,{language:"text",markdown:"string"==typeof o?o:JSON.stringify(o??{},null,2)})}):(0,r.jsx)(v.sr,{name:i,delta:e.delta,args:l,mcpToolNameMappings:t,isInGroup:n});return e.delta.reasoning_text?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eb,{content:e.delta.reasoning_text}),d]}):d}(s,l,o),n[4]=s,n[5]=o,n[6]=l,n[7]=t):t=n[7],t}function ey(e){let t,n,i=(0,a.c)(5),{content:o}=e;if(i[0]!==o){let e;i[2]===Symbol.for("react.memo_cache_sentinel")?(e=/<pr_title>.*?<\/pr_title>|<pr_description>.*?<\/pr_description>|<empty>/gs,i[2]=e):e=i[2],t=o.replace(e,""),i[0]=o,i[1]=t}else t=i[1];return o=t,i[3]!==o?(n=(0,r.jsx)("div",{className:es,children:(0,r.jsx)(s.To,{markdown:o})}),i[3]=o,i[4]=n):n=i[4],n}function eb(e){let t,n=(0,a.c)(2),{content:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:es,children:(0,r.jsx)(s.To,{markdown:i})}),n[0]=i,n[1]=t):t=n[1],t}function ew(e){let t,n,s,i,o,c,d=(0,a.c)(13),{preprocessedLogEntries:u,commandsData:m}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.G7)("use_new_capi_logs_sessions"),d[0]=t):t=d[0];let p=t;if(d[1]!==m||d[2]!==u){let e,t=u.filter(l.Qx),a=u.filter(ex);n=t.flatMap(ev),d[5]!==m?(e=(e,t)=>{let n=`logEntry-${t}`;return(0,r.jsx)(ej,{logEntry:e,commandData:m??[],isNewLogParsingEnabled:p},n)},d[5]=m,d[6]=e):e=d[6],s=a.map(e),d[1]=m,d[2]=u,d[3]=n,d[4]=s}else n=d[3],s=d[4];return d[7]===Symbol.for("react.memo_cache_sentinel")?(i=(e,t)=>(0,r.jsx)(e_,{choice:e.choice,isNewLogParsingEnabled:p,isInGroup:t?.isInGroup},`${e.entryId}-choice-${e.choiceIndex}`),d[7]=i):i=d[7],d[8]!==n?(o=(0,r.jsx)(el,{entries:n,groupingFn:ed,groupHeaderFn:ep,children:i}),d[8]=n,d[9]=o):o=d[9],d[10]!==s||d[11]!==o?(c=(0,r.jsxs)(r.Fragment,{children:[s,o]}),d[10]=s,d[11]=o,d[12]=c):c=d[12],c}function ev(e){return e.choices.map((t,n)=>({choice:t,entryId:e.id,choiceIndex:n}))}function ex(e){return!(0,l.Qx)(e)}function ej(e){let t=(0,a.c)(10),{logEntry:n,commandData:s,isNewLogParsingEnabled:i}=e;if((0,l.Pb)(n)){let e;return t[0]!==s||t[1]!==n?(e=(0,r.jsx)(Q,{rawCommands:n,commandData:s}),t[0]=s,t[1]=n,t[2]=e):e=t[2],e}if((0,l.Qx)(n)){let e,a;if(t[3]!==i||t[4]!==n.choices){let a;t[6]!==i?(a=(e,t)=>(0,r.jsx)(e_,{choice:e,isNewLogParsingEnabled:i},`choice-${t}`),t[6]=i,t[7]=a):a=t[7],e=n.choices.map(a),t[3]=i,t[4]=n.choices,t[5]=e}else e=t[5];return t[8]!==e?(a=(0,r.jsx)(r.Fragment,{children:e}),t[8]=e,t[9]=a):a=t[9],a}return null}function eS(e,t){return e?.length&&t?e.filter(e=>!t.some(t=>{var n,r;return n=e,r=t,(0,l.PG)(r)&&r.source&&r.source===`command-${n.external_id}`})):[]}try{eh.displayName||(eh.displayName="SessionLogs")}catch{}try{ef.displayName||(ef.displayName="LogEntry")}catch{}try{e_.displayName||(e_.displayName="LogEntryChoice")}catch{}try{ey.displayName||(ey.displayName="CopilotMessage")}catch{}try{eb.displayName||(eb.displayName="ReasoningText")}catch{}try{ew.displayName||(ew.displayName="GroupedSessionLogs")}catch{}try{ej.displayName||(ej.displayName="LogEntryRenderer")}catch{}},58612:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(21728),a=n(40235),s=n(97286),i=n(70263);function o(e){let t,n,o,c=(0,r.c)(6),{onEvent:d,enableCreateEvents:u,enableUpdateEvents:m,enableLogUpdates:p,enabled:g}=e,h=(0,i.A)();c[0]!==h||c[1]!==d?(t=e=>{h()&&d(e)},c[0]=h,c[1]=d,c[2]=t):t=c[2];let f=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=["agent-session-alive-channels"],c[3]=n):n=c[3];let _=g??!1;c[4]!==_?(o={queryKey:n,queryFn:l,staleTime:1/0,enabled:_},c[4]=_,c[5]=o):o=c[5];let{data:y}=(0,s.I)(o);(0,a.x)(void 0===u||u?y?.viewerCopilotAgentCreatesChannel:void 0,f),(0,a.x)(void 0===m||m?y?.viewerCopilotAgentUpdatesChannel:void 0,f),(0,a.x)(void 0!==p&&p?y?.viewerCopilotAgentLogUpdatesChannel:void 0,f)}async function l(){let e=await fetch("/copilot/agent-sessions/alive-channels",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Failed to fetch Alive channels");let t=await e.json();return{viewerCopilotAgentCreatesChannel:t.creates_channel,viewerCopilotAgentUpdatesChannel:t.updates_channel,viewerCopilotAgentLogUpdatesChannel:t.log_updates_channel}}},60284:(e,t,n)=>{n.d(t,{Q:()=>R});var r=n(74848),a=n(70346),s=n(92352),i=n(33592),o=n(51213),l=n(61180),c=n(79184),d=n(96540),u=n(38621),m=n(69599),p=n(61526),g=n(11680),h=n(94011),f=n(30459),_=n(47723);let y="MemberRequestBanner-module__requestBanner--O88Xw",b=d.memo(w);function w({repo:e,onRepoUpdate:t}){let[n,a]=(0,d.useState)(!1),[s,i]=(0,d.useState)(null),{sendClickAnalyticsEvent:o}=(0,f.S)(),l=e.owner,c=(0,d.useCallback)(e=>{o({category:"member_feature_request",action:`action.copilot_coding_agent.${e}`,label:`ref_cta:${e};ref_loc:agents_new_task_banner;`})},[o]),u=(0,d.useCallback)(async()=>{if(l&&!n){a(!0),i(null);try{await (0,h.Rp)(l),await t(),c("request")}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{a(!1)}}},[l,n,c,t]),m=(0,d.useCallback)(async()=>{if(l&&!n){a(!0),i(null);try{await (0,h.Hy)(l),await t()}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{a(!1)}}},[l,n,t]),p=(0,d.useCallback)(async()=>{if(l&&!n){a(!0),i(null);try{await (0,h.pf)(l),await t(),c("org_enable")}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{a(!1)}}},[l,n,c,t]),b="",w="",v=()=>{};if(e.userCanRequestCca)b="Copilot coding agent access is disabled by your admin.",w=n?"Requesting...":"Request access",v=u;else if(e.userCanGrantEnterpriseCca)b="Copilot coding agent access is disabled.",w="See Copilot policies",v=()=>{c("enterprise_enable");let t=e.businessSlug||l;window.location.href=(0,_.Wt)(t)};else if(e.userCanGrantOrgCca)b="Copilot coding agent access is disabled.",w=n?"Enabling...":"Enable feature",v=p;else{if(!e.userHasRequestedCca)return null;b="Copilot coding agent access is disabled by your admin.",w=n?"Removing...":"Remove request",v=m}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.l,{className:y,variant:"warning",title:"Coding Agent Disabled",hideTitle:!0,description:b,primaryAction:(0,r.jsx)(g.l.PrimaryAction,{onClick:v,disabled:n,children:w})}),s&&(0,r.jsx)("div",{"aria-live":"assertive",children:(0,r.jsx)(g.l,{variant:"critical",title:"Error",hideTitle:!0,description:s,className:y})})]})}try{b.displayName||(b.displayName="MemberRequestBanner")}catch{}try{w.displayName||(w.displayName="MemberRequestBannerUnmemoized")}catch{}var v=n(73678),x=n(72259),j=n(98866),S=n(86101),N=n(78223),E=n(25811),C=n(25641),T=n(35247),I=n(53419),k=n(64138);function P({referenceRepo:e,reference:t}){return t.range?(0,C.XN)(t.path,t.range,e):(0,C.Od)(t.path,e)}function R({handleUserSubmit:e,initialRepo:t,initialReference:n,hideRepoSelector:g,isInPortal:h,textAreaRef:f,size:_="large",className:y,eventType:w,shouldClearTextOnSubmit:R=!0,initialText:A}){let G=(0,i.b)(),{plan:$}=(0,c.xR)(),{models:L}=(0,x.h)(),[H,O]=(0,j.N)(),[B,W]=(0,l.T)(),[M,D]=(0,d.useState)(null),[F,q]=(0,d.useState)(!1),U=(0,m.G7)("swe_agent_member_requests_agent_panel"),[K,V]=(0,d.useState)(null),[Y,Q]=(0,d.useState)(""),[z,J]=(0,E.s)(),{data:X}=(0,S.B)(z.topLevelAgentId?Number(z.topLevelAgentId):null),Z=T.W.codingAgentModelSelection&&(T.W.codingAgentModelSelectionAllSkus||$===o.UH.IndividualPro||$===o.UH.IndividualProPlus)&&(0,N.CF)(z,X?.slug),[ee,et]=(0,d.useState)(n||null),[en,er]=(0,d.useState)(!0),[ea]=(0,p.ok)(),es=ea.get("branch"),ei=(0,m.G7)("copilot_swe_agent_use_subagents"),eo=t&&Object.keys(t).length>0,el=ea.get("repo"),ec="";eo?ec=`${t.ownerLogin}/${t.name}`:el?ec=el:B&&(ec=`${B.ownerLogin}/${B.name}`);let ed=(0,d.useCallback)(async t=>{(0,I.BI)("agent_sessions.task_view",{target:"NEW_TASK_SUBMIT",defaultToTask:T.W.defaultToTaskInput,defaultToTaskControl:T.W.defaultToTaskControl});let n=K&&ee?(0,C.z$)(P({referenceRepo:K,reference:ee})):void 0;if(M?.id!=null){let e=await G.service.fetchRepo(M.id);e.ok&&e.payload&&W(e.payload)}return e(t,M,Y,z,n,H??L?.find(e=>e.is_chat_default)?.id??L?.[0]?.id,en)},[e,M,Y,z,ee,K,G.service,W,L,H,en]),eu=(0,d.useCallback)(e=>{e&&(D(e),Q(e.defaultBranch||""),q(!e.enabled&&U))},[U]);return(0,d.useEffect)(()=>{t?.id!=null&&(async()=>{let e=await G.service.fetchRepo(t.id);e.payload&&V(e.payload)})()},[t,G]),(0,d.useEffect)(()=>{g&&ec&&(async()=>{try{let e=(await (0,s.P)(ec)).find(e=>e.nameWithOwner===ec);if(e&&e.enabled){D(e),Q(es??e.defaultBranch),q(!1);return}e&&U&&q(!0)}catch{}})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.V,{initialText:A,className:y,modes:[{name:o.II.Task,icon:u.AgentIcon,submitLabel:"Start task",placeholder:"Describe a coding task to work on",textAreaAriaLabel:"Coding task prompt",supportsAttachments:!1,supportsReferenceAttachments:!1,supportsModelSwitching:Z}],size:_,onSubmit:ed,initialReference:K&&ee?P({reference:ee,referenceRepo:K}):void 0,extraToolbar:(0,r.jsx)(s.s,{hideRepoSelector:g,initialRepoNWO:ec,initialBranch:es||void 0,selectedRepo:M||void 0,selectedBranch:Y,selectedAgent:z,onRepoSelect:eu,onBranchSelect:e=>Q(e||""),onAgentSelect:e=>J(e),agentSelectionEnabled:ei&&!F}),submitDisabled:!M||F,onRemoveReference:()=>{et(null)},isInPortal:h,textAreaRef:f,onNewThreadSelected:async()=>{},customModelPicker:Z?()=>(0,r.jsx)(v.Y,{selectedModelId:H,onUpdateModel:O}):void 0,storageKeySuffix:w,showStartPullRequestButton:T.W.defaultToTaskInput,shouldClearTextOnSubmit:R}),F&&M&&U&&(0,r.jsx)(b,{repo:M,onRepoUpdate:async()=>{let e=M.nameWithOwner,t=(await (0,s.P)(e)).find(t=>t.nameWithOwner===e);t&&(D(t),q(!t.enabled&&U))}}),T.W.codingAgentPullRequestToggle&&(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("span",{id:"create-pull-request-toggle-label",className:"mr-3",children:"Create a pull request"}),(0,r.jsx)(k.A,{size:"small","aria-labelledby":"create-pull-request-toggle-label",checked:en,onClick:()=>er(!en),statusLabelPosition:"end"})]})]})}try{R.displayName||(R.displayName="NewTaskChatInput")}catch{}},67154:(e,t,n)=>{function r(e){return"object"==typeof e&&null!==e&&"choices"in e&&Array.isArray(e.choices)}function a(e){return Array.isArray(e)&&e.every(e=>s(e))}function s(e){return i(e)&&"source"in e}function i(e){return"object"==typeof e&&null!==e&&"role"in e&&"user"===e.role}function o(e){return"object"==typeof e&&null!==e&&(r(e)||i(e)||"object"==typeof e&&null!==e&&"role"in e&&"tool"===e.role||"object"==typeof e)}function l(e){return!!e&&[946600,71,106,776,386,56].includes(e.agent_id)}n.d(t,{JK:()=>s,K9:()=>m,PG:()=>i,Pb:()=>a,Qx:()=>r,SS:()=>l,VY:()=>p,X:()=>o,Yj:()=>c,cv:()=>h,mk:()=>g,v5:()=>u,wG:()=>d});let c={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled",Queued:"queued"};function d(e){switch(e){case c.InProgress:return"In progress";case c.Completed:return"Ready for review";case c.Failed:return"Failed";case c.Idle:return"Idle";case c.WaitingForUser:return"Waiting for user";case c.TimedOut:return"Timed out";case c.Cancelled:return"Cancelled";case c.Queued:return"Queued";default:return"Unknown"}}function u(e){return["queued","in_progress"].includes(e.state)}function m(e){return e.state===c.Completed}function p(e){return!!e.isPending&&e.state===c.Queued}function g(e){return e.state===c.Cancelled}function h(e){return e.state===c.Failed}},81457:(e,t,n)=>{n.d(t,{l:()=>l});var r=n(74848),a=n(21728),s=n(77430),i=n(74807),o=n(86101);function l(e){let t,n=(0,a.c)(8),{size:l,animationType:c,loopAnimation:d,agentId:u}=e,m=void 0===l?32:l,p=void 0===c?"static":c,g=void 0!==d&&d,{data:h}=(0,o.B)(u??null),f=h?.avatar_url,_=h?.display_name||"Agent";if("copilot"===_.toLowerCase()||!f){let e;return n[0]!==p||n[1]!==g||n[2]!==m?(e=(0,r.jsx)(i.N,{size:m,animationType:p,loopAnimation:g}),n[0]=p,n[1]=g,n[2]=m,n[3]=e):e=n[3],e}return n[4]!==f||n[5]!==_||n[6]!==m?(t=(0,r.jsx)(s.r,{src:f,size:m,alt:_}),n[4]=f,n[5]=_,n[6]=m,n[7]=t):t=n[7],t}try{l.displayName||(l.displayName="AgentAvatar")}catch{}},88984:(e,t,n)=>{n.d(t,{Q:()=>o,w:()=>l});var r=n(74848),a=n(21728),s=n(38621),i=n(67154);function o(e){switch(e){case i.Yj.InProgress:return(0,r.jsx)(l,{});case i.Yj.Completed:return(0,r.jsx)(s.CheckCircleFillIcon,{className:"fgColor-success","aria-label":"Completed"});case i.Yj.Failed:case i.Yj.TimedOut:return(0,r.jsx)(s.XCircleFillIcon,{className:"fgColor-danger","aria-label":"Failed"});case i.Yj.Idle:return(0,r.jsx)(s.DotFillIcon,{className:"fgColor-attention","aria-label":"Idle"});case i.Yj.WaitingForUser:return(0,r.jsx)(s.QuestionIcon,{className:"fgColor-attention","aria-label":"Waiting for user"});case i.Yj.Cancelled:return(0,r.jsx)(s.SquareFillIcon,{className:"fgColor-muted","aria-label":"Cancelled"});case i.Yj.Queued:return(0,r.jsx)(s.ClockIcon,{className:"fgColor-attention","aria-label":"Queued"});default:return null}}function l(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("svg",{"aria-label":"Currently running",width:"16px",height:"16px",fill:"none",viewBox:"0 0 16 16",className:"anim-rotate",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fill:"none",stroke:"var(--color-fg-attention, #bf8700)",strokeWidth:"2",d:"M3.05 3.05a7 7 0 1 1 9.9 9.9 7 7 0 0 1-9.9-9.9Z",opacity:".5"}),(0,r.jsx)("path",{fill:"var(--color-fg-attention, #bf8700)",fillRule:"evenodd",d:"M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"var(--color-fg-attention, #bf8700)",d:"M14 8a6 6 0 0 0-6-6V0a8 8 0 0 1 8 8h-2Z"})]}),t[0]=e):e=t[0],e}try{l.displayName||(l.displayName="InProgressSpinner")}catch{}},91865:(e,t,n)=>{n.d(t,{ET:()=>o,Iw:()=>c,V4:()=>d,ms:()=>l});var r=n(96540),a=n(97286),s=n(64846),i=n(69599);let o="AGENT_SESSIONS_PR_MAP";function l(e){return Array.from(new Set(e?e.map(e=>e.resource_id):[])).sort((e,t)=>Number(e)-Number(t)).join(",")}let c=async(e,t)=>{let n=l(e);if(!n)return{};let r=await fetch(`/copilot/agent-sessions/pull-requests?pull_request_ids=${encodeURIComponent(n)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!r.ok)throw Error("Failed to fetch pull requests");let a=(await r.json()).pull_requests;return t(a),a};function d({tasks:e,sessionsPollingInterval:t=3e3,initialPullRequestsMap:n}){let d=l(e),{value:u,setValue:m}=(0,s.Q)(o),p=(0,i.G7)("copilot_agent_sessions_alive_updates"),g=(0,r.useRef)(n??{}),h=(0,a.I)({queryKey:["agent-sessions-pull-requests",d],queryFn:async()=>await c(e,m),initialData:n??u,refetchInterval:!p&&t,refetchIntervalInBackground:!1,enabled:d.length>0});h.data&&(g.current={...g.current,...h.data});let f=(0,r.useMemo)(()=>g.current,[h.data]);return{...h,data:f}}},93654:(e,t,n)=>{n.d(t,{ZL:()=>p,j:()=>h,si:()=>f,xZ:()=>g});var r=n(97665),a=n(96540),s=n(51120),i=n(10701),o=n(42455),l=n(64846),c=n(91865),d=n(58612),u=n(69599),m=n(46747);let p=["agent-tasks"],g="AGENT_SESSIONS_TASKS",h=async({queryClient:e,setCachedTasks:t})=>{let n=await (0,s.I)({path:"/agents/sessions"}),r=function(e){let t=new Map;for(let n of e){let e=t.get(n.resource_id.toString());if(e){if(e.session_count+=1,new Date(n.last_updated_at)>new Date(e.latest_session_updated_at)&&(e.latest_session_updated_at=n.last_updated_at,e.latest_session_state=n.state,e.latest_session_id=n.id,e.agentId=n.agent_id?.toString()),n.event_identifiers){let t=new Set(e.event_identifiers||[]),r=n.event_identifiers.filter(e=>!t.has(e));e.event_identifiers=[...e.event_identifiers||[],...r]}}else t.set(n.resource_id.toString(),{resource_type:n.resource_type,resource_id:n.resource_id,resource_global_id:n.resource_global_id,session_count:1,latest_session_updated_at:n.last_updated_at,latest_session_state:n.state,latest_session_id:n.id,event_identifiers:n.event_identifiers,event_type:n.event_type??void 0,agentId:n.agent_id?.toString()})}return Array.from(t.values()).sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}((await n.json()).sessions),a=(e.getQueryData(p)||[]).filter(e=>!0===e.isOptimistic),o=(0,i.v_)(r,a);return t(o),o};function f({sessionsPollingInterval:e=3e3,initialTasks:t,initialPullRequestsMap:n}={}){let{value:s,setValue:i}=(0,l.Q)(g),_=(0,r.jE)(),y=(0,u.G7)("copilot_agent_sessions_alive_updates"),b=(0,a.useCallback)(()=>{_.invalidateQueries({queryKey:p}),_.invalidateQueries({queryKey:["agent-sessions-pull-requests"]})},[_]),w=(0,m.d)(b,e||3e3,{maxWait:1e4});(0,d.N)({onEvent:w,enableCreateEvents:!1,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:y});let v=(0,o.b)({queryKey:p,queryFn:async()=>await h({queryClient:_,setCachedTasks:i}),initialData:t??s,refetchInterval:!y&&e,refetchIntervalInBackground:!1}),x=(0,a.useMemo)(()=>v.data||[],[v.data]),j=x.filter(e=>void 0!==e.resource_id),{data:S,isError:N,isLoading:E}=(0,c.V4)({tasks:j,sessionsPollingInterval:e,initialPullRequestsMap:n}),C=x.map(e=>{if(void 0===e.resource_id)return e;let t=S[e.resource_id];return t?{...e,isOptimistic:!1,pull:t}:{...e,pull:void 0}}).filter(e=>!0===e.isOptimistic||void 0!==e.pull);return{tasks:C,isLoading:v.isLoading&&!v.data||E&&!n,isError:v.isError||N}}},98747:(e,t,n)=>{n.d(t,{jg:()=>h,mT:()=>g});var r=n(42455),a=n(67154),s=n(86339),i=n(96540),o=n(44296),l=n(78314),c=n(51120),d=n(97665),u=n(58612),m=n(46747),p=n(69599);function g(e,t,n){return["agent-pr-session-logs",e,t,n]}function h({logsPollingInterval:e,batchCompletedSessions:t=!0,currentUserIsSessionOwner:n}){let{session:h,logs:f,logsAreLoading:_}=(0,o.Lg)(),y=(0,l.t)(),b=(0,d.jE)(),w=(0,p.G7)("copilot_agent_sessions_alive_updates"),[v,x]=(0,i.useState)(0),j=h.id,S=[a.Yj.Completed,a.Yj.Failed,a.Yj.Cancelled].map(e=>e.toLowerCase()).includes(h.state),N=t&&n&&S,E=(0,i.useCallback)(()=>{b.invalidateQueries({queryKey:g(j,y.ownerLogin,y.name)})},[b,j,y.ownerLogin,y.name]),C=(0,m.d)(E,e,{maxWait:5e3});(0,u.N)({onEvent:C,enableCreateEvents:!1,enableUpdateEvents:!1,enableLogUpdates:!0,enabled:w});let T=(0,r.b)({queryKey:g(j,y.ownerLogin,y.name),queryFn:async()=>{let e=await (0,c.I)({path:`/agents/sessions/${j}/logs`,streamingResponse:!0}),t=e.body?.getReader();if(!t)throw Error("No reader found in response body");let n=[];try{for await(let e of new s.X(t).stream())if((0,a.X)(e))n.push(e);else throw Error(`Invalid log entry received: ${JSON.stringify(e)}`);return x(0),n}catch(e){throw Error(`Error while streaming logs. Error: ${e}`)}},refetchInterval:!w&&h.state!==a.Yj.Completed&&e,enabled:!(0,a.VY)(h)&&!N&&v<10});(0,i.useEffect)(()=>{T.error&&x(e=>e+1)},[T.error]);let I=T.error&&v>=10;return N&&(f?.length||_)?{data:f,isLoading:_,error:!1,showPollingError:I}:{...T,showPollingError:I}}},98866:(e,t,n)=>{n.d(t,{N:()=>s});var r=n(96540),a=n(47723);function s(){let e=(0,r.useCallback)(e=>{let t=t=>{t.key===a.Pm&&e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),t=(0,r.useCallback)(()=>{try{return localStorage.getItem(a.Pm)??void 0}catch{return}},[]),n=(0,r.useCallback)(()=>void 0,[]);return[(0,r.useSyncExternalStore)(e,t,n),(0,r.useCallback)(e=>{try{void 0===e?localStorage.removeItem(a.Pm):localStorage.setItem(a.Pm,e),window.dispatchEvent(new StorageEvent("storage",{key:a.Pm,newValue:e??null,oldValue:localStorage.getItem(a.Pm)}))}catch{}},[])]}}}]);
//# sourceMappingURL=20166-df50448000f8.js.map